(this.webpackJsonpwebsiter_client=this.webpackJsonpwebsiter_client||[]).push([[0],{172:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),u=r(2),i=r.n(u),o=r(6),c=r(74),l=r(75),s=r(85),p=r(76),m=r(86),d=r(20),f=r.n(d),g=r(5),b=r(23),h=r(50),O=r.n(h),v=r(51),y=r.n(v),P=r(77),j=r(24);function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function S(e){var t=function t(r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}({},D(r,["path"]),{children:e.filter((function(e){return e.path[e.path.length-1]===r.id})).map((function(e){return t(e)}))})};return e.filter((function(e){return 0===e.path.length})).map((function(e){return t(e)}))}var E=function(e){var t=e.length;return t>2&&"$"===e.charAt(0)&&"$"===e.charAt(t-1)&&e.substr(1,t-2)},I=[],k=function(e){var t=Object(P.a)({},e);return a.a.createElement(j.b,Object.assign({},t,{title:e.item.name,mD:e.mD}),e.item.children.map((function(r,n){if(0===r.children.length){var u=r.id+"_"+n;return(r.url===e.mD.baseUrl+e.pageInStructure.url||""===r.url&&e.pageInStructure.homepage)&&I.push(u),a.a.createElement(j.a,{key:u},a.a.createElement("div",{style:{height:"100%",width:"100%"},onClick:function(){return window.location=r.url}},r.name))}return a.a.createElement(C,Object.assign({item:r},t,{key:r.id+"_"+n,pageInStructure:e.pageInStructure,mD:e.mD}))})))},C=k,_=function(e){var t;Object(n.useEffect)((function(){if(!document.getElementById("__rc__menu__popup__container__")){var e=document.createElement("div");e.setAttribute("id","__rc__menu__popup__container__"),e.setAttribute("style","z-index:100000;"),document.body.appendChild(e)}}));var r=function(e){var t=[];return e.mD.pagesStructure.forEach((function(e){e.hidden&&t.push(e.id)})),e.mD.pagesStructure.forEach((function(e){e.path.forEach((function(r){t.includes(r)&&t.push(e.id)}))})),S(function(r){console.log("menuItems"),console.log(r);var n=[],a=[];return r&&(r.forEach((function(t){"variable"===t.generatedFrom?e.parentPluginProps[t.name]&&(n=[].concat(Object(g.a)(n),Object(g.a)(e.parentPluginProps[t.name]))):n.push(t)})),console.log(n),console.log(e.mD.baseUrl),n.forEach((function(r){"all"===r.generatedFrom?e.mD.pagesStructure.forEach((function(n){t.includes(n.id)||(console.log(n.url),console.log(e.mD.baseUrl+n.url),a.push({name:n.name,properties:r.properties,id:r.id+n.id,path:[].concat(Object(g.a)(r.path),Object(g.a)(n.path.map((function(e){return r.id+e})))),url:e.mD.baseUrl+n.url}))})):r.all?e.mD.pagesStructure.forEach((function(n){n.path.includes(r.generatedFrom)&&!t.includes(n.id)&&a.push({id:r.id+n.id,name:n.name,properties:r.properties,path:[].concat(Object(g.a)(r.path),Object(g.a)(n.path.slice(n.path.indexOf(r.generatedFrom)-1).map((function(e){return r.id+e})))),url:e.mD.baseUrl+n.url})})):"link"!==r.generatedFrom?e.mD.pagesStructure.forEach((function(n){n.id!==r.generatedFrom||t.includes(n.id)||a.push({id:r.id,name:r.name,properties:r.properties,path:r.path,url:e.mD.baseUrl+n.url})})):"link"===r.generatedFrom&&a.push({id:r.id,name:r.name,path:r.path,url:r.properties&&r.properties.url||"",properties:r.properties})}))),a}(e.elementValues.menuItems))}(e);I.length=0;var u=r.map((function(t,r){if(0===t.children.length){var n=t.id+"_"+r;return(t.url===e.mD.baseUrl+e.pageInStructure.url||""===t.url&&e.pageInStructure.homepage)&&I.push(n),a.a.createElement(j.a,{key:t.id+"_"+r,className:t.properties?t.properties.itemClass:"",mD:e.mD},a.a.createElement("div",{style:{height:"100%",width:"100%"},onClick:function(){return window.location=t.url}},t.name))}return a.a.createElement(k,{item:t,key:t.id+"_"+r,pageInStructure:e.pageInStructure,mD:e.mD})}));return a.a.createElement(j.c,(t={mode:"horizontal",topMenuBlockClasses:e.elementValues.properties.topMenuBlockClasses,topMenuItemClasses:e.elementValues.properties.topMenuItemClasses,topMenuItemActiveClasses:e.elementValues.properties.topMenuItemActiveClasses,popupMenuBlockClasses:e.elementValues.properties.popupMenuBlockClasses,popupMenuItemClasses:e.elementValues.properties.popupMenuItemClasses,popupMenuItemActiveClasses:e.elementValues.properties.popupMenuItemActiveClasses},Object(o.a)(t,"mode",e.elementValues.properties.mode),Object(o.a)(t,"selectable",!1),Object(o.a)(t,"triggerSubMenuAction",e.elementValues.properties.trigger),Object(o.a)(t,"activeKeys",I),t),u)},A=r(83),M=function(e,t,r,n){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);if(n.style){var a=n.style.replace(/\$[^:;\$\s]*\$/g,(function(e){var t=E(e);return t&&r.parentPluginProps[t]||""}));e.setAttribute("style",a)}for(var u in t){var i=u.toLowerCase();switch(i){case"style":case"":break;case"href":t[i].indexOf("http://")>-1||t[i].indexOf("https://")>-1?e.setAttribute("href",t[i]):e.setAttribute("href",r.mD.baseUrl+t[i]);break;default:e.setAttribute(i,t[i])}}};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=new(r(84).AllHtmlEntities),T=function(e){var t=Object(n.useRef)(null);Object(n.useEffect)((function(){var n=t.current;if(n&&r)if("script"===o){var a=document.createElement("script");a.textContent=n.textContent,M(a,u,e,r),n.parentNode.appendChild(a),n.parentNode.removeChild(n)}else M(n,u,e,r)}));var r=e.mD.resourcesObjects[e.currentResource].values[e.element.id]||{};if(!r)return null;var u=function(e,t){var r={};for(var n in t.properties){var a=E(t.properties[n]);if(r[n]=a?e.parentPluginProps[a]:t.properties[n],r[n]&&(r[n]=JSON.parse(JSON.stringify(r[n]).replace(/\$[A-Za-z0-9]*\$/g,(function(t){var r=E(t);return r&&e.parentPluginProps[r]||""})))),"src"===n){var u=r[n]||"",i=u.split("/");if(i.length>1&&"websiter"===i[0]){i.shift();var o=void 0,c=void 0;if(i.length>1){var l=i[i.length-1],s=l.indexOf("w"),p=l.indexOf("h");s>-1&&p>-1?s<p?(o=l.substr(s+1,p-1),c=l.substr(p+1)):(c=l.substr(p+1,s-1),o=l.substr(s+1)):(s>-1&&(o=l.substr(s+1)),p>-1&&(c=l.substr(p+1)))}o=isNaN(o)?null:parseInt(o),c=isNaN(c)?null:parseInt(c),(o||c)&&i.pop();var m=JSON.stringify({bucket:"websiter",key:i.join("/"),edits:{resize:{width:o||"",height:c||null,fit:"cover",background:{r:0,g:0,b:0,alpha:0}},toFormat:"png"}});u="".concat("https://d397lp77nj14b9.cloudfront.net/","/").concat(btoa(m)),r[n]=u}}}return F({},e.parentPluginProps,{},r)}(H({},e),r),i=[].concat(Object(g.a)(e.element.path),[e.element.id]),o=e.element.tag||"div";o=o.length>0?o:"div";var c=null;if(e.element.childrenTo)c=null;else if(e.element.isChildren){var l=e.childrenForPlugin.find((function(t){return t.childrenTo===e.element.id&&t.forPlugin===e.sourcePlugin}));if(l){var s=e.childrenForPlugin.filter((function(e){return e.path.includes(l.id)}));c=s.filter((function(e){return e.path.length>0&&e.path[e.path.length-1]===l.id})).map((function(t){return a.a.createElement(T,{key:t.id,structure:s,element:t,pluginsPathArray:e.pluginsPathArray,sourcePlugin:l.sourcePlugin,routePlugin:e.routePlugin,currentResource:t.fromResource,parentPluginProps:e.parentPluginProps,childrenForPlugin:e.childrenForPlugin,pageInStructure:e.pageInStructure,isHead:e.isHead,mD:e.mD})}))}}else{if(e.element.isElementFromCMSVariable){var p=e.element.tag,m="";return p&&e.parentPluginProps[p]&&(m=e.parentPluginProps[p]),O()(y()(m,{allowedTags:!1,allowedAttributes:!1}))}if(function(e){if(e===e.toUpperCase()&&e!==e.toLowerCase())return!0}(o.charAt(0))){var d=e.mD.pluginsStructure.find((function(e){return e.name===o}));if(d&&!d.hidden){var f=e.mD.resourcesObjects[d.id],h=[].concat(Object(g.a)(e.structure.filter((function(t){return t.path.includes(e.element.id)})).map((function(t){return H({},t,{fromResource:e.currentResource})}))),Object(g.a)(e.childrenForPlugin?e.childrenForPlugin:[]));if(!f.structure)return;c=f.structure.filter((function(e){return Object(b.isEqual)(e.path,[f.structure.filter((function(e){return 0===e.path.length}))[0].id])})).map((function(t){return e.pluginsPathArray.find((function(e){return e.plugin===d.id}))?null:a.a.createElement(T,{key:t.id,structure:f.structure,element:t,sourcePlugin:d.id,routePlugin:e.routePlugin||e.element.id,pluginsPathArray:[].concat(Object(g.a)(e.pluginsPathArray),[{id:e.element.id,plugin:d.id}]),currentResource:d.id,parentPluginProps:u,childrenForPlugin:h,pageInStructure:e.pageInStructure,isHead:e.isHead,mD:e.mD})}))}}else if("websiterMenu"===o)c=a.a.createElement("div",{ref:t},a.a.createElement(_,{element:e.element,elementValues:r,parentPluginProps:e.parentPluginProps,childrenForPlugin:e.childrenForPlugin,pageInStructure:e.pageInStructure,mD:e.mD}));else{if("richEditor"===o)return O()(y()(r.textContent,{allowedTags:!1,allowedAttributes:!1}));if(e.element.text)r.textContent&&(c=r.textContent.replace(/\$[^:;\$\s]*\$/g,(function(t){var r=E(t);return r&&e.parentPluginProps[r]||""})));else{var v=e.structure.filter((function(e){return Object(b.isEqual)(e.path,i)})).map((function(t){return a.a.createElement(T,{key:t.id,structure:e.structure,element:t,pluginsPathArray:e.pluginsPathArray,sourcePlugin:e.sourcePlugin,routePlugin:e.routePlugin,currentResource:e.currentResource,parentPluginProps:e.parentPluginProps,childrenForPlugin:e.childrenForPlugin,pageInStructure:e.pageInStructure,isHead:!!e.isHead||!("element_0"!==t.id||!e.isHeadOrBody),isHeadOrBody:!!e.isHeadOrBody&&"element_01"===e.element.id,mD:e.mD})}));if(e.isHeadOrBody)if(c=v,"element_01"===e.element.id)M(document.documentElement,u,e,r);else{if("element_0"===e.element.id)return M(document.head,u,e,r),document.head.innerHTML=document.head.innerHTML+(e.mD.domainNoIndex&&e.mD.baseUrl?'<meta name="robots" content="noindex">':" ")+N.decode(Object(A.renderToString)(c)),null;"element_1"===e.element.id&&M(document.body,u,e,r)}else c=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].includes(o)?e.isHead?a.a.createElement(o,Object(b.omit)(u,["class","for"])):a.a.createElement(o,{ref:t}):e.isHead?a.a.createElement(o,Object(b.omit)(u,["class","for"]),v):a.a.createElement(o,{ref:t},v)}}}return c},B=T;function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}f.a.defaults.baseURL="https://api.websiter.dev",f.a.defaults.headers.post["Content-Type"]="application/json",f.a.defaults.headers.common.Accept="application/json",f.a.defaults.headers.common.Accept="application/json";var R=function(e){function t(){var e,r;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(r=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).mD={resourcesObjects:{},page:"",template:"",structure:[],pagesStructure:[],pluginsStructure:[],baseUrl:"",domainNoIndex:!1,globalSettingsPageId:"",globalSettingsTemplateId:""},r.state={loaded:!1},r}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;return f.a.post("/api/resources/live",JSON.stringify({url:window.location.href})).then((function(t){e.mD=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.data,{structure:t.data.resourcesObjects[t.data.template].structure}),e.setState({loaded:!0})})).catch((function(e){}))}},{key:"render",value:function(){var e=this.mD,t=e.pagesStructure.find((function(t){return t.id===e.page}));if(e.structure.length>0){var r=e.structure.filter((function(e){return 1===e.path.length}))[1],n=r.properties,u=r.style;for(var i in u&&(n.style=u),n)document.body.setAttribute(i,n[i]);var o=e.structure.filter((function(e){return 0===e.path.length}))[0],c=o.properties,l=o.style;for(var s in l&&(c.style=l),c)document.documentElement.setAttribute(s,c[s]);var p=function(e){var t=function(e,t){var r={};return t&&e&&t.structure.forEach((function(n){if(n.path.length>0&&"element_02"===n.path[0]){var a=e.values[n.id],u=t.values[n.id];u.CMSVariableSystemName&&("menuItems"===u.CMSVariableType?r[u.CMSVariableSystemName]=a&&a.menuItems&&a.menuItems.length>0?a.menuItems:u.defaultMenuItems:r[u.CMSVariableSystemName]=a&&a.value||u.CMSVariableDefaultValue)}})),r},r=t(e.currentPageDraft,e.pageTemplateDraft);return F({},t(e.globalSettingsPageDraft,e.globalSettingsTemplateDraft),{},r)}({pageTemplateDraft:e.resourcesObjects[e.template],currentPageDraft:e.resourcesObjects[e.page],globalSettingsPageDraft:e.resourcesObjects[e.globalSettingsPageId],globalSettingsTemplateDraft:e.resourcesObjects[e.globalSettingsTemplateId]}),m=e.structure.filter((function(e){return"element_01"===e.id})).map((function(r,n){return a.a.createElement(B,{key:r.id,structure:e.structure,element:r,resourceDraft:e.template?e.resourcesObjects[e.template]:{},currentResource:e.template,isHeadOrBody:!0,pluginsPathArray:[],pageInStructure:t,parentPluginProps:p,mD:e})}));return a.a.createElement(a.a.Fragment,null,m," ",a.a.createElement("div",{style:{position:"fixed",width:"100%",height:"50px",background:"black",color:"white",bottom:"0px"}},"This website has been built with and is hosted on",a.a.createElement("a",{href:"https://websiter.dev/"},"Websiter.dev"),"."," ",a.a.createElement("a",{href:"https://websiter.dev/"},"Build your website with the power of Websiter.")))}return null}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(R,null),document.body),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},87:function(e,t,r){e.exports=r(172)}},[[87,1,2]]]);
//# sourceMappingURL=main.8fa6af14.chunk.js.map