{"version":3,"sources":["utils/getBoxType.js","components/UI/LoginButton/LoginButton.module.css","containers/Auth/Auth.module.css","components/UI/Checkbox/Checkbox.js","store/middleware/throttle.js","containers/Auth/Logout/Logout.js","hoc/asyncComponent.js","components/UI/LoginButton/LoginButton.js","containers/Auth/Auth.js","components/UI/Spinner/Spinner.js","utils/resourcesAreEqual.js","store/reducer/resources.js","store/reducer/reducer.js","store/reducer/images.js","store/reducer/auth.js","App.js","index.js","components/Svg/Svg.js","components/UI/Checkbox/Checkbox.module.css","utils/resourceTypeIndex.js","websocketActions/sendUpdate.js","websocketActions/resources.js","websocketActions/websites.js","websocketActions/index.js","utils/buildRelUrls.js","utils/basic.js","components/ReserveWebsite/methods/getListOfNeededResources.js","components/ReserveWebsite/ReserveWebsite.js","utils/getEssentialData.js","components/UI/Spinner/Spinner.module.css","store/actions/builder.js","store/actions/auth.js","store/actions/website.js","store/actions/resources.js","store/actions/webSocket.js","store/actions/index.js","store/actions/files.js"],"names":["_basic__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","__webpack_exports__","props","item","values","mode","isFromBuffer","currentBoxType","resourceDraftStructure","find","id","currentBox","resourceDraftValues","CMSVariableType","indexOf","path","length","checkIfCapital","tag","charAt","text","isChildren","childrenTo","isCMSVariable","isElementFromCMSVariable","module","exports","Button","Success","Danger","Auth","Form","Title","Subtitle","ActionBlock","Middle","RememberForgot","ForgotPassword","Link","RememberMe","RememberMeLabel","Container","socialButtons","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1__","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1___default","_Svg_Svg__WEBPACK_IMPORTED_MODULE_2__","Checkbox","a","createElement","className","inline","classes","Div","Inline","join","style","data-testid","datatestid","type","radio","Input","checked","onChange","e","target","icon","Svg","title","children","CANCEL","FLUSH","map","throttled","action","method","payload","types","Array","isArray","Object","keys","filter","t","includes","forEach","Logout","this","onLogout","react_default","Redirect","to","Component","connect","dispatch","actions","asyncComponent","importComponent","_Component","_temp","_getPrototypeOf2","_this","classCallCheck","_len","arguments","args","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","component","inherits","createClass","key","value","_this2","then","cmp","setState","default","C","LoginButton","disabled","btnType","onClick","clicked","cookies","Cookies","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","cookieConsent","setCookieConsent","useEffect","checkCookieConsent","remeberMeParam","get","basicURL","Fragment","href","UI_LoginButton_LoginButton","set","maxAge","window","open","spinner","cover","Cover","Loader","resourcesAreEqual","draft1","draft2","isEqual","structure","omit","removeResourceFromUnsaved","require","create","objectHash","obj","propertyFilter","name","context","notSavedResources","_id","removeResourceFromNewVersions","newVersionResources","initialState","resourcesObjects","error","loading","domainNotOk","customDomainNotOk","maxStorage","uploadingImage","currentBoxInPlugin","currentImage","sizeIsChanging","pageZoom","hoveredElementId","hoveredElementSize","isRefreshing","userId","barSizes","height","width","width2","width3","findMode","hoverMode","fromFrame","search","shouldRefresh","tryWebsiter","currentUserInWebsiteSharing","mD","activeContainer","clipboard","reducer","createReducer","REMOVE_RESOURCE_FROM_UNSAVED","resources","REMOVE_RESOURCE_FROM_NEW_VERSIONS","ACTION_START_IMAGE_UPLOAD","objectSpread","images","ACTION_FAIL_IMAGE_UPLOAD","ACTION_SUCCESS_IMAGE_UPLOAD","CHOOSE_IMAGE","undefined","image","SIZE_IS_CHANGING","isChanging","ACTION_START","pagesLoading","ACTION_FAIL","ACTION_SUCCESS","ADD_RESOURCE_VERSION","resource","cloneDeep","globalSettings","globalSettingsPageObject","resourceObjectIndex","resourceType","present","draft","isNotForHistory","newDraft","connectedResources","push","currentResourceId","globalSettingsPageId","current","future","AUTH_START","auth","AUTH_SUCCESS","data","accountInfo","AUTH_FAIL","AUTH_LOGOUT","CHANGE_BAR_SIZE","SAVE_HOVERED_ELEMENT_RECT","checkAndCreatePath","index","parent","plugin","size","saveHoveredElementRect","REMOVE_FROM_HOVERED_SIZES","checkAndRemoveElement","currentResource","child","removedElements","removeFromHoveredSizes","HOVER_ELEMENT","UNHOVER_ELEMENT","TOGGLE_FIND_MODE","toggleFindMode","MARK_REFRESHING","refreshing","MARK_SHOULD_REFRESHING","CHOOSE_USER_IN_WEBSITE_SHARING","SET_CURRENT_SITEBUILDER_MODE","currentSiteBuilderMode","SAVE_MAIN_DATA","ADD_RESOURCE","__v","toString","settings","DELETE_RESOURCE","resourceId","REVERT_RESOURCE","SAVE_OBJECT","SET_ACTIVE_CONTAINER","container","UNSET_ACTIVE_CONTAINER","SAVE_TO_CLIPBOARD","asyncSiteBuilderLayout","Promise","all","bind","App","onTryAutoSignup","routes","Switch","Route","isAuthenticated","Spinner","withRouter","d","src_store","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","axios","defaults","baseURL","throttleMiddleware","defaultWait","defaultThrottleOption","store","next","shouldThrottle","meta","throttle","wait","options","isNaN","leading","trailing","createStore","applyMiddleware","thunk","app","es","BrowserRouter","src_App","inIframe","self","top","root","document","getElementById","ReactDOM","render","result","objectSvg","svg","stack","trim","substring","pop","curObj","attr","selfclosing","svgStringToObj","viewBox","element","svgChildrenToElements","elementIndex","fill","el","StyleControls","resourceDraftIndex","resourceItemIndex","page","template","file","diffpatcher","sendUpdate","changes","getState","sessionStorage","getItem","alert","currentDraft","oldResource","newResource","pagesStructure","buildRelUrls","filesStructure","patch","diff","webSocket","readyState","send","JSON","stringify","messageCode","__patch__","markPublish","notPublished","addResource","duplicate","newResourceName","resourceData","websiteId","currentWebsiteId","deleteResource","confirm","publishResource","revertResource","changeWebsiteProperty","currentWebsiteObject","addWebsite","deleteWebsite","verifyCustomDomain","sharingRightsChange","right","newSharing","sharing","account","newRights","toConsumableArray","rights","addUserInWebsiteSharing","prompt","deleteUserInWebsiteSharing","transferWebsite","userTo","saveDomainName","sendUpdate_sendUpdate","resources_addResource","resources_deleteResource","resources_publishResource","resources_revertResource","websites_addWebsite","websites_deleteWebsite","websites_changeWebsiteProperty","websites_verifyCustomDomain","websites_sharingRightsChange","websites_addUserInWebsiteSharing","websites_deleteUserInWebsiteSharing","websites_transferWebsite","websites_saveDomainName","_home_ndjs_websiter_websiter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","relUrl","reduce","totalPath","itemId","itemInn","hidden","getCurrentResourceValue","buildTree","getInheritedPropertyName","lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__","lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default","char","toUpperCase","toLowerCase","isEmpty","_defineProperty","defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","i","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","items","buildItem","ownKeys","sym","getOwnPropertyDescriptor","_objectSpread","substr","addConnectedResources","newRequestedResourcesList","connectedResource","nextResourceItem","pluginsStructure","nextResourceObject","nextResourceDraft","ReserveWebsiteInn","requestedResources","taskId","start","pingTimeout","authInterval","WebSocket","heartbeat","clearTimeout","setTimeout","close","versions","onopen","event","user","headers","common","setInterval","noRequest","onmessage","parse","logout","updateUser","updateWebsite","updateResource","confirmSaved","markNotFoundResource","onclose","clearInterval","checkInterval","check","reRequestResourcesInterval","reRequestResources","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","requestedResource","err","return","nextProps","userObject","websites","currentPageId","currentPageDraft","pageTemplateId","pageTemplateDraft","currentTemplateId","currentTemplateDraft","currentPluginId","currentPluginDraft","globalSettingsPageDraft","globalSettingsTemplateId","globalSettingsTemplateDraft","chooseWebsite","from","Set","getListOfNeededResources","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","requestItem","requestedResourceItem","_iterator2","ReserveWebsiteDo","saveMainData","mainData","currentWebsiteItem","currentPageItem","currentPageFSBItem","currentTemplateItem","currentPluginItem","currentFileItem","currentPageObject","currentPageFSBObject","currentTemplateObject","currentPluginObject","currentFileObject","currentPageFSBDraft","pageTemplateItem","pageTemplateObject","pageTemplateFSBItem","pageTemplateFSBObject","pageTemplateFSBDraft","tooltipsOff","templatesStructure","currentPageFSBId","currentFileId","pageTemplateName","pageTemplateFSBName","pageTemplateFSBId","nextFileId","currentWebsite","currentWebsiteItemSettings","globalSettingsPageItem","generalSettings","globalSettingsTemplateItem","globalSettingsTemplateObject","getEssentialData","load3","htmlparser","findElementIndex","findIndex","findRouteElements","trashIndex","saveElementsStructure","resourceDraft","newStructure","oldItem","expanded","saveElementsStructureFromBuilder","chooseBox","unhoverBox","changeBoxPropertyInStructure","boxId","deleteFromHoveredSizes","isObject","String","slice","changeBoxPropertyInValues","hoverBox","addBox","putInside","elementValues","isPropagatingItem","newId","currentId","newCurrentId","textMode","textContent","properties","propertiesString","CMSVariableSystemName","CMSVariableDescription","CMSVariableDefaultValue","deleteBox","withChildren","routeElements","itemInStructure","elementId","notRemove","newPageStructure","pathItem","_i","_removedElements","trashItem","structureElementsToLeave","trash","duplicateBox","idPrefix","sourceChildren","idMatch","newValuesElements","newChildren","newItemId","splitText","end","textContent0","textContent1","textContent2","newElements","newValues","textToSpan","spanId","changeMenuItemProperty","menuItems","newMenuItems","currentMenuItem","markRefreshing","markShouldRefreshing","mergeBoxToPlugin","onlyChildren","newResourcesIds","oldResourcesIds","resourceDataValues","resourceDataStructure","newItem","element_0","newPluginName","wsActions","dissolvePluginToBox","pluginResource","pluginDataValues","pluginDataStructure","parseHTML","htmlArray","parseDOM","newElementsValues","parseToWebsiter","curArray","attribs","newElement","newElementValues","copyBox","cut","removedElementsIds","cutPath","oldStructure","structureElementsToRemain","valuesToLeave","saveToClipboard","pasteBox","inside","pastToElementItem","onlyInside","fromElement","fromElementValues","toElement","toElementValues","fromType","getBoxType","toType","checkPossibilityToPaste","authSuccess","deleteUser","remove","logoutDo","authCheckState","setItem","token","rememberMe","jwt","decode","post","put","delete","Accept","response","removeItem","catch","message","changeBarSizeDo","savePropertiesOnLeave","_getState","changeBarSize","initiator","dif","dif2","value2","value3","Math","max","innerWidth","innerHeight","switchTooltips","saveObject","chooseUserInWebsiteSharing","setSizeIsChanging","chooseResource","addResourceVersion","setActiveContainer","unsetActiveContainer","addResourceDo","currentUser","requestResource","newWebsite","builder_chooseBox","builder_addBox","builder_deleteBox","builder_duplicateBox","builder_saveElementsStructure","builder_saveElementsStructureFromBuilder","builder_changeBoxPropertyInStructure","builder_changeBoxPropertyInValues","builder_splitText","builder_textToSpan","builder_changeMenuItemProperty","builder_mergeBoxToPlugin","builder_dissolvePluginToBox","builder_parseHTML","builder_copyBox","builder_pasteBox","auth_logout","auth_authCheckState","auth_deleteUser","auth_changeBarSize","auth_savePropertiesOnLeave","auth_switchTooltips","website_chooseWebsite","files","resources_chooseResource","webSocket_updateUser","webSocket_updateWebsite","webSocket_updateResource","actionFailImageUpload","getSignedRequest","replace","editorMode","thumbnail","resolution","namePrefix","k","serverName","fileDetails","v","thumbnailDetails","_home_ndjs_websiter_websiter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","fileName","fileType","fileSize","thumbnailName","thumbnailType","thumbnailSize","doUploadFile","status","signedRequestThumbnail","Content-Type","signedRequest","newFileItem","url","modifiedDate","Date","now","_home_ndjs_websiter_websiter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","createdDate","storage","newStorage","uploadFile","resizeImageToSpecificSize","urltoFile","getResolution","filename","mimeType","match","fetch","res","arrayBuffer","buf","File","cb","reader","FileReader","onload","resizeImageFromSrcToSpecificSize","readAsDataURL","src","img","Image","widthCoef","heightCoef","oc","octx","getContext","drawImage","toDataURL","_URL","URL","webkitURL","objectUrl","createObjectURL","revokeObjectURL","deleteFile","fileId"],"mappings":"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","file":"static/js/main.6e8f55bf.chunk.js","sourcesContent":["import { checkIfCapital } from './basic'\n\nexport default (props, item, values, mode, isFromBuffer) => {\n    if (props) {\n        item = props.resourceDraftStructure.find(\n            item => item.id === props.currentBox\n        )\n        if (item) values = props.resourceDraftValues[item.id]\n        mode = props.mode\n    }\n    let currentBoxType\n    if (item) {\n        if (mode === 'page') {\n            if (item.CMSVariableType) {\n                currentBoxType =\n                    item.CMSVariableType.indexOf('propagating_') >= 0\n                        ? 'isFromPropagatingPlugin'\n                        : 'isElementFromCMSVariable'\n            } else {\n                currentBoxType = 'isElementFromCMSVariable'\n            }\n        } else {\n            if (item.path.length === 0 && !isFromBuffer) {\n                if (item.id === 'trash') currentBoxType = 'trash'\n                else if (item.id === 'element_02') currentBoxType = 'CMSRoute'\n                else currentBoxType = 'html'\n            } else if (\n                item.path.length === 1 &&\n                !isFromBuffer &&\n                mode !== 'plugin'\n            ) {\n                currentBoxType = 'headBody'\n            } else if (checkIfCapital(item.tag.charAt(0))) {\n                currentBoxType = 'plugin'\n            } else if (item.text) {\n                currentBoxType = 'text'\n            } else {\n                currentBoxType = 'element'\n            }\n            if (item.isChildren) {\n                currentBoxType = 'children'\n            }\n            if (item.childrenTo) {\n                currentBoxType = 'childrenTo'\n            }\n            if (item.isCMSVariable) {\n                currentBoxType = 'isCMSVariable'\n            }\n            if (item.isElementFromCMSVariable) {\n                currentBoxType =\n                    values.CMSVariableType.indexOf('propagating_') >= 0\n                        ? 'isFromPropagatingPlugin'\n                        : 'isElementFromCMSVariable'\n            }\n        }\n    } else {\n        currentBoxType = 'none'\n    }\n    return currentBoxType\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"LoginButton_Button__2dj44\",\"Success\":\"LoginButton_Success__21MoZ\",\"Danger\":\"LoginButton_Danger__2V7Lr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__3LJcp\",\"Form\":\"Auth_Form__2cblE\",\"Title\":\"Auth_Title__akRbA\",\"Subtitle\":\"Auth_Subtitle__2ymfd\",\"ActionBlock\":\"Auth_ActionBlock__3jKGi\",\"Middle\":\"Auth_Middle__J8yom\",\"RememberForgot\":\"Auth_RememberForgot__vAgsm\",\"ForgotPassword\":\"Auth_ForgotPassword__2P2hF\",\"Link\":\"Auth_Link__1O5md\",\"RememberMe\":\"Auth_RememberMe__3xI2n\",\"RememberMeLabel\":\"Auth_RememberMeLabel__2SEKu\",\"Container\":\"Auth_Container__KMvOh\",\"socialButtons\":\"Auth_socialButtons__37I7_\"};","import React from 'react'\n//import { connect } from 'react-redux';\nimport type { Node } from 'react'\n\n//import * as actions from '../../../store/actions/index';\nimport classes from './Checkbox.module.css'\nimport Svg from '../../Svg/Svg'\n//import SmallButton from '../Buttons/SmallButton/SmallButton';\n\ntype Props = {\n    checked?: boolean,\n    title?: string,\n    onChange: Function,\n    datatestid?: string,\n    radio?: boolean,\n    children?: Node,\n    inline?: boolean,\n    style?: Object,\n    icon?: string,\n}\n\nconst Checkbox = (props: Props) => {\n    return (\n        <div\n            className={\n                props.inline\n                    ? [classes.Div, classes.Inline].join(' ')\n                    : classes.Div\n            }\n            style={props.style}\n        >\n            <label>\n                <input\n                    data-testid={props.datatestid}\n                    type={props.radio ? 'radio' : 'checkbox'}\n                    className={classes.Input}\n                    checked={props.checked || false}\n                    onChange={e => props.onChange(e.target.checked)}\n                />\n                {props.icon ? (\n                    <Svg icon={props.icon} className={classes.Svg} />\n                ) : null}\n                {props.title}\n                {props.children}\n            </label>\n        </div>\n    )\n}\n\nexport default Checkbox\n","import throttle from 'lodash.throttle'\n\nexport const CANCEL = 'redux-throttle/CANCEL'\nexport const FLUSH = 'redux-throttle/FLUSH'\n\nfunction map(throttled, action, method) {\n    if (action.payload && action.payload.type) {\n        let types = action.payload.type\n        if (!Array.isArray(types)) {\n            types = [types]\n        }\n        Object.keys(throttled)\n            .filter(t => types.includes(t))\n            .forEach(t => throttled[t][method]())\n        return\n    }\n    Object.keys(throttled).forEach(t => throttled[t][method]())\n    return\n}\n\nexport default function middleware(\n    defaultWait = 300,\n    defaultThrottleOption = {}\n) {\n    const throttled = {}\n    return store => next => action => {\n        if (action.type === CANCEL) {\n            map(throttled, action, 'cancel')\n            return next(action)\n        }\n\n        if (action.type === FLUSH) {\n            map(throttled, action, 'flush')\n            return next(action)\n        }\n\n        const shouldThrottle = (action.meta || {}).throttle\n\n        if (!shouldThrottle) {\n            return next(action)\n        }\n\n        if (throttled[action.type]) {\n            return throttled[action.type](action)\n        }\n\n        let wait = defaultWait\n        let options = defaultThrottleOption\n\n        if (!isNaN(shouldThrottle) && shouldThrottle !== true) {\n            wait = shouldThrottle\n        } else if (typeof shouldThrottle === 'object') {\n            wait = shouldThrottle.wait || defaultWait\n            options = { ...defaultThrottleOption, ...shouldThrottle }\n        }\n\n        throttled[action.type] = throttle(next, wait, options)\n\n        return throttled[action.type](action)\n    }\n}\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport * as actions from '../../../store/actions/index'\n\ntype Props = {\n    onLogout: () => {},\n}\n\nclass Logout extends Component<Props> {\n    componentDidMount() {\n        this.props.onLogout()\n    }\n\n    render() {\n        return <Redirect to=\"/login\" />\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(Logout)\n","import React, { Component } from 'react'\n\ntype Props = {}\n\ntype State = {\n    component: Object | null,\n}\n\nconst asyncComponent = (importComponent: Object) => {\n    return class extends Component<Props, State> {\n        state = {\n            component: null,\n        }\n\n        componentDidMount() {\n            importComponent().then(cmp => {\n                this.setState({ component: cmp.default })\n            })\n        }\n\n        render() {\n            const C = this.state.component\n            return C ? <C {...this.props} /> : <div>Loading...</div>\n        }\n    }\n}\n\nexport default asyncComponent\n","import React from 'react'\nimport type { Node } from 'react'\nimport classes from './LoginButton.module.css'\n\ntype Props = {\n    clicked?: Function,\n    disabled?: boolean,\n    btnType?: 'Success' | 'Danger',\n    children?: Node,\n    datatestid?: string,\n}\n\nconst LoginButton = (props: Props) => (\n    <button\n        data-testid={props.datatestid || 'LoginButton'}\n        disabled={props.disabled}\n        className={[classes.Button, classes[props.btnType]].join(' ')}\n        onClick={props.clicked}\n    >\n        {props.children}\n    </button>\n)\n\nexport default LoginButton\n","import React, { useState, useEffect } from 'react'\n\nimport Checkbox from '../../components/UI/Checkbox/Checkbox'\nimport Cookies from 'universal-cookie'\nimport LoginButton from '../../components/UI/LoginButton/LoginButton'\nimport classes from './Auth.module.css'\nimport Svg from '../../components/Svg/Svg'\n\nconst cookies = new Cookies()\n\ntype Props = {\n    test?: boolean,\n}\n\nconst Auth = (props: Props) => {\n    const [state: boolean, setState] = useState(false)\n    const [cookieConsent: boolean, setCookieConsent] = useState(false)\n\n    useEffect(() => {\n        checkCookieConsent()\n    })\n\n    let remeberMeParam = '?rememberme=false'\n    if (state) {\n        remeberMeParam = '?rememberme=true'\n    }\n\n    const checkCookieConsent = () => {\n        const cookiesConsent = cookies.get('cookies_consent')\n        if (cookiesConsent) {\n            setCookieConsent(true)\n        }\n    }\n\n    const agreeWithCookies = () => {\n        cookies.set('cookies_consent', 'true', {\n            path: '/',\n            maxAge: 31530000,\n        })\n        checkCookieConsent()\n    }\n    const basicURL =\n        process.env.NODE_ENV !== 'development'\n            ? 'https://my.websiter.dev/api/auth/'\n            : 'http://my.websiter.test:5000/api/auth/'\n    return (\n        <div className={classes.Container}>\n            {!cookieConsent ? (\n                <>\n                    <div>\n                        We use cookies only for login purposes. In order to\n                        proceed you need to agree with the use of cookies.\n                    </div>\n                    <LoginButton btnType=\"Success\" clicked={agreeWithCookies}>\n                        AGREE\n                    </LoginButton>\n                    <LoginButton\n                        btnType=\"Danger\"\n                        clicked={() => {\n                            window.open('https://websiter.dev', '_self')\n                        }}\n                    >\n                        Return to the homepage\n                    </LoginButton>\n                </>\n            ) : (\n                <>\n                    <h1>Continue with:</h1>\n                    <div className={classes.socialButtons}>\n                        <a href={basicURL + `google/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#4285F4\" d=\"M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z\"></path></svg>' />\n                            <div>GOOGLE</div>\n                        </a>\n                        <a href={basicURL + `facebook/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#1877F2\" d=\"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z\"></path></svg>' />\n                            <div>FACEBOOK</div>\n                        </a>\n                        <a href={basicURL + `twitter/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#1DA1F2\" d=\"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"></path></svg>' />\n                            <div>TWITTER</div>\n                        </a>\n                        <a href={basicURL + `github/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#1DA1F2\" d=\"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"></path></svg>' />\n                            <div>GITHUB</div>\n                        </a>\n                    </div>\n                    <Checkbox\n                        title=\"Remember me\"\n                        checked={state}\n                        onChange={() => setState(!state)}\n                    />\n                </>\n            )}\n        </div>\n    )\n}\nexport default Auth\n","import React from 'react'\nimport classes from './Spinner.module.css'\n\ntype Props = {\n    cover?: boolean,\n    datatestid?: string,\n}\n\nconst spinner = (props: Props) => (\n    <>\n        {props.cover ? (\n            <div\n                className={classes.Cover}\n                data-testid={props.datatestid || 'cover'}\n            >\n                <div className={classes.Loader}>Loading...</div>\n            </div>\n        ) : (\n            <div className={classes.Loader}>Loading...</div>\n        )}\n    </>\n)\n\nexport default spinner\n","import isEqual from 'lodash/isEqual'\nimport omit from 'lodash/omit'\n\nexport default (draft1, draft2) =>\n    isEqual(\n        {\n            structure: draft1.structure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath', 'itemIndex'])\n            ),\n            values: draft1.values,\n        },\n        {\n            structure: draft2.structure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath', 'itemIndex'])\n            ),\n            values: draft2.values,\n        }\n    )\n","import {\n    structure,\n    current,\n    resourceObjectIndex,\n} from '../../utils/resourceTypeIndex'\nimport cloneDeep from 'lodash/cloneDeep'\nimport isEqual from 'lodash/isEqual'\nimport { checkIfCapital } from '../../utils/basic'\nimport resourcesAreEqual from '../../utils/resourcesAreEqual'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nconst patchStructure = (state: Object, action: Object) => {\n    return diffpatcher.patch(\n        state[structure[action.resourceType]],\n        action.structurePatch\n    )\n}\n\nexport const addResourceSuccess = (state: Object, action: Object) => {\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state.resourcesObjects[action._id] = action.resource\n}\n\nexport const deleteResourceSuccess = (state: Object, action: Object) => {\n    action.deletedResources.forEach(id => delete state.resourcesObjects[id])\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state[current[action.resourceType]] = action.current || ''\n}\n\nexport const setCurrentResource = (state: Object, action: Object) => {\n    state.resourcesObjects[action.mD.currentWebsiteId][\n        current[action.resourceType]\n    ] = action._id\n    if (action.resourceType === 'page') {\n        state.hoveredElementSize = {}\n    }\n}\n\nexport const saveResourcesStructureSuccess = (\n    state: Object,\n    action: Object\n) => {\n    state[structure[action.resourceType]] = action.structure\n}\n\nexport const removeResourceFromUnsaved = (state: Object, action: Object) => {\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action._id\n    )\n}\n\nexport const addResourceToUnsaved = (state: Object, action: Object) => {\n    if (!state.notSavedResources.includes(action._id))\n        state.notSavedResources.push(action._id)\n}\n\nexport const removeResourceFromNewVersions = (\n    state: Object,\n    action: Object\n) => {\n    state.newVersionResources = state.newVersionResources.filter(\n        item => item !== action._id\n    )\n}\n\nexport const addResourceToNewVersions = (state: Object, action: Object) => {\n    if (!state.newVersionResources.includes(action._id))\n        state.newVersionResources.push(action._id)\n}\n\nexport const savePageInState = (state: Object, action: Object) => ({\n    ...state,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [state.currentPage]: {\n            ...state.resourcesObjects[state.currentPage],\n            content: action.value,\n        },\n    },\n})\n\nexport const saveResourceDraftInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n}\n\nexport const saveResourceInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n    state.resourcesObjects[action.currentResource].present = action.draft\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const addResourceVersion = (state: Object, action: Object) => {\n    const resource = cloneDeep(\n        action.globalSettings\n            ? action.mD.globalSettingsPageObject\n            : action.mD[resourceObjectIndex[action.resourceType]]\n    )\n    if (!isEqual(resource.present, action.draft)) {\n        if (action.isNotForHistory) {\n            resource.present = action.draft\n            state.resourcesObjects[resource._id] = resource\n        } else {\n            const newDraft = { ...action.draft }\n            if (\n                action.draft.structure &&\n                ['template', 'plugin'].includes(action.resourceType)\n            ) {\n                const connectedResources = []\n                action.draft.structure.forEach(item => {\n                    if (item.tag.length > 0 && item.path.length > 0) {\n                        if (\n                            checkIfCapital(item.tag.charAt(0)) &&\n                            !item.childrenTo &&\n                            !item.isChildren &&\n                            !item.isElementFromCMSVariable\n                        ) {\n                            connectedResources.push({\n                                name: item.tag,\n                                type: 'plugin',\n                            })\n                        }\n                    }\n                })\n                newDraft.connectedResources = connectedResources\n\n                // let resource =\n                //     state.resourcesObjects[\n                //         state.resourcesObjects[state.userId].loadedWebsite\n                //     ].templatesStructure.find(\n                //         item => item.id === action.currentResource\n                //     ) ||\n                //     state.pluginsStructure.find(\n                //         item => item.id === action.currentResource\n                //     )\n                // if (resource) {\n                //     resource.connectedResources = connectedResources\n                // }\n            }\n            const currentResourceId = action.globalSettings\n                ? action.mD.globalSettingsPageId\n                : action.mD[current[action.resourceType]]\n            if (\n                !resourcesAreEqual(\n                    resource.present.structure\n                        ? resource.present\n                        : resource.draft,\n                    newDraft\n                )\n            ) {\n                if (!state.notSavedResources.includes(currentResourceId))\n                    state.notSavedResources.push(currentResourceId)\n            }\n            // if (resource.past.length > 5) resource.past.shift()\n            // resource.past.push(diffpatcher.diff(resource.present, newDraft))\n            resource.present = newDraft\n            resource.future = []\n            state.resourcesObjects[resource._id] = resource\n        }\n    }\n}\n\n// export const undoResourceVersion = (state: Object, action: Object) => {\n//     const currentResource = state[current[state.currentTopTab]]\n//     const resource = state.resourcesObjects[currentResource]\n//     if (resource) {\n//         if (resource.past.length > 0) {\n//             if (\n//                 !isEqual(\n//                     resource.present,\n//                     resource.past[resource.past.length - 1]\n//                 )\n//             ) {\n//                 if (!state.notSavedResources.includes(action.currentResource))\n//                     state.notSavedResources.push(action.currentResource)\n//             } else {\n//                 state.notSavedResources = state.notSavedResources.filter(\n//                     item => item !== action.currentResource\n//                 )\n//             }\n\n//             const delta = resource.past.pop()\n//             resource.future.unshift(delta)\n//             resource.present = diffpatcher.unpatch(resource.present, delta)\n//         }\n//     }\n// }\n\n// export const redoResourceVersion = (state: Object, action: Object) => {\n//     const currentResource = state[current[state.currentTopTab]]\n//     const resource = state.resourcesObjects[currentResource]\n//     if (resource) {\n//         if (resource.future.length > 0) {\n//             if (!isEqual(resource.present, resource.future[0])) {\n//                 if (!state.notSavedResources.includes(action.currentResource))\n//                     state.notSavedResources.push(action.currentResource)\n//             } else {\n//                 state.notSavedResources = state.notSavedResources.filter(\n//                     item => item !== action.currentResource\n//                 )\n//             }\n\n//             const delta = resource.future.shift()\n//             resource.past.push(delta)\n//             resource.present = diffpatcher.patch(resource.present, delta)\n//         }\n//     }\n// }\n","import * as auth from './auth'\nimport * as images from './images'\nimport * as resources from './resources'\nimport { createReducer } from '@reduxjs/toolkit'\nimport resourcesAreEqual from '../../utils/resourcesAreEqual'\n\nexport type menuItemType = {\n    all: boolean,\n    id: string,\n    generatedFrom: string,\n    sourceItem: boolean,\n    name: string,\n    type: string,\n    path: Array<string>,\n    properties: {\n        url: string,\n        class: string,\n    },\n}\n\nexport type requiredRightsType = Array<string>\n\nexport type elementType = {\n    id: string,\n    path: Array<string>,\n    tag: string,\n    properties: {\n        name?: string,\n        topMenuBlockClasses?: Array<string>,\n        topMenuItemClasses?: Array<string>,\n        topMenuItemActiveClasses?: Array<string>,\n        popupMenuBlockClasses?: Array<string>,\n        popupMenuItemClasses?: Array<string>,\n        popupMenuItemActiveClasses?: Array<string>,\n        mode?: 'horizontal' | 'vertical',\n        trigger?: 'click',\n        id?: string,\n        class?: string,\n    },\n    propertiesString: string,\n    style?: string,\n    expanded?: boolean,\n    textMode: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    text?: boolean,\n    textContent?: string,\n    isChildren?: boolean,\n    childrenTo?: string,\n    forPlugin?: string,\n    sourcePlugin?: string,\n    menuItems?: Array<menuItemType>,\n    currentMenuItem?: string,\n    children?: Array<elementType>,\n    isElementFromCMSVariable?: boolean,\n    isCMSVariable?: boolean,\n    CMSVariableType?: string,\n    CMSVariableSystemName?: string,\n    CMSVariableDescription?: string,\n    CMSVariableDefaultValue?: any,\n    currentMenuId?: string,\n    defaultMenuItems?: Array<menuItemType>,\n    value?: any,\n}\nexport type resourceType = {\n    currentId: number,\n    structure: Array<elementType>,\n    currentBox?: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    value?: string,\n}\n\nexport type pageType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    hidden: boolean,\n    notPublished: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type pluginType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type templateType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type imageType = {\n    name: string,\n    label: string,\n    url: string,\n    size: number,\n}\nexport type websiteType = {\n    _id: string,\n    domain: string,\n    name: string,\n    customDomain?: string,\n    domainHidden?: boolean,\n    customDomainHidden?: boolean,\n    customDomainVerified?: boolean,\n    verifyCode?: string,\n    cname?: string,\n    domainNoIndex?: boolean,\n    sharing: Array<{\n        userId: string,\n        rights: Array<string>,\n    }>,\n    user: string,\n    storage: number,\n    images: Array<imageType>,\n}\n\nexport type initialStateType = {\n    websites: Array<websiteType>,\n    resourcesObjects: {\n        [key: string]: {\n            draft: resourceType,\n            present: resourceType,\n            future: Array<resourceType>,\n            past: Array<resourceType>,\n        },\n    },\n    pagesStructure: Array<pageType>,\n    pluginsStructure: Array<pluginType>,\n    templatesStructure: Array<templateType>,\n    loadedWebsite: string,\n    error: null | {},\n    loading: boolean,\n    currentPage: string,\n    currentPlugin: string,\n    currentTemplate: string,\n    domainNotOk: boolean,\n    customDomainNotOk: boolean,\n    maxStorage: number,\n    uploadingImage: boolean,\n    currentBoxInPlugin: string,\n    currentImage: string,\n    sizeIsChanging: boolean,\n    currentWebsite: string,\n    notSavedResources: Array<string>,\n    pageZoom: number,\n    hoveredElementId: null | string,\n    hoveredElementSize: {\n        [key: string]: {\n            children: {},\n            left: number,\n            top: number,\n            width: number,\n            height: number,\n        },\n    },\n    isRefreshing: boolean,\n    userId: null | string,\n    barSizes: { height: number, width: number, width2: number, width3: number },\n    // currentTopTab: string,\n    findMode: null | string,\n    hoverMode: string,\n    fromFrame: boolean,\n    search: {},\n    tryWebsiter: boolean,\n    currentUserInWebsiteSharing: string,\n    currentSiteBuilderMode: 'template' | 'page' | '',\n    accountInfo: {\n        displayName?: string,\n        emails?: Array<string>,\n        photos?: Array<string>,\n    },\n}\n\nexport const initialState: initialStateType = {\n    resourcesObjects: {},\n    error: null,\n    loading: false,\n    domainNotOk: false,\n    customDomainNotOk: false,\n    maxStorage: 0,\n    uploadingImage: false,\n    currentBoxInPlugin: '',\n    currentImage: '',\n    sizeIsChanging: false,\n    notSavedResources: [],\n    newVersionResources: [],\n    pageZoom: 100,\n    hoveredElementId: null,\n    hoveredElementSize: {},\n    isRefreshing: false,\n    userId: null,\n    barSizes: {\n        height: 200,\n        width: 400,\n        width2: 200,\n        width3: 200,\n    },\n    // currentTopTab: 'page',\n    findMode: null,\n    hoverMode: '',\n    fromFrame: false,\n    search: {},\n    shouldRefresh: false,\n    tryWebsiter: false,\n    currentUserInWebsiteSharing: '',\n    // currentSiteBuilderMode: '',\n    mD: {},\n    activeContainer: '',\n    clipboard: {},\n}\n\nconst saveHoveredElementRect = (state, action) => {\n    const checkAndCreatePath = (path, index, parent) => {\n        if (index < path.length - 1) {\n            if (!parent[path[index].id]) {\n                parent[path[index].id] = {\n                    plugin: path[index].plugin,\n                    children: {},\n                }\n            }\n            checkAndCreatePath(\n                action.path,\n                index + 1,\n                parent[path[index].id].children\n            )\n        } else {\n            parent[path[index].id] = {\n                plugin: path[index].plugin,\n                children: {},\n                ...action.size,\n            }\n        }\n    }\n    if (action.path.length > 0)\n        checkAndCreatePath(action.path, 0, state.hoveredElementSize)\n}\n\nconst removeFromHoveredSizes = (state, action) => {\n    // ,\n    // removedElements,\n    const checkAndRemoveElement = parent => {\n        for (const item in parent) {\n            if (parent[item].plugin === action.currentResource) {\n                for (const child in parent[item].children) {\n                    if (action.removedElements.includes(child))\n                        delete parent[item].children[child]\n                }\n            } else {\n                checkAndRemoveElement(parent.children)\n            }\n        }\n    }\n    checkAndRemoveElement(state.hoveredElementSize)\n}\n\nconst toggleFindMode = (state, action) => {\n    if (action.value) {\n        if (state.findMode === action.value) {\n            state.findMode = null\n        } else {\n            state.findMode = action.value\n        }\n    } else {\n        state.findMode = null\n    }\n}\n\nconst reducer = createReducer(initialState, {\n    REMOVE_RESOURCE_FROM_UNSAVED: (state, action) =>\n        resources.removeResourceFromUnsaved(state, action),\n    REMOVE_RESOURCE_FROM_NEW_VERSIONS: (state, action) =>\n        resources.removeResourceFromNewVersions(state, action),\n    ACTION_START_IMAGE_UPLOAD: (state, action) =>\n        images.actionStartImageUpload(state),\n    ACTION_FAIL_IMAGE_UPLOAD: (state, action) =>\n        images.actionFailImageUpload(state, action),\n    ACTION_SUCCESS_IMAGE_UPLOAD: (state, action) =>\n        images.actionSuccessImageUpload(state),\n    CHOOSE_IMAGE: (state, action) => images.chooseImage(state, action),\n\n    SIZE_IS_CHANGING: (state, action) => {\n        state.sizeIsChanging = action.isChanging\n    },\n    ACTION_START: (state, action) => {\n        state.error = null\n        state.pagesLoading = true\n    },\n    ACTION_FAIL: (state, action) => {\n        state.error = action.error\n        state.pagesLoading = false\n    },\n    ACTION_SUCCESS: (state, action) => {\n        state.error = null\n        state.pagesLoading = false\n    },\n\n    ADD_RESOURCE_VERSION: (state, action) =>\n        resources.addResourceVersion(state, action),\n    // UNDO_RESOURCE_VERSION: (state, action) =>\n    //     resources.undoResourceVersion(state, action),\n    // REDO_RESOURCE_VERSION: (state, action) =>\n    //     resources.redoResourceVersion(state, action),\n\n    AUTH_START: (state, action) => auth.authStart(state),\n    AUTH_SUCCESS: (state, action) => auth.authSuccess(state, action),\n    AUTH_FAIL: (state, action) => auth.authFail(state, action),\n    AUTH_LOGOUT: (state, action) => auth.authLogout(state),\n    CHANGE_BAR_SIZE: (state, action) => auth.changeBarSize(state, action),\n    // SET_CURRENT_TOP_TAB: (state, action) => {\n    //     state.currentTopTab = action.currentTopTab\n    // },\n\n    SAVE_HOVERED_ELEMENT_RECT: (state: Object, action: Object) =>\n        saveHoveredElementRect(state, action),\n    REMOVE_FROM_HOVERED_SIZES: (state: Object, action: Object) =>\n        removeFromHoveredSizes(state, action),\n    HOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = action.id\n        state.hoverMode = action.mode\n        state.fromFrame = action.fromFrame\n    },\n    UNHOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = null\n        state.fromFrame = false\n    },\n    TOGGLE_FIND_MODE: (state: Object, action: Object) =>\n        toggleFindMode(state, action),\n    MARK_REFRESHING: (state: Object, action: Object) => {\n        state.isRefreshing = action.refreshing\n    },\n    MARK_SHOULD_REFRESHING: (state: Object, action: Object) => {\n        state.shouldRefresh = action.value\n    },\n    CHOOSE_USER_IN_WEBSITE_SHARING: (state: Object, action: Object) => {\n        state.currentUserInWebsiteSharing = action.id\n    },\n    SET_CURRENT_SITEBUILDER_MODE: (state: Object, action: Object) => {\n        state.currentSiteBuilderMode = action.mode\n    },\n    SAVE_MAIN_DATA: (state: Object, action: Object) => {\n        state.mD = action.mD\n    },\n    //ws\n    ADD_RESOURCE: (state: Object, action: Object) => {\n        const { mD } = state\n        if (action.data) {\n            if (action.data._id) {\n                if (mD.resourcesObjects[action.data._id]) {\n                    if (mD.resourcesObjects[action.data._id].draft) {\n                        state.resourcesObjects[action.data._id] = {\n                            ...mD.resourcesObjects[action.data._id],\n                            draft: action.data.draft,\n                            __v: action.data.__v,\n                        }\n                        let saved\n                        if (\n                            !mD.resourcesObjects[action.data._id].present\n                                .structure\n                        )\n                            saved = true\n                        else\n                            saved = resourcesAreEqual(\n                                action.data.draft,\n                                mD.resourcesObjects[action.data._id].present\n                            )\n\n                        if (saved) {\n                            resources.removeResourceFromUnsaved(state, {\n                                _id: action.data._id,\n                            })\n                            resources.removeResourceFromNewVersions(state, {\n                                _id: action.data._id,\n                            })\n                        } else {\n                            resources.addResourceToUnsaved(state, {\n                                _id: action.data._id,\n                            })\n                            resources.addResourceToNewVersions(state, {\n                                _id: action.data._id,\n                            })\n                        }\n                    } else {\n                        state.resourcesObjects[action.data._id] = {\n                            ...state.resourcesObjects[action.data._id],\n                            ...action.data,\n                        }\n                    }\n                } else state.resourcesObjects[action.data._id] = action.data\n                if (action.data._id.toString() === mD.userId.toString()) {\n                    if (action.data.settings)\n                        if (action.data.settings.barSizes)\n                            state.barSizes = action.data.settings.barSizes\n                }\n            }\n        }\n    },\n\n    DELETE_RESOURCE: (state: Object, action: Object) => {\n        if (action.data) {\n            delete state.resourcesObjects[action.data.resourceId]\n        }\n    },\n    REVERT_RESOURCE: (state: Object, action: Object) => {\n        if (action.data) {\n            state.resourcesObjects[action.data._id].present = action.data.draft\n            if (action.data.to === 'draft') {\n                resources.removeResourceFromUnsaved(state, {\n                    _id: action.data._id,\n                })\n                resources.removeResourceFromNewVersions(state, {\n                    _id: action.data._id,\n                })\n            }\n        }\n    },\n    SAVE_OBJECT: (state: Object, action: Object) => {\n        if (action.data) {\n            state.resourcesObjects[action.data._id] = action.data\n        }\n    },\n    SET_ACTIVE_CONTAINER: (state: Object, action: Object) => {\n        if (state.activeContainer !== action.container)\n            state.activeContainer = action.container\n    },\n    UNSET_ACTIVE_CONTAINER: (state: Object, action: Object) => {\n        if (state.activeContainer === action.container)\n            state.activeContainer = ''\n    },\n    SAVE_TO_CLIPBOARD: (state: Object, action: Object) => {\n        state.clipboard = action.data\n    },\n})\n\nexport default reducer\n","import { initialState } from './reducer'\n\nexport const actionStartImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: true,\n})\n\nexport const actionSuccessImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: false,\n})\n\nexport const actionFailImageUpload = (state: Object, action: Object) => ({\n    ...state,\n    error: action.error,\n    loading: false,\n})\n\nexport const chooseImage = (state: Object = initialState, action: Object) => {\n    state.currentImage = action.image\n}\n","export const authStart = (state: Object) => {\n    state.loading = true\n    state.error = null\n}\n\nexport const authFail = (state: Object, action: Object) => {\n    state.loading = false\n    state.error = action.error\n    state.userId = null\n}\n\nexport const authLogout = (state: Object) => {\n    state.userId = null\n}\n\nexport const authSuccess = (state: Object, action: Object) => {\n    state.userId = action.data._id\n    state.accountInfo = action.data.accountInfo\n    state.error = null\n    state.loading = false\n    state.barSizes = { ...state.barSizes, ...action.data.barSizes }\n    state.tryWebsiter = action.data.tryWebsiter\n}\n\nexport const changeBarSize = (state: Object, action: Object) => {\n    state.barSizes[action.key] = action.value\n}\n","import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Logout from './containers/Auth/Logout/Logout'\nimport asyncComponent from './hoc/asyncComponent'\nimport * as actions from './store/actions/index'\nimport Auth from './containers/Auth/Auth'\nimport Spinner from './components/UI/Spinner/Spinner'\nimport { initialState } from './store/reducer/reducer'\n\nconst asyncSiteBuilderLayout = asyncComponent(() => {\n    return import('./components/SiteBuilderLayout/SiteBuilderLayout')\n})\n\ntype Props = {\n    onTryAutoSignup: Function,\n    isAuthenticated: boolean,\n    loading: typeof initialState.loading,\n}\n\nclass App extends Component<Props> {\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        let routes = (\n            <Switch>\n                <Route path=\"/login\" component={Auth} />\n                <Redirect to=\"/login\" />\n            </Switch>\n        )\n        if (this.props.isAuthenticated) {\n            routes = (\n                <div style={{ height: '100%' }}>\n                    <Switch>\n                        <Route\n                            path=\"/editor\"\n                            component={asyncSiteBuilderLayout}\n                        />\n                        <Route path=\"/logout\" component={Logout} />\n                        <Redirect to=\"/editor\" />\n                    </Switch>\n                </div>\n            )\n        }\n        return (\n            <>\n                {routes} {this.props.loading ? <Spinner cover /> : null}\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthenticated: state.userId !== null,\n        loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport axios from 'axios'\nimport throttle from './store/middleware/throttle'\n\nimport './index.css'\nimport App from './App'\n//import * as serviceWorker from './serviceWorker';\nimport reducer from './store/reducer/reducer'\n// $FlowFixMe\nimport 'react-sortable-tree/style.css'\n\n// const composeEnhancers =\n//     process.env.NODE_ENV === 'development'\n//         ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n//         : null || compose\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://api.websiter.test:5000'\n} else {\n    axios.defaults.baseURL = 'https://api.websiter.dev'\n}\n\nconst defaultWait = 300\nconst defaultThrottleOption = {\n    leading: true,\n    trailing: true,\n}\n\nconst throttleMiddleware = throttle(defaultWait, defaultThrottleOption)\n\nexport const store = createStore(\n    reducer,\n    composeEnhancers\n        ? composeEnhancers(applyMiddleware(throttleMiddleware, thunk))\n        : applyMiddleware(throttleMiddleware, thunk)\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\nconst inIframe = window.self !== window.top\n\nconst root = document.getElementById('root')\nif (root !== null && !inIframe) {\n    ReactDOM.render(app, root)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","import React from 'react'\n\ntype Props = {\n    className?: string,\n    icon: ?string,\n    datatestid?: string,\n}\n\ntype Element = {\n    type: string,\n    children: Array<Element>,\n    fill: string,\n    d: string,\n}\n\nexport const Svg = (props: Props) => {\n    const svgStringToObj = (svg: string): Object => {\n        const obj = []\n\n        const stack = []\n\n        while (svg.length > 0) {\n            svg = svg.trim()\n            if (svg.indexOf('</') === 0) {\n                svg = svg.substring(2)\n                if (svg.indexOf('<') > 0) {\n                    svg = svg.substring(svg.indexOf('<'))\n                    stack.pop()\n                } else {\n                    svg = ''\n                }\n            } else {\n                svg = svg.substring(svg.indexOf('<'))\n                const curObj = {\n                    type: svg.substring(1, svg.indexOf(' ')),\n                    children: [],\n                }\n                svg = svg.substring(svg.indexOf(' '))\n                let attr = svg.substring(0, svg.indexOf('>'))\n                let selfclosing = attr.indexOf('/>') >= 0\n\n                svg = svg.substring(svg.indexOf('>') + 1).trim()\n                while (attr.length > 0) {\n                    let key = attr.substring(0, attr.indexOf('=')).trim()\n                    attr = attr.substring(attr.indexOf('\"') + 1)\n                    let value = attr.substring(0, attr.indexOf('\"')).trim()\n                    attr = attr.substring(attr.indexOf('\"') + 1).trim()\n                    curObj[key] = value\n                }\n                if (stack.length === 0) {\n                    obj.push(curObj)\n                } else {\n                    stack[stack.length - 1].children.push(curObj)\n                }\n                if (!selfclosing) {\n                    stack.push(curObj)\n                }\n            }\n        }\n        return obj[0]\n    }\n\n    const svgChildrenToElements = (element: Element, elementIndex: number) => {\n        switch (element.type) {\n            case 'path':\n                return (\n                    <path key={elementIndex} d={element.d} fill={element.fill}>\n                        {element.children.map((el: Element, index) =>\n                            svgChildrenToElements(el, index)\n                        )}\n                    </path>\n                )\n            case 'g':\n                return (\n                    <g key={elementIndex} fill={element.fill}>\n                        {element.children.map((el: Element, index) =>\n                            svgChildrenToElements(el, index)\n                        )}\n                    </g>\n                )\n            default:\n                return\n        }\n    }\n\n    let result = null\n    if (props.icon) {\n        const objectSvg = svgStringToObj(props.icon)\n\n        result = (\n            <svg\n                data-testid={props.datatestid || 'svg'}\n                height={objectSvg.height}\n                width={objectSvg.width}\n                viewBox={objectSvg.viewBox}\n                className={props.className}\n            >\n                {objectSvg.children.map((element, index) =>\n                    svgChildrenToElements(element, index)\n                )}\n            </svg>\n        )\n    }\n    return result\n}\n\nexport default Svg\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Div\":\"Checkbox_Div__2PqSf\",\"Input\":\"Checkbox_Input__1KbTF\",\"StyleControls\":\"Checkbox_StyleControls__cb7Ky\",\"Inline\":\"Checkbox_Inline__3XkB8\",\"Svg\":\"Checkbox_Svg__3ctX6\"};","export const structure = {\n    page: 'pagesStructure',\n    plugin: 'pluginsStructure',\n    template: 'templatesStructure',\n    file: 'filesStructure',\n}\n\nexport const current = {\n    page: 'currentPageId',\n    plugin: 'currentPluginId',\n    template: 'currentTemplateId',\n    file: 'currentFileId',\n}\n\nexport const resourceDraftIndex = {\n    page: 'currentPageDraft',\n    plugin: 'currentPluginDraft',\n    template: 'currentTemplateDraft',\n    file: 'currentFileDraft',\n}\n\nexport const resourceItemIndex = {\n    page: 'currentPageItem',\n    plugin: 'currentPluginItem',\n    template: 'currentTemplateItem',\n    file: 'currentFileItem',\n}\n\nexport const resourceObjectIndex = {\n    page: 'currentPageObject',\n    plugin: 'currentPluginObject',\n    template: 'currentTemplateObject',\n    file: 'currentFileObject',\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport {\n    resourceItemIndex,\n    resourceDraftIndex,\n} from '../utils/resourceTypeIndex'\nimport * as actions from '../store/actions'\nimport buildRelUrls from '../utils/buildRelUrls'\n\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nexport const sendUpdate = (\n    type: 'user' | 'website' | 'page' | 'template' | 'plugin',\n    changes: {},\n    id: string\n) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    const oldResource = mD.resourcesObjects[id]\n    if (oldResource) {\n        let draft, currentDraft\n        if (['page', 'template', 'plugin'].includes(type)) {\n            draft = oldResource.draft\n            currentDraft = mD[resourceDraftIndex[type]]\n        } else {\n            draft = oldResource\n            currentDraft = oldResource\n        }\n        if (draft && changes) {\n            const newResource = { ...currentDraft, ...changes }\n            if (type === 'website') {\n                newResource.pagesStructure = buildRelUrls(\n                    newResource.pagesStructure,\n                    true\n                )\n                newResource.filesStructure = buildRelUrls(\n                    newResource.filesStructure\n                )\n            }\n            const patch = diffpatcher.diff(draft, newResource)\n            if (patch) {\n                if (webSocket && webSocket.readyState !== 3) {\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'updateResource',\n                            type,\n                            _id: id,\n                            __patch__: patch,\n                            __v: oldResource.__v,\n                            markPublish: [\n                                'page',\n                                'template',\n                                'plugin',\n                            ].includes(type)\n                                ? !mD[resourceItemIndex[type]].notPublished\n                                : false,\n                        })\n                    )\n                }\n            } else {\n                actions.removeResourceFromUnsaved({ _id: id })\n                actions.removeResourceFromNewVersions({ _id: id })\n            }\n        }\n    }\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport { current, resourceObjectIndex } from '../utils/resourceTypeIndex'\nimport * as actions from '../store/actions'\n\nexport const addResource = (\n    type: 'page' | 'plugin' | 'template',\n    duplicate?: boolean,\n    newResourceName?: string,\n    resourceData?: {}\n) => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addResource',\n                type,\n                websiteId: mD.currentWebsiteId,\n                duplicate,\n                _id: mD[current[type]],\n                name: newResourceName,\n                resourceData,\n            })\n        )\n    }\n}\n\nexport const deleteResource = (type: 'page' | 'plugin' | 'template') => (\n    dispatch: Object,\n    getState\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (!window.confirm('Are you sure you want to delete this resource?'))\n        return\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteResource',\n                type,\n                _id: mD[current[type]],\n                websiteId: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const publishResource = (type: 'page' | 'plugin' | 'template') => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'publishResource',\n                type,\n                _id: mD[current[type]],\n            })\n        )\n    }\n}\n\nexport const revertResource = (type, to) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (to === 'draft') {\n        dispatch(\n            actions.revertResource({\n                _id: mD[current[type]],\n                draft: mD[resourceObjectIndex[type]].draft,\n                to,\n            })\n        )\n    } else {\n        if (webSocket && webSocket.readyState !== 3) {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'revertResource',\n                    type,\n                    _id: mD[current[type]],\n                    to,\n                })\n            )\n        }\n    }\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport { sendUpdate } from './sendUpdate'\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport const changeWebsiteProperty = (key, value, id) => (\n    dispatch,\n    getState\n) => {\n    const { mD } = getState()\n    if (!mD.currentWebsiteObject || !mD.currentWebsiteId) return\n    const newResource = cloneDeep(\n        id ? mD.resourcesObjects[id] : mD.currentWebsiteObject\n    )\n    if (!newResource) return\n    newResource[key] = value\n    dispatch(sendUpdate('website', newResource, mD.currentWebsiteId))\n}\n\nexport const addWebsite = (duplicate?: boolean) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addWebsite',\n                _id: mD.currentWebsiteId,\n                duplicate,\n            })\n        )\n    }\n}\n\nexport const deleteWebsite = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (!window.confirm('Are you sure you want to delete this website?')) return\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteWebsite',\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const verifyCustomDomain = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'verifyCustomDomain',\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const sharingRightsChange = (userId, right, value) => (\n    dispatch,\n    getState\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const newSharing = cloneDeep(mD.currentWebsiteObject.sharing)\n        const account = newSharing.find(item => item.userId === userId)\n        if (account) {\n            let newRights = []\n            if (value) {\n                newRights = [...account.rights, right]\n            } else {\n                newRights = account.rights.filter(item => item !== right)\n            }\n            // const updatedSharing = mD.currentWebsiteObject.sharing.filter(\n            //     item => item.userId !== userId\n            // )\n            // updatedSharing.push({\n            //     ...account,\n            //     rights: newRights,\n            // })\n            account.rights = newRights\n            dispatch(\n                changeWebsiteProperty(\n                    'sharing',\n                    newSharing,\n                    mD.currentWebsiteId\n                )\n            )\n        }\n    }\n}\n\nexport const addUserInWebsiteSharing = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const id = window.prompt('Paste the user id to share the website.')\n        if (!id) return\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addUserInSharing',\n                _id: mD.currentWebsiteId,\n                userId: id,\n                type: 'add',\n            })\n        )\n    }\n}\n\nexport const deleteUserInWebsiteSharing = userId => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (\n        !window.confirm(\n            'Are you sure you want to delete this user from sharing?'\n        )\n    )\n        return\n    const { mD } = getState()\n    if (userId && userId !== mD.userId) {\n        if (\n            !window.confirm(\n                'Are you sure you want to remove this user from sharing?'\n            )\n        )\n            return\n    }\n\n    webSocket.send(\n        JSON.stringify({\n            messageCode: 'addUserInSharing',\n            _id: mD.currentWebsiteId,\n            userId,\n            type: 'delete',\n        })\n    )\n}\n\nexport const transferWebsite = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const userTo = window.prompt(\n            'Enter the user id to whom you would like to transfer the website. It can be found in the user account menu tab.'\n        )\n        if (\n            !userTo ||\n            !window.confirm(\n                'Are you sure you want to transfer this website to user - ' +\n                    userTo +\n                    '?'\n            )\n        )\n            return\n\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'transferWebsite',\n                _id: mD.currentWebsiteId,\n                userTo,\n            })\n        )\n    }\n}\n\nexport const saveDomainName = (name, type) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'saveDomainName',\n                _id: mD.currentWebsiteId,\n                name,\n                type,\n            })\n        )\n    }\n}\n","export { sendUpdate } from './sendUpdate'\n\nexport {\n    addResource,\n    deleteResource,\n    publishResource,\n    revertResource,\n} from './resources'\n\nexport {\n    addWebsite,\n    deleteWebsite,\n    changeWebsiteProperty,\n    verifyCustomDomain,\n    sharingRightsChange,\n    addUserInWebsiteSharing,\n    deleteUserInWebsiteSharing,\n    transferWebsite,\n    saveDomainName,\n} from './websites'\n","export default (structure, page) =>\n    structure.map(item => ({\n        ...item,\n        relUrl:\n            item.path.reduce((totalPath, itemId) => {\n                const el = structure.find(itemInn => itemInn.id === itemId)\n                if (el && !el.hidden)\n                    return totalPath + el[page ? 'url' : 'name'] + '/'\n                else {\n                    return totalPath\n                }\n            }, '') + item[page ? 'url' : 'name'],\n    }))\n","import isEmpty from 'lodash/isEmpty'\n\nexport const checkIfCapital = (char: string) => {\n    if (char === char.toUpperCase() && char !== char.toLowerCase()) {\n        return true\n    }\n}\n\nexport const getCurrentResourceValue = (id: string, resourcesObjects: {}) =>\n    id\n        ? resourcesObjects[id]\n            ? isEmpty(resourcesObjects[id].present)\n                ? resourcesObjects[id].draft\n                : resourcesObjects[id].present\n            : null\n        : null\n\nfunction _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {}\n        var ownKeys = Object.keys(source)\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(\n                //eslint-disable-next-line\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(\n                        source,\n                        sym\n                        // $FlowFixMe\n                    ).enumerable\n                })\n            )\n        }\n        //eslint-disable-next-line\n        ownKeys.forEach(function(key) {\n            // $FlowFixMe\n            _defineProperty(target, key, source[key])\n        })\n    }\n    return target\n}\n\nfunction _defineProperty(obj, key, value) {\n    // $FlowFixMe\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true,\n        })\n    } else {\n        // $FlowFixMe\n        obj[key] = value\n    }\n    return obj\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n    if (source == null) return {}\n    var target = _objectWithoutPropertiesLoose(source, excluded)\n    var key, i\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i]\n            if (excluded.indexOf(key) >= 0) continue\n            if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                continue\n            // $FlowFixMe\n            target[key] = source[key]\n        }\n    }\n    return target\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {}\n    var target = {}\n    var sourceKeys = Object.keys(source)\n    var key, i\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i]\n        if (excluded.indexOf(key) >= 0) continue\n        target[key] = source[key]\n    }\n    return target\n}\n// $FlowFixMe\nexport function buildTree(items) {\n    var buildItem = function buildItem(item) {\n        // var path = item.path,\n        var data = _objectWithoutProperties(item, ['path'])\n        // $FlowFixMe\n        return _objectSpread({}, data, {\n            children: items\n                .filter(function(child) {\n                    return child.path[child.path.length - 1] === item.id\n                })\n                .map(function(child) {\n                    return buildItem(child)\n                }),\n        })\n    }\n\n    var tree = items\n        .filter(function(item) {\n            return item.path.length === 0\n        })\n        .map(function(item) {\n            return buildItem(item)\n        })\n    return tree\n}\n\nexport const getInheritedPropertyName = (value: string) => {\n    const length = value.length\n    if (length > 2) {\n        if (value.charAt(0) === '$' && value.charAt(length - 1) === '$') {\n            return value.substr(1, length - 2)\n        }\n    }\n    return false\n}\n","const addConnectedResources = (\n    draft,\n    id,\n    newRequestedResourcesList,\n    currentWebsiteObject,\n    resourcesObjects\n) => {\n    if (!resourcesObjects[id])\n        newRequestedResourcesList.push({\n            id,\n            type: 'resource',\n        })\n    if (draft)\n        if (draft.connectedResources)\n            draft.connectedResources.forEach(connectedResource => {\n                let nextResourceItem\n                if (connectedResource.type === 'plugin') {\n                    nextResourceItem = currentWebsiteObject.pluginsStructure.find(\n                        item => item.name === connectedResource.name\n                    )\n                }\n                if (nextResourceItem) {\n                    const nextResourceObject =\n                        resourcesObjects[nextResourceItem.id]\n                    let nextResourceDraft = {}\n                    if (nextResourceObject) {\n                        nextResourceDraft = nextResourceObject.present.structure\n                            ? nextResourceObject.present\n                            : nextResourceObject.draft\n                    }\n                    addConnectedResources(\n                        nextResourceDraft,\n                        nextResourceItem.id,\n                        newRequestedResourcesList,\n                        currentWebsiteObject,\n                        resourcesObjects\n                    )\n                }\n            })\n}\n\nexport default props => {\n    const { mD } = props\n    let newRequestedResourcesList = []\n    if (mD.userId && mD.resourcesObjects) {\n        if (!mD.userObject) {\n            newRequestedResourcesList.push({\n                id: mD.userId,\n                type: 'user',\n            })\n        } else {\n            let currentWebsiteId = mD.currentWebsiteId\n            for (let item of mD.websites) {\n                newRequestedResourcesList.push({\n                    id: item.id,\n                    type: 'website',\n                })\n            }\n            if (!currentWebsiteId) {\n                if (mD.websites.length > 0) currentWebsiteId = mD.websites[0].id\n                if (currentWebsiteId) {\n                    props.chooseWebsite(currentWebsiteId)\n                }\n            } else {\n                if (mD.currentPageId) {\n                    // if (!mD.currentPageObject) {\n                    //     newRequestedResourcesList.push({\n                    //         id: mD.currentPageId,\n                    //         type: 'resource',\n                    //     })\n                    // }\n\n                    addConnectedResources(\n                        mD.currentPageDraft,\n                        mD.currentPageId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                    if (mD.pageTemplateId) {\n                        addConnectedResources(\n                            mD.pageTemplateDraft,\n                            mD.pageTemplateId,\n                            newRequestedResourcesList,\n                            mD.currentWebsiteObject,\n                            mD.resourcesObjects\n                        )\n                    }\n                }\n                if (mD.currentTemplateId) {\n                    addConnectedResources(\n                        mD.currentTemplateDraft,\n                        mD.currentTemplateId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n                if (mD.currentPluginId) {\n                    addConnectedResources(\n                        mD.currentPluginDraft,\n                        mD.currentPluginId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n                if (mD.globalSettingsPageId) {\n                    addConnectedResources(\n                        mD.globalSettingsPageDraft,\n                        mD.globalSettingsPageId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n                if (mD.globalSettingsTemplateId) {\n                    addConnectedResources(\n                        mD.globalSettingsTemplateDraft,\n                        mD.globalSettingsTemplateId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n            }\n        }\n    }\n    newRequestedResourcesList = Array.from(new Set(newRequestedResourcesList))\n    return newRequestedResourcesList\n}\n","import React from 'react'\n\nimport { connect } from 'react-redux'\nimport axios from 'axios'\n\nimport * as actions from '../../store/actions/index'\nimport { Component } from 'react'\nimport getListOfNeededResources from './methods/getListOfNeededResources'\nimport getEssentialData from '../../utils/getEssentialData'\n\ntype Props = {\n    loadedWebsite: string,\n}\n\ntype State = {\n    requestedResources: Array<{}>,\n    taskId: number,\n}\n\nexport let webSocket = false\n\nclass ReserveWebsiteInn extends Component<Props, State> {\n    state = {\n        requestedResources: [],\n        taskId: 0,\n    }\n\n    start = () => {\n        let url\n        if (process.env.NODE_ENV === 'development') {\n            url = 'ws://api.websiter.test:5000'\n        } else {\n            url = 'wss://api.websiter.dev'\n        }\n        let pingTimeout, authInterval\n        webSocket = new WebSocket(url)\n\n        const heartbeat = () => {\n            clearTimeout(pingTimeout)\n            pingTimeout = setTimeout(() => {\n                webSocket.close()\n            }, 30000 + 1000)\n            const versions = {}\n            for (let id in this.props.mD.resourcesObjects) {\n                versions[id] = {\n                    __v: this.props.mD.resourcesObjects[id].__v,\n                    type: this.props.mD.resourcesObjects[id].draft\n                        ? 'resource'\n                        : this.props.mD.resourcesObjects[id].pagesStructure\n                        ? 'website'\n                        : 'user',\n                }\n            }\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'heartbeat',\n                    versions,\n                })\n            )\n        }\n\n        webSocket.onopen = event => {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'auth',\n                    user: axios.defaults.headers.common['x-auth-token'],\n                    tryWebsiter: sessionStorage.getItem('tryWebsiter'),\n                })\n            )\n            authInterval = setInterval(\n                () =>\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'auth',\n                            noRequest: true,\n                            user: axios.defaults.headers.common['x-auth-token'],\n                            tryWebsiter: sessionStorage.getItem('tryWebsiter'),\n                        })\n                    ),\n                600000\n            )\n            heartbeat()\n        }\n        webSocket.onmessage = event => {\n            const data = JSON.parse(event.data)\n\n            switch (data.messageCode) {\n                case 'heartbeat':\n                    heartbeat()\n                    break\n                case 'logout':\n                    this.props.logout()\n                    break\n                case 'addResource':\n                    let resource = data.resource\n                    this.props.addResource(resource)\n                    break\n                case 'updateuser':\n                    this.props.updateUser(data, webSocket)\n                    break\n                case 'updatewebsite':\n                    this.props.updateWebsite(data, webSocket)\n                    break\n                case 'updateresource':\n                    this.props.updateResource(data, webSocket)\n                    break\n                case 'revertResource':\n                    this.props.revertResource(data)\n                    break\n                case 'deleteuser':\n                case 'deletewebsite':\n                case 'deleteresource':\n                    this.props.deleteResource(data)\n                    break\n                case 'confirmSaved':\n                    this.props.confirmSaved(data)\n                    break\n                case 'notFoundResource':\n                    this.markNotFoundResource(data)\n                    break\n                case 'error':\n                    alert(data.text)\n                    break\n                default:\n                    break\n            }\n        }\n        webSocket.onclose = event => {\n            clearTimeout(pingTimeout)\n            clearInterval(authInterval)\n        }\n    }\n\n    markNotFoundResource = data => {\n        const requestedResources = this.state.requestedResources.filter(\n            item => item.id.toString() === data._id.toString()\n        )\n        this.setState({ requestedResources })\n    }\n\n    checkInterval = null\n\n    check = () => {\n        if (!webSocket || webSocket.readyState === 3) {\n            this.start()\n        }\n    }\n    componentWillMount() {\n        this.checkInterval = setInterval(this.check, 5000)\n    }\n\n    reRequestResourcesInterval = null\n    reRequestResources = () => {\n        for (let requestedResource of this.state.requestedResources) {\n            if (requestedResource)\n                if (!this.props.mD.resourcesObjects[requestedResource.id]) {\n                    if (webSocket && webSocket.readyState !== 3) {\n                        webSocket.send(\n                            JSON.stringify({\n                                messageCode: 'requestResource',\n                                id: requestedResource.id,\n                                type: requestedResource.type,\n                            })\n                        )\n                    }\n                }\n        }\n    }\n    componentWillUnmount() {\n        clearInterval(this.reRequestResourcesInterval)\n        clearInterval(this.checkInterval)\n        if (webSocket) {\n            webSocket.close()\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const newRequestedResourcesList = getListOfNeededResources(nextProps)\n        const requestedResources = []\n        for (const requestItem of newRequestedResourcesList) {\n            if (requestItem) {\n                let requestedResourceItem = this.state.requestedResources.find(\n                    item => item.id === requestItem.id\n                )\n                if (!requestedResourceItem) {\n                    if (webSocket && webSocket.readyState !== 3) {\n                        webSocket.send(\n                            JSON.stringify({\n                                messageCode: 'requestResource',\n                                id: requestItem.id,\n                                type: requestItem.type,\n                            })\n                        )\n                        requestedResourceItem = {\n                            id: requestItem.id,\n                            type: requestItem.type,\n                            state: 'sent',\n                        }\n                    }\n                }\n                if (requestedResourceItem)\n                    requestedResources.push(requestedResourceItem)\n            }\n        }\n        this.setState({ requestedResources })\n        clearInterval(this.reRequestResourcesInterval)\n        this.reRequestResourcesInterval = setInterval(\n            this.reRequestResources,\n            3000\n        )\n    }\n\n    render() {\n        return null\n    }\n}\n\nconst mapStateToPropsDo = state => {\n    return {\n        mD: state.mD,\n    }\n}\n\nconst mapDispatchToPropsDo = dispatch => {\n    return {\n        logout: () => dispatch(actions.logout()),\n        addResource: data => dispatch(actions.addResource(data)),\n        updateUser: (data, webSocket) =>\n            dispatch(actions.updateUser(data, webSocket)),\n        updateWebsite: (data, webSocket) =>\n            dispatch(actions.updateWebsite(data, webSocket)),\n        updateResource: (data, webSocket) =>\n            dispatch(actions.updateResource(data, webSocket)),\n        deleteResource: data => dispatch(actions.deleteResource(data)),\n        revertResource: data => dispatch(actions.revertResource(data)),\n        chooseWebsite: currentWebsiteId =>\n            dispatch(actions.chooseWebsite(currentWebsiteId)),\n        confirmSaved: data => dispatch(actions.removeResourceFromUnsaved(data)),\n    }\n}\n\nconst ReserveWebsiteDo = connect(\n    mapStateToPropsDo,\n    mapDispatchToPropsDo\n)(ReserveWebsiteInn)\n\nconst ReserveWebsite = props => {\n    const mainData = getEssentialData(\n        props.userId,\n        props.resourcesObjects,\n        props.tryWebsiter\n    )\n\n    props.saveMainData(mainData)\n    return <ReserveWebsiteDo />\n}\n\nconst mapStateToProps = state => {\n    return {\n        userId: state.userId,\n        resourcesObjects: state.resourcesObjects,\n        tryWebsiter: state.tryWebsiter,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        saveMainData: mD => dispatch(actions.saveMainData(mD)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ReserveWebsite)\n","export default (userId, resourcesObjects, tryWebsiter) => {\n    const userObject = resourcesObjects[userId]\n    let websites,\n        currentWebsiteItem,\n        currentWebsiteId,\n        currentWebsiteObject,\n        pagesStructure = [],\n        templatesStructure = [],\n        pluginsStructure = [],\n        filesStructure = [],\n        currentPageId = '',\n        currentPageFSBId = '',\n        currentTemplateId = '',\n        currentPluginId = '',\n        currentFileId = '',\n        currentPageItem,\n        currentPageFSBItem,\n        currentTemplateItem,\n        currentPluginItem,\n        currentFileItem,\n        currentPageObject,\n        currentPageFSBObject,\n        currentTemplateObject,\n        currentPluginObject,\n        currentFileObject,\n        currentPageDraft,\n        currentPageFSBDraft,\n        currentTemplateDraft,\n        currentPluginDraft,\n        globalSettingsPageId,\n        globalSettingsPageObject,\n        globalSettingsPageDraft,\n        globalSettingsTemplateId,\n        globalSettingsTemplateDraft,\n        pageTemplateName = '',\n        pageTemplateId = '',\n        pageTemplateItem,\n        pageTemplateObject,\n        pageTemplateDraft,\n        pageTemplateFSBName = '',\n        pageTemplateFSBId = '',\n        pageTemplateFSBItem,\n        pageTemplateFSBObject,\n        pageTemplateFSBDraft,\n        tooltipsOff,\n        nextFileId = 0\n    if (userObject) {\n        websites = userObject.websites\n        if (websites) {\n            if (websites.length > 0 && userObject.settings) {\n                tooltipsOff = userObject.settings.tooltipsOff\n                if (userObject.settings.currentWebsite) {\n                    currentWebsiteItem = websites.find(\n                        item => item.id === userObject.settings.currentWebsite\n                    )\n                }\n                if (currentWebsiteItem) {\n                    currentWebsiteId = currentWebsiteItem.id\n                    currentWebsiteObject = resourcesObjects[currentWebsiteId]\n                    if (currentWebsiteObject) {\n                        pagesStructure = currentWebsiteObject.pagesStructure\n                        templatesStructure =\n                            currentWebsiteObject.templatesStructure\n                        pluginsStructure = currentWebsiteObject.pluginsStructure\n                        filesStructure = currentWebsiteObject.filesStructure\n                        nextFileId = currentWebsiteObject.nextFileId || 0\n\n                        const currentWebsiteItemSettings =\n                            userObject.settings.websites[currentWebsiteId]\n                        if (currentWebsiteItemSettings) {\n                            currentPageId =\n                                currentWebsiteItemSettings.currentPageId\n                            currentPageFSBId =\n                                currentWebsiteItemSettings.currentPageFSBId\n                            currentTemplateId =\n                                currentWebsiteItemSettings.currentTemplateId\n                            currentPluginId =\n                                currentWebsiteItemSettings.currentPluginId\n                            currentFileId =\n                                currentWebsiteItemSettings.currentFileId\n\n                            currentPageItem = pagesStructure.find(\n                                item => item.id === currentPageId\n                            )\n                            currentPageFSBItem = pagesStructure.find(\n                                item => item.id === currentPageFSBId\n                            )\n                            currentTemplateItem = templatesStructure.find(\n                                item => item.id === currentTemplateId\n                            )\n                            currentPluginItem = pluginsStructure.find(\n                                item => item.id === currentPluginId\n                            )\n                            currentFileItem = filesStructure.find(\n                                item => item.id === currentFileId\n                            )\n\n                            if (currentPageItem) {\n                                currentPageObject =\n                                    resourcesObjects[currentPageId]\n                                if (currentPageObject) {\n                                    currentPageDraft = !currentPageObject\n                                        .present.structure\n                                        ? currentPageObject.draft\n                                        : currentPageObject.present\n                                }\n                                pageTemplateName =\n                                    currentPageItem.template || ''\n                                if (pageTemplateName) {\n                                    pageTemplateItem = templatesStructure.find(\n                                        item => item.name === pageTemplateName\n                                    )\n                                    if (pageTemplateItem) {\n                                        pageTemplateId = pageTemplateItem.id\n                                        pageTemplateObject =\n                                            resourcesObjects[pageTemplateId]\n                                        if (pageTemplateObject) {\n                                            pageTemplateDraft = !pageTemplateObject\n                                                .present.structure\n                                                ? pageTemplateObject.draft\n                                                : pageTemplateObject.present\n                                        }\n                                    }\n                                }\n                            }\n                            if (currentPageFSBItem) {\n                                currentPageFSBObject =\n                                    resourcesObjects[currentPageFSBId]\n                                if (currentPageFSBObject) {\n                                    currentPageFSBDraft = !currentPageFSBObject\n                                        .present.structure\n                                        ? currentPageFSBObject.draft\n                                        : currentPageFSBObject.present\n                                }\n                                pageTemplateFSBName =\n                                    currentPageFSBItem.template || ''\n                                if (pageTemplateFSBName) {\n                                    pageTemplateFSBItem = templatesStructure.find(\n                                        item =>\n                                            item.name === pageTemplateFSBName\n                                    )\n                                    if (pageTemplateFSBItem) {\n                                        pageTemplateFSBId =\n                                            pageTemplateFSBItem.id\n                                        pageTemplateFSBObject =\n                                            resourcesObjects[pageTemplateFSBId]\n                                        if (pageTemplateFSBObject) {\n                                            pageTemplateFSBDraft = !pageTemplateFSBObject\n                                                .present.structure\n                                                ? pageTemplateFSBObject.draft\n                                                : pageTemplateFSBObject.present\n                                        }\n                                    }\n                                }\n                            }\n\n                            if (currentTemplateItem) {\n                                currentTemplateObject =\n                                    resourcesObjects[currentTemplateId]\n                                if (currentTemplateObject) {\n                                    currentTemplateDraft = !currentTemplateObject\n                                        .present.structure\n                                        ? currentTemplateObject.draft\n                                        : currentTemplateObject.present\n                                }\n                            }\n                            if (currentPluginItem) {\n                                currentPluginObject =\n                                    resourcesObjects[currentPluginId]\n                                if (currentPluginObject) {\n                                    currentPluginDraft = !currentPluginObject\n                                        .present.structure\n                                        ? currentPluginObject.draft\n                                        : currentPluginObject.present\n                                }\n                            }\n                            if (currentFileItem) {\n                                currentFileObject =\n                                    resourcesObjects[currentFileId]\n                            }\n\n                            const globalSettingsPageItem = pagesStructure.find(\n                                item => item.generalSettings\n                            )\n                            if (globalSettingsPageItem) {\n                                globalSettingsPageId = globalSettingsPageItem.id\n                                globalSettingsPageObject =\n                                    resourcesObjects[globalSettingsPageId]\n                                if (globalSettingsPageObject) {\n                                    globalSettingsPageDraft = !globalSettingsPageObject\n                                        .present.structure\n                                        ? globalSettingsPageObject.draft\n                                        : globalSettingsPageObject.present\n                                }\n                            }\n\n                            const globalSettingsTemplateItem = templatesStructure.find(\n                                item => item.generalSettings\n                            )\n                            if (globalSettingsTemplateItem) {\n                                globalSettingsTemplateId =\n                                    globalSettingsTemplateItem.id\n                                const globalSettingsTemplateObject =\n                                    resourcesObjects[globalSettingsTemplateId]\n                                if (globalSettingsTemplateObject) {\n                                    globalSettingsTemplateDraft = !globalSettingsTemplateObject\n                                        .present.structure\n                                        ? globalSettingsTemplateObject.draft\n                                        : globalSettingsTemplateObject.present\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return {\n        userObject,\n        websites,\n        currentWebsiteItem,\n        currentWebsiteId,\n        currentWebsiteObject,\n        pagesStructure,\n        templatesStructure,\n        pluginsStructure,\n        filesStructure,\n        currentPageId,\n        currentPageFSBId,\n        currentTemplateId,\n        currentPluginId,\n        currentFileId,\n        currentPageItem,\n        currentPageFSBItem,\n        currentTemplateItem,\n        currentPluginItem,\n        currentFileItem,\n        currentPageObject,\n        currentPageFSBObject,\n        currentTemplateObject,\n        currentPluginObject,\n        currentFileObject,\n        currentPageDraft,\n        currentPageFSBDraft,\n        currentTemplateDraft,\n        currentPluginDraft,\n        globalSettingsPageId,\n        globalSettingsPageObject,\n        globalSettingsPageDraft,\n        globalSettingsTemplateId,\n        globalSettingsTemplateDraft,\n        pageTemplateName,\n        pageTemplateId,\n        pageTemplateItem,\n        pageTemplateObject,\n        pageTemplateDraft,\n        pageTemplateFSBName,\n        pageTemplateFSBId,\n        pageTemplateFSBItem,\n        pageTemplateFSBObject,\n        pageTemplateFSBDraft,\n        resourcesObjects,\n        userId,\n        tryWebsiter,\n        tooltipsOff,\n        nextFileId,\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__2Sex0\",\"load3\":\"Spinner_load3__jNmcI\",\"Cover\":\"Spinner_Cover__3iRbu\"};","import * as actions from './index'\nimport * as wsActions from '../../websocketActions'\nimport isEqual from 'lodash/isEqual'\nimport omit from 'lodash/omit'\nimport isObject from 'lodash/isObject'\nimport { current, resourceDraftIndex } from '../../utils/resourceTypeIndex'\n\nimport getBoxType from '../../utils/getBoxType'\nimport type { resourceType } from '../../store/reducer/reducer'\nvar htmlparser = require('htmlparser2')\n\nconst findElementIndex = (draft: resourceType): number => {\n    if (!draft.currentBox) return -1\n    if (draft.currentBox.length < 1) return -1\n    return draft.structure.findIndex(item => item.id === draft.currentBox)\n}\n\nconst findRouteElements = (\n    draft: resourceType,\n    mode: 'plugin' | 'template' | 'page'\n): Array<number> => {\n    const result = []\n    if (mode === 'plugin') {\n        result.push(0)\n    } else if (mode === 'template') {\n        draft.structure.forEach((item, index) => {\n            if (item.path.length === 0 || isEqual(item.path, ['element_01']))\n                result.push(index)\n        })\n    }\n    const trashIndex = draft.structure.findIndex(item => item.id === 'trash')\n    if (trashIndex >= 0) result.push(trashIndex)\n    return result\n}\n\nexport const saveElementsStructure = (\n    type,\n    structure: $PropertyType<resourceType, 'structure'>\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !resourceDraft || !structure) return\n\n    const newStructure = structure.map(item => {\n        const oldItem = resourceDraft.structure.find(\n            itemInn => itemInn.id === item.id\n        )\n        if (oldItem)\n            return {\n                ...item,\n                ...oldItem,\n                expanded: item.expanded,\n                path: item.path,\n            }\n        else return item\n    })\n    const draft = { ...resourceDraft, structure: newStructure }\n\n    const isNotForHistory = isEqual(\n        resourceDraft.structure.map(item =>\n            omit(item, ['expanded', 'children', 'itemPath'])\n        ),\n        newStructure.map(item =>\n            omit(item, ['expanded', 'children', 'itemPath'])\n        )\n    )\n    dispatch(actions.addResourceVersion(mD, type, draft, {}, isNotForHistory))\n}\n\nexport const saveElementsStructureFromBuilder = (\n    type,\n    draft: $PropertyType<resourceType, 'structure'>,\n    globalSettings?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    dispatch(\n        actions.addResourceVersion(mD, type, draft, {}, false, globalSettings)\n    )\n}\n\nexport const chooseBox = (type, item: string) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !item || !resourceDraft) return\n    const draft = { ...resourceDraft, currentBox: item }\n    dispatch(actions.addResourceVersion(mD, type, draft, {}, true))\n    dispatch(unhoverBox())\n}\n\nexport const changeBoxPropertyInStructure = (\n    type,\n    key: string | {},\n    value: any,\n    isNotForHistory?: boolean,\n    boxId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !key || !resourceDraft) return\n    let elementIndex\n    if (boxId) {\n        elementIndex = resourceDraft.structure.findIndex(\n            item => item.id === boxId\n        )\n    } else {\n        elementIndex = findElementIndex(resourceDraft)\n    }\n    if (elementIndex < 0) return\n    if (key === 'tag') {\n        dispatch(\n            deleteFromHoveredSizes(mD[current[type]], [\n                resourceDraft.structure[elementIndex].id,\n            ])\n        )\n    }\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            {\n                ...resourceDraft.structure[elementIndex],\n                ...changes,\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n\n    dispatch(\n        actions.addResourceVersion(\n            mD,\n            type,\n            draft,\n            {\n                throttle: 100,\n            },\n            isNotForHistory\n        )\n    )\n}\n\nexport const changeBoxPropertyInValues = (\n    type,\n    key: string | {},\n    value: any,\n    isNotForHistory?: boolean,\n    boxId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !key || !resourceDraft) return\n    let elementIndex\n    if (boxId) {\n        elementIndex = resourceDraft.structure.findIndex(\n            item => item.id === boxId\n        )\n    } else {\n        elementIndex = findElementIndex(resourceDraft)\n    }\n    if (elementIndex < 0) return\n    if (key === 'tag') {\n        dispatch(\n            deleteFromHoveredSizes(mD[current[type]], [\n                resourceDraft.structure[elementIndex].id,\n            ])\n        )\n    }\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n\n    const draft = {\n        ...resourceDraft,\n        values: {\n            ...resourceDraft.values,\n            [resourceDraft.structure[elementIndex].id]: {\n                ...resourceDraft.values[\n                    resourceDraft.structure[elementIndex].id\n                ],\n                ...changes,\n            },\n        },\n    }\n\n    dispatch(\n        actions.addResourceVersion(\n            mD,\n            type,\n            draft,\n            {\n                throttle:\n                    typeof key === 'string' &&\n                    ['currentFileId', 'defaultFileUrl', 'fileUrl'].includes(key)\n                        ? 100\n                        : 1000,\n            },\n            isNotForHistory\n        )\n    )\n}\n\nexport const saveHoveredElementRect = (path: Array<string>, size: Object) => ({\n    type: 'SAVE_HOVERED_ELEMENT_RECT',\n    path,\n    size,\n})\n\nconst deleteFromHoveredSizes = (currentResource, removedElements) => ({\n    type: 'REMOVE_FROM_HOVERED_SIZES',\n    currentResource,\n    removedElements,\n})\n\nexport const hoverBox = (id: string, mode: string, fromFrame?: boolean) => ({\n    type: 'HOVER_ELEMENT',\n    id,\n    mode,\n    fromFrame,\n})\n\nexport const unhoverBox = () => ({\n    type: 'UNHOVER_ELEMENT',\n})\n\nexport const toggleFindMode = (value?: string) => ({\n    type: 'TOGGLE_FIND_MODE',\n    value,\n})\n\nexport const addBox = (\n    mode: 'plugin' | 'template' | 'page',\n    type?: 'children' | 'inside' | 'text' | 'cmsVariable' | 'page'\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[mode]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n\n    let putInside\n    if (mode === 'plugin') {\n        if (elementIndex <= 0) {\n            elementIndex = 0\n            putInside = true\n        }\n    } else if (mode === 'template') {\n        if (elementIndex < 0)\n            elementIndex = resourceDraft.structure.findIndex(\n                item => item.id === 'element_1'\n            )\n\n        if (resourceDraft.structure[elementIndex].id === 'element_01')\n            elementIndex = resourceDraft.structure.findIndex(\n                item => item.id === 'element_1'\n            )\n\n        if (\n            resourceDraft.structure[elementIndex].path.length < 2 &&\n            !isEqual(resourceDraft.structure[elementIndex].path, ['element_02'])\n        )\n            putInside = true\n    }\n    const element = resourceDraft.structure[elementIndex]\n    const elementValues = resourceDraft.values[element.id]\n    if (element.isChildren) {\n        putInside = false\n    } else if (element.childrenTo) {\n        putInside = true\n    } else {\n        if (type === 'inside') putInside = true\n    }\n\n    if (type === 'inside' || (type === 'text' && !element.text))\n        putInside = true\n\n    if (type === 'page') {\n        if (\n            elementValues.CMSVariableType &&\n            elementValues.CMSVariableType.indexOf('propagating_') >= 0\n        ) {\n            putInside = true\n        } else if (element.isPropagatingItem) {\n            putInside = false\n        } else {\n            return\n        }\n    }\n    const newId =\n        mode === 'page'\n            ? `elementCMS_${resourceDraft.currentId}`\n            : `element_${resourceDraft.currentId}`\n    const newCurrentId = resourceDraft.currentId + 1\n\n    const isCMSVariable =\n        resourceDraft.structure[elementIndex].id === 'element_02' ||\n        isEqual(resourceDraft.structure[elementIndex].path, ['element_02'])\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n            {\n                id: newId,\n                path: putInside\n                    ? [\n                          ...resourceDraft.structure[elementIndex].path,\n                          resourceDraft.structure[elementIndex].id,\n                      ]\n                    : [...resourceDraft.structure[elementIndex].path],\n                tag:\n                    mode === 'page'\n                        ? 'Item'\n                        : type === 'text'\n                        ? 'text'\n                        : type === 'children'\n                        ? 'New children'\n                        : isCMSVariable\n                        ? 'New CMS variable'\n                        : 'div',\n                isPropagatingItem: mode === 'page',\n                textMode: 'text',\n                text: type === 'text',\n                isChildren: type === 'children',\n                isCMSVariable: isCMSVariable,\n                isElementFromCMSVariable: type === 'cmsVariable',\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            [newId]: {\n                textContent: '',\n                properties: {},\n                propertiesString: '',\n                CMSVariableType: 'text',\n                CMSVariableSystemName: 'newCmsVariable',\n                CMSVariableDescription: 'New CMS variable description',\n                CMSVariableDefaultValue: 'New CMS variable default value',\n            },\n        },\n        currentId: newCurrentId,\n        currentBox: newId,\n    }\n\n    dispatch(actions.addResourceVersion(mD, mode, draft))\n}\n\nexport const deleteBox = (\n    type: 'page' | 'plugin' | 'template',\n    withChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const itemInStructure = resourceDraft.structure[elementIndex]\n    if (!itemInStructure) return\n    const elementId = itemInStructure.id\n\n    if (withChildren === 'page') {\n        if (!itemInStructure.isPropagatingItem) {\n            return\n        }\n    }\n    let draft = {}\n    const removedElements = [elementId]\n    if (itemInStructure.path[0] === 'trash') {\n        if (withChildren) {\n            draft = {\n                ...resourceDraft,\n                structure: resourceDraft.structure.filter(item => {\n                    const notRemove =\n                        elementId !== item.id && !item.path.includes(elementId)\n                    if (!notRemove) removedElements.push(item.id)\n                    return notRemove\n                }),\n            }\n        } else {\n            const newPageStructure = resourceDraft.structure.map(item => ({\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }))\n\n            draft = {\n                ...resourceDraft,\n                structure: [\n                    ...newPageStructure.slice(0, elementIndex),\n                    ...newPageStructure.slice(elementIndex + 1),\n                ],\n            }\n        }\n        for (let item of removedElements) {\n            delete draft.values[item.id]\n        }\n    } else {\n        let trashItem = resourceDraft.structure.find(\n            item => item.id === 'trash'\n        )\n\n        if (withChildren) {\n            let structureElementsToLeave = resourceDraft.structure.filter(\n                item => {\n                    const notRemove =\n                        elementId !== item.id && !item.path.includes(elementId)\n                    if (!notRemove) removedElements.push(item.id)\n                    return notRemove\n                }\n            )\n            draft = {\n                ...resourceDraft,\n                structure: [\n                    ...structureElementsToLeave,\n                    ...(!trashItem\n                        ? [\n                              {\n                                  id: 'trash',\n                                  path: [],\n                                  tag: 'Trash',\n                              },\n                          ]\n                        : []),\n                    ...resourceDraft.structure\n                        .filter(item => removedElements.includes(item.id))\n                        .map(item => ({\n                            ...item,\n                            path: [\n                                'trash',\n                                ...(item.id !== elementId\n                                    ? item.path.slice(\n                                          item.path.indexOf(elementId)\n                                      )\n                                    : []),\n                            ],\n                        })),\n                ],\n                values: {\n                    ...resourceDraft.values,\n                    trash: {\n                        properties: {},\n                        style: '',\n                    },\n                },\n            }\n        } else {\n            const newPageStructure = resourceDraft.structure.map(item => ({\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }))\n\n            draft = {\n                ...resourceDraft,\n                structure: [\n                    ...newPageStructure.slice(0, elementIndex),\n                    ...newPageStructure.slice(elementIndex + 1),\n                    ...(!trashItem\n                        ? [\n                              {\n                                  id: 'trash',\n                                  path: [],\n                                  tag: 'Trash',\n                              },\n                          ]\n                        : []),\n                    { ...itemInStructure, path: ['trash'] },\n                ],\n                values: {\n                    ...resourceDraft.values,\n                    trash: {\n                        properties: {},\n                        style: '',\n                    },\n                },\n            }\n        }\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n    dispatch(deleteFromHoveredSizes(mD[current[type]], removedElements))\n}\n\nexport const duplicateBox = (\n    type: 'page' | 'plugin' | 'template',\n    withChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    const idPrefix = withChildren === 'page' ? 'elementCMS_' : 'element_'\n    if (withChildren === 'page') {\n        if (!resourceDraft.structure[elementIndex].isPropagatingItem) {\n            return\n        }\n    }\n    const sourceChildren = resourceDraft.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = idPrefix + resourceDraft.currentId\n    let draft = { currentId: resourceDraft.currentId + 1 }\n\n    if (withChildren) {\n        const idMatch = { [elementId]: newId }\n        const newValuesElements = { [newId]: resourceDraft.values[elementId] }\n        const newChildren = sourceChildren\n            .map(item => {\n                let newItemId = idPrefix + draft.currentId\n                draft.currentId += 1\n                idMatch[item.id] = newItemId\n                newValuesElements[newItemId] = resourceDraft.values[item.id]\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    // $FlowFixMe\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...newChildren,\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n            values: {\n                ...resourceDraft.values,\n                ...newValuesElements,\n            },\n        }\n    } else {\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n            values: {\n                ...resourceDraft.values,\n                [newId]: resourceDraft.values[elementId],\n            },\n        }\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const splitText = (type, start: number, end: number) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    let newId\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n        },\n    ]\n\n    const newValues = {\n        [elementIndex]: {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent0,\n        },\n    }\n\n    if (textContent1.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent1,\n        }\n    }\n\n    if (textContent2.length > 0 || textContent1.length === 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent2,\n        }\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const textToSpan = (type, start: number, end: number) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let newId\n    let draft = { currentId: resourceDraft.currentId }\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n        },\n    ]\n\n    const newValues = {\n        [elementIndex]: {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent0,\n        },\n    }\n\n    const spanId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        id: spanId,\n        path: [...resourceDraft.structure[elementIndex].path],\n        tag: 'span',\n        text: false,\n    })\n\n    newValues[spanId] = {\n        textContent: '',\n        style: '',\n        properties: {},\n    }\n\n    newId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        ...resourceDraft.structure[elementIndex],\n        path: [...resourceDraft.structure[elementIndex].path, spanId],\n        textContent: textContent1,\n        id: newId,\n    })\n\n    newValues[newId] = {\n        ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n        textContent: textContent1,\n    }\n\n    if (textContent2.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent2,\n        }\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n//Menu\n\nexport const changeMenuItemProperty = (\n    type,\n    key: string,\n    value: string,\n    itemId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resource = mD[resourceDraftIndex[type]]\n\n    if (!resource) return\n\n    const elementIndex = findElementIndex(resource)\n    if (elementIndex < 0) return\n    const elementId = resource.structure[elementIndex].id\n\n    if (!resource.values[elementId].menuItems) return\n    const newMenuItems = resource.values[elementId].menuItems.map(item => {\n        if (\n            item.id ===\n            (itemId ? itemId : resource.values[elementId].currentMenuItem)\n        ) {\n            return { ...item, [key]: value }\n        } else {\n            return item\n        }\n    })\n    if (!isEqual(newMenuItems, resource.values[elementId].menuItems)) {\n        dispatch(changeBoxPropertyInValues(type, 'menuItems', newMenuItems))\n    }\n}\nexport const markRefreshing = (refreshing: boolean) => ({\n    type: 'MARK_REFRESHING',\n    refreshing,\n})\n\nexport const markShouldRefreshing = (value?: boolean) => ({\n    type: 'MARK_SHOULD_REFRESHING',\n    value,\n})\n\nexport const mergeBoxToPlugin = (\n    type: 'page' | 'plugin' | 'template',\n    onlyChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (\n        elementIndex <= 0 ||\n        (!onlyChildren && routeElements.includes(elementIndex))\n    )\n        return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    let currentId = 1\n    const newResourcesIds = ['element_0']\n    const oldResourcesIds = ['element_0']\n    const resourceDataValues = {}\n\n    const resourceDataStructure = resourceDraft.structure\n        .filter(\n            item =>\n                (!onlyChildren && item.id === elementId) ||\n                item.path.includes(elementId)\n        )\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = { ...item, id: `element_${currentId}` }\n            resourceDataValues[newItem.id] = {\n                ...resourceDraft.values[item.id],\n            }\n            if (item.id === elementId) {\n                newItem.path = ['element_0']\n            } else {\n                newItem.path = [\n                    'element_0',\n                    ...newItem.path.slice(\n                        newItem.path.indexOf(elementId) + (onlyChildren ? 1 : 0)\n                    ),\n                ]\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: item.path.map(\n                id => newResourcesIds[oldResourcesIds.indexOf(id)]\n            ),\n        }))\n    if (resourceDataStructure.length === 0) return\n    const resourceData = {\n        structure: [\n            {\n                id: 'element_0',\n                path: [],\n                tag: 'Main element',\n                textMode: '',\n            },\n            ...resourceDataStructure,\n        ],\n        values: {\n            ...resourceDataValues,\n            element_0: {\n                properties: {},\n                propertiesString: '',\n                textContent: '',\n            },\n        },\n        currentId,\n    }\n\n    const newPluginName =\n        prompt('Name the new plugin', 'New plugin') || 'New plugin'\n\n    dispatch(\n        wsActions.addResource('plugin', false, newPluginName, resourceData)\n    )\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(\n                0,\n                elementIndex + (onlyChildren ? 1 : 0)\n            ),\n            {\n                ...resourceDraft.structure[elementIndex],\n                path: [\n                    ...resourceDraft.structure[elementIndex].path,\n                    ...(onlyChildren\n                        ? [resourceDraft.structure[elementIndex].id]\n                        : []),\n                ],\n                tag: newPluginName,\n                text: false,\n                id: oldResourcesIds[1],\n            },\n            ...resourceDraft.structure.slice(\n                elementIndex +\n                    (onlyChildren ? 1 : 0) +\n                    resourceDataStructure.length\n            ),\n        ],\n        values: {\n            ...resourceDraft.values,\n            [oldResourcesIds[1]]: {\n                textContent: '',\n                propertiesString: '',\n                properties: {},\n            },\n        },\n    }\n    for (let i = 2; i < oldResourcesIds.length; i++) {\n        delete draft.values[oldResourcesIds[i]]\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft, { throttle: 1000 }))\n}\n\nexport const dissolvePluginToBox = type => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    // const elementId = resourceDraft.structure[elementIndex].id\n\n    const plugin = mD.pluginsStructure.find(\n        item => item.name === resourceDraft.structure[elementIndex].tag\n    )\n    if (!plugin) return\n    if (!mD.resourcesObjects[plugin.id]) return\n\n    const pluginResource = !mD.resourcesObjects[plugin.id].present.structure\n        ? mD.resourcesObjects[plugin.id].draft\n        : mD.resourcesObjects[plugin.id].present\n\n    let currentId = resourceDraft.currentId\n    const newResourcesIds = []\n    const oldResourcesIds = []\n    const pluginDataValues = {}\n\n    const pluginDataStructure = pluginResource.structure\n        .filter(item => item.path.length > 0)\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = {\n                ...item,\n                id: `element_${currentId}`,\n                path: [...item.path.slice(1)],\n            }\n            pluginDataValues[newItem.id] = resourceDraft.values[item.id]\n\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: [\n                ...resourceDraft.structure[elementIndex].path,\n                ...item.path.map(\n                    id => newResourcesIds[oldResourcesIds.indexOf(id)]\n                ),\n            ],\n        }))\n\n    const draft = {\n        ...resourceDraft,\n        currentId,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...pluginDataStructure,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...pluginDataValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const setCurrentSiteBuilderMode = (mode: string) => ({\n    type: 'SET_CURRENT_SITEBUILDER_MODE',\n    mode,\n})\n\nexport const parseHTML = (type, value: string) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n    let draft = { currentId: resourceDraft.currentId }\n\n    const htmlArray = htmlparser.parseDOM(value)\n    const newElements = []\n    const newElementsValues = {}\n    const parseToWebsiter = (curArray, path) => {\n        curArray.forEach(item => {\n            if (!(item.type === 'text' && item.data.trim() === '')) {\n                if (item.type === 'text' || item.type === 'tag') {\n                    const newId = `element_${draft.currentId}`\n                    draft.currentId = draft.currentId + 1\n                    const properties = item.attribs\n                        ? omit(item.attribs, 'style')\n                        : {}\n                    const newElement = {\n                        id: newId,\n                        path,\n                        tag: item.name || 'div',\n                        text: false,\n                    }\n                    const newElementValues = {\n                        textContent: '',\n                        style: item.attribs ? item.attribs.style || '' : '',\n                        properties,\n                        propertiesString: JSON.stringify(properties),\n                    }\n                    if (item.type === 'text') {\n                        newElement.tag = 'text'\n                        newElement.text = true\n                        newElementValues.textMode = 'text'\n                        newElementValues.textContent = item.data\n                    }\n                    newElements.push(newElement)\n                    newElementsValues[newId] = newElementValues\n                    if (item.children)\n                        parseToWebsiter(item.children, [...path, newId])\n                }\n            }\n        })\n    }\n    parseToWebsiter(htmlArray, resourceDraft.structure[elementIndex].path)\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newElementsValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const copyBox = (\n    type: 'page' | 'plugin' | 'template',\n    cut: boolean,\n    withChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const itemInStructure = resourceDraft.structure.find(\n        item => item.id === elementId\n    )\n    if (!itemInStructure) return\n    if (type === 'page') {\n        if (!itemInStructure.isPropagatingItem) return\n        withChildren = true\n    }\n    let draft = {}\n    const removedElementsIds = [elementId]\n\n    let trashItem = resourceDraft.structure.find(item => item.id === 'trash')\n    let structureElementsToLeave = []\n\n    const cutPath = oldStructure => {\n        return oldStructure.map((item, index) =>\n            index === 0\n                ? { ...item, path: [] }\n                : {\n                      ...item,\n                      path: item.path.slice(\n                          item.path.indexOf(oldStructure[0].id)\n                      ),\n                  }\n        )\n    }\n    if (withChildren) {\n        const structureElementsToRemain = resourceDraft.structure.filter(\n            item => {\n                const notRemove =\n                    elementId !== item.id && !item.path.includes(elementId)\n                if (!notRemove) {\n                    removedElementsIds.push(item.id)\n                    structureElementsToLeave.push(item)\n                }\n                return notRemove\n            }\n        )\n        let valuesToLeave = {}\n        structureElementsToLeave = cutPath(structureElementsToLeave)\n        structureElementsToLeave.forEach(\n            item => (valuesToLeave[item.id] = resourceDraft.values[item.id])\n        )\n        if (cut && itemInStructure.path[0] !== 'trash') {\n            draft = {\n                ...resourceDraft,\n                structure: [\n                    ...structureElementsToRemain,\n                    ...(!trashItem\n                        ? [\n                              {\n                                  id: 'trash',\n                                  path: [],\n                                  tag: 'Trash',\n                              },\n                          ]\n                        : []),\n                    ...resourceDraft.structure\n                        .filter(item => removedElementsIds.includes(item.id))\n                        .map(item => ({\n                            ...item,\n                            path: [\n                                'trash',\n                                ...(item.id !== elementId\n                                    ? item.path.slice(\n                                          item.path.indexOf(elementId)\n                                      )\n                                    : []),\n                            ],\n                        })),\n                ],\n                values: {\n                    ...resourceDraft.values,\n                    trash: {\n                        properties: {},\n                        style: '',\n                    },\n                },\n            }\n        }\n    } else {\n        structureElementsToLeave = cutPath([itemInStructure])\n\n        if (cut && itemInStructure.path[0] !== 'trash') {\n            const newPageStructure = resourceDraft.structure.map(item => ({\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }))\n            draft = {\n                ...resourceDraft,\n                structure: [\n                    ...newPageStructure.slice(0, elementIndex),\n                    ...newPageStructure.slice(elementIndex + 1),\n                    ...(!trashItem\n                        ? [\n                              {\n                                  id: 'trash',\n                                  path: [],\n                                  tag: 'Trash',\n                              },\n                          ]\n                        : []),\n                    { ...itemInStructure, path: ['trash'] },\n                ],\n                values: {\n                    ...resourceDraft.values,\n                    trash: {\n                        properties: {},\n                        style: '',\n                    },\n                },\n            }\n        }\n    }\n    if (cut && itemInStructure.path[0] !== 'trash') {\n        dispatch(actions.addResourceVersion(mD, type, draft))\n        dispatch(deleteFromHoveredSizes(mD[current[type]], removedElementsIds))\n    }\n    let valuesToLeave = {}\n    structureElementsToLeave.forEach(\n        item => (valuesToLeave[item.id] = resourceDraft.values[item.id])\n    )\n\n    dispatch(\n        saveToClipboard({\n            structure: structureElementsToLeave,\n            values: valuesToLeave,\n            type: 'websiterElements',\n        })\n    )\n}\n\nconst saveToClipboard = data => ({\n    type: 'SAVE_TO_CLIPBOARD',\n    data,\n})\n\nconst checkPossibilityToPaste = (\n    fromElement,\n    fromElementValues,\n    toElement,\n    toElementValues,\n    mode\n) => {\n    if (mode === 'page') {\n        if (toElement) {\n            if (toElement.isPropagatingItem) return 'notInside'\n            if (\n                toElement.CMSVariableType &&\n                toElement.CMSVariableType.indexOf('propagating_') >= 0\n            )\n                return 'inside'\n        }\n        return false\n    }\n    const fromType = getBoxType(\n        false,\n        fromElement,\n        fromElementValues,\n        mode,\n        true\n    )\n    const toType = getBoxType(false, toElement, toElementValues, mode)\n\n    if (\n        [\n            'html',\n            'headBody',\n            'trash',\n            'CMSRoute',\n            'children',\n            'childrenTo',\n        ].includes(fromType)\n    )\n        return false\n    if (fromType === 'isCMSVariable') {\n        if (toType === 'CMSRoute') return 'inside'\n        if (toElement.path.length > 0 && toElement.path[0] === 'element_02')\n            return true\n        return false\n    }\n    if (\n        ['element', 'plugin', 'text', 'isElementFromCMSVariable'].includes(\n            fromType\n        )\n    ) {\n        if (['html', 'headbody', 'childrenTo'].includes(toType)) {\n            return 'inside'\n        }\n        if (toType === 'element') return true\n        if (['plugin', 'text', 'isElementFromCMSVariable'].includes(toType))\n            return 'notInside'\n    }\n\n    return false\n}\n\nexport const pasteBox = (type, inside) => (dispatch: Object, getState) => {\n    const state = getState()\n    const { mD } = state\n    if (state.clipboard.type !== 'websiterElements') return\n    if (state.clipboard.structure.length < 1) return\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n\n    const pastToElementItem = resourceDraft.structure[elementIndex]\n\n    // const elementId = state.clipboard.structure[0].id\n\n    const sourceChildren = state.clipboard.structure\n    const onlyInside = checkPossibilityToPaste(\n        sourceChildren[0],\n        state.clipboard.values[sourceChildren[0].id],\n        pastToElementItem,\n        resourceDraft.values[pastToElementItem.id],\n        type\n    )\n    if (!onlyInside) return\n\n    let putInside\n    if (type === 'plugin') {\n        if (elementIndex <= 0) {\n            elementIndex = 0\n            putInside = true\n        }\n    } else if (type === 'template') {\n        if (elementIndex < 0)\n            elementIndex = resourceDraft.structure.findIndex(\n                item => item.id === 'element_1'\n            )\n        if (resourceDraft.structure[elementIndex].id === 'element_01')\n            elementIndex = resourceDraft.structure.findIndex(\n                item => item.id === 'element_1'\n            )\n\n        if (\n            resourceDraft.structure[elementIndex].path.length < 2 &&\n            !isEqual(resourceDraft.structure[elementIndex].path, ['element_02'])\n        )\n            putInside = true\n    } else if (type === 'page') {\n        putInside = onlyInside\n    }\n    const element = resourceDraft.structure[elementIndex]\n    if (element.isChildren) {\n        putInside = false\n    } else if (element.childrenTo) {\n        putInside = true\n    } else {\n        if (inside) putInside = true\n    }\n    if (inside || type === 'text' || onlyInside === 'inside') putInside = true\n    if (onlyInside === 'notInside') putInside = false\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    const idMatch = {}\n    const newValuesElements = {}\n    const newChildren = sourceChildren\n        .map(item => {\n            let newItemId = `element${type === 'page' ? 'CMS' : ''}_${\n                draft.currentId\n            }`\n            draft.currentId += 1\n            idMatch[item.id] = newItemId\n            newValuesElements[newItemId] = state.clipboard.values[item.id]\n            return {\n                ...item,\n                id: newItemId,\n            }\n        })\n        .map(item => {\n            return {\n                ...item,\n                // $FlowFixMe\n                path: [\n                    ...element.path,\n                    ...(putInside ? [element.id] : []),\n                    ...item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                ],\n            }\n        })\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n\n            ...newChildren,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newValuesElements,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\n/////////////////////OLDOLDOLDOLDOLD\n// export const changeElementStyleValue = (\n//     index: number,\n//     key: string,\n//     value: any,\n//     elementId: string\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_STYLE_VALUE,\n//     index,\n//     key,\n//     value,\n//     elementId,\n// })\n\n// export const addElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.ADD_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const deleteElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.DELETE_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const changeElementPropertyValue = (\n//     value: any,\n//     key: string,\n//     isSection?: boolean,\n//     isNotForHistory?: boolean\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_PROPERTY_VALUE,\n//     value,\n//     key,\n//     isSection,\n//     isNotForHistory,\n// })\n\n// export const builderZoomOut = () => ({ type: actionTypes.BUILDER_ZOOM_OUT })\n// export const builderZoomIn = () => ({ type: actionTypes.BUILDER_ZOOM_IN })\n// export const builderZoomReset = () => ({ type: actionTypes.BUILDER_ZOOM_RESET })\n\n// export const saveToHistory = () => ({ type: actionTypes.SAVE_TO_HISTORY })\n\n// export const loadCurrentPageToBuilder = (\n//     _id: ?string,\n//     resourcesObjects?: Object,\n//     pageObject?: Object\n// ) => ({\n//     type: actionTypes.LOAD_CURRENT_PAGE_TO_BUILDER,\n//     _id,\n//     resourcesObjects,\n//     pageObject,\n// })\n","import axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\n\nimport * as actions from './index'\n\nimport cloneDeep from 'lodash/cloneDeep'\nimport { webSocket } from '../../components/ReserveWebsite/ReserveWebsite'\n\nconst cookies = new Cookies()\n\nexport const authStart = () => ({\n    type: 'AUTH_START',\n})\n\nexport const authSuccess = (data: Object) => ({\n    type: 'AUTH_SUCCESS',\n    data,\n})\n\nexport const authFail = (error: string) => ({\n    type: 'AUTH_FAIL',\n    error,\n})\n\nexport const deleteStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const deleteSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const deleteFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const deleteUser = () => (dispatch: Object) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (window.confirm('Are you sure you would like to delete your account?'))\n        if (\n            window.confirm(\n                'This action cannot be reverted. All your websites will be deleted.'\n            )\n        )\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'deleteUser',\n                })\n            )\n}\n\nexport const logout = (all?: boolean) => (dispatch: Object) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (!all) {\n        cookies.remove('auth_token')\n        axios.defaults.headers.common['x-auth-token'] = null\n        dispatch(logoutDo())\n    } else {\n        if (webSocket) {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'logoutAll',\n                })\n            )\n        }\n    }\n}\n\nconst logoutDo = () => ({\n    type: 'AUTH_LOGOUT',\n})\n\nexport const authCheckState = () => (dispatch: Object) => {\n    sessionStorage.setItem('systemRefresh', '0')\n    const tryWebsiter = cookies.get('try_websiter')\n    if (tryWebsiter) {\n        cookies.remove('try_websiter', {\n            path: '/',\n        })\n        sessionStorage.setItem('tryWebsiter', '1')\n        dispatch(\n            authSuccess({\n                _id: 'try',\n            })\n        )\n        return\n    }\n    const token = cookies.get('auth_token')\n    const rememberMe = cookies.get('rememberme')\n    if (rememberMe) {\n        cookies.remove('rememberme', {\n            path: '/',\n        })\n        if (rememberMe === 'false') {\n            cookies.remove('auth_token', {\n                path: '/',\n            })\n        }\n    }\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n\n    if (!token || !userId) {\n        dispatch(logout())\n    } else {\n        axios.defaults.headers.common['x-auth-token'] = token\n        axios.defaults.headers.post['x-auth-token'] = token\n        axios.defaults.headers.get['x-auth-token'] = token\n        axios.defaults.headers.delete['x-auth-token'] = token\n        axios.defaults.headers.put['x-auth-token'] = token\n        dispatch(authStart())\n        return axios\n            .get('/api/users')\n            .then(response => {\n                sessionStorage.removeItem('tryWebsiter')\n                dispatch(\n                    authSuccess({\n                        _id: userId._id,\n                    })\n                )\n            })\n            .catch(err => {\n                cookies.remove('auth_token', {\n                    path: '/',\n                })\n                dispatch(authFail(err.message))\n            })\n    }\n}\n\nexport const changeBarSizeDo = (key: string, value: number) => ({\n    type: 'CHANGE_BAR_SIZE',\n    key,\n    value,\n})\n\nexport const savePropertiesOnLeave = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter')) return\n    const { mD, barSizes } = getState()\n    webSocket.send(\n        JSON.stringify({\n            messageCode: 'saveSettings',\n            settings: {\n                ...mD.userObject.settings,\n                barSizes,\n            },\n        })\n    )\n}\n\nexport const changeBarSize = (initiator?: { key: string, value: number }) => (\n    dispatch: Object,\n    getState\n) => {\n    const { barSizes } = getState()\n    const width = Math.max(window.innerWidth, 700),\n        height = window.innerHeight\n    let value, dif, dif2, value2, value3\n\n    if (!initiator) {\n        if (barSizes.height > height - 50) {\n            dispatch(actions.changeBarSizeDo('height', height - 50))\n        }\n        if (barSizes.width > width - 100) {\n            dispatch(actions.changeBarSizeDo('width', width - 100))\n        }\n        if (barSizes.width + barSizes.width2 > width - 50) {\n            dispatch(\n                actions.changeBarSizeDo('width2', width - barSizes.width - 50)\n            )\n        }\n    } else {\n        switch (initiator.key) {\n            case 'height':\n                value = initiator.value\n                if (value < 50) value = 50\n                if (value > height - 50) value = height - 50\n                dispatch(actions.changeBarSizeDo('height', value))\n                break\n            case 'width':\n                value = initiator.value\n                if (value < 50) value = 50\n                dif = value - barSizes.width\n                value2 = barSizes.width2 - dif\n                value3 = barSizes.width3\n                if (value2 < 50) {\n                    dif2 = value2 - 50\n                    value2 = 50\n                    value3 = barSizes.width3 + dif2\n                    if (value3 < 50) value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value = width - 150\n                    value2 = 50\n                    value3 = 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width2':\n                value2 = initiator.value\n                value = barSizes.width\n                dif = value2 - 50\n                if (dif < 0) {\n                    value = value + dif\n                    if (value < 50) value = 50\n                    dif2 = value - barSizes.width\n                    value3 = barSizes.width3 - dif2\n                    value2 = 50\n                }\n                dif = value + value2 - barSizes.width - barSizes.width2\n                value3 = barSizes.width3 - dif\n                if (value3 < 50) value3 = 50\n                if (value + value2 + value3 + 50 > width) {\n                    value2 = width - value - 100\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width3':\n                value3 = initiator.value\n                value = barSizes.width\n                value2 = barSizes.width2\n                dif = value3 - 50\n                if (dif < 0) {\n                    value2 = value2 + dif\n                    dif2 = value2 - 50\n                    if (dif2 < 0) {\n                        value = value + dif2\n                        if (value < 50) value = 50\n                        value2 = 50\n                    }\n                    value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value3 = width - value - value2 - 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            default:\n                break\n        }\n    }\n}\n\nexport const switchTooltips = () => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    userObject.settings.tooltipsOff = !userObject.settings.tooltipsOff\n    dispatch(actions.saveObject(userObject))\n}\n","import cloneDeep from 'lodash/cloneDeep'\n\nexport const chooseWebsite = id => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    userObject.settings.currentWebsite = id\n    dispatch(saveObject(userObject))\n}\n\nexport const saveObject = data => ({\n    type: 'SAVE_OBJECT',\n    data,\n})\n\nexport const chooseUserInWebsiteSharing = (id: string) => ({\n    type: 'CHOOSE_USER_IN_WEBSITE_SHARING',\n    id,\n})\n\nexport const setSizeIsChanging = (isChanging: boolean) => ({\n    type: 'SIZE_IS_CHANGING',\n    isChanging,\n})\n\n// export const setCurrentTopTab = (currentTopTab: string) => ({\n//     type: 'SET_CURRENT_TOP_TAB',\n//     currentTopTab,\n// })\n\nexport const saveMainData = mD => ({\n    type: 'SAVE_MAIN_DATA',\n    mD,\n})\n","import * as actions from './'\nimport * as wsActions from '../../websocketActions'\nimport { current } from '../../utils/resourceTypeIndex'\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport const chooseResource = (\n    id: string,\n    resourceType: 'plugin' | 'page' | 'template'\n) => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    if (!userObject.settings.websites[userObject.settings.currentWebsite])\n        userObject.settings.websites[userObject.settings.currentWebsite] = {}\n\n    if (mD.globalSettingsPageId !== id && resourceType === 'page') {\n        userObject.settings.websites[\n            userObject.settings.currentWebsite\n        ].currentPageFSBId = id\n    }\n\n    userObject.settings.websites[userObject.settings.currentWebsite][\n        current[resourceType]\n    ] = id\n\n    dispatch(actions.saveObject(userObject))\n}\n\nexport const addResourceVersion = (\n    mD,\n    resourceType,\n    draft,\n    meta,\n    isNotForHistory?: boolean,\n    globalSettings\n) => ({\n    type: 'ADD_RESOURCE_VERSION',\n    mD,\n    resourceType,\n    draft,\n    meta,\n    isNotForHistory,\n    globalSettings,\n})\n\n// export const undoResourceVersion = () => ({\n//     type: 'UNDO_RESOURCE_VERSION',\n// })\n\n// export const redoResourceVersion = () => ({\n//     type: 'REDO_RESOURCE_VERSION',\n// })\n\nexport const setActiveContainer = container => ({\n    type: 'SET_ACTIVE_CONTAINER',\n    container,\n})\n\nexport const unsetActiveContainer = container => ({\n    type: 'UNSET_ACTIVE_CONTAINER',\n    container,\n})\n\nexport const removeResourceFromUnsaved = data => ({\n    type: 'REMOVE_RESOURCE_FROM_UNSAVED',\n    _id: data._id,\n})\n\nexport const removeResourceFromNewVersions = data => ({\n    type: 'REMOVE_RESOURCE_FROM_NEW_VERSIONS',\n    _id: data._id,\n})\n","import cloneDeep from 'lodash/cloneDeep'\nimport omit from 'lodash/omit'\nimport isEmpty from 'lodash/isEmpty'\n\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nexport const addResource = (data: Object) => (dispatch, getState) => {\n    dispatch(addResourceDo(data))\n}\n\nexport const addResourceDo = (data: Object) => ({\n    type: 'ADD_RESOURCE',\n    data,\n})\n\nexport const deleteResource = (data: Object) => ({\n    type: 'DELETE_RESOURCE',\n    data,\n})\n\nexport const revertResource = (data: Object) => ({\n    type: 'REVERT_RESOURCE',\n    data,\n})\n\nexport const updateUser = (data: Object, webSocket) => (dispatch, getState) => {\n    if (data) {\n        const { mD } = getState()\n        const currentUser = omit(\n            cloneDeep(mD.resourcesObjects[data.resourceId]),\n            ['settings']\n        )\n        if (currentUser) {\n            if (currentUser.__v === data.resource.__v - 1) {\n                currentUser.websites = diffpatcher.patch(\n                    currentUser.websites,\n                    data.resource.__patch__\n                )\n                currentUser.__v = data.resource.__v\n                dispatch(addResource(currentUser, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nexport const updateWebsite = (data: Object, webSocket) => (\n    dispatch,\n    getState\n) => {\n    if (data) {\n        const { mD } = getState()\n        const currentWebsite = cloneDeep(mD.resourcesObjects[data.resourceId])\n        if (currentWebsite) {\n            if (currentWebsite.__v === data.resource.__v - 1) {\n                const newWebsite = diffpatcher.patch(\n                    currentWebsite,\n                    data.resource.__patch__\n                )\n                newWebsite.__v = data.resource.__v\n                dispatch(addResource(newWebsite, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nexport const updateResource = (data: Object, webSocket) => (\n    dispatch,\n    getState\n) => {\n    if (data) {\n        const { mD } = getState()\n        const currentResource = cloneDeep(mD.resourcesObjects[data.resourceId])\n        if (currentResource) {\n            if (currentResource.__v === data.resource.__v - 1) {\n                if (!isEmpty(data.resource.__patch__)) {\n                    currentResource.draft = diffpatcher.patch(\n                        currentResource.draft,\n                        data.resource.__patch__\n                    )\n                }\n                currentResource.__v = data.resource.__v\n                dispatch(addResource(currentResource, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nconst requestResource = (id, type, webSocket) => {\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'requestResource',\n                id,\n                type,\n            })\n        )\n    }\n}\n","export {\n    chooseBox,\n    addBox,\n    deleteBox,\n    duplicateBox,\n    saveElementsStructure,\n    saveElementsStructureFromBuilder,\n    changeBoxPropertyInStructure,\n    changeBoxPropertyInValues,\n    hoverBox,\n    unhoverBox,\n    saveHoveredElementRect,\n    splitText,\n    textToSpan,\n    changeMenuItemProperty,\n    markRefreshing,\n    mergeBoxToPlugin,\n    dissolvePluginToBox,\n    toggleFindMode,\n    markShouldRefreshing,\n    setCurrentSiteBuilderMode,\n    parseHTML,\n    copyBox,\n    pasteBox,\n} from './builder'\n\nexport {\n    logout,\n    authCheckState,\n    deleteUser,\n    changeBarSize,\n    changeBarSizeDo,\n    savePropertiesOnLeave,\n    switchTooltips,\n} from './auth'\n\nexport {\n    setSizeIsChanging,\n    chooseWebsite,\n    // setCurrentTopTab,\n    chooseUserInWebsiteSharing,\n    saveObject,\n    saveMainData,\n} from './website'\n\nexport { uploadFile, deleteFile } from './files'\n\nexport {\n    chooseResource,\n    addResourceVersion,\n    // undoResourceVersion,\n    // redoResourceVersion,\n    removeResourceFromUnsaved,\n    removeResourceFromNewVersions,\n    setActiveContainer,\n    unsetActiveContainer,\n} from './resources'\n\nexport {\n    addResource,\n    updateUser,\n    updateWebsite,\n    updateResource,\n    deleteResource,\n    revertResource,\n} from './webSocket'\n","import axios from 'axios'\nimport { webSocket } from '../../components/ReserveWebsite/ReserveWebsite'\nimport * as wsActions from '../../websocketActions'\nimport buildRelUrls from '../../utils/buildRelUrls'\n\nconst actionStartImageUpload = () => ({\n    type: 'ACTION_START_IMAGE_UPLOAD',\n})\n\nconst actionSuccessImageUpload = () => ({\n    type: 'ACTION_SUCCESS_IMAGE_UPLOAD',\n})\n\nconst actionFailImageUpload = (error: string) => ({\n    type: 'ACTION_FAIL_IMAGE_UPLOAD',\n    error,\n})\n\nconst getSignedRequest = (files, replace, editorMode) => (\n    dispatch: Object,\n    getState\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    // const { file, thumbnail } = files\n    const file = files.file\n    const thumbnail = files.thumbnail\n    const resolution = files.resolution || {\n        width: 'unknown',\n        height: 'unknown',\n    }\n\n    const { mD } = getState()\n    if (!mD.currentWebsiteId) return\n    let name =\n        mD.currentWebsiteId +\n        '/' +\n        file.name.replace(/([^a-zA-Z0-9\\\\.\\\\-])/g, '_')\n\n    let namePrefix = ''\n    let k = 0\n\n    const checkName = () =>\n        mD.filesStructure.findIndex(\n            file => name + namePrefix === file.serverName\n        )\n    if (!replace) {\n        while (checkName() >= 0) {\n            k++\n            namePrefix = '_' + k\n        }\n    }\n\n    const fileDetails = {\n        size: file.size,\n        name: replace ? replace.name : file.name,\n        serverName: replace ? replace.serverName : name + namePrefix,\n        type: file.type,\n        editorMode,\n        file,\n        v: replace ? replace.v + 1 : 1,\n        resolution,\n    }\n\n    const thumbnailDetails = thumbnail\n        ? {\n              size: thumbnail.size,\n              name: fileDetails.name + thumbnail.name,\n              serverName: fileDetails.serverName + thumbnail.name,\n              type: thumbnail.type,\n              editorMode,\n              file: thumbnail,\n          }\n        : {}\n    return axios\n        .post('/api/sign-s3', {\n            ...{\n                fileName: fileDetails.serverName,\n                fileType: file.type,\n                fileSize: fileDetails.size,\n                websiteId: mD.currentWebsiteId,\n            },\n            ...(thumbnail\n                ? {\n                      thumbnailName: thumbnailDetails.serverName,\n                      thumbnailType: thumbnail.type,\n                      thumbnailSize: thumbnailDetails.size,\n                  }\n                : {}),\n        })\n        .then(response => {\n            dispatch(\n                doUploadFile(\n                    fileDetails,\n                    thumbnailDetails,\n                    response.data,\n                    mD.currentWebsiteId,\n                    replace\n                )\n            )\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            if (err.response.status === 400) alert(err.response.data)\n        })\n}\n\nconst doUploadFile = (\n    fileDetails,\n    thumbnailDetails,\n    data,\n    websiteId,\n    replace\n) => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (data.signedRequestThumbnail && thumbnailDetails.file)\n        axios\n            .put(data.signedRequestThumbnail, thumbnailDetails.file, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            })\n            .then(response => {})\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n                return\n            })\n    return axios\n        .put(data.signedRequest, fileDetails.file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            if (webSocket) {\n                const { mD } = getState()\n                let result\n                const newFileItem = {\n                    id: replace ? replace.id : 'file_' + mD.nextFileId,\n                    path: replace ? replace.path : [],\n                    size: fileDetails.size + thumbnailDetails.size,\n                    name: fileDetails.name,\n                    serverName: fileDetails.serverName,\n                    type: fileDetails.type,\n                    editorMode: fileDetails.editorMode,\n                    url: data.url,\n                    v: fileDetails.v,\n                    resolution: fileDetails.resolution,\n                    modifiedDate: Date.now(),\n                }\n\n                if (mD.currentFileItem && mD.currentFileId) {\n                    if (!replace)\n                        result = [\n                            ...mD.filesStructure.slice(\n                                0,\n                                mD.filesStructure.findIndex(\n                                    item => item.id === mD.currentFileId\n                                ) + 1\n                            ),\n                            {\n                                ...newFileItem,\n                                path: mD.currentFileItem.path,\n                                createdDate: Date.now(),\n                            },\n                            ...mD.filesStructure.slice(\n                                mD.filesStructure.findIndex(\n                                    item => item.id === mD.currentFileId\n                                ) + 1\n                            ),\n                        ]\n                    else\n                        result = [\n                            ...mD.filesStructure.slice(\n                                0,\n                                mD.filesStructure.findIndex(\n                                    item => item.id === replace.id\n                                )\n                            ),\n                            newFileItem,\n                            ...mD.filesStructure.slice(\n                                mD.filesStructure.findIndex(\n                                    item => item.id === replace.id\n                                ) + 1\n                            ),\n                        ]\n                } else {\n                    result = [...mD.filesStructure, newFileItem]\n                }\n\n                result = buildRelUrls(result)\n                dispatch(\n                    wsActions.sendUpdate(\n                        'website',\n                        {\n                            nextFileId: replace\n                                ? mD.nextFileId\n                                : mD.nextFileId + 1,\n                            filesStructure: result,\n                            storage: data.newStorage,\n                        },\n                        websiteId\n                    )\n                )\n            }\n            dispatch(actionSuccessImageUpload())\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n        })\n}\n\nexport const uploadFile = (\n    files: Array<{ type: string, size: number, name: string }>,\n    replace: boolean,\n    editorMode: string\n) => (dispatch: Object) => {\n    const file = files[0]\n\n    if (file == null) {\n        return alert('No file selected.')\n    }\n    dispatch(actionStartImageUpload())\n    if (file.type.indexOf('image') >= 0) {\n        resizeImageToSpecificSize(file, { width: 220, height: 220 }, data => {\n            urltoFile(data, '/120').then(function(thumbnail) {\n                getResolution(file, resolution => {\n                    dispatch(\n                        getSignedRequest(\n                            { file, thumbnail, resolution },\n                            replace,\n                            editorMode\n                        )\n                    )\n                })\n            })\n        })\n    } else {\n        dispatch(getSignedRequest({ file }, replace, editorMode))\n    }\n}\n\nexport const urltoFile = (url, filename, mimeType) => {\n    mimeType = mimeType || (url.match(/^data:([^;]+);/) || '')[1]\n    return fetch(url)\n        .then(function(res) {\n            return res.arrayBuffer()\n        })\n        .then(function(buf) {\n            return new File([buf], filename, { type: mimeType })\n        })\n}\n\nexport const resizeImageToSpecificSize = (file, size, cb) => {\n    if (file) {\n        var reader = new FileReader()\n        reader.onload = function(event) {\n            resizeImageFromSrcToSpecificSize(event.target.result, size, cb)\n        }\n        reader.readAsDataURL(file)\n    }\n}\n\nexport const resizeImageFromSrcToSpecificSize = (src, size, cb) => {\n    var data\n    var img = new Image()\n    img.onload = function() {\n        const widthCoef = img.width / size.width\n        const heightCoef = img.height / size.height\n        var oc = document.createElement('canvas'),\n            octx = oc.getContext('2d')\n        oc.width = img.width\n        oc.height = img.height\n        octx.drawImage(img, 0, 0)\n        if (widthCoef > 1 || heightCoef > 1) {\n            if (img.width > img.height) {\n                oc.height = (img.height / img.width) * size.width\n                oc.width = size.width\n            } else {\n                oc.width = (img.width / img.height) * size.width\n                oc.height = size.width\n            }\n        }\n        octx.drawImage(oc, 0, 0, oc.width, oc.height)\n        octx.drawImage(img, 0, 0, oc.width, oc.height)\n        data = oc.toDataURL()\n        cb(data)\n    }\n    img.src = src\n}\n\nconst getResolution = (file, cb) => {\n    var _URL = window.URL || window.webkitURL\n    var img\n    if (file) {\n        img = new Image()\n        var objectUrl = _URL.createObjectURL(file)\n        img.onload = function() {\n            alert(this.width + ' ' + this.height)\n            cb({ width: this.width, height: this.height })\n            _URL.revokeObjectURL(objectUrl)\n        }\n        img.src = objectUrl\n    }\n}\n\nexport const deleteFile = fileId => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (\n        window.confirm(\n            'Are you sure you want to delete this file? The file will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.'\n        )\n    ) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteImage',\n                fileId,\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n"],"sourceRoot":""}