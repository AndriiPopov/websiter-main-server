(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,r){e.exports={componentsLayoutDemoCustomTriggerTrigger:"Layout_componentsLayoutDemoCustomTriggerTrigger__XwSVl",componentsLayoutDemoCustomTriggerLogo:"Layout_componentsLayoutDemoCustomTriggerLogo__1i_3g",siteLayoutSiteLayoutBackground:"Layout_siteLayoutSiteLayoutBackground__3ZeZ0"}},109:function(e,t,r){"use strict";var n=r(2),i=r(8),a=r(7),u=r(13),c=r(97),s=r(168).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),o=function(e,t,r){return function(o,d){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var l,f,p=d().mD,m=p.resourcesObjects[r];if(m&&(["page","template","plugin"].includes(e)?(l=m.draft,f=p[a.b[e]]):(l=m,f=m),l&&t)){var b=Object(n.a)({},f,t);"website"===e&&(b.pagesStructure=Object(c.a)(b.pagesStructure,!0),b.filesStructure=Object(c.a)(b.filesStructure));var h=s.diff(l,b);h?i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"updateResource",type:e,_id:r,__patch__:h,__v:m.__v,markPublish:!!["page","template","plugin"].includes(e)&&!p[a.c[e]].notPublished})):(u.F({_id:r}),u.E({_id:r}))}}},d=function(e,t,r,n,u){return function(c,s){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var o=s().mD;i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"addResource",type:e,websiteId:o.currentWebsiteId,duplicate:t,_id:o[a.a[e]],name:r,resourceData:n,callbackId:u}))}},l=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");if(window.confirm("Are you sure you want to delete this resource?")){var n=r().mD;i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"deleteResource",type:e,_id:n[a.a[e]],websiteId:n.currentWebsiteId}))}}},f=function(e){return function(t,r){var n=r().mD;if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"publishResource",type:e,_id:n[a.a[e]]}))}},p=function(e,t){return function(r,n){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var c=n().mD;"draft"===t?r(u.G({_id:c[a.a[e]],draft:c[a.d[e]].draft,to:t})):i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"revertResource",type:e,_id:c[a.a[e]],to:t}))}},m=r(4),b=r(28),h=r.n(b),g=function(e,t,r){return function(n,i){var a=i().mD;if(a.currentWebsiteObject&&a.currentWebsiteId){var u=h()(r?a.resourcesObjects[r]:a.currentWebsiteObject);u&&(u[e]=t,n(o("website",u,a.currentWebsiteId)))}}},v=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"addWebsite",_id:n.currentWebsiteId,duplicate:e}))}},O=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");if(window.confirm("Are you sure you want to delete this website?")){var r=t().mD;i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"deleteWebsite",_id:r.currentWebsiteId}))}}},y=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;i.c&&3!==i.c.readyState&&i.c.send(JSON.stringify({messageCode:"verifyCustomDomain",_id:r.currentWebsiteId}))}},_=function(e,t,r){return function(n,i){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var a=i().mD;if(a.currentWebsiteObject){var u=h()(a.currentWebsiteObject.sharing),c=u.find(function(t){return t.userId===e});if(c){var s=[];s=r?[].concat(Object(m.a)(c.rights),[t]):c.rights.filter(function(e){return e!==t}),c.rights=s,n(g("sharing",u,a.currentWebsiteId))}}}},E=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;if(r.currentWebsiteObject){var n=window.prompt("Paste the user id to share the website.");if(!n)return;i.c.send(JSON.stringify({messageCode:"addUserInSharing",_id:r.currentWebsiteId,userId:n,type:"add"}))}}},I=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");if(window.confirm("Are you sure you want to delete this user from sharing?")){var n=r().mD;e&&e!==n.userId&&!window.confirm("Are you sure you want to remove this user from sharing?")||i.c.send(JSON.stringify({messageCode:"addUserInSharing",_id:n.currentWebsiteId,userId:e,type:"delete"}))}}},S=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;if(r.currentWebsiteObject){var n=window.prompt("Enter the user id to whom you would like to transfer the website. It can be found in the user account menu tab.");if(!n||!window.confirm("Are you sure you want to transfer this website to user - "+n+"?"))return;i.c.send(JSON.stringify({messageCode:"transferWebsite",_id:r.currentWebsiteId,userTo:n}))}}},j=function(e,t){return function(r,n){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var a=n().mD;a.currentWebsiteObject&&i.c.send(JSON.stringify({messageCode:"saveDomainName",_id:a.currentWebsiteId,name:e,type:t}))}};r.d(t,"k",function(){return o}),r.d(t,"a",function(){return d}),r.d(t,"e",function(){return l}),r.d(t,"h",function(){return f}),r.d(t,"i",function(){return p}),r.d(t,"c",function(){return v}),r.d(t,"g",function(){return O}),r.d(t,"d",function(){return g}),r.d(t,"n",function(){return y}),r.d(t,"l",function(){return _}),r.d(t,"b",function(){return E}),r.d(t,"f",function(){return I}),r.d(t,"m",function(){return S}),r.d(t,"j",function(){return j})},110:function(e,t,r){"use strict";var n=r(0),i=r.n(n);t.a=function(e){var t=null;if(e.icon){var r=function(e){for(var t=[],r=[];e.length>0;)if(0===(e=e.trim()).indexOf("</"))(e=e.substring(2)).indexOf("<")>0?(e=e.substring(e.indexOf("<")),r.pop()):e="";else{var n={type:(e=e.substring(e.indexOf("<"))).substring(1,e.indexOf(" ")),children:[]},i=(e=e.substring(e.indexOf(" "))).substring(0,e.indexOf(">")),a=i.indexOf("/>")>=0;for(e=e.substring(e.indexOf(">")+1).trim();i.length>0;){var u=i.substring(0,i.indexOf("=")).trim(),c=(i=i.substring(i.indexOf('"')+1)).substring(0,i.indexOf('"')).trim();i=i.substring(i.indexOf('"')+1).trim(),n[u]=c}0===r.length?t.push(n):r[r.length-1].children.push(n),a||r.push(n)}return t[0]}(e.icon);t=i.a.createElement("svg",{"data-testid":e.datatestid||"svg",height:r.height,width:r.width,viewBox:r.viewBox,className:e.className},r.children.map(function(e,t){return function e(t,r){switch(t.type){case"path":return i.a.createElement("path",{key:r,d:t.d,fill:t.fill},t.children.map(function(t,r){return e(t,r)}));case"g":return i.a.createElement("g",{key:r,fill:t.fill},t.children.map(function(t,r){return e(t,r)}));default:return}}(e,t)}))}return t}},13:function(e,t,r){"use strict";var n=r(25),i=r(4),a=r(2),u=r(109),c=r(30),s=r.n(c),o=r(33),d=r.n(o),l=r(48),f=r.n(l),p=r(7),m=r(203),b=r(8),h=r(503),g=function(e){return e.currentBox?e.currentBox.length<1?-1:e.structure.findIndex(function(t){return t.id===e.currentBox}):-1},v=function(e,t){var r=[];"plugin"===t?r.push(0):"template"===t&&e.structure.forEach(function(e,t){(0===e.path.length||s()(e.path,["element_01"]))&&r.push(t)});var n=e.structure.findIndex(function(e){return"trash"===e.id});return n>=0&&r.push(n),r},O=function(e,t){return function(r,n){var i=n().mD,u=i[p.b[e]];if(i&&e&&u&&t){var c=t.map(function(e){var t=u.structure.find(function(t){return t.id===e.id});return t?Object(a.a)({},e,t,{expanded:e.expanded,path:e.path}):e}),o=Object(a.a)({},u,{structure:c}),l=s()(u.structure.map(function(e){return d()(e,["expanded","children","itemPath"])}),c.map(function(e){return d()(e,["expanded","children","itemPath"])}));r(pe(i,e,o,{},l))}}},y=function(e,t,r){return function(n,i){var a=i().mD;n(pe(a,e,t,{},!1,r))}},_=function(e,t){return function(r,n){var i=n().mD,u=i[p.b[e]];if(i&&e&&t&&u){var c=Object(a.a)({},u,{currentBox:t});r(pe(i,e,c,{},!0)),r(C())}}},E=function(e,t,r,n,u){return function(c,s){var o,d=s().mD,l=d[p.b[e]];if(d&&e&&t&&l&&!((o=u?l.structure.findIndex(function(e){return e.id===u}):g(l))<0)){"tag"===t&&c(j(d[p.a[e]],[l.structure[o].id]));var m={};f()(t)&&!("string"===typeof t||t instanceof String)?m=t:m[t.toString()]=r;var b=Object(a.a)({},l,{structure:[].concat(Object(i.a)(l.structure.slice(0,o)),[Object(a.a)({},l.structure[o],m)],Object(i.a)(l.structure.slice(o+1)))});c(pe(d,e,b,{throttle:100},n))}}},I=function(e,t,r,i,u){return function(c,s){var o,d=s().mD,l=d[p.b[e]];if(d&&e&&t&&l&&!((o=u?l.structure.findIndex(function(e){return e.id===u}):g(l))<0)){"tag"===t&&c(j(d[p.a[e]],[l.structure[o].id]));var m={};f()(t)&&!("string"===typeof t||t instanceof String)?m=t:m[t.toString()]=r;var b=Object(a.a)({},l,{values:Object(a.a)({},l.values,Object(n.a)({},l.structure[o].id,Object(a.a)({},l.values[l.structure[o].id],m)))});c(pe(d,e,b,{throttle:"string"===typeof t&&["currentFileId","defaultFileUrl","fileUrl"].includes(t)?100:1e3},i))}}},S=function(e,t){return{type:"SAVE_HOVERED_ELEMENT_RECT",path:e,size:t}},j=function(e,t){return{type:"REMOVE_FROM_HOVERED_SIZES",currentResource:e,removedElements:t}},w=function(e,t,r){return{type:"HOVER_ELEMENT",id:e,mode:t,fromFrame:r}},C=function(){return{type:"UNHOVER_ELEMENT"}},T=function(e){return{type:"TOGGLE_FIND_MODE",value:e}},R=function(e,t){return function(r,u){var c=u().mD,o=c[p.b[e]];if(o){v(o,e);var d,l=g(o);"plugin"===e?l<=0&&(l=0,d=!0):"template"===e&&(l<0&&(l=o.structure.findIndex(function(e){return"element_1"===e.id})),"element_01"===o.structure[l].id&&(l=o.structure.findIndex(function(e){return"element_1"===e.id})),o.structure[l].path.length<2&&!s()(o.structure[l].path,["element_02"])&&(d=!0));var f=o.structure[l],m=o.values[f.id];if(f.isChildren?d=!1:f.childrenTo?d=!0:"inside"===t&&(d=!0),("inside"===t||"text"===t&&!f.text)&&(d=!0),"page"===t)if(m.CMSVariableType&&m.CMSVariableType.indexOf("propagating_")>=0)d=!0;else{if(!f.isPropagatingItem)return;d=!1}var b="page"===e?"elementCMS_".concat(o.currentId):"element_".concat(o.currentId),h=o.currentId+1,O="element_02"===o.structure[l].id||o.structure[l].path.length>0&&"element_02"===o.structure[l].path[0],y=Object(a.a)({},o,{structure:[].concat(Object(i.a)(o.structure.slice(0,l+1)),[{id:b,path:d?[].concat(Object(i.a)(o.structure[l].path),[o.structure[l].id]):Object(i.a)(o.structure[l].path),tag:"page"===e?"Item":"text"===t?"text":"children"===t?"New children":O?"New CMS variable":"div",isPropagatingItem:"page"===e,textMode:"text",text:"text"===t,isChildren:"children"===t,isCMSVariable:O,isElementFromCMSVariable:"cmsVariable"===t}],Object(i.a)(o.structure.slice(l+1))),values:Object(a.a)({},o.values,Object(n.a)({},b,{textContent:"",properties:{},propertiesString:"",CMSVariableType:"text",CMSVariableSystemName:"newCmsVariable",CMSVariableDescription:"New CMS variable description",CMSVariableDefaultValue:"New CMS variable default value"})),currentId:h,currentBox:b});r(pe(c,e,y))}}},D=function(e,t){return function(r,n){var u=n().mD,c=u[p.b[e]];if(c){var s=v(c,e),o=g(c);if(!(o<0||s.includes(o))){var d=c.structure[o];if(d){var l=d.id;if("page"!==t||d.isPropagatingItem){var f={},m=[l];if("trash"===d.path[0]){if(t)f=Object(a.a)({},c,{structure:c.structure.filter(function(e){var r=("onlyChildren"===t||l!==e.id)&&!e.path.includes(l);return r||m.push(e.id),r})});else{var b=c.structure.map(function(e){return Object(a.a)({},e,{path:e.path.filter(function(e){return e!==l})})});f=Object(a.a)({},c,{structure:[].concat(Object(i.a)(b.slice(0,o)),Object(i.a)(b.slice(o+1)))})}var h=!0,O=!1,y=void 0;try{for(var _,E=m[Symbol.iterator]();!(h=(_=E.next()).done);h=!0){var I=_.value;delete f.values[I.id]}}catch(T){O=!0,y=T}finally{try{h||null==E.return||E.return()}finally{if(O)throw y}}}else{var S=c.structure.find(function(e){return"trash"===e.id});if(t){var w=c.structure.filter(function(e){var r=("onlyChildren"===t||l!==e.id)&&!e.path.includes(l);return r||m.push(e.id),r});f=Object(a.a)({},c,{structure:[].concat(Object(i.a)(w),Object(i.a)(S?[]:[{id:"trash",path:[],tag:"Trash"}]),Object(i.a)(c.structure.filter(function(e){return m.includes(e.id)}).map(function(e){return Object(a.a)({},e,{path:["trash"].concat(Object(i.a)(e.id!==l?e.path.slice(e.path.indexOf(l)):[]))})}))),values:Object(a.a)({},c.values,{trash:{properties:{},style:""}})})}else{var C=c.structure.map(function(e){return Object(a.a)({},e,{path:e.path.filter(function(e){return e!==l})})});f=Object(a.a)({},c,{structure:[].concat(Object(i.a)(C.slice(0,o)),Object(i.a)(C.slice(o+1)),Object(i.a)(S?[]:[{id:"trash",path:[],tag:"Trash"}]),[Object(a.a)({},d,{path:["trash"]})]),values:Object(a.a)({},c.values,{trash:{properties:{},style:""}})})}}r(pe(u,e,f)),r(j(u[p.a[e]],m))}}}}}},x=function(e,t){return function(r,u){var c=u().mD,s=c[p.b[e]];if(s){var o=v(s,e),d=g(s);if(!(d<0||o.includes(d))){var l=s.structure[d].id,f="page"===t?"elementCMS_":"element_";if("page"!==t||s.structure[d].isPropagatingItem){var m=s.structure.filter(function(e){return e.path.includes(l)}),b=f+s.currentId,h={currentId:s.currentId+1};if(t){var O=Object(n.a)({},l,b),y=Object(n.a)({},b,s.values[l]),_=m.map(function(e){var t=f+h.currentId;return h.currentId+=1,O[e.id]=t,y[t]=s.values[e.id],Object(a.a)({},e,{id:t})}).map(function(e){return Object(a.a)({},e,{path:e.path.map(function(e){return O[e]?O[e]:e})})});h=Object(a.a)({},s,h,{structure:[].concat(Object(i.a)(s.structure.slice(0,d+m.length)),[Object(a.a)({},s.structure[d],{id:b})],Object(i.a)(_),Object(i.a)(s.structure.slice(d+m.length))),values:Object(a.a)({},s.values,y)})}else h=Object(a.a)({},s,h,{structure:[].concat(Object(i.a)(s.structure.slice(0,d+m.length)),[Object(a.a)({},s.structure[d],{id:b})],Object(i.a)(s.structure.slice(d+m.length))),values:Object(a.a)({},s.values,Object(n.a)({},b,s.values[l]))});r(pe(c,e,h))}}}}},N=function(e,t,r){return function(u,c){var s=c().mD,o=s[p.b[e]];if(o){var d=g(o);if(!(d<0)){var l=o.structure[d];if(l){var f=l.id,m=o.values[f].textContent;if(m){var b,h={currentId:o.currentId},v=m.substr(0,t),O=m.substr(t,r-t),y=m.substr(r),_=[Object(a.a)({},o.structure[d])],E=Object(n.a)({},f,Object(a.a)({},o.values[o.structure[d].id],{textContent:v}));O.length>0&&(b="element_".concat(h.currentId),h.currentId=h.currentId+1,_.push(Object(a.a)({},o.structure[d],{id:b})),E[b]=Object(a.a)({},o.values[o.structure[d].id],{textContent:O})),(y.length>0||0===O.length)&&(b="element_".concat(h.currentId),h.currentId=h.currentId+1,_.push(Object(a.a)({},o.structure[d],{id:b})),E[b]=Object(a.a)({},o.values[o.structure[d].id],{textContent:y})),h=Object(a.a)({},o,h,{structure:[].concat(Object(i.a)(o.structure.slice(0,d)),_,Object(i.a)(o.structure.slice(d+1))),values:Object(a.a)({},o.values,E)}),u(pe(s,e,h))}}}}}},A=function(e,t,r){return function(u,c){var s=c().mD,o=s[p.b[e]];if(o){var d=g(o);if(!(d<0)){var l=o.structure[d];if(l){var f=l.id,m=o.values[f].textContent;if(m){var b,h={currentId:o.currentId},v=m.substr(0,t),O=m.substr(t,r-t),y=m.substr(r),_=[Object(a.a)({},o.structure[d])],E=Object(n.a)({},f,Object(a.a)({},o.values[o.structure[d].id],{textContent:v})),I="element_".concat(h.currentId);h.currentId=h.currentId+1,_.push({id:I,path:Object(i.a)(o.structure[d].path),tag:"span",text:!1}),E[I]={textContent:"",style:"",properties:{}},b="element_".concat(h.currentId),h.currentId=h.currentId+1,_.push(Object(a.a)({},o.structure[d],{path:[].concat(Object(i.a)(o.structure[d].path),[I]),textContent:O,id:b})),E[b]=Object(a.a)({},o.values[o.structure[d].id],{textContent:O}),y.length>0&&(b="element_".concat(h.currentId),h.currentId=h.currentId+1,_.push(Object(a.a)({},o.structure[d],{textContent:y,id:b})),E[b]=Object(a.a)({},o.values[o.structure[d].id],{textContent:y})),h=Object(a.a)({},o,h,{structure:[].concat(Object(i.a)(o.structure.slice(0,d)),_,Object(i.a)(o.structure.slice(d+1))),values:Object(a.a)({},o.values,E)}),u(pe(s,e,h))}}}}}},P=function(e,t,r,i){return function(u,c){var o=c().mD[p.b[e]];if(o){var d=g(o);if(!(d<0)){var l=o.structure[d].id;if(o.values[l].menuItems){var f=o.values[l].menuItems.map(function(e){return e.id===(i||o.values[l].currentMenuItem)?Object(a.a)({},e,Object(n.a)({},t,r)):e});s()(f,o.values[l].menuItems)||u(I(e,"menuItems",f))}}}}},M=function(e){return{type:"MARK_REFRESHING",refreshing:e}},k=function(e){return{type:"MARK_SHOULD_REFRESHING",value:e}},W=function(e,t){return function(r,c){var s=c().mD,o=s[p.b[e]];if(o){var d=v(o,e),l=g(o);if(!(l<=0||!t&&d.includes(l))){var f=o.structure[l].id,m=1,h=["element_0"],O=["element_0"],y={},_=o.structure.filter(function(e){return!t&&e.id===f||e.path.includes(f)}).map(function(e){O.push(e.id);var r=Object(a.a)({},e,{id:"element_".concat(m)});return y[r.id]=Object(a.a)({},o.values[e.id]),e.id===f?r.path=["element_0"]:r.path=["element_0"].concat(Object(i.a)(r.path.slice(r.path.indexOf(f)+(t?1:0)))),h.push(r.id),m++,r}).map(function(e){return Object(a.a)({},e,{path:e.path.map(function(e){return h[O.indexOf(e)]})})});if(0!==_.length){var E={structure:[{id:"element_0",path:[],tag:"Main element",textMode:""}].concat(Object(i.a)(_)),values:Object(a.a)({},y,{element_0:{properties:{},propertiesString:"",textContent:""}}),currentId:m},I=prompt("Name the new plugin","New plugin")||"New plugin",S=Object(b.a)(function(){for(var u=Object(a.a)({},o,{structure:[].concat(Object(i.a)(o.structure.slice(0,l+(t?1:0))),[Object(a.a)({},o.structure[l],{path:[].concat(Object(i.a)(o.structure[l].path),Object(i.a)(t?[o.structure[l].id]:[])),tag:I,text:!1,id:O[1]})],Object(i.a)(o.structure.slice(l+(t?1:0)+_.length))),values:Object(a.a)({},o.values,Object(n.a)({},O[1],{textContent:"",propertiesString:"",properties:{}}))}),c=2;c<O.length;c++)delete u.values[O[c]];r(pe(s,e,u,{throttle:1e3}))});r(u.a("plugin",!1,I,E,S))}}}}},F=function(e){return function(t,r){var n=r().mD,u=n[p.b[e]];if(u){var c=g(u);if(!(c<0)){var s=n.pluginsStructure.find(function(e){return e.name===u.structure[c].tag});if(s&&n.resourcesObjects[s.id]){var o=n.resourcesObjects[s.id].present.structure?n.resourcesObjects[s.id].present:n.resourcesObjects[s.id].draft,d=u.currentId,l=[],f=[],m={},b=o.structure.filter(function(e){return 0!==e.path.length&&("element_02"!==e.path[0]&&"trash"!==e.path[0])}).map(function(e){f.push(e.id);var t=Object(a.a)({},e,{id:"element_".concat(d),path:Object(i.a)(e.path.slice(1))});return m[t.id]=o.values[e.id],l.push(t.id),d++,t}).map(function(e){return Object(a.a)({},e,{path:[].concat(Object(i.a)(u.structure[c].path),Object(i.a)(e.path.map(function(e){return l[f.indexOf(e)]})))})}),h=Object(a.a)({},u,{currentId:d,structure:[].concat(Object(i.a)(u.structure.slice(0,c)),Object(i.a)(b),Object(i.a)(u.structure.slice(c+1))),values:Object(a.a)({},u.values,m)});t(pe(n,e,h))}}}}},L=function(e,t){return function(r,n){var u=n().mD,c=u[p.b[e]];if(c){var s=g(c);if(!(s<0)){var o={currentId:c.currentId},l=h.parseDOM(t),f=[],m={};!function e(t,r){t.forEach(function(t){if(("text"!==t.type||""!==t.data.trim())&&("text"===t.type||"tag"===t.type)){var n="element_".concat(o.currentId);o.currentId=o.currentId+1;var a=t.attribs?d()(t.attribs,"style"):{},u={id:n,path:r,tag:t.name||"div",text:!1},c={textContent:"",style:t.attribs&&t.attribs.style||"",properties:a,propertiesString:JSON.stringify(a)};"text"===t.type&&(u.tag="text",u.text=!0,c.textMode="text",c.textContent=t.data),f.push(u),m[n]=c,t.children&&e(t.children,[].concat(Object(i.a)(r),[n]))}})}(l,c.structure[s].path),o=Object(a.a)({},c,o,{structure:[].concat(Object(i.a)(c.structure.slice(0,s)),f,Object(i.a)(c.structure.slice(s+1))),values:Object(a.a)({},c.values,m)}),r(pe(u,e,o))}}}},V=function(e,t,r){return function(n,u){var c=u().mD,s=c[p.b[e]];if(s){var o=v(s,e),d=g(s);if(!(d<0||o.includes(d))){var l=s.structure[d].id,f=s.structure.find(function(e){return e.id===l});if(f){if("page"===e){if(!f.isPropagatingItem)return;r=!0}var m={},b=[l],h=s.structure.find(function(e){return"trash"===e.id}),O=[],y=function(e){return e.map(function(t,r){return 0===r?Object(a.a)({},t,{path:[]}):Object(a.a)({},t,{path:t.path.slice(t.path.indexOf(e[0].id))})})};if(r){var _=s.structure.filter(function(e){var t=l!==e.id&&!e.path.includes(l);return t||(b.push(e.id),O.push(e)),t}),E={};(O=y(O)).forEach(function(e){return E[e.id]=s.values[e.id]}),t&&"trash"!==f.path[0]&&(m=Object(a.a)({},s,{structure:[].concat(Object(i.a)(_),Object(i.a)(h?[]:[{id:"trash",path:[],tag:"Trash"}]),Object(i.a)(s.structure.filter(function(e){return b.includes(e.id)}).map(function(e){return Object(a.a)({},e,{path:["trash"].concat(Object(i.a)(e.id!==l?e.path.slice(e.path.indexOf(l)):[]))})}))),values:Object(a.a)({},s.values,{trash:{properties:{},style:""}})}))}else if(O=y([f]),t&&"trash"!==f.path[0]){var I=s.structure.map(function(e){return Object(a.a)({},e,{path:e.path.filter(function(e){return e!==l})})});m=Object(a.a)({},s,{structure:[].concat(Object(i.a)(I.slice(0,d)),Object(i.a)(I.slice(d+1)),Object(i.a)(h?[]:[{id:"trash",path:[],tag:"Trash"}]),[Object(a.a)({},f,{path:["trash"]})]),values:Object(a.a)({},s.values,{trash:{properties:{},style:""}})})}t&&"trash"!==f.path[0]&&(n(pe(c,e,m)),n(j(c[p.a[e]],b)));var S={};O.forEach(function(e){return S[e.id]=s.values[e.id]}),n(U({structure:O,values:S,type:"websiterElements"}))}}}}},U=function(e){return{type:"SAVE_TO_CLIPBOARD",data:e}},B=function(e,t){return function(r,n){var u=n(),c=u.mD;if("websiterElements"===u.clipboard.type&&!(u.clipboard.structure.length<1)){var o=c[p.b[e]];if(o){var d=g(o),l=o.structure[d],f=u.clipboard.structure,b=function(e,t,r,n,i){if("page"===i){if(r){if(r.isPropagatingItem)return"notInside";if(r.CMSVariableType&&r.CMSVariableType.indexOf("propagating_")>=0)return"inside"}return!1}var a=Object(m.a)(!1,e,t,i,!0),u=Object(m.a)(!1,r,n,i);if(["html","headBody","trash","CMSRoute","children","childrenTo"].includes(a))return!1;if("isCMSVariable"===a)return"CMSRoute"===u?"inside":r.path.length>0&&"element_02"===r.path[0];if(["element","plugin","text","isElementFromCMSVariable"].includes(a)){if(["html","headbody","childrenTo"].includes(u))return"inside";if("element"===u)return!0;if(["plugin","text","isElementFromCMSVariable"].includes(u))return"notInside"}return!1}(f[0],u.clipboard.values[f[0].id],l,o.values[l.id],e);if(b){var h;"plugin"===e?d<=0&&(d=0,h=!0):"template"===e?(d<0&&(d=o.structure.findIndex(function(e){return"element_1"===e.id})),"element_01"===o.structure[d].id&&(d=o.structure.findIndex(function(e){return"element_1"===e.id})),o.structure[d].path.length<2&&!s()(o.structure[d].path,["element_02"])&&(h=!0)):"page"===e&&(h=b);var v=o.structure[d];v.isChildren?h=!1:v.childrenTo?h=!0:t&&(h=!0),(t||"text"===e||"inside"===b)&&(h=!0),"notInside"===b&&(h=!1);var O={currentId:o.currentId},y={},_={},E=f.map(function(t){var r="element".concat("page"===e?"CMS":"","_").concat(O.currentId);return O.currentId+=1,y[t.id]=r,_[r]=u.clipboard.values[t.id],Object(a.a)({},t,{id:r})}).map(function(e){return Object(a.a)({},e,{path:[].concat(Object(i.a)(v.path),Object(i.a)(h?[v.id]:[]),Object(i.a)(e.path.map(function(e){return y[e]?y[e]:e})))})});O=Object(a.a)({},o,O,{structure:[].concat(Object(i.a)(o.structure.slice(0,d+1)),Object(i.a)(E),Object(i.a)(o.structure.slice(d+1))),values:Object(a.a)({},o.values,_)}),r(pe(c,e,O))}}}}},H=r(11),z=r.n(H),G=r(143),J=r(343),q=r.n(J),K=new G.a,Z=function(e){return{type:"AUTH_SUCCESS",data:e}},Q=function(){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");window.confirm("Are you sure you would like to delete your account?")&&window.confirm("This action cannot be reverted. All your websites will be deleted.")&&b.c.send(JSON.stringify({messageCode:"deleteUser"}))},X=function(e){return function(t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");e?b.c&&b.c.send(JSON.stringify({messageCode:"logoutAll"})):(K.remove("auth_token"),z.a.defaults.headers.common["x-auth-token"]=null,t(Y()))}},Y=function(){return{type:"AUTH_LOGOUT"}},$=function(){return function(e){sessionStorage.setItem("systemRefresh","0");var t=K.get("try_websiter");if(sessionStorage.removeItem("tryWebsiter"),t)return K.remove("try_websiter",{path:"/"}),sessionStorage.setItem("tryWebsiter","1"),void e(Z({_id:"try"}));var r=K.get("auth_token"),n=K.get("rememberme");n&&(K.remove("rememberme",{path:"/"}),"false"===n&&K.remove("auth_token",{path:"/"}));var i=q.a.decode(r);if(z.a.defaults.headers.post["Content-Type"]="application/json",z.a.defaults.headers.put["Content-Type"]="application/json",z.a.defaults.headers.delete["Content-Type"]="application/json",z.a.defaults.headers.common.Accept="application/json",r&&i)return z.a.defaults.headers.common["x-auth-token"]=r,z.a.defaults.headers.post["x-auth-token"]=r,z.a.defaults.headers.get["x-auth-token"]=r,z.a.defaults.headers.delete["x-auth-token"]=r,z.a.defaults.headers.put["x-auth-token"]=r,e({type:"AUTH_START"}),z.a.get("/api/users").then(function(){sessionStorage.removeItem("tryWebsiter"),e(Z({_id:i._id}))}).catch(function(t){K.remove("auth_token",{path:"/"}),e({type:"AUTH_FAIL",error:t.message})});e(X())}},ee=function(e,t){return{type:"CHANGE_BAR_SIZE",key:e,value:t}},te=function(){return function(e,t){if(!sessionStorage.getItem("tryWebsiter")){var r=t(),n=r.mD,i=r.barSizes;b.c.send(JSON.stringify({messageCode:"saveSettings",settings:Object(a.a)({},n.userObject.settings,{barSizes:i})}))}}},re=function(e){return function(t,r){var n,i,a,u,c,s=r().barSizes,o=Math.max(window.innerWidth,700),d=window.innerHeight;if(e)switch(e.key){case"height":(n=e.value)<50&&(n=50),n>d-50&&(n=d-50),t(ee("height",n));break;case"width":(n=e.value)<50&&(n=50),i=n-s.width,u=s.width2-i,c=s.width3,u<50&&(a=u-50,u=50,(c=s.width3+a)<50&&(c=50)),n+u+c+50>o&&(n=o-150,u=50,c=50),t(ee("width",n)),t(ee("width2",u)),t(ee("width3",c));break;case"width2":u=e.value,n=s.width,(i=u-50)<0&&((n+=i)<50&&(n=50),a=n-s.width,c=s.width3-a,u=50),i=n+u-s.width-s.width2,(c=s.width3-i)<50&&(c=50),n+u+c+50>o&&(u=o-n-100),t(ee("width",n)),t(ee("width2",u)),t(ee("width3",c));break;case"width3":c=e.value,n=s.width,u=s.width2,(i=c-50)<0&&((a=(u+=i)-50)<0&&((n+=a)<50&&(n=50),u=50),c=50),n+u+c+50>o&&(c=o-n-u-50),t(ee("width",n)),t(ee("width2",u)),t(ee("width3",c))}else s.height>d-50&&t(ee("height",d-50)),s.width>o-100&&t(ee("width",o-100)),s.width+s.width2>o-50&&t(ee("width2",o-s.width-50))}},ne=function(e){return{type:"SET_ACTIVE_TAB",activeKey:e}},ie=r(28),ae=r.n(ie),ue=function(e){return function(t,r){var n=r().mD,i=ae()(n.userObject);i.settings.currentWebsite=e,t(ce(i))}},ce=function(e){return{type:"SAVE_OBJECT",data:e}},se=function(e){return{type:"CHOOSE_USER_IN_WEBSITE_SHARING",id:e}},oe=function(e){return{type:"SIZE_IS_CHANGING",isChanging:e}},de=function(e){return{type:"SAVE_MAIN_DATA",mD:e}},le=r(151),fe=function(e,t){return function(r,n){var i=n().mD,a=ae()(i.userObject);a.settings.websites[a.settings.currentWebsite]||(a.settings.websites[a.settings.currentWebsite]={}),i.globalSettingsPageId!==e&&"page"===t&&(a.settings.websites[a.settings.currentWebsite].currentPageFSBId=e),a.settings.websites[a.settings.currentWebsite][p.a[t]]=e,r(ce(a))}},pe=function(e,t,r,n,i,a){return{type:"ADD_RESOURCE_VERSION",mD:e,resourceType:t,draft:r,meta:n,isNotForHistory:i,globalSettings:a}},me=function(e){return{type:"SET_ACTIVE_CONTAINER",container:e}},be=function(e){return{type:"UNSET_ACTIVE_CONTAINER",container:e}},he=function(e){return{type:"REMOVE_RESOURCE_FROM_UNSAVED",_id:e._id}},ge=function(e){return{type:"REMOVE_RESOURCE_FROM_NEW_VERSIONS",_id:e._id}},ve=function(e){return{type:"SET_ACTIVE_PINNED_ELEMENT",pinnedElement:e}},Oe=function(e){return{type:"REMOVE_PINNED_ELEMENT",pinnedElement:e}},ye=function(e,t,r){return{type:"ADD_PINNED_ELEMENT",resourceType:e,resource:t,element:r}},_e=function(e){return{type:"PIN_PINNED_ELEMENT",pinnedElement:e}},Ee=r(134),Ie=r.n(Ee),Se=r(168).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),je=function(e){return function(t,r){t(we(e))}},we=function(e){return{type:"ADD_RESOURCE",data:e}},Ce=function(e){return{type:"DELETE_RESOURCE",data:e}},Te=function(e){return{type:"REVERT_RESOURCE",data:e}},Re=function(e,t){return function(r,n){if(e){var i=n().mD,a=d()(ae()(i.resourcesObjects[e.resourceId]),["settings"]);if(a&&a.__v===e.resource.__v-1)return a.websites=Se.patch(a.websites,e.resource.__patch__),a.__v=e.resource.__v,void r(je(a));Ne(e.resource._id,e.type,t)}}},De=function(e,t){return function(r,n){if(e){var i=n().mD,a=ae()(i.resourcesObjects[e.resourceId]);if(a&&a.__v===e.resource.__v-1){var u=Se.patch(a,e.resource.__patch__);return u.__v=e.resource.__v,void r(je(u))}Ne(e.resource._id,e.type,t)}}},xe=function(e,t){return function(r,n){if(e){var i=n().mD,a=ae()(i.resourcesObjects[e.resourceId]);if(a&&a.__v===e.resource.__v-1)return Ie()(e.resource.__patch__)||(a.draft=Se.patch(a.draft,e.resource.__patch__)),a.__v=e.resource.__v,void r(je(a));Ne(e.resource._id,e.type,t)}}},Ne=function(e,t,r){r&&3!==r.readyState&&r.send(JSON.stringify({messageCode:"requestResource",id:e,type:t}))};r(136);r.d(t,"k",function(){return _}),r.d(t,"a",function(){return R}),r.d(t,"p",function(){return D}),r.d(t,"u",function(){return x}),r.d(t,"H",function(){return O}),r.d(t,"I",function(){return y}),r.d(t,"h",function(){return E}),r.d(t,"i",function(){return I}),r.d(t,"v",function(){return w}),r.d(t,"U",function(){return C}),r.d(t,"J",function(){return S}),r.d(t,"R",function(){return N}),r.d(t,"S",function(){return A}),r.d(t,"j",function(){return P}),r.d(t,"x",function(){return M}),r.d(t,"z",function(){return W}),r.d(t,"t",function(){return F}),r.d(t,"T",function(){return T}),r.d(t,"y",function(){return k}),r.d(t,"A",function(){return L}),r.d(t,"o",function(){return V}),r.d(t,"B",function(){return B}),r.d(t,"w",function(){return X}),r.d(t,"e",function(){return $}),r.d(t,"s",function(){return Q}),r.d(t,"f",function(){return re}),r.d(t,"g",function(){return ee}),r.d(t,"M",function(){return te}),r.d(t,"P",function(){return ne}),r.d(t,"Q",function(){return oe}),r.d(t,"n",function(){return ue}),r.d(t,"m",function(){return se}),r.d(t,"L",function(){return ce}),r.d(t,"K",function(){return de}),r.d(t,"Z",function(){return le.c}),r.d(t,"q",function(){return le.a}),r.d(t,"l",function(){return fe}),r.d(t,"d",function(){return pe}),r.d(t,"F",function(){return he}),r.d(t,"E",function(){return ge}),r.d(t,"N",function(){return me}),r.d(t,"V",function(){return be}),r.d(t,"O",function(){return ve}),r.d(t,"D",function(){return Oe}),r.d(t,"b",function(){return ye}),r.d(t,"C",function(){return _e}),r.d(t,"c",function(){return je}),r.d(t,"X",function(){return Re}),r.d(t,"Y",function(){return De}),r.d(t,"W",function(){return xe}),r.d(t,"r",function(){return Ce}),r.d(t,"G",function(){return Te})},136:function(e,t,r){"use strict";var n=r(2),i=r(66);t.a=function(e){var t,r,a,u,c,s,o,d,l,f,p,m,b,h,g,v,O,y,_,E,I,S,j,w,C,T,R,D,x,N,A,P,M,k,W,F=null,L="",V="",U="",B="",H="",z="",G="",J="",q="",K=0,Z=e.resourcesObjects,Q=e.userId,X=e.tryWebsiter,Y=e.pinnedElements;if(k=e.courses,Q&&(F=e.resourcesObjects[Q])&&(W=F.courses,(t=F.websites)&&t.length>0&&F.settings&&(F.settings.currentWebsite&&(r=t.find(function(e){if(F)return e.id===F.settings.currentWebsite})),r&&(a=r.id,u=Z[a])))){c=u.pagesStructure,s=u.templatesStructure,o=u.pluginsStructure,d=u.filesStructure,K=u.nextFileId||0;var $=F.settings.websites[a];if($){L=$.currentPageId,V=$.currentPageFSBId,U=$.currentTemplateId,B=$.currentPluginId,H=$.currentFileId,l=c.find(function(e){return e.id===L}),f=c.find(function(e){return e.id===V}),p=s.find(function(e){return e.id===U}),m=o.find(function(e){return e.id===B}),b=d.find(function(e){return e.id===H}),l&&((h=Z[L])&&(y=h.present.structure?h.present:h.draft),(z=l.template||"")&&(R=s.find(function(e){return e.name===z}))&&(G=R.id,(D=Z[G])&&(x=D.present.structure?D.present:D.draft))),f&&((g=Z[V])&&(_=g.present.structure?g.present:g.draft),(J=f.template||"")&&(N=s.find(function(e){return e.name===J&&!e.hidden}))&&(q=N.id,(A=Z[q])&&(P=A.present.structure?A.present:A.draft))),p&&(v=Z[U])&&(E=v.present.structure?v.present:v.draft),m&&(O=Z[B])&&(I=O.present.structure?O.present:O.draft);var ee=c.find(function(e){return e.generalSettings});ee&&(S=ee.id,(j=Z[S])&&(w=j.present.structure?j.present:j.draft));var te=s.find(function(e){return e.generalSettings});if(te){C=te.id;var re=Z[C];re&&(T=re.present.structure?re.present:re.draft)}}}return!0,M=Y.map(function(e){var t=e.resource&&Object(i.c)(e.resource,Z);if(t){var r=t.structure.find(function(t){return t.id===e.element});if(r)return Object(n.a)({},e,{title:r.tag})}return null}).filter(function(e){return null!==e}),{userObject:F||null,websites:t,currentWebsiteItem:r,currentWebsiteId:a,currentWebsiteObject:u,pagesStructure:c||[],templatesStructure:s||[],pluginsStructure:o||[],filesStructure:d||[],currentPageId:L,currentPageFSBId:V,currentTemplateId:U,currentPluginId:B,currentFileId:H,currentPageItem:l,currentPageFSBItem:f,currentTemplateItem:p,currentPluginItem:m,currentFileItem:b,currentPageObject:h,currentPageFSBObject:g,currentTemplateObject:v,currentPluginObject:O,currentPageDraft:y,currentPageFSBDraft:_,currentTemplateDraft:E,currentPluginDraft:I,globalSettingsPageId:S,globalSettingsPageObject:j,globalSettingsPageDraft:w,globalSettingsTemplateId:C,globalSettingsTemplateDraft:T,pageTemplateName:z,pageTemplateId:G,pageTemplateItem:R,pageTemplateObject:D,pageTemplateDraft:x,pageTemplateFSBName:J,pageTemplateFSBId:q,pageTemplateFSBItem:N,pageTemplateFSBObject:A,pageTemplateFSBDraft:P,resourcesObjects:Z,userId:Q,tryWebsiter:X,nextFileId:K,prod:!0,pinnedElementsWithTitles:M,courses:k,userCourses:W}}},151:function(e,t,r){"use strict";r.d(t,"c",function(){return v}),r.d(t,"d",function(){return O}),r.d(t,"b",function(){return _}),r.d(t,"a",function(){return I});var n=r(32),i=r.n(n),a=r(227),u=r(4),c=r(2),s=r(11),o=r.n(s),d=r(8),l=r(109),f=r(97),p=r(344),m=r.n(p),b=function(e){return{type:"ACTION_FAIL_IMAGE_UPLOAD",error:e}},h=function(e,t,r){return function(n,i){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var a=e.file,u=e.thumbnail,s=e.resolution||{width:"unknown",height:"unknown"},d=i().mD;if(d.currentWebsiteId){var l=a.name.replace(/([^a-zA-Z0-9\\.\\-])/g,"_"),f=d.currentWebsiteId+"/"+l,p="",m=0;if(!t)for(;d.filesStructure.findIndex(function(e){return f+p===e.serverName})>=0;)p="_"+ ++m;var h={size:a.size,name:t?t.name:l,serverName:t?t.serverName:f+p,type:t?t.type:e.type,editorMode:r,file:a,v:t?t.v+1:1,resolution:s},v=u?{size:u.size,name:h.name+u.name,serverName:h.serverName+u.name,type:u.type,editorMode:r,file:u}:{};return o.a.post("/api/sign-s3",Object(c.a)({},{fileName:h.serverName,fileType:h.type,fileSize:h.size,websiteId:d.currentWebsiteId},u?{thumbnailName:v.serverName,thumbnailType:v.type,thumbnailSize:v.size}:{})).then(function(e){n(g(h,v,e.data,d.currentWebsiteId,t))}).catch(function(e){n(b(e.message)),400===e.response.status&&alert(e.response.data)})}}},g=function(e,t,r,n,i){return function(a,s){return sessionStorage.getItem("tryWebsiter")?alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login"):(r.signedRequestThumbnail&&t.file&&o.a.put(r.signedRequestThumbnail,t.file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){}).catch(function(e){a(b(e.message))}),o.a.put(r.signedRequest,e.file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(o){if(d.c){var p,m=s().mD,b={id:i?i.id:"file_"+m.nextFileId,path:i?i.path:[],size:e.size+(t.size||0),name:e.name,serverName:e.serverName,type:e.type,editorMode:e.editorMode,url:r.url,v:e.v,resolution:e.resolution,modifiedDate:Date.now()};p=m.currentFileItem&&m.currentFileId?i?[].concat(Object(u.a)(m.filesStructure.slice(0,m.filesStructure.findIndex(function(e){return e.id===i.id}))),[Object(c.a)({},b,{createdDate:i.createdDate})],Object(u.a)(m.filesStructure.slice(m.filesStructure.findIndex(function(e){return e.id===i.id})+1))):[].concat(Object(u.a)(m.filesStructure.slice(0,m.filesStructure.findIndex(function(e){return e.id===m.currentFileId})+1)),[Object(c.a)({},b,{path:m.currentFileItem.path,createdDate:Date.now()})],Object(u.a)(m.filesStructure.slice(m.filesStructure.findIndex(function(e){return e.id===m.currentFileId})+1))):[].concat(Object(u.a)(m.filesStructure),[Object(c.a)({},b,{createdDate:i?i.createdDate:Date.now()})]),p=Object(f.a)(p),a(l.k("website",{nextFileId:i?m.nextFileId:m.nextFileId+1,filesStructure:p,storage:r.newStorage},n))}a({type:"ACTION_SUCCESS_IMAGE_UPLOAD"})}).catch(function(e){a(b(e.message))}))}},v=function(e,t,r,n,u){return function(c){var s=e[0];if(null==s)return alert("No file selected.");c({type:"ACTION_START_IMAGE_UPLOAD"});var o=new FileReader;o.onload=function(){var e=Object(a.a)(i.a.mark(function e(a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.fromBuffer(a.target.result);case 2:(o=(o=e.sent)?o.mime:n?"text/css":u||"")&&o.indexOf("image")>=0?y(s,{width:220,height:220},function(e){O(e,"/120").then(function(e){E(s,function(n){c(h({file:s,type:o,thumbnail:e,resolution:n},t,r))})})}):c(h({file:s,type:o},t,r));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),o.readAsArrayBuffer(s)}},O=function(e,t,r){return r=r||(e.match(/^data:([^;]+);/)||"")[1],fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:r})})},y=function(e,t,r){if(e){var n=new FileReader;n.onload=function(e){_(e.target.result,t,r)},n.readAsDataURL(e)}},_=function(e,t,r){var n,i=new Image;i.onload=function(){var e=i.width/t.width,a=i.height/t.height,u=document.createElement("canvas"),c=u.getContext("2d");u.width=i.width,u.height=i.height,c.drawImage(i,0,0),(e>1||a>1)&&(i.width>i.height?(u.height=i.height/i.width*t.width,u.width=t.width):(u.width=i.width/i.height*t.width,u.height=t.width)),c.drawImage(u,0,0,u.width,u.height),c.drawImage(i,0,0,u.width,u.height),n=u.toDataURL(),r(n)},i.src=e},E=function(e,t){var r,n=window.URL||window.webkitURL;if(e){r=new Image;var i=n.createObjectURL(e);r.onload=function(){t({width:this.width,height:this.height}),n.revokeObjectURL(i)},r.src=i}},I=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;window.confirm("Are you sure you want to delete this file? The file will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.")&&d.c.send(JSON.stringify({messageCode:"deleteImage",fileId:e,_id:n.currentWebsiteId}))}}},203:function(e,t,r){"use strict";var n=r(66);t.a=function(e,t,r,i,a){var u;return e&&((t=e.resourceDraftStructure.find(function(t){return t.id===e.currentBox}))&&(r=e.resourceDraftValues[t.id]),i=e.mode),t?"page"===i?u=t.CMSVariableType&&t.CMSVariableType.indexOf("propagating_")>=0?"isFromPropagatingPlugin":"isElementFromCMSVariable":(u=0!==t.path.length||a?1!==t.path.length||a||"plugin"===i?Object(n.b)(t.tag.charAt(0))?"plugin":t.text?"text":"element":"headBody":"trash"===t.id?"trash":"element_02"===t.id?"CMSRoute":"html",t.isChildren&&(u="children"),t.childrenTo&&(u="childrenTo"),t.isCMSVariable&&(u="isCMSVariable"),t.isElementFromCMSVariable&&(u=r.CMSVariableType.indexOf("propagating_")>=0?"isFromPropagatingPlugin":"isElementFromCMSVariable")):u="none",u}},206:function(e,t,r){e.exports={Container:"Auth_Container__KMvOh",socialButtons:"Auth_socialButtons__37I7_"}},207:function(e,t,r){e.exports={Lesson:"Courses_Lesson__1v1A4"}},345:function(e,t,r){e.exports={Cover:"Spinner_Cover__3iRbu"}},390:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(5),u=r.n(a),c=r(341),s=r(769),o=r(37),d=r(26),l=r(99),f=r(11),p=r.n(f),m=r(2),b=r(222),h=r.n(b),g="redux-throttle/CANCEL",v="redux-throttle/FLUSH";function O(e,t,r){if(t.payload&&t.payload.type){var n=t.payload.type;return Array.isArray(n)||(n=[n]),void Object.keys(e).filter(function(e){return n.includes(e)}).forEach(function(t){return e[t][r]()})}Object.keys(e).forEach(function(t){return e[t][r]()})}r(419);var y=r(51),_=r(52),E=r(54),I=r(53),S=r(55),j=r(770),w=r(767),C=r(768),T=r(771),R=r(13),D=function(e){function t(){return Object(y.a)(this,t),Object(E.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return i.a.createElement(C.a,{to:"/login"})}}]),t}(n.Component),x=Object(o.b)(null,function(e){return{onLogout:function(){return e(R.w())}}})(D),N=function(e){return function(t){function r(){var e,t;Object(y.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=Object(E.a)(this,(e=Object(I.a)(r)).call.apply(e,[this].concat(i)))).state={component:null},t}return Object(S.a)(r,t),Object(_.a)(r,[{key:"componentDidMount",value:function(){var t=this;e().then(function(e){t.setState({component:e.default})})}},{key:"render",value:function(){var e=this.state.component;return e?i.a.createElement(e,this.props):i.a.createElement("div",null,"Loading...")}}]),r}(n.Component)},A=r(83),P=r(339),M=r(143),k=r(146),W=r(206),F=r.n(W),L=r(110),V=new M.a,U=function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),r=t[0],a=t[1],u=Object(n.useState)(!1),c=Object(A.a)(u,2),s=c[0],o=c[1];Object(n.useEffect)(function(){l()});var d="?rememberme=false";r&&(d="?rememberme=true");var l=function(){V.get("cookies_consent")&&o(!0)},f="http://my.websiter.dev/api/auth/";return i.a.createElement("div",{className:F.a.Container},s?i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Continue with:"),i.a.createElement("div",{className:F.a.socialButtons},i.a.createElement("a",{href:f+"google/start".concat(d)},i.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#4285F4" d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"></path></svg>'}),i.a.createElement("div",null,"GOOGLE")),i.a.createElement("a",{href:f+"facebook/start".concat(d)},i.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#1877F2" d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg>'}),i.a.createElement("div",null,"FACEBOOK")),i.a.createElement("a",{href:f+"github/start".concat(d)},i.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 16 16"><path fill="#333" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg>'}),i.a.createElement("div",null,"GITHUB"))),i.a.createElement(P.a,{checked:r,onChange:function(){return a(!r)}},"Remember me")):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"We use cookies only for login purposes. In order to proceed you need to agree with the use of cookies."),i.a.createElement(k.a,{onClick:function(){V.set("cookies_consent","true",{path:"/",maxAge:3153e4}),l()}},"Agree"),i.a.createElement(k.a,{onClick:function(){window.open("http://websiter.dev","_self")}},"Return to the homepage")))},B=r(345),H=r.n(B),z=r(346),G=r(348),J=r.n(G),q=function(e){var t=i.a.createElement(z.a,{indicator:i.a.createElement(J.a,{style:{fontSize:74},spin:!0}),tip:"Loading..."});return e.cover?i.a.createElement("div",{className:H.a.Cover,"data-testid":e.datatestid||"cover"},t):t},K=(r(201),r(132),r(701),r(703),r(705),r(762),r(709),r(333),r(712),r(714),r(716),r(718),r(720),r(722),r(724),r(761),r(728),r(82)),Z=r(207),Q=Object(o.b)(function(e){return{courses:e.courses,userCourses:e.userCourses}},function(e){return{getCourses:function(){return e(actions.getCourses())}}})(function(e){return Object(n.useEffect)(function(){e.courses&&e.userCourses||e.getCourses()}),i.a.createElement(K.a,{title:"Internet basics"},i.a.createElement("a",{href:"https://websiter.dev"},i.a.createElement(K.a,{className:Z.Lesson,type:"inner",hoverable:!0,cover:i.a.createElement("div",{style:{backgroundImage:'url("https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png")',height:"200px",backgroundSize:"cover",backgroundPosition:"center"}}),actions:["Seen","Tasks: 1/2"]},i.a.createElement(K.a.Meta,{title:"How internet works",description:"Get a basic understanding of how computers are connected in the world wide web."}))),i.a.createElement("a",{href:"https://websiter.dev"},i.a.createElement(K.a,{className:Z.Lesson,type:"inner",hoverable:!0,cover:i.a.createElement("div",{style:{backgroundImage:'url("https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png")',height:"200px",backgroundSize:"cover",backgroundPosition:"center"}}),actions:["Seen","Tasks: 1/2"]},i.a.createElement(K.a.Meta,{title:"How internet works",description:"Get a basic understanding of how computers are connected in the world wide web."}))))}),X=r(766),Y=r(763),$=r(103),ee=r(357),te=r.n(ee),re=r(358),ne=r.n(re),ie=r(356),ae=r.n(ie),ue=r(354),ce=r.n(ue),se=r(336),oe=r.n(se),de=r(355),le=r.n(de),fe=X.a.Header,pe=X.a.Sider,me=X.a.Content,be=Object(T.a)(function(e){var t=Object(n.useState)(),r=Object(A.a)(t,2),a=r[0],u=r[1],c=function(){u(!a)};return i.a.createElement(X.a,{style:{height:"100%"}},i.a.createElement(pe,{collapsible:!0,collapsed:a,onCollapse:c},i.a.createElement("div",{className:$.componentsLayoutDemoCustomTriggerLogo}),i.a.createElement(Y.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["dashboard"],onSelect:function(t){var r=t.key;return e.history.push("/"+r)}},i.a.createElement(Y.a.Item,{key:"dashboard",icon:i.a.createElement(ce.a,null)},"Courses"),i.a.createElement(Y.a.Item,{key:"websites",icon:i.a.createElement(le.a,null)},"Websites"),i.a.createElement(Y.a.Item,{key:"account",icon:i.a.createElement(ae.a,null)},"Account"),i.a.createElement(Y.a.Item,{key:"logout",icon:i.a.createElement(oe.a,null)},"Logout"))),i.a.createElement(X.a,{className:"site-layout"},i.a.createElement(fe,{className:$.siteLayoutSiteLayoutBackground,style:{padding:0}},i.a.createElement(a?te.a:ne.a,{className:$.componentsLayoutDemoCustomTriggerTrigger,onClick:c})),i.a.createElement(me,{className:$.siteLayoutSiteLayoutBackground,style:{margin:"24px 16px",padding:24,minHeight:280}},e.children)))}),he=N(function(){return Promise.all([r.e(3),r.e(4)]).then(r.bind(null,1331))}),ge=function(e){function t(){return Object(y.a)(this,t),Object(E.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=this.props.isAuthenticated,t=i.a.createElement(j.a,null,i.a.createElement(w.a,{path:"/courses",exact:!0,render:function(t){return i.a.createElement(Q,Object.assign({},t,{isAuthed:e}))}}),i.a.createElement(w.a,{path:"cources/:courceId/:lessonId",exact:!0,component:he}),e&&i.a.createElement(w.a,{path:"/websites",exact:!0,component:he}),e&&i.a.createElement(w.a,{path:"/account",exact:!0,component:he}),e&&i.a.createElement(w.a,{path:"/logout",exact:!0,component:x}),e&&i.a.createElement(C.a,{to:"/courses"}),!e&&i.a.createElement(w.a,{path:"/login",exact:!0,component:U}),!e&&i.a.createElement(C.a,{to:"/login"}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{height:"100%"}},"/login"!==this.props.location.pathname?i.a.createElement(be,null,t):t),this.props.loading&&i.a.createElement(q,{cover:!0}))}}]),t}(n.Component),ve=Object(T.a)(Object(o.b)(function(e){return{isAuthenticated:null!==e.userId,loading:e.loading}},function(e){return{onTryAutoSignup:function(){return e(R.e())}}})(ge)),Oe=r(4),ye=(r(25),r(7)),_e=r(28),Ee=r.n(_e),Ie=r(30),Se=r.n(Ie),je=r(66),we=r(33),Ce=r.n(we),Te=function(e,t){return Se()({structure:e.structure.map(function(e){return Ce()(e,["expanded","children","itemPath","itemIndex"])}),values:e.values},{structure:t.structure.map(function(e){return Ce()(e,["expanded","children","itemPath","itemIndex"])}),values:t.values})},Re=(r(168).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),function(e,t){e.notSavedResources=e.notSavedResources.filter(function(e){return e!==t._id})}),De=function(e,t){e.newVersionResources=e.newVersionResources.filter(function(e){return e!==t._id})},xe=r(361),Ne={resourcesObjects:{},error:null,loading:!1,domainNotOk:!1,customDomainNotOk:!1,maxStorage:0,uploadingImage:!1,currentBoxInPlugin:"",currentImage:"",sizeIsChanging:!1,notSavedResources:[],newVersionResources:[],pageZoom:100,hoveredElementId:null,hoveredElementSize:{},isRefreshing:!1,userId:null,barSizes:{height:200,width:400,width2:200,width3:200},findMode:null,hoverMode:"",fromFrame:!1,search:{},shouldRefresh:!1,tryWebsiter:!1,currentUserInWebsiteSharing:"",mD:{},activeContainer:"",clipboard:{},pinnedElements:[],activePinnedElement:"",currentPinnedElementId:0,activeTab:"page"},Ae=Object(xe.a)(Ne,{REMOVE_RESOURCE_FROM_UNSAVED:function(e,t){return Re(e,t)},REMOVE_RESOURCE_FROM_NEW_VERSIONS:function(e,t){return De(e,t)},ACTION_START_IMAGE_UPLOAD:function(e,t){return function(e){return Object(m.a)({},e,{error:null,loading:!0})}(e)},ACTION_FAIL_IMAGE_UPLOAD:function(e,t){return function(e,t){return Object(m.a)({},e,{error:t.error,loading:!1})}(e,t)},ACTION_SUCCESS_IMAGE_UPLOAD:function(e,t){return function(e){return Object(m.a)({},e,{error:null,loading:!1})}(e)},CHOOSE_IMAGE:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;e.currentImage=t.image}(e,t)},SIZE_IS_CHANGING:function(e,t){e.sizeIsChanging=t.isChanging},ACTION_START:function(e,t){e.error=null,e.pagesLoading=!0},ACTION_FAIL:function(e,t){e.error=t.error,e.pagesLoading=!1},ACTION_SUCCESS:function(e,t){e.error=null,e.pagesLoading=!1},ADD_RESOURCE_VERSION:function(e,t){return function(e,t){var r=Ee()(t.globalSettings?t.mD.globalSettingsPageObject:t.mD[ye.d[t.resourceType]]);if(!Se()(r.present,t.draft))if(t.isNotForHistory)r.present=t.draft,e.resourcesObjects[r._id]=r;else{var n=Object(m.a)({},t.draft);if(t.draft.structure&&["template","plugin"].includes(t.resourceType)){var i=[];t.draft.structure.forEach(function(e){e.tag.length>0&&e.path.length>0&&(!Object(je.b)(e.tag.charAt(0))||e.childrenTo||e.isChildren||e.isElementFromCMSVariable||i.push({name:e.tag,type:"plugin"}))}),n.connectedResources=i}var a=t.globalSettings?t.mD.globalSettingsPageId:t.mD[ye.a[t.resourceType]];Te(r.present.structure?r.present:r.draft,n)||e.notSavedResources.includes(a)||e.notSavedResources.push(a),r.present=n,r.future=[],e.resourcesObjects[r._id]=r}}(e,t)},AUTH_START:function(e,t){return function(e){e.loading=!0,e.error=null}(e)},AUTH_SUCCESS:function(e,t){return function(e,t){e.userId=t.data._id,e.accountInfo=t.data.accountInfo,e.error=null,e.loading=!1,e.barSizes=Object(m.a)({},e.barSizes,t.data.barSizes),e.tryWebsiter=t.data.tryWebsiter}(e,t)},AUTH_FAIL:function(e,t){return function(e,t){e.loading=!1,e.error=t.error,e.userId=null}(e,t)},AUTH_LOGOUT:function(e,t){return function(e){e.userId=null}(e)},CHANGE_BAR_SIZE:function(e,t){return function(e,t){e.barSizes[t.key]=t.value}(e,t)},SAVE_HOVERED_ELEMENT_RECT:function(e,t){return function(e,t){t.path.length>0&&function e(r,n,i){n<r.length-1?(i[r[n].id]||(i[r[n].id]={plugin:r[n].plugin,children:{}}),e(t.path,n+1,i[r[n].id].children)):i[r[n].id]=Object(m.a)({plugin:r[n].plugin,children:{}},t.size)}(t.path,0,e.hoveredElementSize)}(e,t)},REMOVE_FROM_HOVERED_SIZES:function(e,t){return function(e,t){!function e(r){for(var n in r)if(r[n].plugin===t.currentResource)for(var i in r[n].children)t.removedElements.includes(i)&&delete r[n].children[i];else e(r.children)}(e.hoveredElementSize)}(e,t)},HOVER_ELEMENT:function(e,t){e.hoveredElementId=t.id,e.hoverMode=t.mode,e.fromFrame=t.fromFrame},UNHOVER_ELEMENT:function(e,t){e.hoveredElementId=null,e.fromFrame=!1},TOGGLE_FIND_MODE:function(e,t){return function(e,t){t.value?e.findMode===t.value?e.findMode=null:e.findMode=t.value:e.findMode=null}(e,t)},MARK_REFRESHING:function(e,t){e.isRefreshing=t.refreshing},MARK_SHOULD_REFRESHING:function(e,t){e.shouldRefresh=t.value},CHOOSE_USER_IN_WEBSITE_SHARING:function(e,t){e.currentUserInWebsiteSharing=t.id},SET_CURRENT_SITEBUILDER_MODE:function(e,t){e.currentSiteBuilderMode=t.mode},SAVE_MAIN_DATA:function(e,t){e.mD=t.mD},ADD_RESOURCE:function(e,t){var r=e.mD;if(t.data&&t.data._id){if(r.resourcesObjects[t.data._id])if(r.resourcesObjects[t.data._id].draft)e.resourcesObjects[t.data._id]=Object(m.a)({},r.resourcesObjects[t.data._id],{draft:t.data.draft,__v:t.data.__v}),!r.resourcesObjects[t.data._id].present.structure||Te(t.data.draft,r.resourcesObjects[t.data._id].present)?(Re(e,{_id:t.data._id}),De(e,{_id:t.data._id})):(function(e,t){e.notSavedResources.includes(t._id)||e.notSavedResources.push(t._id)}(e,{_id:t.data._id}),function(e,t){e.newVersionResources.includes(t._id)||e.newVersionResources.push(t._id)}(e,{_id:t.data._id}));else e.resourcesObjects[t.data._id]=Object(m.a)({},e.resourcesObjects[t.data._id],t.data);else e.resourcesObjects[t.data._id]=t.data;t.data._id.toString()===r.userId.toString()&&t.data.settings&&t.data.settings.barSizes&&(e.barSizes=t.data.settings.barSizes)}},DELETE_RESOURCE:function(e,t){t.data&&delete e.resourcesObjects[t.data.resourceId]},REVERT_RESOURCE:function(e,t){t.data&&(e.resourcesObjects[t.data._id].present=t.data.draft,"draft"===t.data.to&&(Re(e,{_id:t.data._id}),De(e,{_id:t.data._id})))},SAVE_OBJECT:function(e,t){t.data&&(e.resourcesObjects[t.data._id]=t.data)},SET_ACTIVE_CONTAINER:function(e,t){e.activeContainer!==t.container&&(e.activeContainer=t.container)},UNSET_ACTIVE_CONTAINER:function(e,t){e.activeContainer===t.container&&(e.activeContainer="")},SAVE_TO_CLIPBOARD:function(e,t){e.clipboard=t.data},SET_ACTIVE_PINNED_ELEMENT:function(e,t){e.activePinnedElement=t.pinnedElement;var r=e.pinnedElements.find(function(e){return e.id.toString()===t.pinnedElement.toString()});if(r){e.activeTab=r.resourceType,e.mD.currentWebsiteId&&(e.resourcesObjects[e.userId].settings.websites[e.mD.currentWebsiteId][ye.a[r.resourceType]]=r.resource);var n=e.resourcesObjects[r.resource];n&&(n.present.structure?e.resourcesObjects[r.resource].present=Object(m.a)({},n.present,{currentBox:r.element}):e.resourcesObjects[r.resource].draft=Object(m.a)({},n.draft,{currentBox:r.element}))}},REMOVE_PINNED_ELEMENT:function(e,t){e.pinnedElements=e.pinnedElements.filter(function(e){return e.id.toString()!==t.pinnedElement.toString()})},SET_ACTIVE_TAB:function(e,t){e.activeTab=t.activeKey},ADD_PINNED_ELEMENT:function(e,t){var r=e.pinnedElements.find(function(e){return e.resourceType===t.resourceType&&e.resource===t.resource&&e.element===t.element});if(r)e.activePinnedElement=r.id;else{var n=e.pinnedElements.findIndex(function(e){return!e.pinned});if(n>-1){var i=Object(Oe.a)(e.pinnedElements);i[n]=Object(m.a)({},i[n],t),e.pinnedElements=i,e.activePinnedElement=i[n].id}else e.currentPinnedElementId,n=Object(m.a)({},t,{id:"pinned_"+e.currentPinnedElementId}),e.currentPinnedElementId++,e.pinnedElements=[n].concat(Object(Oe.a)(e.pinnedElements)),e.activePinnedElement=n.id}},PIN_PINNED_ELEMENT:function(e,t){e.pinnedElements=e.pinnedElements.map(function(e){return e.id===t.pinnedElement?Object(m.a)({},e,{pinned:!0}):e})}});r(760);r.d(t,"store",function(){return Me}),p.a.defaults.baseURL="https://api.websiter.dev";var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return function(n){return function(n){return function(i){if(i.type===g)return O(r,i,"cancel"),n(i);if(i.type===v)return O(r,i,"flush"),n(i);var a=(i.meta||{}).throttle;if(!a)return n(i);if(r[i.type])return r[i.type](i);var u=e,c=t;return isNaN(a)||!0===a?"object"===typeof a&&(u=a.wait||e,c=Object(m.a)({},t,a)):u=a,r[i.type]=h()(n,u,c),r[i.type](i)}}}}(300,{leading:!0,trailing:!0}),Me=Object(d.createStore)(Ae,Object(c.composeWithDevTools)(Object(d.applyMiddleware)(Pe,l.a))),ke=i.a.createElement(o.a,{store:Me},i.a.createElement(s.a,null,i.a.createElement(ve,null))),We=window.self!==window.top,Fe=document.getElementById("root");null===Fe||We||u.a.render(ke,Fe)},392:function(e,t,r){e.exports=r(390)},419:function(e,t,r){},514:function(e,t){},521:function(e,t){},523:function(e,t){},560:function(e,t){},561:function(e,t){},66:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"c",function(){return d}),r.d(t,"a",function(){return p}),r.d(t,"d",function(){return m}),r.d(t,"e",function(){return b});var n=r(134),i=r.n(n),a=r(30),u=r.n(a),c=r(33),s=r.n(c),o=function(e){if(e===e.toUpperCase()&&e!==e.toLowerCase())return!0},d=function(e,t){return e&&t[e]?i()(t[e].present)?t[e].draft:t[e].present:null};function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function p(e){var t=function t(r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}({},f(r,["path"]),{children:e.filter(function(e){return e.path[e.path.length-1]===r.id}).map(function(e){return t(e)})})};return e.filter(function(e){return 0===e.path.length}).map(function(e){return t(e)})}var m=function(e){if("string"===typeof e){var t=e.length;if(t>2&&"$"===e.charAt(0)&&"$"===e.charAt(t-1))return e.substr(1,t-2)}return!1},b=function(e,t){return u()(e.map(function(e){return s()(e,["expanded","children","itemPath"])}),t.map(function(e){return s()(e,["expanded","children","itemPath"])}))}},7:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return c});var n={page:"pagesStructure",plugin:"pluginsStructure",template:"templatesStructure",file:"filesStructure"},i={page:"currentPageId",plugin:"currentPluginId",template:"currentTemplateId",file:"currentFileId"},a={page:"currentPageDraft",plugin:"currentPluginDraft",template:"currentTemplateDraft",file:"currentFileDraft"},u={page:"currentPageItem",plugin:"currentPluginItem",template:"currentTemplateItem",file:"currentFileItem"},c={page:"currentPageObject",plugin:"currentPluginObject",template:"currentTemplateObject",file:"currentFileObject"}},728:function(e,t,r){},8:function(e,t,r){"use strict";var n=r(51),i=r(52),a=r(54),u=r(53),c=r(55),s=r(0),o=r.n(s),d=r(37),l=r(11),f=r.n(l),p=r(13),m=function e(t,r,n,i,a){a[r]||n.push({id:r,type:"resource"}),t&&t.connectedResources&&t.connectedResources.forEach(function(t){var r;if("plugin"===t.type&&(r=i.pluginsStructure.find(function(e){return e.name===t.name})),r){var u=a[r.id],c={};u&&(c=u.present.structure?u.present:u.draft),e(c,r.id,n,i,a)}})},b=r(136);r.d(t,"c",function(){return h}),r.d(t,"a",function(){return O});var h=!1,g=0,v={},O=function(e){var t="cb_"+ ++g;return v[t]=e,t},y=function(e){v[e]&&(v[e](),delete v[e])},_=function(e){function t(){var e,r;Object(n.a)(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(r=Object(a.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={requestedResources:[],taskId:0},r.start=function(){var e,t;h=new WebSocket("wss://api.websiter.dev");var n=function(){clearTimeout(e),e=setTimeout(function(){h.close()},31e3);var t={};for(var n in r.props.mD.resourcesObjects)t[n]={__v:r.props.mD.resourcesObjects[n].__v,type:r.props.mD.resourcesObjects[n].draft?"resource":r.props.mD.resourcesObjects[n].pagesStructure?"website":"user"};h.send(JSON.stringify({messageCode:"heartbeat",versions:t}))};h.onopen=function(e){h.send(JSON.stringify({messageCode:"auth",user:f.a.defaults.headers.common["x-auth-token"],tryWebsiter:sessionStorage.getItem("tryWebsiter")})),t=setInterval(function(){return h.send(JSON.stringify({messageCode:"auth",noRequest:!0,user:f.a.defaults.headers.common["x-auth-token"],tryWebsiter:sessionStorage.getItem("tryWebsiter")}))},6e5),n()},h.onmessage=function(e){var t=JSON.parse(e.data);switch(t.messageCode){case"heartbeat":n();break;case"logout":r.props.logout();break;case"addResource":var i=t.resource;r.props.addResource(i);break;case"updateuser":r.props.updateUser(t,h);break;case"updatewebsite":r.props.updateWebsite(t,h);break;case"updateresource":r.props.updateResource(t,h);break;case"revertResource":r.props.revertResource(t);break;case"deleteuser":case"deletewebsite":case"deleteresource":r.props.deleteResource(t);break;case"confirmSaved":r.props.confirmSaved(t);break;case"notFoundResource":r.markNotFoundResource(t);break;case"error":alert(t.text);break;case"fireCallback":y(t.callbackId)}},h.onclose=function(r){clearTimeout(e),clearInterval(t)}},r.markNotFoundResource=function(e){var t=r.state.requestedResources.filter(function(t){return t.id.toString()===e._id.toString()});r.setState({requestedResources:t})},r.checkInterval=null,r.check=function(){h&&3!==h.readyState||r.start()},r.reRequestResourcesInterval=null,r.reRequestResources=function(){var e=!0,t=!1,n=void 0;try{for(var i,a=r.state.requestedResources[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value;u&&(r.props.mD.resourcesObjects[u.id]||h&&3!==h.readyState&&h.send(JSON.stringify({messageCode:"requestResource",id:u.id,type:u.type})))}}catch(c){t=!0,n=c}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},r}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.checkInterval=setInterval(this.check,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.reRequestResourcesInterval),clearInterval(this.checkInterval),h&&h.close()}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=function(e){var t=e.mD,r=[];if(t.userId&&t.resourcesObjects)if(t.userObject){var n=t.currentWebsiteId,i=!0,a=!1,u=void 0;try{for(var c,s=t.websites[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var o=c.value;r.push({id:o.id,type:"website"})}}catch(d){a=!0,u=d}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}n?(t.currentPageId&&(m(t.currentPageDraft,t.currentPageId,r,t.currentWebsiteObject,t.resourcesObjects),t.pageTemplateId&&m(t.pageTemplateDraft,t.pageTemplateId,r,t.currentWebsiteObject,t.resourcesObjects)),t.currentTemplateId&&m(t.currentTemplateDraft,t.currentTemplateId,r,t.currentWebsiteObject,t.resourcesObjects),t.currentPluginId&&m(t.currentPluginDraft,t.currentPluginId,r,t.currentWebsiteObject,t.resourcesObjects),t.globalSettingsPageId&&m(t.globalSettingsPageDraft,t.globalSettingsPageId,r,t.currentWebsiteObject,t.resourcesObjects),t.globalSettingsTemplateId&&m(t.globalSettingsTemplateDraft,t.globalSettingsTemplateId,r,t.currentWebsiteObject,t.resourcesObjects)):(t.websites.length>0&&(n=t.websites[0].id),n&&e.chooseWebsite(n))}else r.push({id:t.userId,type:"user"});return r=Array.from(new Set(r))}(e),n=[],i=!0,a=!1,u=void 0;try{for(var c,s=function(){var e=c.value;if(e){var r=t.state.requestedResources.find(function(t){return t.id===e.id});r||h&&3!==h.readyState&&(h.send(JSON.stringify({messageCode:"requestResource",id:e.id,type:e.type})),r={id:e.id,type:e.type,state:"sent"}),r&&n.push(r)}},o=r[Symbol.iterator]();!(i=(c=o.next()).done);i=!0)s()}catch(d){a=!0,u=d}finally{try{i||null==o.return||o.return()}finally{if(a)throw u}}this.setState({requestedResources:n}),clearInterval(this.reRequestResourcesInterval),this.reRequestResourcesInterval=setInterval(this.reRequestResources,3e3)}},{key:"render",value:function(){return null}}]),t}(s.Component),E=Object(d.b)(function(e){return{mD:e.mD}},function(e){return{logout:function(){return e(p.w())},addResource:function(t){return e(p.c(t))},updateUser:function(t,r){return e(p.X(t,r))},updateWebsite:function(t,r){return e(p.Y(t,r))},updateResource:function(t,r){return e(p.W(t,r))},deleteResource:function(t){return e(p.r(t))},revertResource:function(t){return e(p.G(t))},chooseWebsite:function(t){return e(p.n(t))},confirmSaved:function(t){return e(p.F(t))}}})(_);t.b=Object(d.b)(function(e){return{mainData:Object(b.a)(e)}},function(e){return{saveMainData:function(t){return e(p.K(t))}}})(function(e){return e.saveMainData(e.mainData),o.a.createElement(E,null)})},97:function(e,t,r){"use strict";var n=r(2);t.a=function(e,t){return e.map(function(r){return Object(n.a)({},r,{relUrl:r.path.reduce(function(r,n){var i=e.find(function(e){return e.id===n});return!i||i.hidden&&!i.folderPage?r:r+i[t?"url":"name"]+"/"},"/")+r[t?"url":"name"]})})}}},[[392,1,2]]]);
//# sourceMappingURL=main.8a634c2d.chunk.js.map