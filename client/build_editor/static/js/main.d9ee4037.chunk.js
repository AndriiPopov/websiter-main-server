(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(t,e,n){"use strict";var r=n(0),u=n.n(r),c=n(44),i=n.n(c);e.a=function(t){return u.a.createElement("div",{className:t.inline?[i.a.Div,i.a.Inline].join(" "):i.a.Div},u.a.createElement("label",null,u.a.createElement("input",{"data-testid":t.datatestid,type:t.radio?"radio":"checkbox",className:i.a.Input,checked:t.checked||!1,onChange:function(e){return t.onChange(e.target.checked)}}),t.title,t.children))}},140:function(t,e,n){"use strict";n.r(e);var r=n(75),u=n.n(r),c=n(84),i=n(0),a=n.n(i),o=n(80),s=n.n(o),f=n(283),d=n(25),l=n(10),p=n(34),h=n(6),O=n.n(h),E=(n(170),n(29)),m=n(30),g=n(33),b=n(31),_=n(32),S=n(285),v=n(282),I=n(284),j=n(286),R=n(37),y=function(t){function e(){return Object(E.a)(this,e),Object(g.a)(this,Object(b.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return a.a.createElement(I.a,{to:"/login"})}}]),e}(i.Component),T=Object(d.b)(null,function(t){return{onLogout:function(){return t(R.z())}}})(y),A=function(t){return function(e){function n(){var t,e;Object(E.a)(this,n);for(var r=arguments.length,u=new Array(r),c=0;c<r;c++)u[c]=arguments[c];return(e=Object(g.a)(this,(t=Object(b.a)(n)).call.apply(t,[this].concat(u)))).state={component:null},e}return Object(_.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;t().then(function(t){e.setState({component:t.default})})}},{key:"render",value:function(){var t=this.state.component;return t?a.a.createElement(t,this.props):null}}]),n}(i.Component)},C=n(58),w=n(134),N=n(56),U=n(77),x=new N.a,L=function(t){var e=Object(i.useState)(!1),n=Object(C.a)(e,2),r=n[0],u=n[1],c=Object(i.useState)(!1),o=Object(C.a)(c,2),s=o[0],f=o[1];Object(i.useEffect)(function(){l()});var d="?rememberme=false";r&&(d="?rememberme=true");var l=function(){x.get("cookies_consent")&&f(!0)};return s?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("a",{href:"https://my.websiter.dev/api/auth/google/start"+d},"GOOGLE"),a.a.createElement("a",{href:"https://my.websiter.dev/api/auth/facebook/start"+d},"FACEBOOK"),a.a.createElement("a",{href:"https://my.websiter.dev/api/auth/twitter/start"+d},"TWITTER")),a.a.createElement(w.a,{title:"Remember me",checked:r,onChange:function(){return u(!r)}})):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,"We use cookies only for login purposes. In order to proceed you need to agree with the use of cookies."),a.a.createElement(U.a,{btnType:"Success",clicked:function(){x.set("cookies_consent","true",{path:"/",maxAge:3153e7}),l()}},"AGREE"),a.a.createElement(U.a,{btnType:"Danger",clicked:function(){window.open("https://websiter.dev","_self")}},"Return to the homepage"))},D=n(57),P=n.n(D),k=function(t){return a.a.createElement(a.a.Fragment,null,t.cover?a.a.createElement("div",{className:P.a.Cover,"data-testid":t.datatestid||"cover"},a.a.createElement("div",{className:P.a.Loader},"Loading...")):a.a.createElement("div",{className:P.a.Loader},"Loading..."))},M=n(1),G=n(5),H=n(17),V=n(7),F=function(t){return t.currentPlugin.length<1?-1:t.resourcesObjects[t.currentPlugin].value.structure.findIndex(function(e){return e.id===t.currentBoxInPlugin})},B=n(21),z=n(81),W=n(133).create({objectHash:function(t){return t.id}}),J=function(t,e){return W.patch(t[B.structure[e.resourceType]],e.structurePatch)},Z=n(139),X={websites:[],resourcesObjects:{},pagesStructure:[],pluginsStructure:[],loadedWebsite:"",error:null,loading:!1,currentPage:"",currentPlugin:"",domainNotOk:!1,customDomainNotOk:!1,storage:0,images:[],uploadingImage:!1,currentBoxInPlugin:"",currentImage:"",sizeIsChanging:!1,currentWebsite:"",notSavedResources:[],pageZoom:100,hoveredElementId:null,hoveredElementSize:{},isRefreshing:!1,userId:null,barSizes:{height:200,width:500,width2:200,width3:200},currentTopTab:"page",findMode:null,hoverMode:"",fromFrame:!1,search:{},tooltipsOn:!0},q=Object(Z.a)(X,{SAVE_ALL_WEBSITES_DATA_FROM_SERVER:function(t,e){return function(t,e){return Object(M.a)({},t,e.data,{domainNotOk:!1,customDomainNotOk:!1,currentPage:e.data.currentPage||(t.resourcesObjects[t.currentPage]?t.currentPage:""),hoveredElementSize:{},barSizes:Object(M.a)({},t.barSizes,e.data.barSizes),currentWebsite:e.data.loadedWebsite||t.currentWebsite})}(t,e)},CHOOSE_WEBSITE:function(t,e){t.currentWebsite=e.id},ACTION_START_IMAGE_UPLOAD:function(t,e){return function(t){return Object(M.a)({},t,{error:null,loading:!0})}(t)},ACTION_FAIL_IMAGE_UPLOAD:function(t,e){return function(t,e){return Object(M.a)({},t,{error:e.error,loadng:!1})}(t,e)},ACTION_SUCCESS_IMAGE_UPLOAD:function(t,e){return function(t){return Object(M.a)({},t,{error:null,loading:!1})}(t)},CHOOSE_IMAGE:function(t,e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;t.currentImage=e.image}(t,e)},SAVE_IMAGE_AND_SIZE_IN_REDUX:function(t,e){t.images=e.images||t.images,t.storage=e.storage||t.storage},SIZE_IS_CHANGING:function(t,e){t.sizeIsChanging=e.isChanging},ACTION_START:function(t,e){t.error=null,t.pagesLoading=!0},ACTION_FAIL:function(t,e){t.error=e.error,t.pagesLoading=!1},ACTION_SUCCESS:function(t,e){t.error=null,t.pagesLoading=!1},ADD_RESOURCE_SUCCESS:function(t,e){return function(t,e){t[B.structure[e.resourceType]]=J(t,e),t.resourcesObjects[e._id]=e.resource}(t,e)},DELETE_RESOURCE_SUCCESS:function(t,e){return function(t,e){e.deletedResources.forEach(function(e){return delete t.resourcesObjects[e]}),t[B.structure[e.resourceType]]=J(t,e),t[B.current[e.resourceType]]=e.current||""}(t,e)},SAVE_RESOURCES_STRUCTURE_SUCCESS:function(t,e){return function(t,e){t[B.structure[e.resourceType]]=e.structure}(t,e)},SET_CURRENT_RESOURCE:function(t,e){return function(t,e){t[B.current[e.resourceType]]=e._id,"page"===e.resourceType&&(t.hoveredElementSize={})}(t,e)},SAVE_RESOURCE_IN_STATE:function(t,e){return function(t,e){t.resourcesObjects[e.currentResource].draft=e.draft,t.resourcesObjects[e.currentResource].present=e.draft,t.notSavedResources=t.notSavedResources.filter(function(t){return t!==e.currentResource})}(t,e)},REMOVE_RESOURCE_FROM_UNSAVED:function(t,e){return function(t,e){t.notSavedResources=t.notSavedResources.filter(function(t){return t!==e.currentResource})}(t,e)},SAVE_RESOURCE_DRAFT_IN_STATE:function(t,e){return function(t,e){t.resourcesObjects[e.currentResource].draft=e.draft}(t,e)},ADD_RESOURCE_VERSION:function(t,e){return function(t,e){var n=t.resourcesObjects[e.currentResource];if(!Object(V.isEqual)(n.present,e.draft))if(e.isNotForHistory)n.present=e.draft;else{if(e.draft.structure){var r=[];e.draft.structure.forEach(function(t){t.tag.length>0&&Object(z.b)(t.tag.charAt(0))&&r.push({name:t.tag,type:"plugin"})});var u=t.pagesStructure.find(function(t){return t.id===e.currentResource})||t.pluginsStructure.find(function(t){return t.id===e.currentResource});u&&(u.connectedResources=r)}t.notSavedResources.includes(e.currentResource)||t.notSavedResources.push(e.currentResource),n.past.length>100&&n.past.shift(),n.past.push(W.diff(n.present,e.draft)),n.present=e.draft,n.future=[]}}(t,e)},UNDO_RESOURCE_VERSION:function(t,e){return function(t,e){var n=t[B.current[t.currentTopTab]],r=t.resourcesObjects[n];if(r&&r.past.length>0){Object(V.isEqual)(r.present,r.past[r.past.length-1])?t.notSavedResources=t.notSavedResources.filter(function(t){return t!==e.currentResource}):t.notSavedResources.includes(e.currentResource)||t.notSavedResources.push(e.currentResource);var u=r.past.pop();r.future.unshift(u),r.present=W.unpatch(r.present,u)}}(t,e)},REDO_RESOURCE_VERSION:function(t,e){return function(t,e){var n=t[B.current[t.currentTopTab]],r=t.resourcesObjects[n];if(r&&r.future.length>0){Object(V.isEqual)(r.present,r.future[0])?t.notSavedResources=t.notSavedResources.filter(function(t){return t!==e.currentResource}):t.notSavedResources.includes(e.currentResource)||t.notSavedResources.push(e.currentResource);var u=r.future.shift();r.past.push(u),r.present=W.patch(r.present,u)}}(t,e)},CHOOSE_BOX_IN_PLUGIN:function(t,e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;t.currentBoxInPlugin=e.item}(t,e)},ADD_BOX_IN_PLUGIN:function(t,e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0,n=F(t),r=t.resourcesObjects[t.currentPlugin].value,u="plugin_element_".concat(r.currentId);r.currentId+=1;var c={id:u,path:n<=0?[r.structure[0].id]:Object(G.a)(r.structure[n].path),tag:e.text?"text":"div",text:e.text,textContent:"",style:[],styles:[]};r.structure.splice(n+1,0,c)}(t,e)},DELETE_BOX_IN_PLUGIN:function(t,e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0,n=F(t);if(!(n<0)){var r=t.resourcesObjects[t.currentPlugin].value,u=r.structure[n].id;e.withChildren?r.structure=r.structure.filter(function(t){return u!==t.id&&!t.path.includes(u)}):(r.structure=r.structure.map(function(t){return Object(M.a)({},t,{path:t.path.filter(function(t){return t!==u})})}),r.structure.splice(n,1))}}(t,e)},DUPLICATE_BOX_IN_PLUGIN:function(t,e){return function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,n=arguments.length>1?arguments[1]:void 0,r=F(e);if(r<0)return Object(M.a)({},e);var u=e.resourcesObjects[e.currentPlugin].value,c=u.structure[r].id,i=u.structure.filter(function(t){return t.path.includes(c)}),a="plugin_element_".concat(u.currentId);u.currentId+=1;var o=[];if(n.withChildren){var s=Object(H.a)({},c,a);o=i.map(function(t){var e="plugin_element_".concat(u.currentId);return u.currentId+=1,s[t.id]=e,Object(M.a)({},t,{id:e})}).map(function(t){return Object(M.a)({},t,{path:t.path.map(function(t){return s[t]?s[t]:t})})})}(t=u.structure).splice.apply(t,[r+i.length+1,0,Object(M.a)({},u.structure[r],{id:a})].concat(Object(G.a)(o)))}(t,e)},CHANGE_BOX_PROPERTY_IN_PLUGIN:function(t,e){return function(t,e){var n=F(t);n<0||(t.resourcesObjects[t.currentPlugin].value.structure[n][e.key]=e.value)}(t,e)},SAVE_STRUCTURE_IN_PLUGIN:function(t,e){return function(t,e){t.resourcesObjects[t.currentPlugin]&&(t.resourcesObjects[t.currentPlugin].value.structure=e.structure)}(t,e)},AUTH_START:function(t,e){return function(t){t.loading=!0,t.error=null}(t)},AUTH_SUCCESS:function(t,e){return function(t,e){t.userId=e.data._id,t.error=null,t.loading=!1,t.storage=e.data.storage,t.images=e.data.images,t.barSizes=Object(M.a)({},t.barSizes,e.data.barSizes)}(t,e)},AUTH_FAIL:function(t,e){return function(t,e){t.loading=!1,t.error=e.error,t.userId=null}(t,e)},AUTH_LOGOUT:function(t,e){return function(t){t.userId=null}(t)},CHANGE_BAR_SIZE:function(t,e){return function(t,e){t.barSizes[e.key]=e.value}(t,e)},SET_CURRENT_TOP_TAB:function(t,e){t.currentTopTab=e.currentTopTab},SAVE_HOVERED_ELEMENT_RECT:function(t,e){return function(t,e){e.path.length>0&&function t(n,r,u){r<n.length-1?(u[n[r].id]||(u[n[r].id]={plugin:n[r].plugin,children:{}}),t(e.path,r+1,u[n[r].id].children)):u[n[r].id]=Object(M.a)({plugin:n[r].plugin,children:{}},e.size)}(e.path,0,t.hoveredElementSize)}(t,e)},REMOVE_FROM_HOVERED_SIZES:function(t,e){return function(t,e){!function t(n){for(var r in n)if(n[r].plugin===e.currentResource)for(var u in n[r].children)e.removedElements.includes(u)&&delete n[r].children[u];else t(n.children)}(t.hoveredElementSize)}(t,e)},HOVER_ELEMENT:function(t,e){t.hoveredElementId=e.id,t.hoverMode=e.mode,t.fromFrame=e.fromFrame},UNHOVER_ELEMENT:function(t,e){t.hoveredElementId=null,t.fromFrame=!1},TOGGLE_FIND_MODE:function(t,e){return function(t,e){e.value?t.findMode===e.value?t.findMode=null:t.findMode=e.value:t.findMode=null}(t,e)},MARK_REFRESHING:function(t,e){t.isRefreshing=e.refreshing},SWITCH_TOOLTIPS:function(t){t.tooltipsOn=!t.tooltipsOn}}),K=A(function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,651))}),$=function(t){function e(){return Object(E.a)(this,e),Object(g.a)(this,Object(b.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var t=a.a.createElement(S.a,null,a.a.createElement(v.a,{path:"/login",component:L}),a.a.createElement(I.a,{to:"/login"}));return this.props.isAuthenticated&&(t=a.a.createElement("div",{style:{height:"100%"}},a.a.createElement(S.a,null,a.a.createElement(v.a,{path:"/editor",component:K}),a.a.createElement(v.a,{path:"/logout",component:T}),a.a.createElement(I.a,{to:"/editor"})))),a.a.createElement(a.a.Fragment,null,t," ",this.props.loading?a.a.createElement(k,{cover:!0}):null)}}]),e}(i.Component),Q=Object(j.a)(Object(d.b)(function(t){return{isAuthenticated:null!==t.userId,loading:t.loading}},function(t){return{onTryAutoSignup:function(){return t(R.e())}}})($));n(280);n.d(e,"store",function(){return tt});var Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;O.a.defaults.baseURL="https://api.websiter.dev";var tt=Object(l.createStore)(q,Y?Y(Object(l.applyMiddleware)(p.a)):Object(l.applyMiddleware)(p.a)),et=sessionStorage.getItem("currentAction");et&&(O.a.defaults.headers.common.currentAction=et),O.a.interceptors.response.use(function(){var t=Object(c.a)(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.headers["x-auth-token"]&&(O.a.defaults.headers.common["x-auth-token"]=e.headers["x-auth-token"]),!e.data.reload){t.next=9;break}return O.a.defaults.headers.common.currentAction=e.data.currentAction,t.next=5,sessionStorage.setItem("currentAction",e.data.currentAction);case 5:return t.next=7,sessionStorage.setItem("systemRefresh","1");case 7:throw window.location.reload(),new Error;case 9:return t.abrupt("return",e);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(t){return t.response&&412===parseInt(t.response.status)&&window.location.reload(),Promise.reject(t)});var nt=a.a.createElement(d.a,{store:tt},a.a.createElement(f.a,null,a.a.createElement(Q,null))),rt=window.self!==window.top,ut=document.getElementById("root");null===ut||rt||s.a.render(nt,ut)},141:function(t,e,n){t.exports=n(140)},170:function(t,e,n){},176:function(t,e){},178:function(t,e){},21:function(t,e){t.exports.structure={page:"pagesStructure",plugin:"pluginsStructure"},t.exports.current={page:"currentPage",plugin:"currentPlugin"}},215:function(t,e){},216:function(t,e){},37:function(t,e,n){"use strict";var r=n(17),u=n(5),c=n(1),i=n(7),a=function(t){return t.currentBox?t.currentBox.length<1?-1:t.structure.findIndex(function(e){return e.id===t.currentBox}):-1},o=function(t,e){var n=[];return"plugin"===e?n.push(0):"page"===e&&t.structure.forEach(function(t,e){t.path.length<2&&n.push(e)}),n},s=function(t,e,n){return function(r){if(e&&n&&t){var u=Object(c.a)({},n,{structure:t}),a=Object(i.isEqual)(n.structure.map(function(t){return Object(i.omit)(t,["expanded"])}),t.map(function(t){return Object(i.omit)(t,["expanded"])}));r(gt(e,u,a))}}},f=function(t,e,n){return function(r){if(e&&t&&n){var u=Object(c.a)({},n,{currentBox:t});r(gt(e,u,!0)),r(h())}}},d=function(t,e,n,r,o){return function(s){if(n&&t&&r){var f=a(r);if(!(f<0)){var d={};Object(i.isObject)(t)&&!("string"===typeof t||t instanceof String)?d=t:d[t.toString()]=e;var l=Object(c.a)({},r,{structure:[].concat(Object(u.a)(r.structure.slice(0,f)),[Object(c.a)({},r.structure[f],d)],Object(u.a)(r.structure.slice(f+1)))});s(gt(n,l,o))}}}},l=function(t,e){return{type:"SAVE_HOVERED_ELEMENT_RECT",path:t,size:e}},p=function(t,e,n){return{type:"HOVER_ELEMENT",id:t,mode:e,fromFrame:n}},h=function(){return{type:"UNHOVER_ELEMENT"}},O=function(t){return{type:"TOGGLE_FIND_MODE",value:t}},E=function(t,e,n,r){return function(i){if(t&&e){var s,f=o(e,n),d=a(e);"plugin"===n?d<=0&&(d=0,s=!0):"page"===n&&(d<1&&(d=f[f.length-1]),e.structure[d].path.length<2&&(s=!0));var l=e.structure[d];l.isChildren?s=!1:l.childrenTo?s=!0:"inside"===r&&(s=!0),"inside"===r&&(s=!0);var p="element_".concat(e.currentId),h=e.currentId+1,O=Object(c.a)({},e,{structure:[].concat(Object(u.a)(e.structure.slice(0,d+1)),[{id:p,path:s?[].concat(Object(u.a)(e.structure[d].path),[e.structure[d].id]):Object(u.a)(e.structure[d].path),tag:"text"===r?"text":"children"===r?"New children":"div",textMode:"text",text:"text"===r,textContent:"",isChildren:"children"===r,properties:{},propertiesString:""}],Object(u.a)(e.structure.slice(d+1))),currentId:h,currentBox:p});i(gt(t,O))}}},m=function(t,e,n,r){return function(i){if(t&&e){var s=o(e,n),f=a(e);if(!(f<0||s.includes(f))){var d=e.structure[f].id,l={},p=[d];if(r)l=Object(c.a)({},e,{structure:e.structure.filter(function(t){var e=d!==t.id&&!t.path.includes(d);return e||p.push(t.id),e})});else{var h=e.structure.map(function(t){return Object(c.a)({},t,{path:t.path.filter(function(t){return t!==d})})});l=Object(c.a)({},e,{structure:[].concat(Object(u.a)(h.slice(0,f)),Object(u.a)(h.slice(f+1)))})}i(gt(t,l)),i(function(t,e){return{type:"REMOVE_FROM_HOVERED_SIZES",currentResource:t,removedElements:e}}(t,p))}}}},g=function(t,e,n,i){return function(s){if(t&&e){var f=o(e,n),d=a(e);if(!(d<0||f.includes(d))){var l=e.structure[d].id,p=e.structure.filter(function(t){return t.path.includes(l)}),h="element_".concat(e.currentId),O={currentId:e.currentId+1};if(i){var E=Object(r.a)({},l,h),m=p.map(function(t){var e="element_".concat(O.currentId);return O.currentId+=1,E[t.id]=e,Object(c.a)({},t,{id:e})}).map(function(t){return Object(c.a)({},t,{path:t.path.map(function(t){return E[t]?E[t]:t})})});O=Object(c.a)({},e,O,{structure:[].concat(Object(u.a)(e.structure.slice(0,d+p.length)),[Object(c.a)({},e.structure[d],{id:h})],Object(u.a)(m),Object(u.a)(e.structure.slice(d+p.length)))})}else O=Object(c.a)({},e,O,{structure:[].concat(Object(u.a)(e.structure.slice(0,d+p.length)),[Object(c.a)({},e.structure[d],{id:h})],Object(u.a)(e.structure.slice(d+p.length)))});s(gt(t,O))}}}},b=function(t,e,n,r){return function(i){var o=a(r);if(!(o<0)){var s,f={currentId:r.currentId},d=r.structure[o].textContent;if(d){var l=d.substr(0,t),p=d.substr(t,e-t),h=d.substr(e),O=[Object(c.a)({},r.structure[o],{textContent:l})];p.length>0&&(s="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(c.a)({},r.structure[o],{textContent:p,id:s}))),(h.length>0||0===p.length)&&(s="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(c.a)({},r.structure[o],{textContent:h,id:s}))),f=Object(c.a)({},r,f,{structure:[].concat(Object(u.a)(r.structure.slice(0,o)),O,Object(u.a)(r.structure.slice(o+1)))}),i(gt(n,f))}}}},_=function(t,e,n,r){return function(i){var o=a(r);if(!(o<0)){var s,f={currentId:r.currentId},d=r.structure[o].textContent;if(d){var l=d.substr(0,t),p=d.substr(t,e-t),h=d.substr(e),O=[Object(c.a)({},r.structure[o],{textContent:l})],E="element_".concat(f.currentId);f.currentId=f.currentId+1,O.push({id:E,path:Object(u.a)(r.structure[o].path),tag:"span",text:!1,textContent:"",style:"",properties:{}}),s="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(c.a)({},r.structure[o],{path:[].concat(Object(u.a)(r.structure[o].path),[E]),textContent:p,id:s})),h.length>0&&(s="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(c.a)({},r.structure[o],{textContent:h,id:s}))),f=Object(c.a)({},r,f,{structure:[].concat(Object(u.a)(r.structure.slice(0,o)),O,Object(u.a)(r.structure.slice(o+1)))}),i(gt(n,f))}}}},S=function(t,e,n){return function(r){var u=e&&n[e]?Object(i.isEmpty)(n[e].present)?n[e].draft:n[e].present:null;u&&r(d("currentMenuItem",t,e,u,!0))}},v=function(t,e,n,u){return function(o){var s=n&&u[n]?Object(i.isEmpty)(u[n].present)?u[n].draft:u[n].present:null;if(s){var f=a(s);if(!(f<0)&&s.structure[f].menuItems){var l=s.structure[f].menuItems.map(function(n){return n.id===s.structure[f].currentMenuItem?Object(c.a)({},n,Object(r.a)({},t,e)):n});Object(i.isEqual)(l,s.structure[f].menuItems)||o(d("menuItems",l,n,s))}}}},I=function(t){return{type:"MARK_REFRESHING",refreshing:t}},j=function(t,e,n,r,i){return function(s){if(t&&e){var f=o(e,r),d=a(e);if(!(d<=0||!i&&f.includes(d))){var l=e.structure[d].id,p=1,h=["element_0"],O=["element_0"],E=e.structure.filter(function(t){return!i&&t.id===l||t.path.includes(l)}).map(function(t){O.push(t.id);var e=Object(c.a)({},t,{id:"element_".concat(p)});return t.id===l?e.path=["element_0"]:e.path=["element_0"].concat(Object(u.a)(e.path.slice(e.path.indexOf(l)+(i?1:0)))),h.push(e.id),p++,e}).map(function(t){return Object(c.a)({},t,{path:t.path.map(function(t){return h[O.indexOf(t)]})})});if(0!==E.length){var m={structure:[{id:"element_0",path:[],tag:"Main element",properties:{},propertiesString:""}].concat(Object(u.a)(E)),currentId:p};s(it(n,"","plugin",!1,m,function(n){if(n.newResourceName){var r=Object(c.a)({},e,{structure:[].concat(Object(u.a)(e.structure.slice(0,d+(i?1:0))),[Object(c.a)({},e.structure[d],{path:[].concat(Object(u.a)(e.structure[d].path),Object(u.a)(i?[e.structure[d].id]:[])),tag:n.newResourceName,text:!1,textContent:"",properties:{},id:O[1]})],Object(u.a)(e.structure.slice(d+E.length)))});s(gt(t,r))}}))}}}}},R=function(t,e,n,r){return function(o){if(t&&e){var s=a(e);if(!(s<0)){e.structure[s].id;var f=n.find(function(t){return t.name===e.structure[s].tag});if(f){var d=Object(i.isEmpty)(r[f.id].present)?r[f.id].draft:r[f.id].present,l=e.currentId,p=[],h=[],O=d.structure.filter(function(t){return t.path.length>0}).map(function(t){h.push(t.id);var e=Object(c.a)({},t,{id:"element_".concat(l),path:Object(u.a)(t.path.slice(1))});return p.push(e.id),l++,e}).map(function(t){return Object(c.a)({},t,{path:[].concat(Object(u.a)(e.structure[s].path),Object(u.a)(t.path.map(function(t){return p[h.indexOf(t)]})))})}),E=Object(c.a)({},e,{currentId:l,structure:[].concat(Object(u.a)(e.structure.slice(0,s)),Object(u.a)(O),Object(u.a)(e.structure.slice(s+1)))});o(gt(t,E))}}}}},y=n(6),T=n.n(y),A=n(56),C=n(136),w=n.n(C),N=new A.a,U=function(){return function(t){return t({type:"ACTION_START"}),T.a.delete("/api/users").then(function(e){t(x()),t({type:"ACTION_SUCCESS"})}).catch(function(e){t({type:"ACTION_FAIL",error:e.message})})}},x=function(t){return t?T.a.post("/api/auth/logoutall").then(function(t){return N.remove("auth_token"),T.a.defaults.headers.common["x-auth-token"]=null,{type:"AUTH_LOGOUT"}}).catch(function(t){}):(N.remove("auth_token"),T.a.defaults.headers.common["x-auth-token"]=null,{type:"AUTH_LOGOUT"})},L=function(){return function(t){sessionStorage.setItem("systemRefresh","0");var e=N.get("auth_token"),n=N.get("rememberme");n&&(N.remove("rememberme",{path:"/"}),"false"===n&&N.remove("auth_token",{path:"/"}));var r=w.a.decode(e);if(T.a.defaults.headers.post["Content-Type"]="application/json",T.a.defaults.headers.put["Content-Type"]="application/json",T.a.defaults.headers.delete["Content-Type"]="application/json",T.a.defaults.headers.common.Accept="application/json",e&&r)return T.a.defaults.headers.common["x-auth-token"]=e,t({type:"AUTH_START"}),T.a.get("/api/users").then(function(e){t({type:"AUTH_SUCCESS",data:Object(c.a)({},e.data,{_id:r._id})}),t(G(e.data))}).catch(function(e){t({type:"AUTH_FAIL",error:e.message})});t(x())}},D=function(t,e){return{type:"CHANGE_BAR_SIZE",key:t,value:e}},P=function(t,e,n,r){return function(u){return T.a.put("/api/users",{barSizes:t,tooltipsOn:e,currentPage:n,currentPlugin:r}).then(function(t){}).catch(function(t){})}},k=function(t,e){return function(n){var r,u,c,i,a,o=window.innerWidth,s=window.innerHeight;if(e)switch(e.key){case"height":(r=e.value)<50&&(r=50),r>s-50&&(r=s-50),n(D("height",r));break;case"width":(r=e.value)<50&&(r=50),u=r-t.width,i=t.width2-u,a=t.width3,i<50&&(c=i-50,i=50,(a=t.width3+c)<50&&(a=50)),r+i+a+50>o&&(r=o-150,i=50,a=50),n(D("width",r)),n(D("width2",i)),n(D("width3",a));break;case"width2":i=e.value,r=t.width,(u=i-50)<0&&((r+=u)<50&&(r=50),c=r-t.width,a=t.width3-c,i=50),u=r+i-t.width-t.width2,(a=t.width3-u)<50&&(a=50),r+i+a+50>o&&(i=o-r-100),n(D("width",r)),n(D("width2",i)),n(D("width3",a));break;case"width3":a=e.value,r=t.width,i=t.width2,(u=a-50)<0&&((c=(i+=u)-50)<0&&((r+=c)<50&&(r=50),i=50),a=50),r+i+a+50>o&&(a=o-r-i-50),n(D("width",r)),n(D("width2",i)),n(D("width3",a))}else t.height>s-50&&n(D("height",s-50)),t.width>o-100&&n(D("width",o-100)),t.width+t.width2>o-50&&n(D("width2",o-t.width-50))}},M=function(){return{type:"SWITCH_TOOLTIPS"}},G=function(t){return{type:"SAVE_ALL_WEBSITES_DATA_FROM_SERVER",data:t}},H=function(t,e){return function(n){return n(Z()),T.a.post("/api/websites",JSON.stringify(t&&e?{duplicate:t,currentWebsite:e}:{})).then(function(t){n(G(Object(c.a)({},t.data))),n(X())}).catch(function(t){n(q(t.message))})}},V=function(t,e){return function(n){if(t){if(e.length>0&&!window.confirm("Are you sure you want to load another website? All unsaved resources in the current website will be lost. There are ".concat(e.length," notsaved resources.")))return;return n(Z()),T.a.get("/api/websites/".concat(t)).then(function(t){n(G(Object(c.a)({},t.data))),n(X())}).catch(function(t){n(q(t.message))})}}},F=function(t){return{type:"CHOOSE_WEBSITE",id:t}},B=function(t){return function(e){return e(Z()),T.a.post("/api/websites/verify/".concat(t)).then(function(t){e(G(t.data)),e(X())}).catch(function(t){e(q(t.message))})}},z=function(t,e,n){return function(u){if(n)return u(Z()),T.a.put("/api/websites/".concat(n),JSON.stringify(Object(r.a)({},t,e))).then(function(t){u(G(t.data)),u(X())}).catch(function(t){u(q(t.message))})}},W=function(t){return function(e){if(t){if(!window.confirm("Are you sure you want to delete this website? All data in this website will be deleted including pages and plugins. However, your media files will not be removed."))return;return e(Z()),T.a.delete("/api/websites/".concat(t)).then(function(t){e(G(Object(c.a)({},t.data))),e(X())}).catch(function(t){e(q(t.message))})}}},J=function(t){return{type:"SIZE_IS_CHANGING",isChanging:t}},Z=function(){return{type:"ACTION_START"}},X=function(){return{type:"ACTION_SUCCESS"}},q=function(t){return{type:"ACTION_FAIL",error:t}},K=function(t){return{type:"SET_CURRENT_TOP_TAB",currentTopTab:t}},$=function(t){return{type:"ACTION_FAIL_IMAGE_UPLOAD",error:t}},Q=function(t,e,n){return function(r){return T.a.put(e,t.file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r(Y(t,n))}).catch(function(t){r($(t.message))})}},Y=function(t,e){return function(n){var r=parseFloat(t.file.size),c=t.storage+r,i=[{url:e,name:t.name,size:r,label:t.label}].concat(Object(u.a)(t.images));return T.a.put("/api/users",{storage:c,images:i}).then(function(t){n(tt(c,i)),n({type:"ACTION_SUCCESS_IMAGE_UPLOAD"})}).catch(function(t){n($(t.message))})}},tt=function(t,e){return{type:"SAVE_IMAGE_AND_SIZE_IN_REDUX",storage:t,images:e}},et=function(t){return function(e){return window.confirm("Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.")?(e({type:"ACTION_START_IMAGE_UPLOAD"}),T.a.post("/api/awsImage/deleteimage",JSON.stringify({url:t})).then(function(t){e(tt(t.data.storage,t.data.images)),e({type:"ACTION_SUCCESS_IMAGE_UPLOAD"})}).catch(function(t){e($(t.message))})):void 0}},nt=function(t){return function(e){var n=window.prompt("Type a new name for the image.");return null!==n?(e({type:"ACTION_START_IMAGE_UPLOAD"}),T.a.post("/api/awsImage/renameimage",JSON.stringify({url:t,label:n})).then(function(t){e(tt(!1,t.data.images)),e({type:"ACTION_SUCCESS_IMAGE_UPLOAD"})}).catch(function(t){e($(t.message))})):void 0}},rt=function(t){return{type:"CHOOSE_IMAGE",image:t}},ut=function(t,e,n,r){return function(u){var c=t[0];return null==c?alert("No file selected."):"image"!==c.type.split("/")[0]?alert("File is not an image."):(u({type:"ACTION_START_IMAGE_UPLOAD"}),void u(function(t,e,n,r){return function(u){if(r){for(var c=r+"/"+t.name.replace(/([^a-zA-Z0-9\\.\\-])/g,"_"),i="",a=0;e.findIndex(function(t){return c+i===t.name})>=0;)i="_"+ ++a;var o={file:t,name:c+i,label:t.name+i,storage:n,images:e};return T.a.get("/api/sign-s3?file-name=".concat(c).concat(i,"&file-type=").concat(t.type,"&file-size=").concat(t.size)).then(function(t){u(Q(o,t.data.signedRequest,t.data.url))}).catch(function(t){u($(t.message)),400===t.response.status&&alert(t.response.data)})}}}(c,e,n,r)))}},ct=n(133).create({objectHash:function(t){return t.id}}),it=function(t,e,n,r,u,c){return function(i){return i(Z()),T.a.post("/api/resources",JSON.stringify({websiteId:t,currentResourceId:e,duplicate:r,type:n,resourceData:u})).then(function(t){i(at(t.data,n)),c&&c(t.data),i(X())}).catch(function(t){i(q(t.message))})}},at=function(t,e){return Object(c.a)({type:"ADD_RESOURCE_SUCCESS"},t,{resourceType:e})},ot=function(t,e){return function(n){if(t&&window.confirm("Are you sure you want to delete this ".concat(e,"?")))return n(Z()),T.a.delete("/api/resources/".concat(t),{params:{type:e}}).then(function(t){n(st(t.data,e)),n(X())}).catch(function(t){n(q(t.message))})}},st=function(t,e){return Object(c.a)({type:"DELETE_RESOURCE_SUCCESS"},t,{resourceType:e})},ft=function(t,e,n,r){return function(u){u(Z());var c=ct.diff(n,e);if(c)return T.a.put("/api/websites/structure/".concat(t),JSON.stringify({structurePatch:c,type:r})).then(function(t){u(dt(e,r)),u(X())}).catch(function(t){u(q(t.message))});u(X())}},dt=function(t,e){return{type:"SAVE_RESOURCES_STRUCTURE_SUCCESS",structure:t,resourceType:e}},lt=function(t,e){return{type:"SET_CURRENT_RESOURCE",_id:t,resourceType:e}},pt=function(t,e,n,r){return function(u){var c=e[t].present,a=e[t].draft;if(!Object(i.isEqual)(c,{})){u(Z());var o=ct.diff(a,c);return T.a.put("/api/resources/".concat(t),JSON.stringify({resourcePatch:o,structure:n,type:r})).then(function(e){u(ht(t,c)),u(dt(n,r)),u(X())}).catch(function(t){u(q(t.message))})}}},ht=function(t,e){return{type:"SAVE_RESOURCE_IN_STATE",currentResource:t,draft:e}},Ot=function(t,e,n,r,u){return function(u){return u(Z()),T.a.put("/api/resources/publish/".concat(t),JSON.stringify({structure:e,type:n,revert:r})).then(function(r){u(dt(e,n)),r.data.draft&&(u(function(t,e){return{type:"SAVE_RESOURCE_DRAFT_IN_STATE",currentResource:t,draft:e}}(t,r.data.draft)),u(gt(t,r.data.draft)),u(mt(t))),u(X())}).catch(function(t){u(q(t.message))})}},Et=function(t,e){return function(n){n(gt(t,e[t].draft)),n(mt(t))}},mt=function(t){return{type:"REMOVE_RESOURCE_FROM_UNSAVED",currentResource:t}},gt=function(t,e,n){return{type:"ADD_RESOURCE_VERSION",currentResource:t,draft:e,isNotForHistory:n}},bt=function(){return{type:"UNDO_RESOURCE_VERSION"}},_t=function(){return{type:"REDO_RESOURCE_VERSION"}};n.d(e,"k",function(){return f}),n.d(e,"a",function(){return E}),n.d(e,"p",function(){return m}),n.d(e,"v",function(){return g}),n.d(e,"H",function(){return s}),n.d(e,"h",function(){return d}),n.d(e,"w",function(){return p}),n.d(e,"T",function(){return h}),n.d(e,"I",function(){return l}),n.d(e,"O",function(){return b}),n.d(e,"Q",function(){return _}),n.d(e,"m",function(){return S}),n.d(e,"i",function(){return v}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return j}),n.d(e,"u",function(){return R}),n.d(e,"R",function(){return O}),n.d(e,"z",function(){return x}),n.d(e,"e",function(){return L}),n.d(e,"s",function(){return U}),n.d(e,"f",function(){return k}),n.d(e,"g",function(){return D}),n.d(e,"J",function(){return P}),n.d(e,"P",function(){return M}),n.d(e,"d",function(){return H}),n.d(e,"y",function(){return V}),n.d(e,"t",function(){return W}),n.d(e,"N",function(){return J}),n.d(e,"o",function(){return F}),n.d(e,"j",function(){return z}),n.d(e,"G",function(){return G}),n.d(e,"M",function(){return K}),n.d(e,"U",function(){return B}),n.d(e,"x",function(){return ut}),n.d(e,"q",function(){return et}),n.d(e,"E",function(){return nt}),n.d(e,"l",function(){return rt}),n.d(e,"L",function(){return ft}),n.d(e,"b",function(){return it}),n.d(e,"r",function(){return ot}),n.d(e,"n",function(){return lt}),n.d(e,"K",function(){return pt}),n.d(e,"C",function(){return Ot}),n.d(e,"F",function(){return Et}),n.d(e,"c",function(){return gt}),n.d(e,"S",function(){return bt}),n.d(e,"D",function(){return _t})},44:function(t,e,n){t.exports={Div:"Checkbox_Div__2PqSf",Input:"Checkbox_Input__1KbTF",StyleControls:"Checkbox_StyleControls__cb7Ky",Inline:"Checkbox_Inline__3XkB8"}},57:function(t,e,n){t.exports={Loader:"Spinner_Loader__2Sex0",load3:"Spinner_load3__jNmcI",Cover:"Spinner_Cover__3iRbu"}},77:function(t,e,n){"use strict";var r=n(0),u=n.n(r),c=n(79),i=n.n(c);e.a=function(t){return u.a.createElement("button",{"data-testid":t.datatestid||"LoginButton",disabled:t.disabled,className:[i.a.Button,i.a[t.btnType]].join(" "),onClick:t.clicked},t.children)}},79:function(t,e,n){t.exports={Button:"LoginButton_Button__2dj44",Success:"LoginButton_Success__21MoZ",Danger:"LoginButton_Danger__2V7Lr"}},81:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return o}),n.d(e,"d",function(){return s});var r=n(7),u=function(t){if(t===t.toUpperCase()&&t!==t.toLowerCase())return!0},c=function(t,e){return t&&e[t]?Object(r.isEmpty)(e[t].present)?e[t].draft:e[t].present:null};function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,r,u=function(t,e){if(null==t)return{};var n,r,u={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(u[n]=t[n]);return u}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(u[n]=t[n])}return u}function o(t){var e=function e(n){n.path;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},a(n,["path"]),{children:t.filter(function(t){return t.path[t.path.length-1]===n.id}).map(function(t){return e(t)})})};return t.filter(function(t){return 0===t.path.length}).map(function(t){return e(t)})}var s=function(t){var e=t.length;return e>2&&"$"===t.charAt(0)&&"$"===t.charAt(e-1)&&t.substr(1,e-2)}}},[[141,1,3]]]);
//# sourceMappingURL=main.d9ee4037.chunk.js.map