(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,r){"use strict";var n=r(19),u=r(7),a=r(1),i=r(122),c=r(17),s=r.n(c),o=r(24),d=r.n(o),l=r(29),f=r.n(l),p=r(5),b=r(338),m=function(e){return e.currentBox?e.currentBox.length<1?-1:e.structure.findIndex(function(t){return t.id===e.currentBox}):-1},g=function(e,t){var r=[];return"plugin"===t?r.push(0):"template"===t&&e.structure.forEach(function(e,t){(0===e.path.length||s()(e.path,["element_01"]))&&r.push(t)}),r},h=function(e,t){return function(r,n){var u=n().mD,i=u[p.b[e]];if(u&&e&&i&&t){var c=t.map(function(e){var t=i.structure.find(function(t){return t.id===e.id});return t?Object(a.a)({},e,t,{expanded:e.expanded,path:e.path}):e}),o=Object(a.a)({},i,{structure:c}),l=s()(i.structure.map(function(e){return d()(e,["expanded","children","itemPath"])}),c.map(function(e){return d()(e,["expanded","children","itemPath"])}));r(pe(u,e,o,{},l))}}},v=function(e,t,r){return function(n,u){var i=u().mD,c=r?i.globalSettingsPageDraft:i[p.b[e]];if(i&&e&&c&&t){var o=r?i.globalSettingsTemplateDraft:i.pageTemplateDraft,l={},f=t.map(function(e){var t=c.structure.find(function(t){return t.id===e.id}),r=Object(a.a)({},e);return t&&(r=Object(a.a)({},r,{expanded:t.expanded})),l[e.id]=Object(a.a)({},o.values[e.id],{value:"",menuItems:[],currentMenuItem:"",currentMenuId:0},c.values[e.id]||{}),Object(a.a)({},r,{path:e.path})}),b=Object(a.a)({},c,{structure:f,values:l}),m=s()(c.structure.map(function(e){return d()(e,["expanded","children","itemPath"])}),f.map(function(e){return d()(e,["expanded","children","itemPath"])}))&&s()(c.values,b.values);n(pe(i,e,b,{},m,r))}}},O=function(e,t){return function(r,n){var u=n().mD,i=u[p.b[e]];if(u&&e&&t&&i){var c=Object(a.a)({},i,{currentBox:t});r(pe(u,e,c,{},!0)),r(E())}}},_=function(e,t,r,n,i){return function(c,s){var o,d=s().mD,l=d[p.b[e]];if(d&&e&&t&&l&&!((o=i?l.structure.findIndex(function(e){return e.id===i}):m(l))<0)){"tag"===t&&c(I(d[p.a[e]],[l.structure[o].id]));var b={};f()(t)&&!("string"===typeof t||t instanceof String)?b=t:b[t.toString()]=r;var g=Object(a.a)({},l,{structure:[].concat(Object(u.a)(l.structure.slice(0,o)),[Object(a.a)({},l.structure[o],b)],Object(u.a)(l.structure.slice(o+1)))});c(pe(d,e,g,{throttle:100},n))}}},y=function(e,t,r,u,i){return function(c,s){var o,d=s().mD,l=d[p.b[e]];if(d&&e&&t&&l&&!((o=i?l.structure.findIndex(function(e){return e.id===i}):m(l))<0)){"tag"===t&&c(I(d[p.a[e]],[l.structure[o].id]));var b={};f()(t)&&!("string"===typeof t||t instanceof String)?b=t:b[t.toString()]=r;var g=Object(a.a)({},l,{values:Object(a.a)({},l.values,Object(n.a)({},l.structure[o].id,Object(a.a)({},l.values[l.structure[o].id],b)))});c(pe(d,e,g,{throttle:1e3},u))}}},S=function(e,t){return{type:"SAVE_HOVERED_ELEMENT_RECT",path:e,size:t}},I=function(e,t){return{type:"REMOVE_FROM_HOVERED_SIZES",currentResource:e,removedElements:t}},j=function(e,t,r){return{type:"HOVER_ELEMENT",id:e,mode:t,fromFrame:r}},E=function(){return{type:"UNHOVER_ELEMENT"}},R=function(e){return{type:"TOGGLE_FIND_MODE",value:e}},w=function(e,t){return function(r,i){var c=i().mD,o=c[p.b[e]];if(o){var d,l=g(o,e),f=m(o);"plugin"===e?f<=0&&(f=0,d=!0):"template"===e&&(f<0&&(f=l[l.length-1]),"element_01"===o.structure[f].id&&(f=l[l.length-1]),o.structure[f].path.length<2&&!s()(o.structure[f].path,["element_02"])&&(d=!0));var b=o.structure[f];b.isChildren?d=!1:b.childrenTo?d=!0:"inside"===t&&(d=!0),"inside"===t&&(d=!0);var h="element_".concat(o.currentId),v=o.currentId+1,O="element_02"===o.structure[f].id||s()(o.structure[f].path,["element_02"]),_=Object(a.a)({},o,{structure:[].concat(Object(u.a)(o.structure.slice(0,f+1)),[{id:h,path:d?[].concat(Object(u.a)(o.structure[f].path),[o.structure[f].id]):Object(u.a)(o.structure[f].path),tag:"text"===t?"text":"children"===t?"New children":O?"New CMS variable":"div",textMode:"text",text:"text"===t,isChildren:"children"===t,isCMSVariable:O,isElementFromCMSVariable:"cmsVariable"===t}],Object(u.a)(o.structure.slice(f+1))),values:Object(a.a)({},o.values,Object(n.a)({},h,{textContent:"",properties:{},propertiesString:"",CMSVariableType:"text",CMSVariableSystemName:"newCmsVariable",CMSVariableDescription:"New CMS variable description",CMSVariableDefaultValue:"New CMS variable default value"})),currentId:v,currentBox:h});r(pe(c,e,_))}}},T=function(e,t){return function(r,n){var i=n().mD,c=i[p.b[e]];if(c){var s=g(c,e),o=m(c);if(!(o<0||s.includes(o))){var d=c.structure[o].id,l={},f=[d];if(t)l=Object(a.a)({},c,{structure:c.structure.filter(function(e){var t=d!==e.id&&!e.path.includes(d);return t||f.push(e.id),t})});else{var b=c.structure.map(function(e){return Object(a.a)({},e,{path:e.path.filter(function(e){return e!==d})})});l=Object(a.a)({},c,{structure:[].concat(Object(u.a)(b.slice(0,o)),Object(u.a)(b.slice(o+1)))})}for(var h=0,v=f;h<v.length;h++){var O=v[h];delete l.values[O.id]}r(pe(i,e,l)),r(I(i[p.a[e]],f))}}}},C=function(e,t){return function(r,i){var c=i().mD,s=c[p.b[e]];if(s){var o=g(s,e),d=m(s);if(!(d<0||o.includes(d))){var l=s.structure[d].id,f=s.structure.filter(function(e){return e.path.includes(l)}),b="element_".concat(s.currentId),h={currentId:s.currentId+1};if(t){var v=Object(n.a)({},l,b),O=Object(n.a)({},b,s.values[l]),_=f.map(function(e){var t="element_".concat(h.currentId);return h.currentId+=1,v[e.id]=t,O[t]=s.values[e.id],Object(a.a)({},e,{id:t})}).map(function(e){return Object(a.a)({},e,{path:e.path.map(function(e){return v[e]?v[e]:e})})});h=Object(a.a)({},s,h,{structure:[].concat(Object(u.a)(s.structure.slice(0,d+f.length)),[Object(a.a)({},s.structure[d],{id:b})],Object(u.a)(_),Object(u.a)(s.structure.slice(d+f.length))),values:Object(a.a)({},s.values,O)})}else h=Object(a.a)({},s,h,{structure:[].concat(Object(u.a)(s.structure.slice(0,d+f.length)),[Object(a.a)({},s.structure[d],{id:b})],Object(u.a)(s.structure.slice(d+f.length))),values:Object(a.a)({},s.values,Object(n.a)({},b,s.values[l]))});r(pe(c,e,h))}}}},D=function(e,t,r){return function(i,c){var s=c().mD,o=s[p.b[e]];if(o){var d=m(o);if(!(d<0)){var l,f={currentId:o.currentId},b=o.structure[d].textContent;if(b){var g=b.substr(0,t),h=b.substr(t,r-t),v=b.substr(r),O=[Object(a.a)({},o.structure[d])],_=Object(n.a)({},d,Object(a.a)({},o.values[o.structure[d].id],{textContent:g}));h.length>0&&(l="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(a.a)({},o.structure[d],{id:l})),_[l]=Object(a.a)({},o.values[o.structure[d].id],{textContent:h})),(v.length>0||0===h.length)&&(l="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(a.a)({},o.structure[d],{id:l})),_[l]=Object(a.a)({},o.values[o.structure[d].id],{textContent:v})),f=Object(a.a)({},o,f,{structure:[].concat(Object(u.a)(o.structure.slice(0,d)),O,Object(u.a)(o.structure.slice(d+1))),values:Object(a.a)({},o.values,_)}),i(pe(s,e,f))}}}}},A=function(e,t,r){return function(i,c){var s=c().mD,o=s[p.b[e]];if(o){var d=m(o);if(!(d<0)){var l,f={currentId:o.currentId},b=o.structure[d].textContent;if(b){var g=b.substr(0,t),h=b.substr(t,r-t),v=b.substr(r),O=[Object(a.a)({},o.structure[d])],_=Object(n.a)({},d,Object(a.a)({},o.values[o.structure[d].id],{textContent:g})),y="element_".concat(f.currentId);f.currentId=f.currentId+1,O.push({id:y,path:Object(u.a)(o.structure[d].path),tag:"span",text:!1}),_[y]={textContent:"",style:"",properties:{}},l="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(a.a)({},o.structure[d],{path:[].concat(Object(u.a)(o.structure[d].path),[y]),textContent:h,id:l})),_[l]=Object(a.a)({},o.values[o.structure[d].id],{textContent:h}),v.length>0&&(l="element_".concat(f.currentId),f.currentId=f.currentId+1,O.push(Object(a.a)({},o.structure[d],{textContent:v,id:l})),_[l]=Object(a.a)({},o.values[o.structure[d].id],{textContent:v})),f=Object(a.a)({},o,f,{structure:[].concat(Object(u.a)(o.structure.slice(0,d)),O,Object(u.a)(o.structure.slice(d+1))),values:Object(a.a)({},o.values,_)}),i(pe(s,e,f))}}}}},N=function(e,t,r,u){return function(i,c){var o=c().mD[p.b[e]];if(o){var d=m(o);if(!(d<0)){var l=o.structure[d].id;if(o.values[l].menuItems){var f=o.values[l].menuItems.map(function(e){return e.id===(u||o.values[l].currentMenuItem)?Object(a.a)({},e,Object(n.a)({},t,r)):e});s()(f,o.values[l].menuItems)||i(y(e,"menuItems",f))}}}}},x=function(e){return{type:"MARK_REFRESHING",refreshing:e}},W=function(e){return{type:"MARK_SHOULD_REFRESHING",value:e}},P=function(e,t){return function(r,c){var s=c().mD,o=s[p.b[e]];if(o){var d=g(o,e),l=m(o);if(!(l<=0||!t&&d.includes(l))){var f=o.structure[l].id,b=1,h=["element_0"],v=["element_0"],O={},_=o.structure.filter(function(e){return!t&&e.id===f||e.path.includes(f)}).map(function(e){v.push(e.id);var r=Object(a.a)({},e,{id:"element_".concat(b)});return O[r.id]=Object(a.a)({},o.values[e.id]),e.id===f?r.path=["element_0"]:r.path=["element_0"].concat(Object(u.a)(r.path.slice(r.path.indexOf(f)+(t?1:0)))),h.push(r.id),b++,r}).map(function(e){return Object(a.a)({},e,{path:e.path.map(function(e){return h[v.indexOf(e)]})})});if(0!==_.length){var y={structure:[{id:"element_0",path:[],tag:"Main element",textMode:""}].concat(Object(u.a)(_)),values:Object(a.a)({},O,{element_0:{properties:{},propertiesString:"",textContent:""}}),currentId:b},S=prompt("Name the new plugin","New plugin")||"New plugin";r(i.a("plugin",!1,S,y));for(var I=Object(a.a)({},o,{structure:[].concat(Object(u.a)(o.structure.slice(0,l+(t?1:0))),[Object(a.a)({},o.structure[l],{path:[].concat(Object(u.a)(o.structure[l].path),Object(u.a)(t?[o.structure[l].id]:[])),tag:S,text:!1,id:v[1]})],Object(u.a)(o.structure.slice(l+(t?1:0)+_.length))),values:Object(a.a)({},o.values,Object(n.a)({},v[1],{textContent:"",propertiesString:"",properties:{}}))}),j=2;j<v.length;j++)delete I.values[v[j]];r(pe(s,e,I,{throttle:1e3}))}}}}},k=function(e){return function(t,r){var n=r().mD,i=n[p.b[e]];if(i){var c=m(i);if(!(c<0)){var s=n.pluginsStructure.find(function(e){return e.name===i.structure[c].tag});if(s&&n.resourcesObjects[s.id]){var o=n.resourcesObjects[s.id].present.structure?n.resourcesObjects[s.id].present:n.resourcesObjects[s.id].draft,d=i.currentId,l=[],f=[],b={},g=o.structure.filter(function(e){return e.path.length>0}).map(function(e){f.push(e.id);var t=Object(a.a)({},e,{id:"element_".concat(d),path:Object(u.a)(e.path.slice(1))});return b[t.id]=i.values[e.id],l.push(t.id),d++,t}).map(function(e){return Object(a.a)({},e,{path:[].concat(Object(u.a)(i.structure[c].path),Object(u.a)(e.path.map(function(e){return l[f.indexOf(e)]})))})}),h=Object(a.a)({},i,{currentId:d,structure:[].concat(Object(u.a)(i.structure.slice(0,c)),Object(u.a)(g),Object(u.a)(i.structure.slice(c+1))),values:Object(a.a)({},i.values,b)});t(pe(n,e,h))}}}}},M=function(e,t){return function(r,n){var i=n().mD,c=i[p.b[e]];if(c){var s=m(c);if(!(s<0)){var o={currentId:c.currentId},l=b.parseDOM(t),f=[],g={};!function e(t,r){t.forEach(function(t){if(("text"!==t.type||""!==t.data.trim())&&("text"===t.type||"tag"===t.type)){var n="element_".concat(o.currentId);o.currentId=o.currentId+1;var a=t.attribs?d()(t.attribs,"style"):{},i={id:n,path:r,tag:t.name||"div",text:!1},c={textContent:"",style:t.attribs&&t.attribs.style||"",properties:a,propertiesString:JSON.stringify(a)};"text"===t.type&&(i.tag="text",i.text=!0,c.textMode="text",c.textContent=t.data),f.push(i),g[n]=c,t.children&&e(t.children,[].concat(Object(u.a)(r),[n]))}})}(l,c.structure[s].path),o=Object(a.a)({},c,o,{structure:[].concat(Object(u.a)(c.structure.slice(0,s)),f,Object(u.a)(c.structure.slice(s+1))),values:Object(a.a)({},c.values,g)}),r(pe(i,e,o))}}}},U=r(10),F=r.n(U),L=r(79),V=r(207),B=r.n(V),H=r(13),J=r.n(H),G=r(4),z=new L.a,q=function(e){return{type:"AUTH_SUCCESS",data:e}},K=function(){return function(e){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");window.confirm("Are you sure you would like to delete your account?")&&window.confirm("This action cannot be reverted. All your websites will be deleted.")&&G.b.send(JSON.stringify({messageCode:"deleteUser"}))}},Z=function(e){return function(t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");e?G.b&&G.b.send(JSON.stringify({messageCode:"logoutAll"})):(z.remove("auth_token"),F.a.defaults.headers.common["x-auth-token"]=null,t(X()))}},X=function(){return{type:"AUTH_LOGOUT"}},$=function(){return function(e){if(sessionStorage.setItem("systemRefresh","0"),z.get("try_websiter"))return z.remove("try_websiter",{path:"/"}),sessionStorage.setItem("tryWebsiter","1"),void e(q({_id:"try"}));var t=z.get("auth_token"),r=z.get("rememberme");r&&(z.remove("rememberme",{path:"/"}),"false"===r&&z.remove("auth_token",{path:"/"}));var n=B.a.decode(t);if(F.a.defaults.headers.post["Content-Type"]="application/json",F.a.defaults.headers.put["Content-Type"]="application/json",F.a.defaults.headers.delete["Content-Type"]="application/json",F.a.defaults.headers.common.Accept="application/json",t&&n)return F.a.defaults.headers.common["x-auth-token"]=t,F.a.defaults.headers.post["x-auth-token"]=t,F.a.defaults.headers.get["x-auth-token"]=t,F.a.defaults.headers.delete["x-auth-token"]=t,F.a.defaults.headers.put["x-auth-token"]=t,e({type:"AUTH_START"}),F.a.get("/api/users").then(function(t){sessionStorage.removeItem("tryWebsiter"),e(q({_id:n._id}))}).catch(function(t){z.remove("auth_token",{path:"/"}),e({type:"AUTH_FAIL",error:t.message})});e(Z())}},Q=function(e,t){return{type:"CHANGE_BAR_SIZE",key:e,value:t}},Y=function(){return function(e,t){if(!sessionStorage.getItem("tryWebsiter")){var r=t(),n=r.mD,u=r.barSizes;G.b.send(JSON.stringify({messageCode:"saveSettings",settings:Object(a.a)({},n.userObject.settings,{barSizes:u})}))}}},ee=function(e){return function(t,r){var n,u,a,i,c,s=r().barSizes,o=Math.max(window.innerWidth,700),d=window.innerHeight;if(e)switch(e.key){case"height":(n=e.value)<50&&(n=50),n>d-50&&(n=d-50),t(Q("height",n));break;case"width":(n=e.value)<50&&(n=50),u=n-s.width,i=s.width2-u,c=s.width3,i<50&&(a=i-50,i=50,(c=s.width3+a)<50&&(c=50)),n+i+c+50>o&&(n=o-150,i=50,c=50),t(Q("width",n)),t(Q("width2",i)),t(Q("width3",c));break;case"width2":i=e.value,n=s.width,(u=i-50)<0&&((n+=u)<50&&(n=50),a=n-s.width,c=s.width3-a,i=50),u=n+i-s.width-s.width2,(c=s.width3-u)<50&&(c=50),n+i+c+50>o&&(i=o-n-100),t(Q("width",n)),t(Q("width2",i)),t(Q("width3",c));break;case"width3":c=e.value,n=s.width,i=s.width2,(u=c-50)<0&&((a=(i+=u)-50)<0&&((n+=a)<50&&(n=50),i=50),c=50),n+i+c+50>o&&(c=o-n-i-50),t(Q("width",n)),t(Q("width2",i)),t(Q("width3",c))}else s.height>d-50&&t(Q("height",d-50)),s.width>o-100&&t(Q("width",o-100)),s.width+s.width2>o-50&&t(Q("width2",o-s.width-50))}},te=function(){return function(e,t){var r=t().mD,n=J()(r.userObject);n.settings.tooltipsOff=!n.settings.tooltipsOff,e(ne(n))}},re=function(e){return function(t,r){var n=r().mD,u=J()(n.userObject);u.settings.currentWebsite=e,t(ne(u))}},ne=function(e){return{type:"SAVE_OBJECT",data:e}},ue=function(e){return{type:"CHOOSE_USER_IN_WEBSITE_SHARING",id:e}},ae=function(e){return{type:"SIZE_IS_CHANGING",isChanging:e}},ie=function(e){return{type:"SET_CURRENT_TOP_TAB",currentTopTab:e}},ce=function(e){return{type:"SAVE_MAIN_DATA",mD:e}},se=function(e){return{type:"ACTION_FAIL_IMAGE_UPLOAD",error:e}},oe=function(e,t,r,n){return function(u){return sessionStorage.getItem("tryWebsiter")?alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login"):F.a.put(t,e.file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){G.b&&G.b.send(JSON.stringify({messageCode:"addImage",_id:n,size:e.size,name:e.name,label:e.label,type:e.type,url:r})),u({type:"ACTION_SUCCESS_IMAGE_UPLOAD"})}).catch(function(e){u(se(e.message))})}},de=function(e){return{type:"CHOOSE_IMAGE",image:e}},le=function(e){return function(t){var r=e[0];return null==r?alert("No file selected."):"image"!==r.type.split("/")[0]?alert("File is not an image."):(t({type:"ACTION_START_IMAGE_UPLOAD"}),void t(function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;if(n.currentWebsiteId){for(var u=n.currentWebsiteId+"/"+e.name.replace(/([^a-zA-Z0-9\\.\\-])/g,"_"),a="",i=0;n.currentWebsiteObject.images.findIndex(function(e){return u+a===e.name})>=0;)a="_"+ ++i;var c={size:e.size,name:u+a,label:e.name+a,type:e.type,file:e};return F.a.post("/api/sign-s3",{fileName:c.name,fileType:e.type,fileSize:c.size,websiteId:n.currentWebsiteId}).then(function(e){t(oe(c,e.data.signedRequest,e.data.url,n.currentWebsiteId))}).catch(function(e){t(se(e.message)),400===e.response.status&&alert(e.response.data)})}}}(r)))}},fe=function(e,t){return function(r,n){var u=n().mD,a=J()(u.userObject);a.settings.websites[a.settings.currentWebsite]||(a.settings.websites[a.settings.currentWebsite]={}),u.globalSettingsPageId!==e&&"page"===t&&(a.settings.websites[a.settings.currentWebsite].currentPageFSBId=e),a.settings.websites[a.settings.currentWebsite][p.a[t]]=e,r(ne(a))}},pe=function(e,t,r,n,u,a){return{type:"ADD_RESOURCE_VERSION",mD:e,resourceType:t,draft:r,meta:n,isNotForHistory:u,globalSettings:a}},be=function(){return{type:"UNDO_RESOURCE_VERSION"}},me=function(){return{type:"REDO_RESOURCE_VERSION"}},ge=function(e){return{type:"REMOVE_RESOURCE_FROM_UNSAVED",_id:e._id}},he=r(74),ve=r.n(he),Oe=r(87).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),_e=function(e){return function(t,r){t(ye(e))}},ye=function(e){return{type:"ADD_RESOURCE",data:e}},Se=function(e){return{type:"DELETE_RESOURCE",data:e}},Ie=function(e){return{type:"REVERT_RESOURCE",data:e}},je=function(e,t){return function(r,n){if(e){var u=n().mD,a=d()(J()(u.resourcesObjects[e.resourceId]),["settings"]);if(a&&a.__v===e.resource.__v-1)return a.websites=Oe.patch(a.websites,e.resource.__patch__),a.__v=e.resource.__v,void r(_e(a));we(e.resource._id,e.type,t)}}},Ee=function(e,t){return function(r,n){if(e){var u=n().mD,a=J()(u.resourcesObjects[e.resourceId]);if(a&&a.__v===e.resource.__v-1){var i=Oe.patch(a,e.resource.__patch__);return i.__v=e.resource.__v,void r(_e(i))}we(e.resource._id,e.type,t)}}},Re=function(e,t){return function(r,n){if(e){var u=n().mD,a=J()(u.resourcesObjects[e.resourceId]);if(a&&a.__v===e.resource.__v-1)return ve()(e.resource.__patch__)||(a.draft=Oe.patch(a.draft,e.resource.__patch__)),a.__v=e.resource.__v,void r(_e(a));we(e.resource._id,e.type,t)}}},we=function(e,t,r){r&&3!==r.readyState&&r.send(JSON.stringify({messageCode:"requestResource",id:e,type:t}))};r.d(t,"j",function(){return O}),r.d(t,"a",function(){return w}),r.d(t,"o",function(){return T}),r.d(t,"s",function(){return C}),r.d(t,"D",function(){return h}),r.d(t,"E",function(){return v}),r.d(t,"g",function(){return _}),r.d(t,"h",function(){return y}),r.d(t,"t",function(){return j}),r.d(t,"Q",function(){return E}),r.d(t,"F",function(){return S}),r.d(t,"L",function(){return D}),r.d(t,"N",function(){return A}),r.d(t,"i",function(){return N}),r.d(t,"w",function(){return x}),r.d(t,"y",function(){return P}),r.d(t,"r",function(){return k}),r.d(t,"O",function(){return R}),r.d(t,"x",function(){return W}),r.d(t,"z",function(){return M}),r.d(t,"v",function(){return Z}),r.d(t,"d",function(){return $}),r.d(t,"q",function(){return K}),r.d(t,"e",function(){return ee}),r.d(t,"f",function(){return Q}),r.d(t,"I",function(){return Y}),r.d(t,"M",function(){return te}),r.d(t,"K",function(){return ae}),r.d(t,"n",function(){return re}),r.d(t,"J",function(){return ie}),r.d(t,"m",function(){return ue}),r.d(t,"H",function(){return ne}),r.d(t,"G",function(){return ce}),r.d(t,"u",function(){return le}),r.d(t,"k",function(){return de}),r.d(t,"l",function(){return fe}),r.d(t,"c",function(){return pe}),r.d(t,"P",function(){return be}),r.d(t,"A",function(){return me}),r.d(t,"B",function(){return ge}),r.d(t,"b",function(){return _e}),r.d(t,"S",function(){return je}),r.d(t,"T",function(){return Ee}),r.d(t,"R",function(){return Re}),r.d(t,"p",function(){return Se}),r.d(t,"C",function(){return Ie})},118:function(e,t,r){e.exports={Button:"LoginButton_Button__2dj44",Success:"LoginButton_Success__21MoZ",Danger:"LoginButton_Danger__2V7Lr"}},119:function(e,t,r){e.exports={Auth:"Auth_Auth__3LJcp",Form:"Auth_Form__2cblE",Title:"Auth_Title__akRbA",Subtitle:"Auth_Subtitle__2ymfd",ActionBlock:"Auth_ActionBlock__3jKGi",Middle:"Auth_Middle__J8yom",RememberForgot:"Auth_RememberForgot__vAgsm",ForgotPassword:"Auth_ForgotPassword__2P2hF",Link:"Auth_Link__1O5md",RememberMe:"Auth_RememberMe__3xI2n",RememberMeLabel:"Auth_RememberMeLabel__2SEKu",Container:"Auth_Container__KMvOh",socialButtons:"Auth_socialButtons__37I7_"}},121:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return o}),r.d(t,"d",function(){return d});var n=r(74),u=r.n(n),a=function(e){if(e===e.toUpperCase()&&e!==e.toLowerCase())return!0},i=function(e,t){return e&&t[e]?u()(t[e].present)?t[e].draft:t[e].present:null};function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,u=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function o(e){var t=function t(r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},s(r,["path"]),{children:e.filter(function(e){return e.path[e.path.length-1]===r.id}).map(function(e){return t(e)})})};return e.filter(function(e){return 0===e.path.length}).map(function(e){return t(e)})}var d=function(e){var t=e.length;return t>2&&"$"===e.charAt(0)&&"$"===e.charAt(t-1)&&e.substr(1,t-2)}},122:function(e,t,r){"use strict";var n=r(1),u=r(4),a=r(5),i=r(87).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),c=function(e,t,r){return function(c,s){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var o,d,l=s().mD,f=l.resourcesObjects[r];if(f&&(["page","template","plugin"].includes(e)?(o=f.draft,d=l[a.b[e]]):(o=f,d=f),o&&t)){var p=Object(n.a)({},d,t),b=i.diff(o,p);b&&u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"updateResource",type:e,_id:r,__patch__:b,__v:f.__v,markPublish:!!["page","template","plugin"].includes(e)&&!l[a.c[e]].notPublished}))}}},s=r(11),o=function(e,t,r,n){return function(i,c){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var s=c().mD;u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"addResource",type:e,websiteId:s.currentWebsiteId,duplicate:t,_id:s[a.a[e]],name:r,resourceData:n}))}},d=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");if(window.confirm("Are you sure you want to delete this resource?")){var n=r().mD;u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"deleteResource",type:e,_id:n[a.a[e]]}))}}},l=function(e){return function(t,r){var n=r().mD;if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"publishResource",type:e,_id:n[a.a[e]]}))}},f=function(e,t){return function(r,n){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var i=n().mD;"draft"===t?r(s.C({_id:i[a.a[e]],draft:i[a.d[e]].draft,to:t})):u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"revertResource",type:e,_id:i[a.a[e]],to:t}))}},p=r(7),b=r(13),m=r.n(b),g=function(e,t,r){return function(n,u){var a=u().mD;if(a.currentWebsiteObject&&a.currentWebsiteId){var i=m()(r?a.resourcesObjects[r]:a.currentWebsiteObject);i&&(i[e]=t,n(c("website",i,a.currentWebsiteId)))}}},h=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"addWebsite",_id:n.currentWebsiteId,duplicate:e}))}},v=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"deleteWebsite",_id:r.currentWebsiteId}))}},O=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;u.b&&3!==u.b.readyState&&u.b.send(JSON.stringify({messageCode:"verifyCustomDomain",_id:r.currentWebsiteId}))}},_=function(e,t,r){return function(n,u){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var a=u().mD;if(a.currentWebsiteObject){var i=m()(a.currentWebsiteObject.sharing),c=i.find(function(t){return t.userId===e});if(c){var s=[];s=r?[].concat(Object(p.a)(c.rights),[t]):c.rights.filter(function(e){return e!==t}),c.rights=s,n(g("sharing",i,a.currentWebsiteId))}}}},y=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;if(r.currentWebsiteObject){var n=window.prompt("Paste the user id to share the website.");if(!n)return;u.b.send(JSON.stringify({messageCode:"addUserInSharing",_id:r.currentWebsiteId,userId:n,type:"add"}))}}},S=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;e&&e!==n.userId&&!window.confirm("Are you sure you want to remove this user from sharing?")||u.b.send(JSON.stringify({messageCode:"addUserInSharing",_id:n.currentWebsiteId,userId:e,type:"delete"}))}},I=function(){return function(e,t){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var r=t().mD;if(r.currentWebsiteObject){var n=window.prompt("Enter the user id to whom you would like to transfer the website. It can be found in the user account menu tab.");if(!n||!window.confirm("Are you sure you want to transfer this website to user - "+n+"?"))return;u.b.send(JSON.stringify({messageCode:"transferWebsite",_id:r.currentWebsiteId,userTo:n}))}}},j=function(e,t){return function(r,n){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var a=n().mD;a.currentWebsiteObject&&u.b.send(JSON.stringify({messageCode:"saveDomainName",_id:a.currentWebsiteId,name:e,type:t}))}},E=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD;window.confirm("Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.")&&u.b.send(JSON.stringify({messageCode:"deleteImage",url:e,_id:n.currentWebsiteId}))}},R=function(e){return function(t,r){if(sessionStorage.getItem("tryWebsiter"))return alert("This function is not available in test mode. Please create your free account at https://my.websiter.dev/login");var n=r().mD,a=window.prompt("Type a new name for the image.");null!==a&&u.b.send(JSON.stringify({messageCode:"renameImage",url:e,_id:n.currentWebsiteId,label:a}))}};r.d(t,"m",function(){return c}),r.d(t,"a",function(){return o}),r.d(t,"f",function(){return d}),r.d(t,"i",function(){return l}),r.d(t,"k",function(){return f}),r.d(t,"c",function(){return h}),r.d(t,"h",function(){return v}),r.d(t,"d",function(){return g}),r.d(t,"p",function(){return O}),r.d(t,"n",function(){return _}),r.d(t,"b",function(){return y}),r.d(t,"g",function(){return S}),r.d(t,"o",function(){return I}),r.d(t,"l",function(){return j}),r.d(t,"j",function(){return R}),r.d(t,"e",function(){return E})},205:function(e,t,r){"use strict";var n=r(0),u=r.n(n),a=r(57),i=r.n(a);t.a=function(e){return u.a.createElement("div",{className:e.inline?[i.a.Div,i.a.Inline].join(" "):i.a.Div},u.a.createElement("label",null,u.a.createElement("input",{"data-testid":e.datatestid,type:e.radio?"radio":"checkbox",className:i.a.Input,checked:e.checked||!1,onChange:function(t){return e.onChange(t.target.checked)}}),e.title,e.children))}},213:function(e,t,r){"use strict";r.r(t);var n=r(0),u=r.n(n),a=r(120),i=r.n(a),c=r(466),s=r(27),o=r(18),d=r(45),l=r(10),f=r.n(l),p=r(1),b=r(129),m=r.n(b),g="redux-throttle/CANCEL",h="redux-throttle/FLUSH";function v(e,t,r){if(t.payload&&t.payload.type){var n=t.payload.type;return Array.isArray(n)||(n=[n]),void Object.keys(e).filter(function(e){return n.includes(e)}).forEach(function(t){return e[t][r]()})}Object.keys(e).forEach(function(t){return e[t][r]()})}r(241);var O=r(32),_=r(33),y=r(36),S=r(34),I=r(35),j=r(467),E=r(464),R=r(465),w=r(468),T=r(11),C=function(e){function t(){return Object(O.a)(this,t),Object(y.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return u.a.createElement(R.a,{to:"/login"})}}]),t}(n.Component),D=Object(s.b)(null,function(e){return{onLogout:function(){return e(T.v())}}})(C),A=function(e){return function(t){function r(){var e,t;Object(O.a)(this,r);for(var n=arguments.length,u=new Array(n),a=0;a<n;a++)u[a]=arguments[a];return(t=Object(y.a)(this,(e=Object(S.a)(r)).call.apply(e,[this].concat(u)))).state={component:null},t}return Object(I.a)(r,t),Object(_.a)(r,[{key:"componentDidMount",value:function(){var t=this;e().then(function(e){t.setState({component:e.default})})}},{key:"render",value:function(){var e=this.state.component;return e?u.a.createElement(e,this.props):u.a.createElement("div",null,"Loading...")}}]),r}(n.Component)},N=r(81),x=r(205),W=r(79),P=r(118),k=r.n(P),M=function(e){return u.a.createElement("button",{"data-testid":e.datatestid||"LoginButton",disabled:e.disabled,className:[k.a.Button,k.a[e.btnType]].join(" "),onClick:e.clicked},e.children)},U=r(119),F=r.n(U),L=r(60),V=new W.a,B=function(e){var t=Object(n.useState)(!1),r=Object(N.a)(t,2),a=r[0],i=r[1],c=Object(n.useState)(!1),s=Object(N.a)(c,2),o=s[0],d=s[1];Object(n.useEffect)(function(){f()});var l="?rememberme=false";a&&(l="?rememberme=true");var f=function(){V.get("cookies_consent")&&d(!0)},p="https://my.websiter.dev/api/auth/";return u.a.createElement("div",{className:F.a.Container},o?u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",null,"Continue with:"),u.a.createElement("div",{className:F.a.socialButtons},u.a.createElement("a",{href:p+"google/start".concat(l)},u.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#4285F4" d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"></path></svg>'}),u.a.createElement("div",null,"GOOGLE")),u.a.createElement("a",{href:p+"facebook/start".concat(l)},u.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#1877F2" d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg>'}),u.a.createElement("div",null,"FACEBOOK")),u.a.createElement("a",{href:p+"twitter/start".concat(l)},u.a.createElement(L.a,{icon:'<svg width="50" height="50" viewBox="0 0 24 24"><path fill="#1DA1F2" d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>'}),u.a.createElement("div",null,"TWITTER"))),u.a.createElement(x.a,{title:"Remember me",checked:a,onChange:function(){return i(!a)}})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,"We use cookies only for login purposes. In order to proceed you need to agree with the use of cookies."),u.a.createElement(M,{btnType:"Success",clicked:function(){V.set("cookies_consent","true",{path:"/",maxAge:3153e4}),f()}},"AGREE"),u.a.createElement(M,{btnType:"Danger",clicked:function(){window.open("https://websiter.dev","_self")}},"Return to the homepage")))},H=r(80),J=r.n(H),G=function(e){return u.a.createElement(u.a.Fragment,null,e.cover?u.a.createElement("div",{className:J.a.Cover,"data-testid":e.datatestid||"cover"},u.a.createElement("div",{className:J.a.Loader},"Loading...")):u.a.createElement("div",{className:J.a.Loader},"Loading..."))},z=(r(19),r(5)),q=r(13),K=r.n(q),Z=r(17),X=r.n(Z),$=r(121),Q=r(24),Y=r.n(Q),ee=function(e,t){return X()({structure:e.structure.map(function(e){return Y()(e,["expanded","children","itemPath","itemIndex"])}),values:e.values},{structure:t.structure.map(function(e){return Y()(e,["expanded","children","itemPath","itemIndex"])}),values:t.values})},te=r(87).create({objectHash:function(e){return e.id},propertyFilter:function(e,t){return"__patch__"!==e}}),re=function(e,t){e.notSavedResources=e.notSavedResources.filter(function(e){return e!==t._id})},ne=function(e,t){e.newVersionResources=e.newVersionResources.filter(function(e){return e!==t._id})},ue=r(210),ae={resourcesObjects:{},error:null,loading:!1,domainNotOk:!1,customDomainNotOk:!1,maxStorage:0,uploadingImage:!1,currentBoxInPlugin:"",currentImage:"",sizeIsChanging:!1,notSavedResources:[],newVersionResources:[],pageZoom:100,hoveredElementId:null,hoveredElementSize:{},isRefreshing:!1,userId:null,barSizes:{height:200,width:400,width2:200,width3:200},currentTopTab:"page",findMode:null,hoverMode:"",fromFrame:!1,search:{},shouldRefresh:!1,tryWebsiter:!1,currentUserInWebsiteSharing:"",mD:{}},ie=Object(ue.a)(ae,{REMOVE_RESOURCE_FROM_UNSAVED:function(e,t){return re(e,t)},ACTION_START_IMAGE_UPLOAD:function(e,t){return function(e){return Object(p.a)({},e,{error:null,loading:!0})}(e)},ACTION_FAIL_IMAGE_UPLOAD:function(e,t){return function(e,t){return Object(p.a)({},e,{error:t.error,loading:!1})}(e,t)},ACTION_SUCCESS_IMAGE_UPLOAD:function(e,t){return function(e){return Object(p.a)({},e,{error:null,loading:!1})}(e)},CHOOSE_IMAGE:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;e.currentImage=t.image}(e,t)},SIZE_IS_CHANGING:function(e,t){e.sizeIsChanging=t.isChanging},ACTION_START:function(e,t){e.error=null,e.pagesLoading=!0},ACTION_FAIL:function(e,t){e.error=t.error,e.pagesLoading=!1},ACTION_SUCCESS:function(e,t){e.error=null,e.pagesLoading=!1},ADD_RESOURCE_VERSION:function(e,t){return function(e,t){var r=K()(t.globalSettings?t.mD.globalSettingsPageObject:t.mD[z.d[t.resourceType]]);if(!X()(r.present,t.draft))if(t.isNotForHistory)r.present=t.draft,e.resourcesObjects[r._id]=r;else{var n=Object(p.a)({},t.draft);if(t.draft.structure&&["template","plugin"].includes(t.resourceType)){var u=[];t.draft.structure.forEach(function(e){e.tag.length>0&&e.path.length>0&&(!Object($.b)(e.tag.charAt(0))||e.childrenTo||e.isChildren||e.isElementFromCMSVariable||u.push({name:e.tag,type:"plugin"}))}),n.connectedResources=u}var a=t.globalSettings?t.mD.globalSettingsPageId:t.mD[z.a[t.resourceType]];ee(r.present.structure?r.present:r.draft,n)||e.notSavedResources.includes(a)||e.notSavedResources.push(a),r.past.length>100&&r.past.shift(),r.past.push(te.diff(r.present,n)),r.present=n,r.future=[],e.resourcesObjects[r._id]=r}}(e,t)},UNDO_RESOURCE_VERSION:function(e,t){return function(e,t){var r=e[z.a[e.currentTopTab]],n=e.resourcesObjects[r];if(n&&n.past.length>0){X()(n.present,n.past[n.past.length-1])?e.notSavedResources=e.notSavedResources.filter(function(e){return e!==t.currentResource}):e.notSavedResources.includes(t.currentResource)||e.notSavedResources.push(t.currentResource);var u=n.past.pop();n.future.unshift(u),n.present=te.unpatch(n.present,u)}}(e,t)},REDO_RESOURCE_VERSION:function(e,t){return function(e,t){var r=e[z.a[e.currentTopTab]],n=e.resourcesObjects[r];if(n&&n.future.length>0){X()(n.present,n.future[0])?e.notSavedResources=e.notSavedResources.filter(function(e){return e!==t.currentResource}):e.notSavedResources.includes(t.currentResource)||e.notSavedResources.push(t.currentResource);var u=n.future.shift();n.past.push(u),n.present=te.patch(n.present,u)}}(e,t)},AUTH_START:function(e,t){return function(e){e.loading=!0,e.error=null}(e)},AUTH_SUCCESS:function(e,t){return function(e,t){e.userId=t.data._id,e.accountInfo=t.data.accountInfo,e.error=null,e.loading=!1,e.barSizes=Object(p.a)({},e.barSizes,t.data.barSizes),e.tryWebsiter=t.data.tryWebsiter}(e,t)},AUTH_FAIL:function(e,t){return function(e,t){e.loading=!1,e.error=t.error,e.userId=null}(e,t)},AUTH_LOGOUT:function(e,t){return function(e){e.userId=null}(e)},CHANGE_BAR_SIZE:function(e,t){return function(e,t){e.barSizes[t.key]=t.value}(e,t)},SET_CURRENT_TOP_TAB:function(e,t){e.currentTopTab=t.currentTopTab},SAVE_HOVERED_ELEMENT_RECT:function(e,t){return function(e,t){t.path.length>0&&function e(r,n,u){n<r.length-1?(u[r[n].id]||(u[r[n].id]={plugin:r[n].plugin,children:{}}),e(t.path,n+1,u[r[n].id].children)):u[r[n].id]=Object(p.a)({plugin:r[n].plugin,children:{}},t.size)}(t.path,0,e.hoveredElementSize)}(e,t)},REMOVE_FROM_HOVERED_SIZES:function(e,t){return function(e,t){!function e(r){for(var n in r)if(r[n].plugin===t.currentResource)for(var u in r[n].children)t.removedElements.includes(u)&&delete r[n].children[u];else e(r.children)}(e.hoveredElementSize)}(e,t)},HOVER_ELEMENT:function(e,t){e.hoveredElementId=t.id,e.hoverMode=t.mode,e.fromFrame=t.fromFrame},UNHOVER_ELEMENT:function(e,t){e.hoveredElementId=null,e.fromFrame=!1},TOGGLE_FIND_MODE:function(e,t){return function(e,t){t.value?e.findMode===t.value?e.findMode=null:e.findMode=t.value:e.findMode=null}(e,t)},MARK_REFRESHING:function(e,t){e.isRefreshing=t.refreshing},MARK_SHOULD_REFRESHING:function(e,t){e.shouldRefresh=t.value},CHOOSE_USER_IN_WEBSITE_SHARING:function(e,t){e.currentUserInWebsiteSharing=t.id},SET_CURRENT_SITEBUILDER_MODE:function(e,t){e.currentSiteBuilderMode=t.mode},SAVE_MAIN_DATA:function(e,t){e.mD=t.mD},ADD_RESOURCE:function(e,t){var r=e.mD;if(t.data&&t.data._id){if(r.resourcesObjects[t.data._id])if(r.resourcesObjects[t.data._id].draft)e.resourcesObjects[t.data._id]=Object(p.a)({},r.resourcesObjects[t.data._id],{draft:t.data.draft,__v:t.data.__v}),!r.resourcesObjects[t.data._id].present.structure||ee(t.data.draft,r.resourcesObjects[t.data._id].present)?(re(e,{_id:t.data._id}),ne(e,{_id:t.data._id})):(function(e,t){e.notSavedResources.includes(t._id)||e.notSavedResources.push(t._id)}(e,{_id:t.data._id}),function(e,t){e.newVersionResources.includes(t._id)||e.newVersionResources.push(t._id)}(e,{_id:t.data._id}));else e.resourcesObjects[t.data._id]=Object(p.a)({},e.resourcesObjects[t.data._id],t.data);else e.resourcesObjects[t.data._id]=t.data;t.data._id.toString()===r.userId.toString()&&t.data.settings&&t.data.settings.barSizes&&(e.barSizes=t.data.settings.barSizes)}},DELETE_RESOURCE:function(e,t){t.data&&delete e.resourcesObjects[t.data.resourceId]},REVERT_RESOURCE:function(e,t){t.data&&(e.resourcesObjects[t.data._id].present=t.data.draft,"draft"===t.data.to&&(re(e,{_id:t.data._id}),ne(e,{_id:t.data._id})))},SAVE_OBJECT:function(e,t){t.data&&(e.resourcesObjects[t.data._id]=t.data)}}),ce=A(function(){return Promise.all([r.e(3),r.e(4)]).then(r.bind(null,885))}),se=function(e){function t(){return Object(O.a)(this,t),Object(y.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var e=u.a.createElement(j.a,null,u.a.createElement(E.a,{path:"/login",component:B}),u.a.createElement(R.a,{to:"/login"}));return this.props.isAuthenticated&&(e=u.a.createElement("div",{style:{height:"100%"}},u.a.createElement(j.a,null,u.a.createElement(E.a,{path:"/editor",component:ce}),u.a.createElement(E.a,{path:"/logout",component:D}),u.a.createElement(R.a,{to:"/editor"})))),u.a.createElement(u.a.Fragment,null,e," ",this.props.loading?u.a.createElement(G,{cover:!0}):null)}}]),t}(n.Component),oe=Object(w.a)(Object(s.b)(function(e){return{isAuthenticated:null!==e.userId,loading:e.loading}},function(e){return{onTryAutoSignup:function(){return e(T.d())}}})(se));r(462);r.d(t,"store",function(){return fe});var de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;f.a.defaults.baseURL="https://api.websiter.dev";var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return function(n){return function(n){return function(u){if(u.type===g)return v(r,u,"cancel"),n(u);if(u.type===h)return v(r,u,"flush"),n(u);var a=(u.meta||{}).throttle;if(!a)return n(u);if(r[u.type])return r[u.type](u);var i=e,c=t;return isNaN(a)||!0===a?"object"===typeof a&&(i=a.wait||e,c=Object(p.a)({},t,a)):i=a,r[u.type]=m()(n,i,c),r[u.type](u)}}}}(300,{leading:!0,trailing:!0}),fe=Object(o.createStore)(ie,de?de(Object(o.applyMiddleware)(le,d.a)):Object(o.applyMiddleware)(le,d.a)),pe=u.a.createElement(s.a,{store:fe},u.a.createElement(c.a,null,u.a.createElement(oe,null))),be=window.self!==window.top,me=document.getElementById("root");null===me||be||i.a.render(pe,me)},214:function(e,t,r){e.exports=r(213)},241:function(e,t,r){},349:function(e,t){},357:function(e,t){},359:function(e,t){},396:function(e,t){},397:function(e,t){},4:function(e,t,r){"use strict";var n=r(32),u=r(33),a=r(36),i=r(34),c=r(35),s=r(0),o=r.n(s),d=r(27),l=r(10),f=r.n(l),p=r(11),b=function e(t,r,n,u,a){a[r]||n.push({id:r,type:"resource"}),t&&t.connectedResources&&t.connectedResources.forEach(function(t){var r;if("plugin"===t.type&&(r=u.pluginsStructure.find(function(e){return e.name===t.name})),r){var i=a[r.id],c={};i&&(c=i.present.structure?i.present:i.draft),e(c,r.id,n,u,a)}})};r.d(t,"b",function(){return m});var m=!1,g=function(e){function t(){var e,r;Object(n.a)(this,t);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return(r=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={requestedResources:[],taskId:0},r.start=function(){var e,t;m=new WebSocket("wss://api.websiter.dev");var n=function(){clearTimeout(e),e=setTimeout(function(){m.close()},31e3);var t={};for(var n in r.props.mD.resourcesObjects)t[n]={__v:r.props.mD.resourcesObjects[n].__v,type:r.props.mD.resourcesObjects[n].draft?"resource":r.props.mD.resourcesObjects[n].pagesStructure?"website":"user"};m.send(JSON.stringify({messageCode:"heartbeat",versions:t}))};m.onopen=function(e){m.send(JSON.stringify({messageCode:"auth",user:f.a.defaults.headers.common["x-auth-token"],tryWebsiter:sessionStorage.getItem("tryWebsiter")})),t=setInterval(function(){return m.send(JSON.stringify({messageCode:"auth",noRequest:!0,user:f.a.defaults.headers.common["x-auth-token"],tryWebsiter:sessionStorage.getItem("tryWebsiter")}))},6e5),n()},m.onmessage=function(e){var t=JSON.parse(e.data);switch(t.messageCode){case"heartbeat":n();break;case"logout":r.props.logout();break;case"addResource":var u=t.resource;r.props.addResource(u);break;case"updateuser":r.props.updateUser(t,m);break;case"updatewebsite":r.props.updateWebsite(t,m);break;case"updateresource":r.props.updateResource(t,m);break;case"revertResource":r.props.revertResource(t);break;case"deleteuser":case"deletewebsite":case"deleteresource":r.props.deleteResource(t);break;case"confirmSaved":r.props.confirmSaved(t);break;case"notFoundResource":r.markNotFoundResource(t);break;case"error":alert(t.text)}},m.onclose=function(r){clearTimeout(e),clearInterval(t)}},r.markNotFoundResource=function(e){var t=r.state.requestedResources.filter(function(t){return t.id.toString()===e._id.toString()});r.setState({requestedResources:t})},r.checkInterval=null,r.check=function(){m&&3!==m.readyState||r.start()},r.reRequestResourcesInterval=null,r.reRequestResources=function(){var e=!0,t=!1,n=void 0;try{for(var u,a=r.state.requestedResources[Symbol.iterator]();!(e=(u=a.next()).done);e=!0){var i=u.value;i&&(r.props.mD.resourcesObjects[i.id]||m&&3!==m.readyState&&m.send(JSON.stringify({messageCode:"requestResource",id:i.id,type:i.type})))}}catch(c){t=!0,n=c}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},r}return Object(c.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.checkInterval=setInterval(this.check,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.reRequestResourcesInterval),clearInterval(this.checkInterval),m&&m.close()}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=function(e){var t=e.mD,r=[];if(t.userId&&t.resourcesObjects)if(t.userObject){var n=t.currentWebsiteId,u=!0,a=!1,i=void 0;try{for(var c,s=t.websites[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var o=c.value;r.push({id:o.id,type:"website"})}}catch(d){a=!0,i=d}finally{try{u||null==s.return||s.return()}finally{if(a)throw i}}n?(t.currentPageId&&(b(t.currentPageDraft,t.currentPageId,r,t.currentWebsiteObject,t.resourcesObjects),t.pageTemplateId&&b(t.pageTemplateDraft,t.pageTemplateId,r,t.currentWebsiteObject,t.resourcesObjects)),t.currentTemplateId&&b(t.currentTemplateDraft,t.currentTemplateId,r,t.currentWebsiteObject,t.resourcesObjects),t.currentPluginId&&b(t.currentPluginDraft,t.currentPluginId,r,t.currentWebsiteObject,t.resourcesObjects),t.globalSettingsPageId&&b(t.globalSettingsPageDraft,t.globalSettingsPageId,r,t.currentWebsiteObject,t.resourcesObjects),t.globalSettingsTemplateId&&b(t.globalSettingsTemplateDraft,t.globalSettingsTemplateId,r,t.currentWebsiteObject,t.resourcesObjects)):(t.websites.length>0&&(n=t.websites[0].id),n&&e.chooseWebsite(n))}else r.push({id:t.userId,type:"user"});return r=Array.from(new Set(r))}(e),n=[],u=!0,a=!1,i=void 0;try{for(var c,s=function(){var e=c.value;if(e){var r=t.state.requestedResources.find(function(t){return t.id===e.id});r||m&&3!==m.readyState&&(m.send(JSON.stringify({messageCode:"requestResource",id:e.id,type:e.type})),r={id:e.id,type:e.type,state:"sent"}),r&&n.push(r)}},o=r[Symbol.iterator]();!(u=(c=o.next()).done);u=!0)s()}catch(d){a=!0,i=d}finally{try{u||null==o.return||o.return()}finally{if(a)throw i}}this.setState({requestedResources:n}),clearInterval(this.reRequestResourcesInterval),this.reRequestResourcesInterval=setInterval(this.reRequestResources,3e3)}},{key:"render",value:function(){return null}}]),t}(s.Component),h=Object(d.b)(function(e){return{mD:e.mD}},function(e){return{logout:function(){return e(p.v())},addResource:function(t){return e(p.b(t))},updateUser:function(t,r){return e(p.S(t,r))},updateWebsite:function(t,r){return e(p.T(t,r))},updateResource:function(t,r){return e(p.R(t,r))},deleteResource:function(t){return e(p.p(t))},revertResource:function(t){return e(p.C(t))},chooseWebsite:function(t){return e(p.n(t))},confirmSaved:function(t){return e(p.B(t))}}})(g);t.a=Object(d.b)(function(e){return{userId:e.userId,resourcesObjects:e.resourcesObjects,tryWebsiter:e.tryWebsiter}},function(e){return{saveMainData:function(t){return e(p.G(t))}}})(function(e){var t=function(e,t,r){var n,u,a,i,c,s,o,d,l,f,p,b,m,g,h,v,O,_,y,S,I,j,E,R,w,T,C,D,A=t[e],N=[],x=[],W=[],P="",k="",M="",U="",F="",L="",V="",B="";if(A&&(n=A.websites)&&n.length>0&&A.settings&&(D=A.settings.tooltipsOff,A.settings.currentWebsite&&(u=n.find(function(e){return e.id===A.settings.currentWebsite})),u&&(i=t[a=u.id]))){N=i.pagesStructure,x=i.templatesStructure,W=i.pluginsStructure;var H=A.settings.websites[a];if(H){P=H.currentPageId,k=H.currentPageFSBId,M=H.currentTemplateId,U=H.currentPluginId,c=N.find(function(e){return e.id===P}),s=N.find(function(e){return e.id===k}),o=x.find(function(e){return e.id===M}),d=W.find(function(e){return e.id===U}),c&&((l=t[P])&&(m=l.present.structure?l.present:l.draft),(F=c.template||"")&&(j=x.find(function(e){return e.name===F}))&&(E=t[L=j.id])&&(R=E.present.structure?E.present:E.draft)),s&&((f=t[k])&&(g=f.present.structure?f.present:f.draft),(V=s.template||"")&&(w=x.find(function(e){return e.name===V}))&&(T=t[B=w.id])&&(C=T.present.structure?T.present:T.draft)),o&&(p=t[M])&&(h=p.present.structure?p.present:p.draft),d&&(b=t[U])&&(v=b.present.structure?b.present:b.draft);var J=N.find(function(e){return e.generalSettings});J&&(_=t[O=J.id])&&(y=_.present.structure?_.present:_.draft);var G=x.find(function(e){return e.generalSettings});if(G){var z=t[S=G.id];z&&(I=z.present.structure?z.present:z.draft)}}}return{userObject:A,websites:n,currentWebsiteItem:u,currentWebsiteId:a,currentWebsiteObject:i,pagesStructure:N,templatesStructure:x,pluginsStructure:W,currentPageId:P,currentPageFSBId:k,currentTemplateId:M,currentPluginId:U,currentPageItem:c,currentPageFSBItem:s,currentTemplateItem:o,currentPluginItem:d,currentPageObject:l,currentPageFSBObject:f,currentTemplateObject:p,currentPluginObject:b,currentPageDraft:m,currentPageFSBDraft:g,currentTemplateDraft:h,currentPluginDraft:v,globalSettingsPageId:O,globalSettingsPageObject:_,globalSettingsPageDraft:y,globalSettingsTemplateId:S,globalSettingsTemplateDraft:I,pageTemplateName:F,pageTemplateId:L,pageTemplateItem:j,pageTemplateObject:E,pageTemplateDraft:R,pageTemplateFSBName:V,pageTemplateFSBId:B,pageTemplateFSBItem:w,pageTemplateFSBObject:T,pageTemplateFSBDraft:C,resourcesObjects:t,userId:e,tryWebsiter:r,tooltipsOff:D}}(e.userId,e.resourcesObjects,e.tryWebsiter);return e.saveMainData(t),o.a.createElement(h,null)})},5:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"a",function(){return u}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return c});var n={page:"pagesStructure",plugin:"pluginsStructure",template:"templatesStructure"},u={page:"currentPageId",plugin:"currentPluginId",template:"currentTemplateId"},a={page:"currentPageDraft",plugin:"currentPluginDraft",template:"currentTemplateDraft"},i={page:"currentPageItem",plugin:"currentPluginItem",template:"currentTemplateItem"},c={page:"currentPageObject",plugin:"currentPluginObject",template:"currentTemplateObject"}},57:function(e,t,r){e.exports={Div:"Checkbox_Div__2PqSf",Input:"Checkbox_Input__1KbTF",StyleControls:"Checkbox_StyleControls__cb7Ky",Inline:"Checkbox_Inline__3XkB8"}},60:function(e,t,r){"use strict";var n=r(0),u=r.n(n);t.a=function(e){var t=null;if(e.icon){var r=function(e){for(var t=[],r=[];e.length>0;)if(0===(e=e.trim()).indexOf("</"))(e=e.substring(2)).indexOf("<")>0?(e=e.substring(e.indexOf("<")),r.pop()):e="";else{var n={type:(e=e.substring(e.indexOf("<"))).substring(1,e.indexOf(" ")),children:[]},u=(e=e.substring(e.indexOf(" "))).substring(0,e.indexOf(">")),a=u.indexOf("/>")>=0;for(e=e.substring(e.indexOf(">")+1).trim();u.length>0;){var i=u.substring(0,u.indexOf("=")).trim(),c=(u=u.substring(u.indexOf('"')+1)).substring(0,u.indexOf('"')).trim();u=u.substring(u.indexOf('"')+1).trim(),n[i]=c}0===r.length?t.push(n):r[r.length-1].children.push(n),a||r.push(n)}return t[0]}(e.icon);t=u.a.createElement("svg",{"data-testid":e.datatestid||"svg",height:r.height,width:r.width,viewBox:r.viewBox,className:e.className},r.children.map(function(e,t){return function e(t,r){switch(t.type){case"path":return u.a.createElement("path",{key:r,d:t.d,fill:t.fill},t.children.map(function(t,r){return e(t,r)}));case"g":return u.a.createElement("g",{key:r,fill:t.fill},t.children.map(function(t,r){return e(t,r)}));default:return}}(e,t)}))}return t}},80:function(e,t,r){e.exports={Loader:"Spinner_Loader__2Sex0",load3:"Spinner_load3__jNmcI",Cover:"Spinner_Cover__3iRbu"}}},[[214,1,2]]]);
//# sourceMappingURL=main.4f234c95.chunk.js.map