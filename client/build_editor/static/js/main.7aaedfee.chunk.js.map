{"version":3,"sources":["store/actions/builder.js","store/actions/auth.js","store/actions/website.js","store/actions/images.js","store/actions/resources.js","store/actions/webSocket.js","store/actions/index.js","components/UI/LoginButton/LoginButton.module.css","containers/Auth/Auth.module.css","utils/basic.js","websocketActions/sendUpdate.js","websocketActions/resources.js","websocketActions/websites.js","websocketActions/images.js","websocketActions/index.js","components/UI/Checkbox/Checkbox.js","store/middleware/throttle.js","containers/Auth/Logout/Logout.js","hoc/asyncComponent.js","components/UI/LoginButton/LoginButton.js","containers/Auth/Auth.js","components/UI/Spinner/Spinner.js","utils/resourcesAreEqual.js","store/reducer/resources.js","store/reducer/reducer.js","store/reducer/images.js","store/reducer/auth.js","App.js","index.js","components/ReserveWebsite/methods/getListOfNeededResources.js","components/ReserveWebsite/ReserveWebsite.js","utils/getEssentialData.js","utils/resourceTypeIndex.js","components/UI/Checkbox/Checkbox.module.css","components/Svg/Svg.js","components/UI/Spinner/Spinner.module.css"],"names":["htmlparser","require","findElementIndex","draft","currentBox","length","structure","findIndex","item","id","findRouteElements","mode","result","push","forEach","index","path","isEqual","saveElementsStructure","type","dispatch","getState","mD","resourceDraft","resourceDraftIndex","newStructure","map","oldItem","find","itemInn","Object","objectSpread","expanded","isNotForHistory","omit","actions","saveElementsStructureFromBuilder","globalSettings","globalSettingsPageDraft","pageTemplateDraft","globalSettingsTemplateDraft","newValues","newItem","values","value","menuItems","currentMenuItem","currentMenuId","chooseBox","unhoverBox","changeBoxPropertyInStructure","key","boxId","elementIndex","deleteFromHoveredSizes","current","changes","isObject","String","toString","concat","toConsumableArray","slice","throttle","changeBoxPropertyInValues","defineProperty","saveHoveredElementRect","size","currentResource","removedElements","hoverBox","fromFrame","toggleFindMode","addBox","putInside","routeElements","element","isChildren","childrenTo","newId","currentId","newCurrentId","isCMSVariable","tag","textMode","text","isElementFromCMSVariable","textContent","properties","propertiesString","CMSVariableType","CMSVariableSystemName","CMSVariableDescription","CMSVariableDefaultValue","deleteBox","withChildren","includes","elementId","filter","notRemove","newPageStructure","pathItem","_i","_removedElements","duplicateBox","sourceChildren","idMatch","newValuesElements","newChildren","newItemId","splitText","start","end","textContent0","substr","textContent1","textContent2","newElements","textToSpan","spanId","style","changeMenuItemProperty","itemId","resource","newMenuItems","markRefreshing","refreshing","markShouldRefreshing","mergeBoxToPlugin","onlyChildren","newResourcesIds","oldResourcesIds","resourceDataValues","resourceDataStructure","indexOf","resourceData","element_0","newPluginName","prompt","wsActions","i","dissolvePluginToBox","plugin","pluginsStructure","name","resourcesObjects","pluginResource","present","pluginDataValues","pluginDataStructure","parseHTML","htmlArray","parseDOM","newElementsValues","parseToWebsiter","curArray","data","trim","attribs","newElement","newElementValues","JSON","stringify","children","cookies","Cookies","authSuccess","deleteUser","sessionStorage","getItem","alert","window","confirm","webSocket","send","messageCode","logout","all","remove","axios","defaults","headers","common","logoutDo","authCheckState","setItem","get","_id","token","rememberMe","userId","jwt","decode","post","put","delete","Accept","then","response","removeItem","catch","err","error","message","changeBarSizeDo","savePropertiesOnLeave","_getState","barSizes","settings","userObject","changeBarSize","initiator","dif","dif2","value2","value3","width","Math","max","innerWidth","height","innerHeight","width2","width3","switchTooltips","cloneDeep","tooltipsOff","chooseWebsite","currentWebsite","saveObject","chooseUserInWebsiteSharing","setSizeIsChanging","isChanging","setCurrentTopTab","currentTopTab","saveMainData","actionFailImageUpload","uploadFile","fileDetails","signedRequest","url","websiteId","file","Content-Type","label","chooseImage","image","imageUpload","files","split","currentWebsiteId","replace","namePrefix","k","currentWebsiteObject","images","fileName","fileType","fileSize","status","getSignedRequest","chooseResource","resourceType","websites","globalSettingsPageId","currentPageFSBId","addResourceVersion","meta","undoResourceVersion","redoResourceVersion","removeResourceFromUnsaved","diffpatcher","create","objectHash","obj","propertyFilter","context","addResource","addResourceDo","deleteResource","revertResource","updateUser","currentUser","resourceId","__v","patch","__patch__","requestResource","updateWebsite","newWebsite","updateResource","isEmpty","readyState","__webpack_require__","d","__webpack_exports__","builder_chooseBox","builder_addBox","builder_deleteBox","builder_duplicateBox","builder_saveElementsStructure","builder_saveElementsStructureFromBuilder","builder_changeBoxPropertyInStructure","builder_changeBoxPropertyInValues","builder_splitText","builder_textToSpan","builder_changeMenuItemProperty","builder_mergeBoxToPlugin","builder_dissolvePluginToBox","builder_parseHTML","auth_logout","auth_authCheckState","auth_deleteUser","auth_changeBarSize","auth_savePropertiesOnLeave","auth_switchTooltips","website_chooseWebsite","resources_chooseResource","webSocket_updateUser","webSocket_updateWebsite","webSocket_updateResource","module","exports","Button","Success","Danger","Auth","Form","Title","Subtitle","ActionBlock","Middle","RememberForgot","ForgotPassword","Link","RememberMe","RememberMeLabel","Container","socialButtons","checkIfCapital","getCurrentResourceValue","buildTree","getInheritedPropertyName","lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__","lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default","n","char","toUpperCase","toLowerCase","_defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","items","buildItem","arguments","ownKeys","sym","getOwnPropertyDescriptor","_objectSpread","child","charAt","sendUpdate","currentDraft","oldResource","newResource","diff","markPublish","resourceItemIndex","notPublished","duplicate","newResourceName","publishResource","to","resourceObjectIndex","changeWebsiteProperty","addWebsite","deleteWebsite","verifyCustomDomain","sharingRightsChange","right","newSharing","sharing","account","newRights","rights","addUserInWebsiteSharing","deleteUserInWebsiteSharing","transferWebsite","userTo","saveDomainName","deleteImage","renameImage","sendUpdate_sendUpdate","resources_addResource","resources_deleteResource","resources_publishResource","resources_revertResource","websites_addWebsite","websites_deleteWebsite","websites_changeWebsiteProperty","websites_verifyCustomDomain","websites_sharingRightsChange","websites_addUserInWebsiteSharing","websites_deleteUserInWebsiteSharing","websites_transferWebsite","websites_saveDomainName","images_renameImage","images_deleteImage","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1__","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1___default","Checkbox","props","a","createElement","className","inline","classes","Div","Inline","join","data-testid","datatestid","radio","Input","checked","onChange","e","title","CANCEL","FLUSH","throttled","action","method","payload","types","Array","isArray","t","Logout","this","onLogout","react_default","Redirect","Component","connect","asyncComponent","importComponent","_Component","_temp","_getPrototypeOf2","_this","classCallCheck","_len","args","_key","possibleConstructorReturn","getPrototypeOf","apply","state","component","inherits","createClass","_this2","cmp","setState","default","C","LoginButton","disabled","btnType","onClick","clicked","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","cookieConsent","setCookieConsent","useEffect","checkCookieConsent","remeberMeParam","basicURL","Fragment","href","Svg","icon","UI_LoginButton_LoginButton","set","maxAge","open","spinner","cover","Cover","Loader","resourcesAreEqual","draft1","draft2","notSavedResources","removeResourceFromNewVersions","newVersionResources","initialState","loading","domainNotOk","customDomainNotOk","maxStorage","uploadingImage","currentBoxInPlugin","currentImage","sizeIsChanging","pageZoom","hoveredElementId","hoveredElementSize","isRefreshing","findMode","hoverMode","search","shouldRefresh","tryWebsiter","currentUserInWebsiteSharing","reducer","createReducer","REMOVE_RESOURCE_FROM_UNSAVED","resources","ACTION_START_IMAGE_UPLOAD","ACTION_FAIL_IMAGE_UPLOAD","ACTION_SUCCESS_IMAGE_UPLOAD","CHOOSE_IMAGE","undefined","SIZE_IS_CHANGING","ACTION_START","pagesLoading","ACTION_FAIL","ACTION_SUCCESS","ADD_RESOURCE_VERSION","globalSettingsPageObject","newDraft","connectedResources","currentResourceId","past","shift","future","UNDO_RESOURCE_VERSION","delta","pop","unshift","unpatch","REDO_RESOURCE_VERSION","AUTH_START","auth","AUTH_SUCCESS","accountInfo","AUTH_FAIL","AUTH_LOGOUT","CHANGE_BAR_SIZE","SET_CURRENT_TOP_TAB","SAVE_HOVERED_ELEMENT_RECT","checkAndCreatePath","parent","REMOVE_FROM_HOVERED_SIZES","checkAndRemoveElement","removeFromHoveredSizes","HOVER_ELEMENT","UNHOVER_ELEMENT","TOGGLE_FIND_MODE","MARK_REFRESHING","MARK_SHOULD_REFRESHING","CHOOSE_USER_IN_WEBSITE_SHARING","SET_CURRENT_SITEBUILDER_MODE","currentSiteBuilderMode","SAVE_MAIN_DATA","ADD_RESOURCE","DELETE_RESOURCE","REVERT_RESOURCE","SAVE_OBJECT","asyncSiteBuilderLayout","Promise","bind","App","onTryAutoSignup","routes","Switch","Route","isAuthenticated","Spinner","withRouter","src_store","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","baseURL","throttleMiddleware","defaultWait","defaultThrottleOption","store","next","shouldThrottle","wait","options","isNaN","leading","trailing","createStore","applyMiddleware","thunk","app","es","BrowserRouter","src_App","inIframe","self","top","root","document","getElementById","ReactDOM","render","addConnectedResources","newRequestedResourcesList","connectedResource","nextResourceItem","nextResourceObject","nextResourceDraft","ReserveWebsiteInn","requestedResources","taskId","pingTimeout","authInterval","WebSocket","heartbeat","clearTimeout","setTimeout","close","versions","pagesStructure","onopen","event","user","setInterval","noRequest","onmessage","parse","confirmSaved","markNotFoundResource","onclose","clearInterval","checkInterval","check","reRequestResourcesInterval","reRequestResources","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","requestedResource","return","nextProps","currentPageId","currentPageDraft","pageTemplateId","currentTemplateId","currentTemplateDraft","currentPluginId","currentPluginDraft","from","Set","getListOfNeededResources","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","requestItem","requestedResourceItem","_iterator2","ReserveWebsiteDo","mainData","currentWebsiteItem","currentPageItem","currentPageFSBItem","currentTemplateItem","currentPluginItem","currentPageObject","currentPageFSBObject","currentTemplateObject","currentPluginObject","currentPageFSBDraft","globalSettingsTemplateId","pageTemplateItem","pageTemplateObject","pageTemplateFSBItem","pageTemplateFSBObject","pageTemplateFSBDraft","templatesStructure","pageTemplateName","pageTemplateFSBName","pageTemplateFSBId","currentWebsiteItemSettings","template","globalSettingsPageItem","generalSettings","globalSettingsTemplateItem","globalSettingsTemplateObject","getEssentialData","page","StyleControls","objectSvg","svg","stack","substring","curObj","attr","selfclosing","svgStringToObj","viewBox","svgChildrenToElements","fill","el","load3"],"mappings":"sLAQIA,EAAaC,EAAQ,KAEnBC,EAAmB,SAACC,GACtB,OAAKA,EAAMC,WACPD,EAAMC,WAAWC,OAAS,GAAW,EAClCF,EAAMG,UAAUC,UAAU,SAAAC,GAAI,OAAIA,EAAKC,KAAON,EAAMC,cAF5B,GAK7BM,EAAoB,SACtBP,EACAQ,GAEA,IAAMC,EAAS,GASf,MARa,WAATD,EACAC,EAAOC,KAAK,GACI,aAATF,GACPR,EAAMG,UAAUQ,QAAQ,SAACN,EAAMO,IACF,IAArBP,EAAKQ,KAAKX,QAAgBY,IAAQT,EAAKQ,KAAM,CAAC,iBAC9CJ,EAAOC,KAAKE,KAGjBH,GAGEM,EAAwB,SACjCC,EACAb,GAFiC,OAGhC,SAACc,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKG,GAAOH,GAASI,GAAkBjB,EAAvC,CAEA,IAAMmB,EAAenB,EAAUoB,IAAI,SAAAlB,GAC/B,IAAMmB,EAAUJ,EAAcjB,UAAUsB,KACpC,SAAAC,GAAO,OAAIA,EAAQpB,KAAOD,EAAKC,KAEnC,OAAIkB,EACOG,OAAAC,EAAA,EAAAD,CAAA,GACAtB,EACAmB,EAFP,CAGIK,SAAUxB,EAAKwB,SACfhB,KAAMR,EAAKQ,OAEPR,IAEVL,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GAAQP,EAAR,CAAuBjB,UAAWmB,IAEvCQ,EAAkBhB,IACpBM,EAAcjB,UAAUoB,IAAI,SAAAlB,GAAI,OAC5B0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,eAExCiB,EAAaC,IAAI,SAAAlB,GAAI,OACjB0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,gBAG5CY,EAASe,GAA2Bb,EAAIH,EAAMhB,EAAO,GAAI8B,OAGhDG,EAAmC,SAC5CjB,EACAb,EACA+B,GAH4C,OAI3C,SAACjB,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBc,EAChBf,EAAGgB,wBACHhB,EAAGE,IAAmBL,IAE5B,GAAKG,GAAOH,GAASI,GAAkBjB,EAAvC,CAEA,IAAMiC,EAAoBF,EACpBf,EAAGkB,4BACHlB,EAAGiB,kBAEHE,EAAY,GACZhB,EAAenB,EAAUoB,IAAI,SAAAlB,GAC/B,IAAMmB,EAAUJ,EAAcjB,UAAUsB,KACpC,SAAAC,GAAO,OAAIA,EAAQpB,KAAOD,EAAKC,KAE/BiC,EAAOZ,OAAAC,EAAA,EAAAD,CAAA,GAAQtB,GAcnB,OAbImB,IAASe,EAAOZ,OAAAC,EAAA,EAAAD,CAAA,GAAQY,EAAR,CAAiBV,SAAUL,EAAQK,YAEvDS,EAAUjC,EAAKC,IAAfqB,OAAAC,EAAA,EAAAD,CAAA,GACOS,EAAkBI,OAAOnC,EAAKC,IADrC,CAEImC,MAAO,GACPC,UAAW,GACXC,gBAAiB,GACjBC,cAAe,GAGXxB,EAAcoB,OAAOnC,EAAKC,KAAO,IAGlCqB,OAAAC,EAAA,EAAAD,CAAA,GAAKY,EAAZ,CAAqB1B,KAAMR,EAAKQ,SAE9Bb,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPjB,UAAWmB,EACXkB,OAAQF,IAGNR,EACFhB,IACIM,EAAcjB,UAAUoB,IAAI,SAAAlB,GAAI,OAC5B0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,eAExCiB,EAAaC,IAAI,SAAAlB,GAAI,OACjB0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,iBAEvCS,IAAQM,EAAcoB,OAAQxC,EAAMwC,QAC7CvB,EACIe,GACIb,EACAH,EACAhB,EACA,GACA8B,EACAI,OAKCW,EAAY,SAAC7B,EAAMX,GAAP,OAAwB,SAC7CY,EACAC,GACC,IACOC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKG,GAAOH,GAASX,GAASe,EAA9B,CACA,IAAMpB,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GAAQP,EAAR,CAAuBnB,WAAYI,IAC9CY,EAASe,GAA2Bb,EAAIH,EAAMhB,EAAO,IAAI,IACzDiB,EAAS6B,QAGAC,EAA+B,SACxC/B,EACAgC,EACAP,EACAX,EACAmB,GALwC,OAMvC,SAAChC,EAAkBC,GAAa,IAI7BgC,EAHI/B,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKG,GAAOH,GAASgC,GAAQ5B,MAGzB8B,EADAD,EACe7B,EAAcjB,UAAUC,UACnC,SAAAC,GAAI,OAAIA,EAAKC,KAAO2C,IAGTlD,EAAiBqB,IAEjB,GAAnB,CACY,QAAR4B,GACA/B,EACIkC,EAAuBhC,EAAGiC,IAAQpC,IAAQ,CACtCI,EAAcjB,UAAU+C,GAAc5C,MAKlD,IAAI+C,EAAU,GACVC,IAASN,MAAyB,kBAARA,GAAoBA,aAAeO,QAC7DF,EAAUL,EACTK,EAAQL,EAAIQ,YAAcf,EAC/B,IAAMzC,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPjB,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,IAD/B,CAAAvB,OAAAC,EAAA,EAAAD,CAAA,GAGEP,EAAcjB,UAAU+C,GACxBG,IAJF1B,OAAA+B,EAAA,EAAA/B,CAMFP,EAAcjB,UAAUwD,MAAMT,EAAe,OAIxDjC,EACIe,GACIb,EACAH,EACAhB,EACA,CACI4D,SAAU,KAEd9B,OAKC+B,EAA4B,SACrC7C,EACAgC,EACAP,EACAX,EACAmB,GALqC,OAMpC,SAAChC,EAAkBC,GAAa,IAI7BgC,EAHI/B,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKG,GAAOH,GAASgC,GAAQ5B,MAGzB8B,EADAD,EACe7B,EAAcjB,UAAUC,UACnC,SAAAC,GAAI,OAAIA,EAAKC,KAAO2C,IAGTlD,EAAiBqB,IAEjB,GAAnB,CACY,QAAR4B,GACA/B,EACIkC,EAAuBhC,EAAGiC,IAAQpC,IAAQ,CACtCI,EAAcjB,UAAU+C,GAAc5C,MAKlD,IAAI+C,EAAU,GACVC,IAASN,MAAyB,kBAARA,GAAoBA,aAAeO,QAC7DF,EAAUL,EACTK,EAAQL,EAAIQ,YAAcf,EAC/B,IAAMzC,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPoB,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OADfb,OAAAmC,EAAA,EAAAnC,CAAA,GAEDP,EAAcjB,UAAU+C,GAAc5C,GAFrCqB,OAAAC,EAAA,EAAAD,CAAA,GAGKP,EAAcoB,OACbpB,EAAcjB,UAAU+C,GAAc5C,IAEvC+C,OAKfpC,EACIe,GACIb,EACAH,EACAhB,EACA,CACI4D,SAAU,KAEd9B,OAKCiC,EAAyB,SAAClD,EAAqBmD,GAAtB,MAAwC,CAC1EhD,KAAM,4BACNH,OACAmD,SAGEb,EAAyB,SAACc,EAAiBC,GAAlB,MAAuC,CAClElD,KAAM,4BACNiD,kBACAC,oBAGSC,EAAW,SAAC7D,EAAYE,EAAc4D,GAA3B,MAAoD,CACxEpD,KAAM,gBACNV,KACAE,OACA4D,cAGStB,EAAa,iBAAO,CAC7B9B,KAAM,oBAGGqD,EAAiB,SAAC5B,GAAD,MAAqB,CAC/CzB,KAAM,mBACNyB,UAGS6B,EAAS,SAClB9D,EACAQ,GAFkB,OAGjB,SAACC,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBb,IAC5C,GAAKY,EAAL,CACA,IAGImD,EAHEC,EAAgBjE,EAAkBa,EAAeZ,GACnD0C,EAAenD,EAAiBqB,GAGvB,WAATZ,EACI0C,GAAgB,IAChBA,EAAe,EACfqB,GAAY,GAEA,aAAT/D,IACH0C,EAAe,IACfA,EAAesB,EAAcA,EAActE,OAAS,IAEP,eAA7CkB,EAAcjB,UAAU+C,GAAc5C,KACtC4C,EAAesB,EAAcA,EAActE,OAAS,IAGpDkB,EAAcjB,UAAU+C,GAAcrC,KAAKX,OAAS,IACnDY,IAAQM,EAAcjB,UAAU+C,GAAcrC,KAAM,CAAC,iBAEtD0D,GAAY,IAGpB,IAAME,EAAUrD,EAAcjB,UAAU+C,GACpCuB,EAAQC,WACRH,GAAY,EACLE,EAAQE,WACfJ,GAAY,EAEC,WAATvD,IAAmBuD,GAAY,GAG1B,WAATvD,IAAmBuD,GAAY,GAEnC,IAAMK,EAAK,WAAAnB,OAAcrC,EAAcyD,WACjCC,EAAe1D,EAAcyD,UAAY,EAEzCE,EAC2C,eAA7C3D,EAAcjB,UAAU+C,GAAc5C,IACtCQ,IAAQM,EAAcjB,UAAU+C,GAAcrC,KAAM,CAAC,eAEnDb,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPjB,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,EAAe,IAD9C,CAEL,CACI5C,GAAIsE,EACJ/D,KAAM0D,EAAS,GAAAd,OAAA9B,OAAA+B,EAAA,EAAA/B,CAEFP,EAAcjB,UAAU+C,GAAcrC,MAFpC,CAGLO,EAAcjB,UAAU+C,GAAc5C,KAHjCqB,OAAA+B,EAAA,EAAA/B,CAKLP,EAAcjB,UAAU+C,GAAcrC,MAChDmE,IACa,SAAThE,EACM,OACS,aAATA,EACA,eACA+D,EACA,mBACA,MACVE,SAAU,OACVC,KAAe,SAATlE,EACN0D,WAAqB,aAAT1D,EACZ+D,cAAeA,EACfI,yBAAmC,gBAATnE,IAtBzBW,OAAA+B,EAAA,EAAA/B,CAwBFP,EAAcjB,UAAUwD,MAAMT,EAAe,KAEpDV,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OADfb,OAAAmC,EAAA,EAAAnC,CAAA,GAEDiD,EAAQ,CACLQ,YAAa,GACbC,WAAY,GACZC,iBAAkB,GAClBC,gBAAiB,OACjBC,sBAAuB,iBACvBC,uBAAwB,+BACxBC,wBAAyB,oCAGjCb,UAAWC,EACX7E,WAAY2E,IAEhB3D,EAASe,GAA2Bb,EAAIX,EAAMR,OAGrC2F,EAAY,SACrB3E,EACA4E,GAFqB,OAGpB,SAAC3E,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAMoD,EAAgBjE,EAAkBa,EAAeJ,GACnDkC,EAAenD,EAAiBqB,GACpC,KAAI8B,EAAe,GAAKsB,EAAcqB,SAAS3C,IAA/C,CAEA,IAAM4C,EAAY1E,EAAcjB,UAAU+C,GAAc5C,GAEpDN,EAAQ,GACNkE,EAAkB,CAAC4B,GACzB,GAAIF,EACA5F,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EADF,CAEDjB,UAAWiB,EAAcjB,UAAU4F,OAAO,SAAA1F,GACtC,IAAM2F,EACFF,IAAczF,EAAKC,KAAOD,EAAKQ,KAAKgF,SAASC,GAEjD,OADKE,GAAW9B,EAAgBxD,KAAKL,EAAKC,IACnC0F,UAGZ,CACH,IAAMC,EAAmB7E,EAAcjB,UAAUoB,IAAI,SAAAlB,GAAI,OAAAsB,OAAAC,EAAA,EAAAD,CAAA,GAClDtB,EADkD,CAErDQ,KAAMR,EAAKQ,KAAKkF,OAAO,SAAAG,GAAQ,OAAIA,IAAaJ,QAGpD9F,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EADF,CAEDjB,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFsE,EAAiBtC,MAAM,EAAGT,IADxBvB,OAAA+B,EAAA,EAAA/B,CAEFsE,EAAiBtC,MAAMT,EAAe,OAIrD,QAAAiD,EAAA,EAAAC,EAAiBlC,EAAjBiC,EAAAC,EAAAlG,OAAAiG,IAAkC,CAA7B,IAAI9F,EAAI+F,EAAAD,UACFnG,EAAMwC,OAAOnC,EAAKC,IAE7BW,EAASe,GAA2Bb,EAAIH,EAAMhB,IAC9CiB,EAASkC,EAAuBhC,EAAGiC,IAAQpC,IAAQkD,QAG1CmC,EAAe,SACxBrF,EACA4E,GAFwB,OAGvB,SAAC3E,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAMoD,EAAgBjE,EAAkBa,EAAeJ,GACnDkC,EAAenD,EAAiBqB,GACpC,KAAI8B,EAAe,GAAKsB,EAAcqB,SAAS3C,IAA/C,CAEA,IAAM4C,EAAY1E,EAAcjB,UAAU+C,GAAc5C,GAElDgG,EAAiBlF,EAAcjB,UAAU4F,OAAO,SAAA1F,GAAI,OACtDA,EAAKQ,KAAKgF,SAASC,KAGjBlB,EAAK,WAAAnB,OAAcrC,EAAcyD,WACnC7E,EAAQ,CAAE6E,UAAWzD,EAAcyD,UAAY,GAEnD,GAAIe,EAAc,CACd,IAAMW,EAAO5E,OAAAmC,EAAA,EAAAnC,CAAA,GAAMmE,EAAYlB,GACzB4B,EAAiB7E,OAAAmC,EAAA,EAAAnC,CAAA,GAAMiD,EAAQxD,EAAcoB,OAAOsD,IACpDW,EAAcH,EACf/E,IAAI,SAAAlB,GACD,IAAIqG,EAAS,WAAAjD,OAAczD,EAAM6E,WAIjC,OAHA7E,EAAM6E,WAAa,EACnB0B,EAAQlG,EAAKC,IAAMoG,EACnBF,EAAkBE,GAAatF,EAAcoB,OAAOnC,EAAKC,IAClDqB,OAAAC,EAAA,EAAAD,CAAA,GACAtB,EADP,CAEIC,GAAIoG,MAGXnF,IAAI,SAAAlB,GACD,OAAOsB,OAAAC,EAAA,EAAAD,CAAA,GACAtB,EADP,CAGIQ,KAAMR,EAAKQ,KAAKU,IAAI,SAAA2E,GAChB,OAAIK,EAAQL,GACDK,EAAQL,GAERA,QAM3BlG,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EACApB,EAFF,CAGDG,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MACvB,EACAT,EAAeoD,EAAepG,SAH7B,CAAAyB,OAAAC,EAAA,EAAAD,CAAA,GAMEP,EAAcjB,UAAU+C,GAN1B,CAOD5C,GAAIsE,KAPHjD,OAAA+B,EAAA,EAAA/B,CASF8E,GATE9E,OAAA+B,EAAA,EAAA/B,CAUFP,EAAcjB,UAAUwD,MACvBT,EAAeoD,EAAepG,UAGtCsC,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OACdgE,UAIXxG,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EACApB,EAFF,CAGDG,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MACvB,EACAT,EAAeoD,EAAepG,SAH7B,CAAAyB,OAAAC,EAAA,EAAAD,CAAA,GAMEP,EAAcjB,UAAU+C,GAN1B,CAOD5C,GAAIsE,KAPHjD,OAAA+B,EAAA,EAAA/B,CASFP,EAAcjB,UAAUwD,MACvBT,EAAeoD,EAAepG,UAGtCsC,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OADfb,OAAAmC,EAAA,EAAAnC,CAAA,GAEDiD,EAAQxD,EAAcoB,OAAOsD,OAI1C7E,EAASe,GAA2Bb,EAAIH,EAAMhB,QAGrC2G,EAAY,SAAC3F,EAAM4F,EAAeC,GAAtB,OAAsC,SAC3D5F,EACAC,GACC,IACOC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAM8B,EAAenD,EAAiBqB,GACtC,KAAI8B,EAAe,GAAnB,CAEA,IAEI0B,EAFA5E,EAAQ,CAAE6E,UAAWzD,EAAcyD,WAIjCK,EAAO9D,EAAcjB,UAAU+C,GAAckC,YACnD,GAAKF,EAAL,CACA,IAAM4B,EAAe5B,EAAK6B,OAAO,EAAGH,GAC9BI,EAAe9B,EAAK6B,OAAOH,EAAOC,EAAMD,GACxCK,EAAe/B,EAAK6B,OAAOF,GAE3BK,EAAc,CAACvF,OAAAC,EAAA,EAAAD,CAAA,GAEVP,EAAcjB,UAAU+C,KAI7BZ,EAASX,OAAAmC,EAAA,EAAAnC,CAAA,GACVuB,EADUvB,OAAAC,EAAA,EAAAD,CAAA,GAEJP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IAFvD,CAGP8E,YAAa0B,KAIjBE,EAAa9G,OAAS,IACtB0E,EAAK,WAAAnB,OAAczD,EAAM6E,WACzB7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpCqC,EAAYxG,KAAZiB,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcjB,UAAU+C,GAD/B,CAEI5C,GAAIsE,KAERtC,EAAUsC,GAAVjD,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IADlE,CAEI8E,YAAa4B,MAIjBC,EAAa/G,OAAS,GAA6B,IAAxB8G,EAAa9G,UACxC0E,EAAK,WAAAnB,OAAczD,EAAM6E,WACzB7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpCqC,EAAYxG,KAAZiB,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcjB,UAAU+C,GAD/B,CAEI5C,GAAIsE,KAERtC,EAAUsC,GAAVjD,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IADlE,CAEI8E,YAAa6B,KAIrBjH,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EACApB,EAFF,CAGDG,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,IACjCgE,EAFEvF,OAAA+B,EAAA,EAAA/B,CAGFP,EAAcjB,UAAUwD,MAAMT,EAAe,KAEpDV,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OACdF,KAGXrB,EAASe,GAA2Bb,EAAIH,EAAMhB,SAGrCmH,EAAa,SAACnG,EAAM4F,EAAeC,GAAtB,OAAsC,SAC5D5F,EACAC,GACC,IACOC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAM8B,EAAenD,EAAiBqB,GACtC,KAAI8B,EAAe,GAAnB,CAEA,IAAI0B,EACA5E,EAAQ,CAAE6E,UAAWzD,EAAcyD,WAEjCK,EAAO9D,EAAcjB,UAAU+C,GAAckC,YACnD,GAAKF,EAAL,CACA,IAAM4B,EAAe5B,EAAK6B,OAAO,EAAGH,GAC9BI,EAAe9B,EAAK6B,OAAOH,EAAOC,EAAMD,GACxCK,EAAe/B,EAAK6B,OAAOF,GAE3BK,EAAc,CAACvF,OAAAC,EAAA,EAAAD,CAAA,GAEVP,EAAcjB,UAAU+C,KAI7BZ,EAASX,OAAAmC,EAAA,EAAAnC,CAAA,GACVuB,EADUvB,OAAAC,EAAA,EAAAD,CAAA,GAEJP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IAFvD,CAGP8E,YAAa0B,KAIfM,EAAM,WAAA3D,OAAczD,EAAM6E,WAChC7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpCqC,EAAYxG,KAAK,CACbJ,GAAI8G,EACJvG,KAAKc,OAAA+B,EAAA,EAAA/B,CAAKP,EAAcjB,UAAU+C,GAAcrC,MAChDmE,IAAK,OACLE,MAAM,IAGV5C,EAAU8E,GAAU,CAChBhC,YAAa,GACbiC,MAAO,GACPhC,WAAY,IAGhBT,EAAK,WAAAnB,OAAczD,EAAM6E,WACzB7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpCqC,EAAYxG,KAAZiB,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcjB,UAAU+C,GAD/B,CAEIrC,KAAI,GAAA4C,OAAA9B,OAAA+B,EAAA,EAAA/B,CAAMP,EAAcjB,UAAU+C,GAAcrC,MAA5C,CAAkDuG,IACtDhC,YAAa4B,EACb1G,GAAIsE,KAGRtC,EAAUsC,GAAVjD,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IADlE,CAEI8E,YAAa4B,IAGbC,EAAa/G,OAAS,IACtB0E,EAAK,WAAAnB,OAAczD,EAAM6E,WACzB7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpCqC,EAAYxG,KAAZiB,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcjB,UAAU+C,GAD/B,CAEIkC,YAAa6B,EACb3G,GAAIsE,KAERtC,EAAUsC,GAAVjD,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcoB,OAAOpB,EAAcjB,UAAU+C,GAAc5C,IADlE,CAEI8E,YAAa6B,KAIrBjH,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EACApB,EAFF,CAGDG,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,IACjCgE,EAFEvF,OAAA+B,EAAA,EAAA/B,CAGFP,EAAcjB,UAAUwD,MAAMT,EAAe,KAEpDV,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OACdF,KAGXrB,EAASe,GAA2Bb,EAAIH,EAAMhB,SAIrCsH,EAAyB,SAClCtG,EACAgC,EACAP,EACA8E,GAJkC,OAKjC,SAACtG,EAAkBC,GAAa,IAE3BsG,EADStG,IAAPC,GACYE,IAAmBL,IAEvC,GAAKwG,EAAL,CAEA,IAAMtE,EAAenD,EAAiByH,GACtC,KAAItE,EAAe,GAAnB,CACA,IAAM4C,EAAY0B,EAASrH,UAAU+C,GAAc5C,GAEnD,GAAKkH,EAAShF,OAAOsD,GAAWpD,UAAhC,CACA,IAAM+E,EAAeD,EAAShF,OAAOsD,GAAWpD,UAAUnB,IAAI,SAAAlB,GAC1D,OACIA,EAAKC,MACJiH,GAAkBC,EAAShF,OAAOsD,GAAWnD,iBAEvChB,OAAAC,EAAA,EAAAD,CAAA,GAAKtB,EAAZsB,OAAAmC,EAAA,EAAAnC,CAAA,GAAmBqB,EAAMP,IAElBpC,IAGVS,IAAQ2G,EAAcD,EAAShF,OAAOsD,GAAWpD,YAClDzB,EAAS4C,EAA0B7C,EAAM,YAAayG,SAGjDC,EAAiB,SAACC,GAAD,MAA0B,CACpD3G,KAAM,kBACN2G,eAGSC,EAAuB,SAACnF,GAAD,MAAsB,CACtDzB,KAAM,yBACNyB,UAGSoF,EAAmB,SAC5B7G,EACA8G,GAF4B,OAG3B,SAAC7G,EAAkBC,GAAa,IACzBC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAE5C,GAAKI,EAAL,CACA,IAAMoD,EAAgBjE,EAAkBa,EAAeJ,GACnDkC,EAAenD,EAAiBqB,GACpC,KACI8B,GAAgB,IACd4E,GAAgBtD,EAAcqB,SAAS3C,IAF7C,CAMA,IAAM4C,EAAY1E,EAAcjB,UAAU+C,GAAc5C,GACpDuE,EAAY,EACVkD,EAAkB,CAAC,aACnBC,EAAkB,CAAC,aACnBC,EAAqB,GAErBC,EAAwB9G,EAAcjB,UACvC4F,OACG,SAAA1F,GAAI,OACEyH,GAAgBzH,EAAKC,KAAOwF,GAC9BzF,EAAKQ,KAAKgF,SAASC,KAE1BvE,IAAI,SAAAlB,GACD2H,EAAgBtH,KAAKL,EAAKC,IAC1B,IAAMiC,EAAOZ,OAAAC,EAAA,EAAAD,CAAA,GAAQtB,EAAR,CAAcC,GAAE,WAAAmD,OAAaoB,KAgB1C,OAfAoD,EAAmB1F,EAAQjC,IAA3BqB,OAAAC,EAAA,EAAAD,CAAA,GACOP,EAAcoB,OAAOnC,EAAKC,KAE7BD,EAAKC,KAAOwF,EACZvD,EAAQ1B,KAAO,CAAC,aAEhB0B,EAAQ1B,KAAR,CACI,aADJ4C,OAAA9B,OAAA+B,EAAA,EAAA/B,CAEOY,EAAQ1B,KAAK8C,MACZpB,EAAQ1B,KAAKsH,QAAQrC,IAAcgC,EAAe,EAAI,MAIlEC,EAAgBrH,KAAK6B,EAAQjC,IAC7BuE,IACOtC,IAEVhB,IAAI,SAAAlB,GAAI,OAAAsB,OAAAC,EAAA,EAAAD,CAAA,GACFtB,EADE,CAELQ,KAAMR,EAAKQ,KAAKU,IACZ,SAAAjB,GAAE,OAAIyH,EAAgBC,EAAgBG,QAAQ7H,UAG1D,GAAqC,IAAjC4H,EAAsBhI,OAA1B,CACA,IAAMkI,EAAe,CACjBjI,UAAS,CACL,CACIG,GAAI,YACJO,KAAM,GACNmE,IAAK,eACLC,SAAU,KALTxB,OAAA9B,OAAA+B,EAAA,EAAA/B,CAOFuG,IAEP1F,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAsG,EADD,CAEFI,UAAW,CACPhD,WAAY,GACZC,iBAAkB,GAClBF,YAAa,MAGrBP,aAGEyD,EACFC,OAAO,sBAAuB,eAAiB,aAEnDtH,EACIuH,IAAsB,UAAU,EAAOF,EAAeF,IAqC1D,IAlCA,IAAMpI,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPjB,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MACvB,EACAT,GAAgB4E,EAAe,EAAI,KAHlC,CAAAnG,OAAAC,EAAA,EAAAD,CAAA,GAMEP,EAAcjB,UAAU+C,GAN1B,CAODrC,KAAI,GAAA4C,OAAA9B,OAAA+B,EAAA,EAAA/B,CACGP,EAAcjB,UAAU+C,GAAcrC,MADzCc,OAAA+B,EAAA,EAAA/B,CAEImG,EACE,CAAC1G,EAAcjB,UAAU+C,GAAc5C,IACvC,KAEV0E,IAAKsD,EACLpD,MAAM,EACN5E,GAAI0H,EAAgB,MAfnBrG,OAAA+B,EAAA,EAAA/B,CAiBFP,EAAcjB,UAAUwD,MACvBT,GACK4E,EAAe,EAAI,GACpBI,EAAsBhI,UAGlCsC,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OADfb,OAAAmC,EAAA,EAAAnC,CAAA,GAEDqG,EAAgB,GAAK,CAClB5C,YAAa,GACbE,iBAAkB,GAClBD,WAAY,QAIfoD,EAAI,EAAGA,EAAIT,EAAgB9H,OAAQuI,WACjCzI,EAAMwC,OAAOwF,EAAgBS,IAExCxH,EAASe,GAA2Bb,EAAIH,EAAMhB,EAAO,CAAE4D,SAAU,YAGxD8E,EAAsB,SAAA1H,GAAI,OAAI,SAACC,EAAkBC,GAAa,IAC/DC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAI8B,EAAenD,EAAiBqB,GACpC,KAAI8B,EAAe,GAAnB,CAIA,IAAMyF,EAASxH,EAAGyH,iBAAiBnH,KAC/B,SAAApB,GAAI,OAAIA,EAAKwI,OAASzH,EAAcjB,UAAU+C,GAAc8B,MAEhE,GAAK2D,GACAxH,EAAG2H,iBAAiBH,EAAOrI,IAAhC,CAEA,IAAMyI,EAAkB5H,EAAG2H,iBAAiBH,EAAOrI,IAAI0I,QAAQ7I,UAEzDgB,EAAG2H,iBAAiBH,EAAOrI,IAAI0I,QAD/B7H,EAAG2H,iBAAiBH,EAAOrI,IAAIN,MAGjC6E,EAAYzD,EAAcyD,UACxBkD,EAAkB,GAClBC,EAAkB,GAClBiB,EAAmB,GAEnBC,EAAsBH,EAAe5I,UACtC4F,OAAO,SAAA1F,GAAI,OAAIA,EAAKQ,KAAKX,OAAS,IAClCqB,IAAI,SAAAlB,GACD2H,EAAgBtH,KAAKL,EAAKC,IAC1B,IAAMiC,EAAOZ,OAAAC,EAAA,EAAAD,CAAA,GACNtB,EADM,CAETC,GAAE,WAAAmD,OAAaoB,GACfhE,KAAKc,OAAA+B,EAAA,EAAA/B,CAAKtB,EAAKQ,KAAK8C,MAAM,MAM9B,OAJAsF,EAAiB1G,EAAQjC,IAAMc,EAAcoB,OAAOnC,EAAKC,IAEzDyH,EAAgBrH,KAAK6B,EAAQjC,IAC7BuE,IACOtC,IAEVhB,IAAI,SAAAlB,GAAI,OAAAsB,OAAAC,EAAA,EAAAD,CAAA,GACFtB,EADE,CAELQ,KAAI,GAAA4C,OAAA9B,OAAA+B,EAAA,EAAA/B,CACGP,EAAcjB,UAAU+C,GAAcrC,MADzCc,OAAA+B,EAAA,EAAA/B,CAEGtB,EAAKQ,KAAKU,IACT,SAAAjB,GAAE,OAAIyH,EAAgBC,EAAgBG,QAAQ7H,YAKxDN,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACJP,EADI,CAEPyD,YACA1E,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,IAD/BvB,OAAA+B,EAAA,EAAA/B,CAEFuH,GAFEvH,OAAA+B,EAAA,EAAA/B,CAGFP,EAAcjB,UAAUwD,MAAMT,EAAe,KAEpDV,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OACdyG,KAGXhI,EAASe,GAA2Bb,EAAIH,EAAMhB,SAQrCmJ,EAAY,SAACnI,EAAMyB,GAAP,OAAyB,SAC9CxB,EACAC,GACC,IACOC,EAAOD,IAAPC,GACFC,EAAgBD,EAAGE,IAAmBL,IAC5C,GAAKI,EAAL,CACA,IAAM8B,EAAenD,EAAiBqB,GACtC,KAAI8B,EAAe,GAAnB,CACA,IAAIlD,EAAQ,CAAE6E,UAAWzD,EAAcyD,WAEjCuE,EAAYvJ,EAAWwJ,SAAS5G,GAChCyE,EAAc,GACdoC,EAAoB,IACF,SAAlBC,EAAmBC,EAAU3I,GAC/B2I,EAAS7I,QAAQ,SAAAN,GACb,IAAoB,SAAdA,EAAKW,MAAwC,KAArBX,EAAKoJ,KAAKC,UAClB,SAAdrJ,EAAKW,MAAiC,QAAdX,EAAKW,MAAgB,CAC7C,IAAM4D,EAAK,WAAAnB,OAAczD,EAAM6E,WAC/B7E,EAAM6E,UAAY7E,EAAM6E,UAAY,EACpC,IAAMQ,EAAahF,EAAKsJ,QAClB5H,IAAK1B,EAAKsJ,QAAS,SACnB,GACAC,EAAa,CACftJ,GAAIsE,EACJ/D,OACAmE,IAAK3E,EAAKwI,MAAQ,MAClB3D,MAAM,GAEJ2E,EAAmB,CACrBzE,YAAa,GACbiC,MAAOhH,EAAKsJ,SAAUtJ,EAAKsJ,QAAQtC,OAAc,GACjDhC,aACAC,iBAAkBwE,KAAKC,UAAU1E,IAEnB,SAAdhF,EAAKW,OACL4I,EAAW5E,IAAM,OACjB4E,EAAW1E,MAAO,EAClB2E,EAAiB5E,SAAW,OAC5B4E,EAAiBzE,YAAc/E,EAAKoJ,MAExCvC,EAAYxG,KAAKkJ,GACjBN,EAAkB1E,GAASiF,EACvBxJ,EAAK2J,UACLT,EAAgBlJ,EAAK2J,SAAN,GAAAvG,OAAA9B,OAAA+B,EAAA,EAAA/B,CAAoBd,GAApB,CAA0B+D,QAK7D2E,CAAgBH,EAAWhI,EAAcjB,UAAU+C,GAAcrC,MACjEb,EAAK2B,OAAAC,EAAA,EAAAD,CAAA,GACEP,EACApB,EAFF,CAGDG,UAAS,GAAAsD,OAAA9B,OAAA+B,EAAA,EAAA/B,CACFP,EAAcjB,UAAUwD,MAAM,EAAGT,IACjCgE,EAFEvF,OAAA+B,EAAA,EAAA/B,CAGFP,EAAcjB,UAAUwD,MAAMT,EAAe,KAEpDV,OAAOb,OAAAC,EAAA,EAAAD,CAAA,GACAP,EAAcoB,OACd8G,KAGXrI,EAASe,GAA2Bb,EAAIH,EAAMhB,2EC78B5CiK,EAAU,IAAIC,IAMPC,EAAc,SAACV,GAAD,MAAmB,CAC1CzI,KAAM,eACNyI,SAqBSW,EAAa,kBAAM,SAACnJ,GAC7B,GAAIoJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAEJC,OAAOC,QAAQ,wDAEXD,OAAOC,QACH,uEAGJC,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBAKpBC,EAAS,SAACC,GAAD,OAAmB,SAAC7J,GACtC,GAAIoJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAEHO,EAKGJ,KACAA,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,gBAPzBX,EAAQc,OAAO,cACfC,IAAMC,SAASC,QAAQC,OAAO,gBAAkB,KAChDlK,EAASmK,QAYXA,EAAW,iBAAO,CACpBpK,KAAM,gBAGGqK,EAAiB,kBAAM,SAACpK,GAGjC,GAFAoJ,eAAeiB,QAAQ,gBAAiB,KACpBrB,EAAQsB,IAAI,gBAW5B,OATAtB,EAAQc,OAAO,eAAgB,CAC3BlK,KAAM,MAEVwJ,eAAeiB,QAAQ,cAAe,UACtCrK,EACIkJ,EAAY,CACRqB,IAAK,SAKjB,IAAMC,EAAQxB,EAAQsB,IAAI,cACpBG,EAAazB,EAAQsB,IAAI,cAC3BG,IACAzB,EAAQc,OAAO,aAAc,CACzBlK,KAAM,MAES,UAAf6K,GACAzB,EAAQc,OAAO,aAAc,CACzBlK,KAAM,OAIlB,IAAM8K,EAASC,IAAIC,OAAOJ,GAM1B,GALAT,IAAMC,SAASC,QAAQY,KAAK,gBAAkB,mBAC9Cd,IAAMC,SAASC,QAAQa,IAAI,gBAAkB,mBAC7Cf,IAAMC,SAASC,QAAQc,OAAO,gBAAkB,mBAChDhB,IAAMC,SAASC,QAAQC,OAAOc,OAAS,mBAElCR,GAAUE,EASX,OANAX,IAAMC,SAASC,QAAQC,OAAO,gBAAkBM,EAChDT,IAAMC,SAASC,QAAQY,KAAK,gBAAkBL,EAC9CT,IAAMC,SAASC,QAAQK,IAAI,gBAAkBE,EAC7CT,IAAMC,SAASC,QAAQc,OAAO,gBAAkBP,EAChDT,IAAMC,SAASC,QAAQa,IAAI,gBAAkBN,EAC7CxK,EA9GwB,CAC5BD,KAAM,eA8GKgK,IACFO,IAAI,cACJW,KAAK,SAAAC,GACF9B,eAAe+B,WAAW,eAC1BnL,EACIkJ,EAAY,CACRqB,IAAKG,EAAOH,SAIvBa,MAAM,SAAAC,GACHrC,EAAQc,OAAO,aAAc,CACzBlK,KAAM,MAEVI,EApH4B,CACxCD,KAAM,YACNuL,MAkH8BD,EAAIE,YAtB9BvL,EAAS4J,OA2BJ4B,EAAkB,SAACzJ,EAAaP,GAAd,MAAiC,CAC5DzB,KAAM,kBACNgC,MACAP,UAGSiK,EAAwB,kBAAM,SAACzL,EAAUC,GAClD,IAAImJ,eAAeC,QAAQ,eAA3B,CAD+D,IAAAqC,EAEtCzL,IAAjBC,EAFuDwL,EAEvDxL,GAAIyL,EAFmDD,EAEnDC,SACZlC,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,eACbiC,SAASlL,OAAAC,EAAA,EAAAD,CAAA,GACFR,EAAG2L,WAAWD,SADb,CAEJD,mBAMHG,GAAgB,SAACC,GAAD,OAAgD,SACzE/L,EACAC,GACC,IAIGuB,EAAOwK,EAAKC,EAAMC,EAAQC,EAHtBR,EAAa1L,IAAb0L,SACFS,EAAQC,KAAKC,IAAI/C,OAAOgD,WAAY,KACtCC,EAASjD,OAAOkD,YAGpB,GAAKV,EAaD,OAAQA,EAAUhK,KACd,IAAK,UACDP,EAAQuK,EAAUvK,OACN,KAAIA,EAAQ,IACpBA,EAAQgL,EAAS,KAAIhL,EAAQgL,EAAS,IAC1CxM,EAASe,EAAwB,SAAUS,IAC3C,MACJ,IAAK,SACDA,EAAQuK,EAAUvK,OACN,KAAIA,EAAQ,IACxBwK,EAAMxK,EAAQmK,EAASS,MACvBF,EAASP,EAASe,OAASV,EAC3BG,EAASR,EAASgB,OACdT,EAAS,KACTD,EAAOC,EAAS,GAChBA,EAAS,IACTC,EAASR,EAASgB,OAASV,GACd,KAAIE,EAAS,KAE1B3K,EAAQ0K,EAASC,EAAS,GAAKC,IAC/B5K,EAAQ4K,EAAQ,IAChBF,EAAS,GACTC,EAAS,IAEbnM,EAASe,EAAwB,QAASS,IAC1CxB,EAASe,EAAwB,SAAUmL,IAC3ClM,EAASe,EAAwB,SAAUoL,IAC3C,MACJ,IAAK,SACDD,EAASH,EAAUvK,MACnBA,EAAQmK,EAASS,OACjBJ,EAAME,EAAS,IACL,KACN1K,GAAgBwK,GACJ,KAAIxK,EAAQ,IACxByK,EAAOzK,EAAQmK,EAASS,MACxBD,EAASR,EAASgB,OAASV,EAC3BC,EAAS,IAEbF,EAAMxK,EAAQ0K,EAASP,EAASS,MAAQT,EAASe,QACjDP,EAASR,EAASgB,OAASX,GACd,KAAIG,EAAS,IACtB3K,EAAQ0K,EAASC,EAAS,GAAKC,IAC/BF,EAASE,EAAQ5K,EAAQ,KAE7BxB,EAASe,EAAwB,QAASS,IAC1CxB,EAASe,EAAwB,SAAUmL,IAC3ClM,EAASe,EAAwB,SAAUoL,IAC3C,MACJ,IAAK,SACDA,EAASJ,EAAUvK,MACnBA,EAAQmK,EAASS,MACjBF,EAASP,EAASe,QAClBV,EAAMG,EAAS,IACL,KAENF,GADAC,GAAkBF,GACF,IACL,KACPxK,GAAgByK,GACJ,KAAIzK,EAAQ,IACxB0K,EAAS,IAEbC,EAAS,IAET3K,EAAQ0K,EAASC,EAAS,GAAKC,IAC/BD,EAASC,EAAQ5K,EAAQ0K,EAAS,IAEtClM,EAASe,EAAwB,QAASS,IAC1CxB,EAASe,EAAwB,SAAUmL,IAC3ClM,EAASe,EAAwB,SAAUoL,SAjF/CR,EAASa,OAASA,EAAS,IAC3BxM,EAASe,EAAwB,SAAUyL,EAAS,KAEpDb,EAASS,MAAQA,EAAQ,KACzBpM,EAASe,EAAwB,QAASqL,EAAQ,MAElDT,EAASS,MAAQT,EAASe,OAASN,EAAQ,IAC3CpM,EACIe,EAAwB,SAAUqL,EAAQT,EAASS,MAAQ,OAiF9DQ,GAAiB,kBAAM,SAAC5M,EAAUC,GAAa,IAChDC,EAAOD,IAAPC,GACF2L,EAAagB,IAAU3M,EAAG2L,YAChCA,EAAWD,SAASkB,aAAejB,EAAWD,SAASkB,YACvD9M,EAASe,GAAmB8K,MCtQnBkB,GAAgB,SAAA1N,GAAE,OAAI,SAACW,EAAUC,GAAa,IAC/CC,EAAOD,IAAPC,GACF2L,EAAagB,IAAU3M,EAAG2L,YAChCA,EAAWD,SAASoB,eAAiB3N,EACrCW,EAASiN,GAAWpB,MAGXoB,GAAa,SAAAzE,GAAI,MAAK,CAC/BzI,KAAM,cACNyI,SAGS0E,GAA6B,SAAC7N,GAAD,MAAiB,CACvDU,KAAM,iCACNV,OAGS8N,GAAoB,SAACC,GAAD,MAA0B,CACvDrN,KAAM,mBACNqN,eAGSC,GAAmB,SAACC,GAAD,MAA4B,CACxDvN,KAAM,sBACNuN,kBAGSC,GAAe,SAAArN,GAAE,MAAK,CAC/BH,KAAM,iBACNG,OCpBEsN,GAAwB,SAAClC,GAAD,MAAoB,CAC9CvL,KAAM,2BACNuL,UA0DEmC,GAAa,SAACC,EAAaC,EAAeC,EAAKC,GAAlC,OAAgD,SAC/D7N,GAEA,OAAIoJ,eAAeC,QAAQ,eAChBC,MACH,iHAEDS,IACFe,IAAI6C,EAAeD,EAAYI,KAAM,CAClC7D,QAAS,CACL8D,eAAgB,yBAGvB9C,KAAK,SAAAC,GACEzB,KACAA,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,WACbY,IAAKsD,EACL9K,KAAM2K,EAAY3K,KAClB6E,KAAM8F,EAAY9F,KAClBoG,MAAON,EAAYM,MACnBjO,KAAM2N,EAAY3N,KAClB6N,SAGZ5N,EA1F4B,CACpCD,KAAM,kCA2FDqL,MAAM,SAAAC,GACHrL,EAASwN,GAAsBnC,EAAIE,cAIlC0C,GAAc,SAACC,GAAD,MAAoB,CAC3CnO,KAAM,eACNmO,UAGSC,GAAc,SACvBC,GADuB,OAEtB,SAACpO,GACF,IAAM8N,EAAOM,EAAM,GAEnB,OAAY,MAARN,EACOxE,MAAM,qBAEe,UAA5BwE,EAAK/N,KAAKsO,MAAM,KAAK,GACd/E,MAAM,0BAEjBtJ,EArHkC,CAClCD,KAAM,mCAqHNC,EAzGqB,SAAA8N,GAAI,OAAI,SAAC9N,EAAkBC,GAChD,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHqD,IAKrDpJ,EAAOD,IAAPC,GACR,GAAKA,EAAGoO,iBAAR,CAaA,IAZA,IAAI1G,EACA1H,EAAGoO,iBACH,IACAR,EAAKlG,KAAK2G,QAAQ,wBAAyB,KAE3CC,EAAa,GACbC,EAAI,EAGJvO,EAAGwO,qBAAqBC,OAAOxP,UAC3B,SAAA+O,GAAK,OAAItG,EAAO4G,IAAeN,EAAMtG,QAEvB,GAElB4G,EAAa,OADbC,EAIJ,IAAMf,EAAc,CAChB3K,KAAM+K,EAAK/K,KACX6E,KAAMA,EAAO4G,EACbR,MAAOF,EAAKlG,KAAO4G,EACnBzO,KAAM+N,EAAK/N,KACX+N,QAGJ,OAAO/D,IACFc,KAAK,eAAgB,CAClB+D,SAAUlB,EAAY9F,KACtBiH,SAAUf,EAAK/N,KACf+O,SAAUpB,EAAY3K,KACtB8K,UAAW3N,EAAGoO,mBAEjBrD,KAAK,SAAAC,GACFlL,EACIyN,GACIC,EACAxC,EAAS1C,KAAKmF,cACdzC,EAAS1C,KAAKoF,IACd1N,EAAGoO,qBAIdlD,MAAM,SAAAC,GACHrL,EAASwN,GAAsBnC,EAAIE,UACP,MAAxBF,EAAIH,SAAS6D,QAAgBzF,MAAM+B,EAAIH,SAAS1C,UAsDnDwG,CAAiBlB,OCrHjBmB,GAAiB,SAC1B5P,EACA6P,GAF0B,OAGzB,SAAClP,EAAUC,GAAa,IACjBC,EAAOD,IAAPC,GACF2L,EAAagB,IAAU3M,EAAG2L,YAC3BA,EAAWD,SAASuD,SAAStD,EAAWD,SAASoB,kBAClDnB,EAAWD,SAASuD,SAAStD,EAAWD,SAASoB,gBAAkB,IAEnE9M,EAAGkP,uBAAyB/P,GAAuB,SAAjB6P,IAClCrD,EAAWD,SAASuD,SAChBtD,EAAWD,SAASoB,gBACtBqC,iBAAmBhQ,GAGzBwM,EAAWD,SAASuD,SAAStD,EAAWD,SAASoB,gBAC7C7K,IAAQ+M,IACR7P,EAEJW,EAASe,GAAmB8K,MAGnByD,GAAqB,SAC9BpP,EACAgP,EACAnQ,EACAwQ,EACA1O,EACAI,GAN8B,MAO5B,CACFlB,KAAM,uBACNG,KACAgP,eACAnQ,QACAwQ,OACA1O,kBACAI,mBAGSuO,GAAsB,iBAAO,CACtCzP,KAAM,0BAGG0P,GAAsB,iBAAO,CACtC1P,KAAM,0BAGG2P,GAA4B,SAAAlH,GAAI,MAAK,CAC9CzI,KAAM,+BACNwK,IAAK/B,EAAK+B,0BCjDRoF,GAAc9Q,EAAQ,IAA2C+Q,OAAO,CAC1EC,WAAY,SAAAC,GAAG,OAAIA,EAAIzQ,IACvB0Q,eAAgB,SAACnI,EAAMoI,GAAP,MAA4B,cAATpI,KAG1BqI,GAAc,SAACzH,GAAD,OAAkB,SAACxI,EAAUC,GACpDD,EAASkQ,GAAc1H,MAGd0H,GAAgB,SAAC1H,GAAD,MAAmB,CAC5CzI,KAAM,eACNyI,SAGS2H,GAAiB,SAAC3H,GAAD,MAAmB,CAC7CzI,KAAM,kBACNyI,SAGS4H,GAAiB,SAAC5H,GAAD,MAAmB,CAC7CzI,KAAM,kBACNyI,SAGS6H,GAAa,SAAC7H,EAAciB,GAAf,OAA6B,SAACzJ,EAAUC,GAC9D,GAAIuI,EAAM,KACEtI,EAAOD,IAAPC,GACFoQ,EAAcxP,IAChB+L,IAAU3M,EAAG2H,iBAAiBW,EAAK+H,aACnC,CAAC,aAEL,GAAID,GACIA,EAAYE,MAAQhI,EAAKjC,SAASiK,IAAM,EAOxC,OANAF,EAAYnB,SAAWQ,GAAYc,MAC/BH,EAAYnB,SACZ3G,EAAKjC,SAASmK,WAElBJ,EAAYE,IAAMhI,EAAKjC,SAASiK,SAChCxQ,EAASiQ,GAAYK,IAI7BK,GAAgBnI,EAAKjC,SAASgE,IAAK/B,EAAKzI,KAAM0J,MAIzCmH,GAAgB,SAACpI,EAAciB,GAAf,OAA6B,SACtDzJ,EACAC,GAEA,GAAIuI,EAAM,KACEtI,EAAOD,IAAPC,GACF8M,EAAiBH,IAAU3M,EAAG2H,iBAAiBW,EAAK+H,aAC1D,GAAIvD,GACIA,EAAewD,MAAQhI,EAAKjC,SAASiK,IAAM,EAAG,CAC9C,IAAMK,EAAalB,GAAYc,MAC3BzD,EACAxE,EAAKjC,SAASmK,WAIlB,OAFAG,EAAWL,IAAMhI,EAAKjC,SAASiK,SAC/BxQ,EAASiQ,GAAYY,IAI7BF,GAAgBnI,EAAKjC,SAASgE,IAAK/B,EAAKzI,KAAM0J,MAIzCqH,GAAiB,SAACtI,EAAciB,GAAf,OAA6B,SACvDzJ,EACAC,GAEA,GAAIuI,EAAM,KACEtI,EAAOD,IAAPC,GACF8C,EAAkB6J,IAAU3M,EAAG2H,iBAAiBW,EAAK+H,aAC3D,GAAIvN,GACIA,EAAgBwN,MAAQhI,EAAKjC,SAASiK,IAAM,EAS5C,OARKO,KAAQvI,EAAKjC,SAASmK,aACvB1N,EAAgBjE,MAAQ4Q,GAAYc,MAChCzN,EAAgBjE,MAChByJ,EAAKjC,SAASmK,YAGtB1N,EAAgBwN,IAAMhI,EAAKjC,SAASiK,SACpCxQ,EAASiQ,GAAYjN,IAI7B2N,GAAgBnI,EAAKjC,SAASgE,IAAK/B,EAAKzI,KAAM0J,MAIhDkH,GAAkB,SAACtR,EAAIU,EAAM0J,GAC3BA,GAAsC,IAAzBA,EAAUuH,YACvBvH,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBACbtK,KACAU,WCtGhBkR,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAAP,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAO,IAAAT,EAAAC,EAAAC,EAAA,sBAAAQ,IAAAV,EAAAC,EAAAC,EAAA,sBAAAjO,IAAA+N,EAAAC,EAAAC,EAAA,sBAAAtP,IAAAoP,EAAAC,EAAAC,EAAA,sBAAArO,IAAAmO,EAAAC,EAAAC,EAAA,sBAAAS,IAAAX,EAAAC,EAAAC,EAAA,sBAAAU,IAAAZ,EAAAC,EAAAC,EAAA,sBAAAW,IAAAb,EAAAC,EAAAC,EAAA,sBAAA1K,IAAAwK,EAAAC,EAAAC,EAAA,sBAAAY,IAAAd,EAAAC,EAAAC,EAAA,sBAAAa,IAAAf,EAAAC,EAAAC,EAAA,sBAAA/N,IAAA6N,EAAAC,EAAAC,EAAA,sBAAAxK,IAAAsK,EAAAC,EAAAC,EAAA,sBAAAc,IAAAhB,EAAAC,EAAAC,EAAA,sBAAAe,IAAAjB,EAAAC,EAAAC,EAAA,sBAAAgB,IAAAlB,EAAAC,EAAAC,EAAA,sBAAAiB,IAAAnB,EAAAC,EAAAC,EAAA,sBAAAkB,KAAApB,EAAAC,EAAAC,EAAA,sBAAA3F,IAAAyF,EAAAC,EAAAC,EAAA,sBAAAmB,IAAArB,EAAAC,EAAAC,EAAA,sBAAAoB,KAAAtB,EAAAC,EAAAC,EAAA,sBAAAhE,KAAA8D,EAAAC,EAAAC,EAAA,sBAAAqB,KAAAvB,EAAAC,EAAAC,EAAA,sBAAA9D,KAAA4D,EAAAC,EAAAC,EAAA,sBAAAjE,KAAA+D,EAAAC,EAAAC,EAAA,sBAAAlE,KAAAgE,EAAAC,EAAAC,EAAA,sBAAA5D,KAAA0D,EAAAC,EAAAC,EAAA,sBAAAhD,KAAA8C,EAAAC,EAAAC,EAAA,sBAAAlD,KAAAgD,EAAAC,EAAAC,EAAA,sBAAAsB,KAAAxB,EAAAC,EAAAC,EAAA,sBAAA7B,KAAA2B,EAAAC,EAAAC,EAAA,sBAAA3B,KAAAyB,EAAAC,EAAAC,EAAA,sBAAA1B,KAAAwB,EAAAC,EAAAC,EAAA,sBAAAzB,KAAAuB,EAAAC,EAAAC,EAAA,sBAAAlB,KAAAgB,EAAAC,EAAAC,EAAA,sBAAAuB,KAAAzB,EAAAC,EAAAC,EAAA,sBAAAwB,KAAA1B,EAAAC,EAAAC,EAAA,sBAAAyB,KAAA3B,EAAAC,EAAAC,EAAA,sBAAAhB,KAAAc,EAAAC,EAAAC,EAAA,sBAAAf,0BCCAyC,EAAAC,QAAA,CAAkBC,OAAA,4BAAAC,QAAA,6BAAAC,OAAA,kDCAlBJ,EAAAC,QAAA,CAAkBI,KAAA,mBAAAC,KAAA,mBAAAC,MAAA,oBAAAC,SAAA,uBAAAC,YAAA,0BAAAC,OAAA,qBAAAC,eAAA,6BAAAC,eAAA,6BAAAC,KAAA,mBAAAC,WAAA,yBAAAC,gBAAA,8BAAAC,UAAA,wBAAAC,cAAA,+DCDlB7C,EAAAC,EAAAC,EAAA,sBAAA4C,IAAA9C,EAAAC,EAAAC,EAAA,sBAAA6C,IAAA/C,EAAAC,EAAAC,EAAA,sBAAA8C,IAAAhD,EAAAC,EAAAC,EAAA,sBAAA+C,IAAA,IAAAC,EAAAlD,EAAA,IAAAmD,EAAAnD,EAAAoD,EAAAF,GAEaJ,EAAiB,SAACO,GAC3B,GAAIA,IAASA,EAAKC,eAAiBD,IAASA,EAAKE,cAC7C,OAAO,GAIFR,EAA0B,SAAC3U,EAAYwI,GAAb,OACnCxI,GACMwI,EAAiBxI,GACb0R,IAAQlJ,EAAiBxI,GAAI0I,SACzBF,EAAiBxI,GAAIN,MACrB8I,EAAiBxI,GAAI0I,QAE7B,MA2BV,SAAS0M,EAAgB3E,EAAK/N,EAAKP,GAa/B,OAXIO,KAAO+N,EACPpP,OAAOmC,eAAeiN,EAAK/N,EAAK,CAC5BP,MAAOA,EACPkT,YAAY,EACZC,cAAc,EACdC,UAAU,IAId9E,EAAI/N,GAAOP,EAERsO,EAGX,SAAS+E,EAAyBC,EAAQC,GACtC,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACI/S,EAAKyF,EADLwN,EAgBR,SAAuCF,EAAQC,GAC3C,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IAEI/S,EAAKyF,EAFLwN,EAAS,GACTC,EAAavU,OAAOwU,KAAKJ,GAE7B,IAAKtN,EAAI,EAAGA,EAAIyN,EAAWhW,OAAQuI,IAC/BzF,EAAMkT,EAAWzN,GACbuN,EAAS7N,QAAQnF,IAAQ,IAC7BiT,EAAOjT,GAAO+S,EAAO/S,IAEzB,OAAOiT,EA1BMG,CAA8BL,EAAQC,GAEnD,GAAIrU,OAAO0U,sBAAuB,CAC9B,IAAIC,EAAmB3U,OAAO0U,sBAAsBN,GACpD,IAAKtN,EAAI,EAAGA,EAAI6N,EAAiBpW,OAAQuI,IACrCzF,EAAMsT,EAAiB7N,GACnBuN,EAAS7N,QAAQnF,IAAQ,GACxBrB,OAAO4U,UAAUC,qBAAqBC,KAAKV,EAAQ/S,KAGxDiT,EAAOjT,GAAO+S,EAAO/S,IAG7B,OAAOiT,EAgBJ,SAASf,EAAUwB,GACtB,IAAIC,EAAY,SAASA,EAAUtW,GAI/B,OA7ER,SAAuB4V,GACnB,IAAK,IAAIxN,EAAI,EAAGA,EAAImO,UAAU1W,OAAQuI,IAAK,CACvC,IAAIsN,EAAyB,MAAhBa,UAAUnO,GAAamO,UAAUnO,GAAK,GAC/CoO,EAAUlV,OAAOwU,KAAKJ,GACkB,oBAAjCpU,OAAO0U,wBACdQ,EAAUA,EAAQpT,OAEd9B,OAAO0U,sBAAsBN,GAAQhQ,OAAO,SAAS+Q,GACjD,OAAOnV,OAAOoV,yBACVhB,EACAe,GAEFnB,eAKdkB,EAAQlW,QAAQ,SAASqC,GAErB0S,EAAgBO,EAAQjT,EAAK+S,EAAO/S,MAG5C,OAAOiT,EAuDIe,CAAc,GAFVlB,EAAyBzV,EAAM,CAAC,SAEZ,CAC3B2J,SAAU0M,EACL3Q,OAAO,SAASkR,GACb,OAAOA,EAAMpW,KAAKoW,EAAMpW,KAAKX,OAAS,KAAOG,EAAKC,KAErDiB,IAAI,SAAS0V,GACV,OAAON,EAAUM,QAYjC,OAPWP,EACN3Q,OAAO,SAAS1F,GACb,OAA4B,IAArBA,EAAKQ,KAAKX,SAEpBqB,IAAI,SAASlB,GACV,OAAOsW,EAAUtW,KAKtB,IAAM8U,EAA2B,SAAC1S,GACrC,IAAMvC,EAASuC,EAAMvC,OACrB,OAAIA,EAAS,GACe,MAApBuC,EAAMyU,OAAO,IAA2C,MAA7BzU,EAAMyU,OAAOhX,EAAS,IAC1CuC,EAAMsE,OAAO,EAAG7G,EAAS,+DCjHtC0Q,EAAc9Q,EAAQ,IAA2C+Q,OAAO,CAC1EC,WAAY,SAAAC,GAAG,OAAIA,EAAIzQ,IACvB0Q,eAAgB,SAACnI,EAAMoI,GAAP,MAA4B,cAATpI,KAG1BsO,EAAa,SACtBnW,EACAqC,EACA/C,GAHsB,OAIrB,SAACW,EAAUC,GACZ,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHiB,IAQjBvK,EAAOoX,EAHPjW,EAAOD,IAAPC,GACFkW,EAAclW,EAAG2H,iBAAiBxI,GACxC,GAAI+W,IAEI,CAAC,OAAQ,WAAY,UAAUxR,SAAS7E,IACxChB,EAAQqX,EAAYrX,MACpBoX,EAAejW,EAAGE,IAAmBL,MAErChB,EAAQqX,EACRD,EAAeC,GAEfrX,GAASqD,GAAS,CAClB,IAAMiU,EAAW3V,OAAAC,EAAA,EAAAD,CAAA,GAAQyV,EAAiB/T,GACpCqO,EAAQd,EAAY2G,KAAKvX,EAAOsX,GAClC5F,GACIhH,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,iBACb5J,OACAwK,IAAKlL,EACLqR,UAAWD,EACXD,IAAK4F,EAAY5F,IACjB+F,cAAa,CACT,OACA,WACA,UACF3R,SAAS7E,KACJG,EAAGsW,IAAkBzW,IAAO0W,2BC5ClDxG,EAAc,SACvBlQ,EACA2W,EACAC,EACAxP,GAJuB,OAKtB,SAACnH,EAAkBC,GACpB,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHyB,IAKzBpJ,EAAOD,IAAPC,GACJuJ,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,cACb5J,OACA8N,UAAW3N,EAAGoO,iBACdoI,YACAnM,IAAKrK,EAAGiC,IAAQpC,IAChB6H,KAAM+O,EACNxP,oBAMHgJ,EAAiB,SAACpQ,GAAD,OAA0C,SACpEC,EACAC,GAEA,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAER,GAAKC,OAAOC,QAAQ,kDAApB,CALC,IAOOtJ,EAAOD,IAAPC,GACJuJ,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,iBACb5J,OACAwK,IAAKrK,EAAGiC,IAAQpC,UAMnB6W,EAAkB,SAAC7W,GAAD,OAA0C,SACrEC,EACAC,GACC,IACOC,EAAOD,IAAPC,GACR,GAAIkJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAEJG,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBACb5J,OACAwK,IAAKrK,EAAGiC,IAAQpC,SAMnBqQ,EAAiB,SAACrQ,EAAM8W,GAAP,OAAc,SAAC7W,EAAUC,GACnD,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHwD,IAKxDpJ,EAAOD,IAAPC,GACG,UAAP2W,EACA7W,EACIe,IAAuB,CACnBwJ,IAAKrK,EAAGiC,IAAQpC,IAChBhB,MAAOmB,EAAG4W,IAAoB/W,IAAOhB,MACrC8X,QAIJpN,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,iBACb5J,OACAwK,IAAKrK,EAAGiC,IAAQpC,IAChB8W,kCCzFPE,EAAwB,SAAChV,EAAKP,EAAOnC,GAAb,OAAoB,SACrDW,EACAC,GACC,IACOC,EAAOD,IAAPC,GACR,GAAKA,EAAGwO,sBAAyBxO,EAAGoO,iBAApC,CACA,IAAM+H,EAAcxJ,IAChBxN,EAAKa,EAAG2H,iBAAiBxI,GAAMa,EAAGwO,sBAEjC2H,IACLA,EAAYtU,GAAOP,EACnBxB,EAASkW,EAAW,UAAWG,EAAanW,EAAGoO,uBAGtC0I,EAAa,SAACN,GAAD,OAAyB,SAAC1W,EAAUC,GAC1D,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAH+D,IAK/DpJ,EAAOD,IAAPC,GACJuJ,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,aACbY,IAAKrK,EAAGoO,iBACRoI,iBAMHO,EAAgB,kBAAM,SAACjX,EAAUC,GAC1C,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAH+C,IAK/CpJ,EAAOD,IAAPC,GACJuJ,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,gBACbY,IAAKrK,EAAGoO,sBAMX4I,EAAqB,kBAAM,SAAClX,EAAUC,GAC/C,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHoD,IAKpDpJ,EAAOD,IAAPC,GACJuJ,KAAsC,IAAzBA,IAAUuH,YACvBvH,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,qBACbY,IAAKrK,EAAGoO,sBAMX6I,EAAsB,SAACzM,EAAQ0M,EAAO5V,GAAhB,OAA0B,SACzDxB,EACAC,GAEA,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHP,IAKOpJ,EAAOD,IAAPC,GACR,GAAIA,EAAGwO,qBAAsB,CACzB,IAAM2I,EAAaxK,IAAU3M,EAAGwO,qBAAqB4I,SAC/CC,EAAUF,EAAW7W,KAAK,SAAApB,GAAI,OAAIA,EAAKsL,SAAWA,IACxD,GAAI6M,EAAS,CACT,IAAIC,EAAY,GAEZA,EADAhW,EACS,GAAAgB,OAAA9B,OAAA+B,EAAA,EAAA/B,CAAO6W,EAAQE,QAAf,CAAuBL,IAEpBG,EAAQE,OAAO3S,OAAO,SAAA1F,GAAI,OAAIA,IAASgY,IASvDG,EAAQE,OAASD,EACjBxX,EACI+W,EACI,UACAM,EACAnX,EAAGoO,uBAOVoJ,EAA0B,kBAAM,SAAC1X,EAAUC,GACpD,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHyD,IAKzDpJ,EAAOD,IAAPC,GACR,GAAIA,EAAGwO,qBAAsB,CACzB,IAAMrP,EAAKkK,OAAOjC,OAAO,2CACzB,IAAKjI,EAAI,OACToK,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,mBACbY,IAAKrK,EAAGoO,iBACR5D,OAAQrL,EACRU,KAAM,YAMT4X,EAA6B,SAAAjN,GAAM,OAAI,SAAC1K,EAAUC,GAC3D,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHgE,IAKhEpJ,EAAOD,IAAPC,GACJwK,GAAUA,IAAWxK,EAAGwK,SAEnBnB,OAAOC,QACJ,4DAMZC,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,mBACbY,IAAKrK,EAAGoO,iBACR5D,SACA3K,KAAM,cAKL6X,EAAkB,kBAAM,SAAC5X,EAAUC,GAC5C,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHiD,IAKjDpJ,EAAOD,IAAPC,GACR,GAAIA,EAAGwO,qBAAsB,CACzB,IAAMmJ,EAAStO,OAAOjC,OAClB,mHAEJ,IACKuQ,IACAtO,OAAOC,QACJ,4DACIqO,EACA,KAGR,OAEJpO,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBACbY,IAAKrK,EAAGoO,iBACRuJ,eAMHC,EAAiB,SAAClQ,EAAM7H,GAAP,OAAgB,SAACC,EAAUC,GACrD,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAH0D,IAK1DpJ,EAAOD,IAAPC,GACJA,EAAGwO,sBACHjF,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,iBACbY,IAAKrK,EAAGoO,iBACR1G,OACA7H,YC9LHgY,EAAc,SAACnK,GAAD,OAAiB,SAAC5N,EAAkBC,GAC3D,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHgE,IAKhEpJ,EAAOD,IAAPC,GAEJqJ,OAAOC,QACH,4KAGJC,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,cACbiE,MACArD,IAAKrK,EAAGoO,sBAMX0J,EAAc,SAACpK,GAAD,OAAiB,SAAC5N,EAAkBC,GAC3D,GAAImJ,eAAeC,QAAQ,eACvB,OAAOC,MACH,iHAHgE,IAKhEpJ,EAAOD,IAAPC,GACF8N,EAAQzE,OAAOjC,OAAO,kCACd,OAAV0G,GACAvE,IAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,cACbiE,MACArD,IAAKrK,EAAGoO,iBACRN,aCpChBiD,EAAAC,EAAAC,EAAA,sBAAA8G,IAAAhH,EAAAC,EAAAC,EAAA,sBAAA+G,IAAAjH,EAAAC,EAAAC,EAAA,sBAAAgH,IAAAlH,EAAAC,EAAAC,EAAA,sBAAAiH,IAAAnH,EAAAC,EAAAC,EAAA,sBAAAkH,IAAApH,EAAAC,EAAAC,EAAA,sBAAAmH,IAAArH,EAAAC,EAAAC,EAAA,sBAAAoH,IAAAtH,EAAAC,EAAAC,EAAA,sBAAAqH,IAAAvH,EAAAC,EAAAC,EAAA,sBAAAsH,IAAAxH,EAAAC,EAAAC,EAAA,sBAAAuH,IAAAzH,EAAAC,EAAAC,EAAA,sBAAAwH,IAAA1H,EAAAC,EAAAC,EAAA,sBAAAyH,IAAA3H,EAAAC,EAAAC,EAAA,sBAAA0H,IAAA5H,EAAAC,EAAAC,EAAA,sBAAA2H,IAAA7H,EAAAC,EAAAC,EAAA,sBAAA4H,IAAA9H,EAAAC,EAAAC,EAAA,sBAAA6H,sCCAA,IAAAC,EAAAhI,EAAA,GAAAiI,EAAAjI,EAAAoD,EAAA4E,GAAAE,EAAAlI,EAAA,IAAAmI,EAAAnI,EAAAoD,EAAA8E,GA0CeE,IAxBE,SAACC,GACd,OACIJ,EAAAK,EAAAC,cAAA,OACIC,UACIH,EAAMI,OACA,CAACC,IAAQC,IAAKD,IAAQE,QAAQC,KAAK,KACnCH,IAAQC,KAGlBV,EAAAK,EAAAC,cAAA,aACIN,EAAAK,EAAAC,cAAA,SACIO,cAAaT,EAAMU,WACnBja,KAAMuZ,EAAMW,MAAQ,QAAU,WAC9BR,UAAWE,IAAQO,MACnBC,QAASb,EAAMa,UAAW,EAC1BC,SAAU,SAAAC,GAAC,OAAIf,EAAMc,SAASC,EAAErF,OAAOmF,YAE1Cb,EAAMgB,MACNhB,EAAMvQ,sKClCVwR,EAAS,wBACTC,EAAQ,uBAErB,SAASla,EAAIma,EAAWC,EAAQC,GAC5B,GAAID,EAAOE,SAAWF,EAAOE,QAAQ7a,KAAM,CACvC,IAAI8a,EAAQH,EAAOE,QAAQ7a,KAO3B,OANK+a,MAAMC,QAAQF,KACfA,EAAQ,CAACA,SAEbna,OAAOwU,KAAKuF,GACP3V,OAAO,SAAAkW,GAAC,OAAIH,EAAMjW,SAASoW,KAC3Btb,QAAQ,SAAAsb,GAAC,OAAIP,EAAUO,GAAGL,OAGnCja,OAAOwU,KAAKuF,GAAW/a,QAAQ,SAAAsb,GAAC,OAAIP,EAAUO,GAAGL,sGCN/CM,8LAEEC,KAAK5B,MAAM6B,4CAIX,OAAOC,EAAA7B,EAAAC,cAAC6B,EAAA,EAAD,CAAUxE,GAAG,kBANPyE,aAgBNC,cACX,KAPuB,SAAAvb,GACvB,MAAO,CACHmb,SAAU,kBAAMnb,EAASe,UAIlBwa,CAGbN,GCFaO,EAnBQ,SAACC,GACpB,gBAAAC,GAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAnb,OAAAob,EAAA,EAAApb,CAAAwa,KAAAS,GAAA,QAAAI,EAAApG,UAAA1W,OAAA+c,EAAA,IAAAlB,MAAAiB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAtG,UAAAsG,GAAA,OAAAJ,EAAAnb,OAAAwb,EAAA,EAAAxb,CAAAwa,MAAAU,EAAAlb,OAAAyb,EAAA,EAAAzb,CAAAib,IAAAnG,KAAA4G,MAAAR,EAAA,CAAAV,MAAA1Y,OAAAwZ,MACIK,MAAQ,CACJC,UAAW,MAFnBT,EAAA,OAAAnb,OAAA6b,EAAA,EAAA7b,CAAAib,EAAAD,GAAAhb,OAAA8b,EAAA,EAAA9b,CAAAib,EAAA,EAAA5Z,IAAA,oBAAAP,MAAA,WAKwB,IAAAib,EAAAvB,KAChBO,IAAkBxQ,KAAK,SAAAyR,GACnBD,EAAKE,SAAS,CAAEL,UAAWI,EAAIE,cAP3C,CAAA7a,IAAA,SAAAP,MAAA,WAYQ,IAAMqb,EAAI3B,KAAKmB,MAAMC,UACrB,OAAOO,EAAIzB,EAAA7B,EAAAC,cAACqD,EAAM3B,KAAK5B,OAAY8B,EAAA7B,EAAAC,cAAA,6BAb3CmC,EAAA,CAAqBL,yDCcVwB,EAXK,SAACxD,GAAD,OAChB8B,EAAA7B,EAAAC,cAAA,UACIO,cAAaT,EAAMU,YAAc,cACjC+C,SAAUzD,EAAMyD,SAChBtD,UAAW,CAACE,IAAQ5G,OAAQ4G,IAAQL,EAAM0D,UAAUlD,KAAK,KACzDmD,QAAS3D,EAAM4D,SAEd5D,EAAMvQ,qCCXTC,EAAU,IAAIC,IAoFLiK,EA9EF,SAACoG,GAAiB,IAAA6D,EACQC,oBAAS,GADjBC,EAAA3c,OAAA4c,EAAA,EAAA5c,CAAAyc,EAAA,GACpBd,EADoBgB,EAAA,GACJV,EADIU,EAAA,GAAAE,EAEwBH,oBAAS,GAFjCI,EAAA9c,OAAA4c,EAAA,EAAA5c,CAAA6c,EAAA,GAEpBE,EAFoBD,EAAA,GAEIE,EAFJF,EAAA,GAI3BG,oBAAU,WACNC,MAGJ,IAAIC,EAAiB,oBACjBxB,IACAwB,EAAiB,oBAGrB,IAAMD,EAAqB,WACA5U,EAAQsB,IAAI,oBAE/BoT,GAAiB,IAWnBI,EAEI,oCAEV,OACI1C,EAAA7B,EAAAC,cAAA,OAAKC,UAAWE,IAAQ9F,WAClB4J,EAmBErC,EAAA7B,EAAAC,cAAA4B,EAAA7B,EAAAwE,SAAA,KACI3C,EAAA7B,EAAAC,cAAA,4BACA4B,EAAA7B,EAAAC,cAAA,OAAKC,UAAWE,IAAQ7F,eACpBsH,EAAA7B,EAAAC,cAAA,KAAGwE,KAAMF,EAAQ,eAAAtb,OAAkBqb,IAC/BzC,EAAA7B,EAAAC,cAACyE,EAAA,EAAD,CAAKC,KAAK,kYACV9C,EAAA7B,EAAAC,cAAA,sBAEJ4B,EAAA7B,EAAAC,cAAA,KAAGwE,KAAMF,EAAQ,iBAAAtb,OAAoBqb,IACjCzC,EAAA7B,EAAAC,cAACyE,EAAA,EAAD,CAAKC,KAAK,ggBACV9C,EAAA7B,EAAAC,cAAA,wBAEJ4B,EAAA7B,EAAAC,cAAA,KAAGwE,KAAMF,EAAQ,gBAAAtb,OAAmBqb,IAChCzC,EAAA7B,EAAAC,cAACyE,EAAA,EAAD,CAAKC,KAAK,6tBACV9C,EAAA7B,EAAAC,cAAA,wBAGR4B,EAAA7B,EAAAC,cAACH,EAAA,EAAD,CACIiB,MAAM,cACNH,QAASkC,EACTjC,SAAU,kBAAMuC,GAAUN,OArClCjB,EAAA7B,EAAAC,cAAA4B,EAAA7B,EAAAwE,SAAA,KACI3C,EAAA7B,EAAAC,cAAA,qHAIA4B,EAAA7B,EAAAC,cAAC2E,EAAD,CAAanB,QAAQ,UAAUE,QAnBtB,WACrBlU,EAAQoV,IAAI,kBAAmB,OAAQ,CACnCxe,KAAM,IACNye,OAAQ,SAEZT,MAcY,SAGAxC,EAAA7B,EAAAC,cAAC2E,EAAD,CACInB,QAAQ,SACRE,QAAS,WACL3T,OAAO+U,KAAK,uBAAwB,WAH5C,8CCjCLC,EAfC,SAACjF,GAAD,OACZ8B,EAAA7B,EAAAC,cAAA4B,EAAA7B,EAAAwE,SAAA,KACKzE,EAAMkF,MACHpD,EAAA7B,EAAAC,cAAA,OACIC,UAAWE,IAAQ8E,MACnB1E,cAAaT,EAAMU,YAAc,SAEjCoB,EAAA7B,EAAAC,cAAA,OAAKC,UAAWE,IAAQ+E,QAAxB,eAGJtD,EAAA7B,EAAAC,cAAA,OAAKC,UAAWE,IAAQ+E,QAAxB,2FCfGC,GAAA,SAACC,EAAQC,GAAT,OACXhf,IACI,CACIX,UAAW0f,EAAO1f,UAAUoB,IAAI,SAAAlB,GAAI,OAChC0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,WAAY,gBAEpDmC,OAAQqd,EAAOrd,QAEnB,CACIrC,UAAW2f,EAAO3f,UAAUoB,IAAI,SAAAlB,GAAI,OAChC0B,IAAK1B,EAAM,CAAC,WAAY,WAAY,WAAY,gBAEpDmC,OAAQsd,EAAOtd,UCJrBoO,GAAc9Q,EAAQ,IAA2C+Q,OAAO,CAC1EC,WAAY,SAAAC,GAAG,OAAIA,EAAIzQ,IACvB0Q,eAAgB,SAACnI,EAAMoI,GAAP,MAA4B,cAATpI,KAqC1B8H,GAA4B,SAAC2M,EAAe3B,GACrD2B,EAAMyC,kBAAoBzC,EAAMyC,kBAAkBha,OAC9C,SAAA1F,GAAI,OAAIA,IAASsb,EAAOnQ,OASnBwU,GAAgC,SACzC1C,EACA3B,GAEA2B,EAAM2C,oBAAsB3C,EAAM2C,oBAAoBla,OAClD,SAAA1F,GAAI,OAAIA,IAASsb,EAAOnQ,iBC2InB0U,GAAiC,CAC1CpX,iBAAkB,GAClByD,MAAO,KACP4T,SAAS,EACTC,aAAa,EACbC,mBAAmB,EACnBC,WAAY,EACZC,gBAAgB,EAChBC,mBAAoB,GACpBC,aAAc,GACdC,gBAAgB,EAChBX,kBAAmB,GACnBE,oBAAqB,GACrBU,SAAU,IACVC,iBAAkB,KAClBC,mBAAoB,GACpBC,cAAc,EACdnV,OAAQ,KACRiB,SAAU,CACNa,OAAQ,IACRJ,MAAO,IACPM,OAAQ,IACRC,OAAQ,KAEZW,cAAe,OACfwS,SAAU,KACVC,UAAW,GACX5c,WAAW,EACX6c,OAAQ,GACRC,eAAe,EACfC,aAAa,EACbC,4BAA6B,GAE7BjgB,GAAI,IAoNOkgB,GAzJCC,aAAcpB,GAAc,CACxCqB,6BAA8B,SAACjE,EAAO3B,GAAR,OAC1B6F,GAAoClE,EAAO3B,IAC/C8F,0BAA2B,SAACnE,EAAO3B,GAAR,OC1SO,SAAC2B,GAAD,OAAA3b,OAAAC,EAAA,EAAAD,CAAA,GAC/B2b,EAD+B,CAElC/Q,MAAO,KACP4T,SAAS,IDwSLvQ,CAA8B0N,IAClCoE,yBAA0B,SAACpE,EAAO3B,GAAR,OChSO,SAAC2B,EAAe3B,GAAhB,OAAAha,OAAAC,EAAA,EAAAD,CAAA,GAC9B2b,EAD8B,CAEjC/Q,MAAOoP,EAAOpP,MACd4T,SAAS,ID8RLvQ,CAA6B0N,EAAO3B,IACxCgG,4BAA6B,SAACrE,EAAO3B,GAAR,OCxSO,SAAC2B,GAAD,OAAA3b,OAAAC,EAAA,EAAAD,CAAA,GACjC2b,EADiC,CAEpC/Q,MAAO,KACP4T,SAAS,IDsSLvQ,CAAgC0N,IACpCsE,aAAc,SAACtE,EAAO3B,GAAR,OC9RS,WAAkD,IAAjD2B,EAAiD1G,UAAA1W,OAAA,QAAA2hB,IAAAjL,UAAA,GAAAA,UAAA,GAAjCsJ,GAAcvE,EAAmB/E,UAAA1W,OAAA,EAAA0W,UAAA,QAAAiL,EACzEvE,EAAMmD,aAAe9E,EAAOxM,MD6RKS,CAAmB0N,EAAO3B,IAE3DmG,iBAAkB,SAACxE,EAAO3B,GACtB2B,EAAMoD,eAAiB/E,EAAOtN,YAElC0T,aAAc,SAACzE,EAAO3B,GAClB2B,EAAM/Q,MAAQ,KACd+Q,EAAM0E,cAAe,GAEzBC,YAAa,SAAC3E,EAAO3B,GACjB2B,EAAM/Q,MAAQoP,EAAOpP,MACrB+Q,EAAM0E,cAAe,GAEzBE,eAAgB,SAAC5E,EAAO3B,GACpB2B,EAAM/Q,MAAQ,KACd+Q,EAAM0E,cAAe,GAGzBG,qBAAsB,SAAC7E,EAAO3B,GAAR,ODlOQ,SAAC2B,EAAe3B,GAC9C,IAAMnU,EAAWsG,IACb6N,EAAOzZ,eACDyZ,EAAOxa,GAAGihB,yBACVzG,EAAOxa,GAAG4W,IAAoB4D,EAAOxL,gBAE/C,IAAKrP,IAAQ0G,EAASwB,QAAS2S,EAAO3b,OAClC,GAAI2b,EAAO7Z,gBACP0F,EAASwB,QAAU2S,EAAO3b,MAC1Bsd,EAAMxU,iBAAiBtB,EAASgE,KAAOhE,MACpC,CACH,IAAM6a,EAAQ1gB,OAAAC,EAAA,EAAAD,CAAA,GAAQga,EAAO3b,OAC7B,GACI2b,EAAO3b,MAAMG,WACb,CAAC,WAAY,UAAU0F,SAAS8V,EAAOxL,cACzC,CACE,IAAMmS,EAAqB,GAC3B3G,EAAO3b,MAAMG,UAAUQ,QAAQ,SAAAN,GACvBA,EAAK2E,IAAI9E,OAAS,GAAKG,EAAKQ,KAAKX,OAAS,KAEtC8U,YAAe3U,EAAK2E,IAAIkS,OAAO,KAC9B7W,EAAKsE,YACLtE,EAAKqE,YACLrE,EAAK8E,0BAENmd,EAAmB5hB,KAAK,CACpBmI,KAAMxI,EAAK2E,IACXhE,KAAM,cAKtBqhB,EAASC,mBAAqBA,EAelC,IAAMC,EAAoB5G,EAAOzZ,eAC3ByZ,EAAOxa,GAAGkP,qBACVsL,EAAOxa,GAAGiC,IAAQuY,EAAOxL,eAE1ByP,GACGpY,EAASwB,QAAQ7I,UACXqH,EAASwB,QACTxB,EAASxH,MACfqiB,IAGC/E,EAAMyC,kBAAkBla,SAAS0c,IAClCjF,EAAMyC,kBAAkBrf,KAAK6hB,GAEjC/a,EAASgb,KAAKtiB,OAAS,KAAKsH,EAASgb,KAAKC,QAC9Cjb,EAASgb,KAAK9hB,KAAKkQ,GAAY2G,KAAK/P,EAASwB,QAASqZ,IACtD7a,EAASwB,QAAUqZ,EACnB7a,EAASkb,OAAS,GAClBpF,EAAMxU,iBAAiBtB,EAASgE,KAAOhE,GCkK3Cga,CAA6BlE,EAAO3B,IACxCgH,sBAAuB,SAACrF,EAAO3B,GAAR,OD9JQ,SAAC2B,EAAe3B,GAC/C,IAAM1X,EAAkBqZ,EAAMla,IAAQka,EAAM/O,gBACtC/G,EAAW8V,EAAMxU,iBAAiB7E,GACxC,GAAIuD,GACIA,EAASgb,KAAKtiB,OAAS,EAAG,CAErBY,IACG0G,EAASwB,QACTxB,EAASgb,KAAKhb,EAASgb,KAAKtiB,OAAS,IAMzCod,EAAMyC,kBAAoBzC,EAAMyC,kBAAkBha,OAC9C,SAAA1F,GAAI,OAAIA,IAASsb,EAAO1X,kBAJvBqZ,EAAMyC,kBAAkBla,SAAS8V,EAAO1X,kBACzCqZ,EAAMyC,kBAAkBrf,KAAKib,EAAO1X,iBAO5C,IAAM2e,EAAQpb,EAASgb,KAAKK,MAC5Brb,EAASkb,OAAOI,QAAQF,GACxBpb,EAASwB,QAAU4H,GAAYmS,QAAQvb,EAASwB,QAAS4Z,IC0I7DpB,CAA8BlE,EAAO3B,IACzCqH,sBAAuB,SAAC1F,EAAO3B,GAAR,ODtIQ,SAAC2B,EAAe3B,GAC/C,IAAM1X,EAAkBqZ,EAAMla,IAAQka,EAAM/O,gBACtC/G,EAAW8V,EAAMxU,iBAAiB7E,GACxC,GAAIuD,GACIA,EAASkb,OAAOxiB,OAAS,EAAG,CACvBY,IAAQ0G,EAASwB,QAASxB,EAASkb,OAAO,IAI3CpF,EAAMyC,kBAAoBzC,EAAMyC,kBAAkBha,OAC9C,SAAA1F,GAAI,OAAIA,IAASsb,EAAO1X,kBAJvBqZ,EAAMyC,kBAAkBla,SAAS8V,EAAO1X,kBACzCqZ,EAAMyC,kBAAkBrf,KAAKib,EAAO1X,iBAO5C,IAAM2e,EAAQpb,EAASkb,OAAOD,QAC9Bjb,EAASgb,KAAK9hB,KAAKkiB,GACnBpb,EAASwB,QAAU4H,GAAYc,MAAMlK,EAASwB,QAAS4Z,ICuH3DpB,CAA8BlE,EAAO3B,IAEzCsH,WAAY,SAAC3F,EAAO3B,GAAR,OE3US,SAAC2B,GACtBA,EAAM6C,SAAU,EAChB7C,EAAM/Q,MAAQ,KFyUiB2W,CAAe5F,IAC9C6F,aAAc,SAAC7F,EAAO3B,GAAR,OE7TS,SAAC2B,EAAe3B,GACvC2B,EAAM3R,OAASgQ,EAAOlS,KAAK+B,IAC3B8R,EAAM8F,YAAczH,EAAOlS,KAAK2Z,YAChC9F,EAAM/Q,MAAQ,KACd+Q,EAAM6C,SAAU,EAChB7C,EAAM1Q,SAANjL,OAAAC,EAAA,EAAAD,CAAA,GAAsB2b,EAAM1Q,SAAa+O,EAAOlS,KAAKmD,UACrD0Q,EAAM6D,YAAcxF,EAAOlS,KAAK0X,YFuTC+B,CAAiB5F,EAAO3B,IACzD0H,UAAW,SAAC/F,EAAO3B,GAAR,OExUS,SAAC2B,EAAe3B,GACpC2B,EAAM6C,SAAU,EAChB7C,EAAM/Q,MAAQoP,EAAOpP,MACrB+Q,EAAM3R,OAAS,KFqUeuX,CAAc5F,EAAO3B,IACnD2H,YAAa,SAAChG,EAAO3B,GAAR,OEnUS,SAAC2B,GACvBA,EAAM3R,OAAS,KFkUiBuX,CAAgB5F,IAChDiG,gBAAiB,SAACjG,EAAO3B,GAAR,OEvTQ,SAAC2B,EAAe3B,GACzC2B,EAAM1Q,SAAS+O,EAAO3Y,KAAO2Y,EAAOlZ,MFsTAygB,CAAmB5F,EAAO3B,IAC9D6H,oBAAqB,SAAClG,EAAO3B,GACzB2B,EAAM/O,cAAgBoN,EAAOpN,eAGjCkV,0BAA2B,SAACnG,EAAe3B,GAAhB,OAnGA,SAAC2B,EAAO3B,GAsB/BA,EAAO9a,KAAKX,OAAS,GArBE,SAArBwjB,EAAsB7iB,EAAMD,EAAO+iB,GACjC/iB,EAAQC,EAAKX,OAAS,GACjByjB,EAAO9iB,EAAKD,GAAON,MACpBqjB,EAAO9iB,EAAKD,GAAON,IAAM,CACrBqI,OAAQ9H,EAAKD,GAAO+H,OACpBqB,SAAU,KAGlB0Z,EACI/H,EAAO9a,KACPD,EAAQ,EACR+iB,EAAO9iB,EAAKD,GAAON,IAAI0J,WAG3B2Z,EAAO9iB,EAAKD,GAAON,IAAnBqB,OAAAC,EAAA,EAAAD,CAAA,CACIgH,OAAQ9H,EAAKD,GAAO+H,OACpBqB,SAAU,IACP2R,EAAO3X,MAKlB0f,CAAmB/H,EAAO9a,KAAM,EAAGyc,EAAMuD,oBA6EzC9c,CAAuBuZ,EAAO3B,IAClCiI,0BAA2B,SAACtG,EAAe3B,GAAhB,OA3EA,SAAC2B,EAAO3B,IAGL,SAAxBkI,EAAwBF,GAC1B,IAAK,IAAMtjB,KAAQsjB,EACf,GAAIA,EAAOtjB,GAAMsI,SAAWgT,EAAO1X,gBAC/B,IAAK,IAAMgT,KAAS0M,EAAOtjB,GAAM2J,SACzB2R,EAAOzX,gBAAgB2B,SAASoR,WACzB0M,EAAOtjB,GAAM2J,SAASiN,QAGrC4M,EAAsBF,EAAO3Z,UAIzC6Z,CAAsBvG,EAAMuD,oBA6DxBiD,CAAuBxG,EAAO3B,IAClCoI,cAAe,SAACzG,EAAe3B,GAC3B2B,EAAMsD,iBAAmBjF,EAAOrb,GAChCgd,EAAM0D,UAAYrF,EAAOnb,KACzB8c,EAAMlZ,UAAYuX,EAAOvX,WAE7B4f,gBAAiB,SAAC1G,EAAe3B,GAC7B2B,EAAMsD,iBAAmB,KACzBtD,EAAMlZ,WAAY,GAEtB6f,iBAAkB,SAAC3G,EAAe3B,GAAhB,OApEC,SAAC2B,EAAO3B,GACvBA,EAAOlZ,MACH6a,EAAMyD,WAAapF,EAAOlZ,MAC1B6a,EAAMyD,SAAW,KAEjBzD,EAAMyD,SAAWpF,EAAOlZ,MAG5B6a,EAAMyD,SAAW,KA6DjB1c,CAAeiZ,EAAO3B,IAC1BuI,gBAAiB,SAAC5G,EAAe3B,GAC7B2B,EAAMwD,aAAenF,EAAOhU,YAEhCwc,uBAAwB,SAAC7G,EAAe3B,GACpC2B,EAAM4D,cAAgBvF,EAAOlZ,OAEjC2hB,+BAAgC,SAAC9G,EAAe3B,GAC5C2B,EAAM8D,4BAA8BzF,EAAOrb,IAE/C+jB,6BAA8B,SAAC/G,EAAe3B,GAC1C2B,EAAMgH,uBAAyB3I,EAAOnb,MAE1C+jB,eAAgB,SAACjH,EAAe3B,GAC5B2B,EAAMnc,GAAKwa,EAAOxa,IAGtBqjB,aAAc,SAAClH,EAAe3B,GAAmB,IACrCxa,EAAOmc,EAAPnc,GACR,GAAIwa,EAAOlS,MACHkS,EAAOlS,KAAK+B,IAAK,CACjB,GAAIrK,EAAG2H,iBAAiB6S,EAAOlS,KAAK+B,KAChC,GAAIrK,EAAG2H,iBAAiB6S,EAAOlS,KAAK+B,KAAKxL,MACrCsd,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KAAnC7J,OAAAC,EAAA,EAAAD,CAAA,GACOR,EAAG2H,iBAAiB6S,EAAOlS,KAAK+B,KADvC,CAEIxL,MAAO2b,EAAOlS,KAAKzJ,MACnByR,IAAKkK,EAAOlS,KAAKgI,OAIhBtQ,EAAG2H,iBAAiB6S,EAAOlS,KAAK+B,KAAKxC,QACjC7I,WAIGyf,GACJjE,EAAOlS,KAAKzJ,MACZmB,EAAG2H,iBAAiB6S,EAAOlS,KAAK+B,KAAKxC,UAIzCwY,GAAoClE,EAAO,CACvC9R,IAAKmQ,EAAOlS,KAAK+B,MAErBgW,GAAwClE,EAAO,CAC3C9R,IAAKmQ,EAAOlS,KAAK+B,QDvVb,SAAC8R,EAAe3B,GAC3C2B,EAAMyC,kBAAkBla,SAAS8V,EAAOnQ,MACzC8R,EAAMyC,kBAAkBrf,KAAKib,EAAOnQ,KCwVhBgW,CAA+BlE,EAAO,CAClC9R,IAAKmQ,EAAOlS,KAAK+B,MD7UT,SAAC8R,EAAe3B,GAC/C2B,EAAM2C,oBAAoBpa,SAAS8V,EAAOnQ,MAC3C8R,EAAM2C,oBAAoBvf,KAAKib,EAAOnQ,KC6UlBgW,CAAmClE,EAAO,CACtC9R,IAAKmQ,EAAOlS,KAAK+B,YAIzB8R,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KAAnC7J,OAAAC,EAAA,EAAAD,CAAA,GACO2b,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KACnCmQ,EAAOlS,WAGf6T,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KAAOmQ,EAAOlS,KACpDkS,EAAOlS,KAAK+B,IAAIhI,aAAerC,EAAGwK,OAAOnI,YACrCmY,EAAOlS,KAAKoD,UACR8O,EAAOlS,KAAKoD,SAASD,WACrB0Q,EAAM1Q,SAAW+O,EAAOlS,KAAKoD,SAASD,YAM9D6X,gBAAiB,SAACnH,EAAe3B,GACzBA,EAAOlS,aACA6T,EAAMxU,iBAAiB6S,EAAOlS,KAAK+H,aAGlDkT,gBAAiB,SAACpH,EAAe3B,GACzBA,EAAOlS,OACP6T,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KAAKxC,QAAU2S,EAAOlS,KAAKzJ,MACvC,UAAnB2b,EAAOlS,KAAKqO,KACZ0J,GAAoClE,EAAO,CACvC9R,IAAKmQ,EAAOlS,KAAK+B,MAErBgW,GAAwClE,EAAO,CAC3C9R,IAAKmQ,EAAOlS,KAAK+B,SAKjCmZ,YAAa,SAACrH,EAAe3B,GACrBA,EAAOlS,OACP6T,EAAMxU,iBAAiB6S,EAAOlS,KAAK+B,KAAOmQ,EAAOlS,SGjbvDmb,GAAyBnI,EAAe,WAC1C,OAAOoI,QAAA/Z,IAAA,CAAAoH,EAAAoJ,EAAA,GAAApJ,EAAAoJ,EAAA,KAAApP,KAAAgG,EAAA4S,KAAA,aASLC,+LAEE5I,KAAK5B,MAAMyK,mDAIX,IAAIC,EACA5I,EAAA7B,EAAAC,cAACyK,EAAA,EAAD,KACI7I,EAAA7B,EAAAC,cAAC0K,EAAA,EAAD,CAAOtkB,KAAK,SAAS0c,UAAWpJ,IAChCkI,EAAA7B,EAAAC,cAAC6B,EAAA,EAAD,CAAUxE,GAAG,YAiBrB,OAdIqE,KAAK5B,MAAM6K,kBACXH,EACI5I,EAAA7B,EAAAC,cAAA,OAAKpT,MAAO,CAAEoG,OAAQ,SAClB4O,EAAA7B,EAAAC,cAACyK,EAAA,EAAD,KACI7I,EAAA7B,EAAAC,cAAC0K,EAAA,EAAD,CACItkB,KAAK,UACL0c,UAAWqH,KAEfvI,EAAA7B,EAAAC,cAAC0K,EAAA,EAAD,CAAOtkB,KAAK,UAAU0c,UAAWrB,IACjCG,EAAA7B,EAAAC,cAAC6B,EAAA,EAAD,CAAUxE,GAAG,eAMzBuE,EAAA7B,EAAAC,cAAA4B,EAAA7B,EAAAwE,SAAA,KACKiG,EADL,IACc9I,KAAK5B,MAAM4F,QAAU9D,EAAA7B,EAAAC,cAAC4K,EAAD,CAAS5F,OAAK,IAAM,aA5BjDlD,aA+CH+I,eACX9I,YAdoB,SAAAc,GACpB,MAAO,CACH8H,gBAAkC,OAAjB9H,EAAM3R,OACvBwU,QAAS7C,EAAM6C,UAII,SAAAlf,GACvB,MAAO,CACH+jB,gBAAiB,kBAAM/jB,EAASe,UAKpCwa,CAGEuI,YCzEN7S,EAAAC,EAAAC,EAAA,0BAAAmT,KAoBA,IAAMC,GAAmBhb,OAAOib,qCAK5Bza,IAAMC,SAASya,QAAU,2BAG7B,IAMMC,GZdS,WAGb,IAFEC,EAEFhP,UAAA1W,OAAA,QAAA2hB,IAAAjL,UAAA,GAAAA,UAAA,GAFgB,IACdiP,EACFjP,UAAA1W,OAAA,QAAA2hB,IAAAjL,UAAA,GAAAA,UAAA,GAD0B,GAElB8E,EAAY,GAClB,OAAO,SAAAoK,GAAK,OAAI,SAAAC,GAAI,OAAI,SAAApK,GACpB,GAAIA,EAAO3a,OAASwa,EAEhB,OADAja,EAAIma,EAAWC,EAAQ,UAChBoK,EAAKpK,GAGhB,GAAIA,EAAO3a,OAASya,EAEhB,OADAla,EAAIma,EAAWC,EAAQ,SAChBoK,EAAKpK,GAGhB,IAAMqK,GAAkBrK,EAAOnL,MAAQ,IAAI5M,SAE3C,IAAKoiB,EACD,OAAOD,EAAKpK,GAGhB,GAAID,EAAUC,EAAO3a,MACjB,OAAO0a,EAAUC,EAAO3a,MAAM2a,GAGlC,IAAIsK,EAAOL,EACPM,EAAUL,EAWd,OATKM,MAAMH,KAAsC,IAAnBA,EAEO,kBAAnBA,IACdC,EAAOD,EAAeC,MAAQL,EAC9BM,EAAOvkB,OAAAC,EAAA,EAAAD,CAAA,GAAQkkB,EAA0BG,IAHzCC,EAAOD,EAMXtK,EAAUC,EAAO3a,MAAQ4C,IAASmiB,EAAME,EAAMC,GAEvCxK,EAAUC,EAAO3a,MAAM2a,MYxBX/X,CANP,IACU,CAC1BwiB,SAAS,EACTC,UAAU,IAKDP,GAAQQ,sBACjBjF,GACAmE,GACMA,GAAiBe,0BAAgBZ,GAAoBa,MACrDD,0BAAgBZ,GAAoBa,MAGxCC,GACFpK,EAAA7B,EAAAC,cAACiM,EAAA,EAAD,CAAUZ,MAAOA,IACbzJ,EAAA7B,EAAAC,cAACkM,EAAA,EAAD,KACItK,EAAA7B,EAAAC,cAACmM,GAAD,QAINC,GAAWrc,OAAOsc,OAAStc,OAAOuc,IAElCC,GAAOC,SAASC,eAAe,QACxB,OAATF,IAAkBH,IAClBM,IAASC,OAAOX,GAAKO,iSCtDnBK,EAAwB,SAAxBA,EACFrnB,EACAM,EACAgnB,EACA3X,EACA7G,GAEKA,EAAiBxI,IAClBgnB,EAA0B5mB,KAAK,CAC3BJ,KACAU,KAAM,aAEVhB,GACIA,EAAMsiB,oBACNtiB,EAAMsiB,mBAAmB3hB,QAAQ,SAAA4mB,GAC7B,IAAIC,EAMJ,GAL+B,WAA3BD,EAAkBvmB,OAClBwmB,EAAmB7X,EAAqB/G,iBAAiBnH,KACrD,SAAApB,GAAI,OAAIA,EAAKwI,OAAS0e,EAAkB1e,QAG5C2e,EAAkB,CAClB,IAAMC,EACF3e,EAAiB0e,EAAiBlnB,IAClConB,EAAoB,GACpBD,IACAC,EAAoBD,EAAmBze,QAAQ7I,UACzCsnB,EAAmBze,QACnBye,EAAmBznB,OAE7BqnB,EACIK,EACAF,EAAiBlnB,GACjBgnB,EACA3X,EACA7G,uCChBjB,IAAI4B,GAAY,EAEjBid,6MACFrK,MAAQ,CACJsK,mBAAoB,GACpBC,OAAQ,KAGZjhB,MAAQ,WACJ,IAMIkhB,EAAaC,EACjBrd,EAAY,IAAIsd,UAHN,0BAKV,IAAMC,EAAY,WACdC,aAAaJ,GACbA,EAAcK,WAAW,WACrBzd,EAAU0d,SACX,MACH,IAAMC,EAAW,GACjB,IAAK,IAAI/nB,KAAMwc,EAAKvC,MAAMpZ,GAAG2H,iBACzBuf,EAAS/nB,GAAM,CACXmR,IAAKqL,EAAKvC,MAAMpZ,GAAG2H,iBAAiBxI,GAAImR,IACxCzQ,KAAM8b,EAAKvC,MAAMpZ,GAAG2H,iBAAiBxI,GAAIN,MACnC,WACA8c,EAAKvC,MAAMpZ,GAAG2H,iBAAiBxI,GAAIgoB,eACnC,UACA,QAGd5d,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,YACbyd,eAKZ3d,EAAU6d,OAAS,SAAAC,GACf9d,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,OACb6d,KAAMzd,IAAMC,SAASC,QAAQC,OAAO,gBACpCgW,YAAa9W,eAAeC,QAAQ,kBAG5Cyd,EAAeW,YACX,kBACIhe,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,OACb+d,WAAW,EACXF,KAAMzd,IAAMC,SAASC,QAAQC,OAAO,gBACpCgW,YAAa9W,eAAeC,QAAQ,mBAGhD,KAEJ2d,KAEJvd,EAAUke,UAAY,SAAAJ,GAClB,IAAM/e,EAAOK,KAAK+e,MAAML,EAAM/e,MAE9B,OAAQA,EAAKmB,aACT,IAAK,YACDqd,IACA,MACJ,IAAK,SACDnL,EAAKvC,MAAM1P,SACX,MACJ,IAAK,cACD,IAAIrD,EAAWiC,EAAKjC,SACpBsV,EAAKvC,MAAMrJ,YAAY1J,GACvB,MACJ,IAAK,aACDsV,EAAKvC,MAAMjJ,WAAW7H,EAAMiB,GAC5B,MACJ,IAAK,gBACDoS,EAAKvC,MAAM1I,cAAcpI,EAAMiB,GAC/B,MACJ,IAAK,iBACDoS,EAAKvC,MAAMxI,eAAetI,EAAMiB,GAChC,MACJ,IAAK,iBACDoS,EAAKvC,MAAMlJ,eAAe5H,GAC1B,MACJ,IAAK,aACL,IAAK,gBACL,IAAK,iBACDqT,EAAKvC,MAAMnJ,eAAe3H,GAC1B,MACJ,IAAK,eACDqT,EAAKvC,MAAMuO,aAAarf,GACxB,MACJ,IAAK,mBACDqT,EAAKiM,qBAAqBtf,GAC1B,MACJ,IAAK,QACDc,MAAMd,EAAKvE,QAMvBwF,EAAUse,QAAU,SAAAR,GAChBN,aAAaJ,GACbmB,cAAclB,OAItBgB,qBAAuB,SAAAtf,GACnB,IAAMme,EAAqB9K,EAAKQ,MAAMsK,mBAAmB7hB,OACrD,SAAA1F,GAAI,OAAIA,EAAKC,GAAGkD,aAAeiG,EAAK+B,IAAIhI,aAE5CsZ,EAAKc,SAAS,CAAEgK,0BAGpBsB,cAAgB,OAEhBC,MAAQ,WACCze,GAAsC,IAAzBA,EAAUuH,YACxB6K,EAAKlW,WAObwiB,2BAA6B,OAC7BC,mBAAqB,WAAM,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAA3H,EAAA,IACvB,QAAA4H,EAAAC,EAA8B5M,EAAKQ,MAAMsK,mBAAzC+B,OAAAC,cAAAN,GAAAG,EAAAC,EAAA3D,QAAA8D,MAAAP,GAAA,EAA6D,KAApDQ,EAAoDL,EAAAhnB,MACrDqnB,IACKhN,EAAKvC,MAAMpZ,GAAG2H,iBAAiBghB,EAAkBxpB,KAC9CoK,GAAsC,IAAzBA,EAAUuH,YACvBvH,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBACbtK,GAAIwpB,EAAkBxpB,GACtBU,KAAM8oB,EAAkB9oB,UATzB,MAAAsL,GAAAid,GAAA,EAAAC,EAAAld,EAAA,YAAAgd,GAAA,MAAAI,EAAAK,QAAAL,EAAAK,SAAA,WAAAR,EAAA,MAAAC,yFAJvBrN,KAAK+M,cAAgBR,YAAYvM,KAAKgN,MAAO,oDAqB7CF,cAAc9M,KAAKiN,4BACnBH,cAAc9M,KAAK+M,eACfxe,GACAA,EAAU0d,0DAIQ4B,GAAW,IAAAtM,EAAAvB,KAC3BmL,EDxIC,SAAA/M,GAAS,IACZpZ,EAAOoZ,EAAPpZ,GACJmmB,EAA4B,GAChC,GAAInmB,EAAGwK,QAAUxK,EAAG2H,iBAChB,GAAK3H,EAAG2L,WAKD,CACH,IAAIyC,EAAmBpO,EAAGoO,iBADvB+Z,GAAA,EAAAC,GAAA,EAAAC,OAAA3H,EAAA,IAEH,QAAA4H,EAAAC,EAAiBvoB,EAAGiP,SAApBuZ,OAAAC,cAAAN,GAAAG,EAAAC,EAAA3D,QAAA8D,MAAAP,GAAA,EAA8B,KAArBjpB,EAAqBopB,EAAAhnB,MAC1B6kB,EAA0B5mB,KAAK,CAC3BJ,GAAID,EAAKC,GACTU,KAAM,aALX,MAAAsL,GAAAid,GAAA,EAAAC,EAAAld,EAAA,YAAAgd,GAAA,MAAAI,EAAAK,QAAAL,EAAAK,SAAA,WAAAR,EAAA,MAAAC,GAQEja,GAMGpO,EAAG8oB,gBAQH5C,EACIlmB,EAAG+oB,iBACH/oB,EAAG8oB,cACH3C,EACAnmB,EAAGwO,qBACHxO,EAAG2H,kBAEH3H,EAAGgpB,gBACH9C,EACIlmB,EAAGiB,kBACHjB,EAAGgpB,eACH7C,EACAnmB,EAAGwO,qBACHxO,EAAG2H,mBAIX3H,EAAGipB,mBACH/C,EACIlmB,EAAGkpB,qBACHlpB,EAAGipB,kBACH9C,EACAnmB,EAAGwO,qBACHxO,EAAG2H,kBAGP3H,EAAGmpB,iBACHjD,EACIlmB,EAAGopB,mBACHppB,EAAGmpB,gBACHhD,EACAnmB,EAAGwO,qBACHxO,EAAG2H,oBA7CP3H,EAAGiP,SAASlQ,OAAS,IAAGqP,EAAmBpO,EAAGiP,SAAS,GAAG9P,IAC1DiP,GACAgL,EAAMvM,cAAcuB,SAf5B+X,EAA0B5mB,KAAK,CAC3BJ,GAAIa,EAAGwK,OACP3K,KAAM,SA+DlB,OADAsmB,EAA4BvL,MAAMyO,KAAK,IAAIC,IAAInD,ICmEToD,CAAyBV,GACrDpC,EAAqB,GAFM+C,GAAA,EAAAC,GAAA,EAAAC,OAAAhJ,EAAA,IAGjC,IAHiC,IAGjCiJ,EAHiCC,EAAA,eAGtBC,EAHsBF,EAAAroB,MAI7B,GAAIuoB,EAAa,CACb,IAAIC,EAAwBvN,EAAKJ,MAAMsK,mBAAmBnmB,KACtD,SAAApB,GAAI,OAAIA,EAAKC,KAAO0qB,EAAY1qB,KAE/B2qB,GACGvgB,GAAsC,IAAzBA,EAAUuH,aACvBvH,EAAUC,KACNb,KAAKC,UAAU,CACXa,YAAa,kBACbtK,GAAI0qB,EAAY1qB,GAChBU,KAAMgqB,EAAYhqB,QAG1BiqB,EAAwB,CACpB3qB,GAAI0qB,EAAY1qB,GAChBU,KAAMgqB,EAAYhqB,KAClBsc,MAAO,SAIf2N,GACArD,EAAmBlnB,KAAKuqB,KAtBpCC,EAA0B5D,EAA1BqC,OAAAC,cAAAe,GAAAG,EAAAI,EAAAnF,QAAA8D,MAAAc,GAAA,EAAqDI,IAHpB,MAAAze,GAAAse,GAAA,EAAAC,EAAAve,EAAA,YAAAqe,GAAA,MAAAO,EAAAnB,QAAAmB,EAAAnB,SAAA,WAAAa,EAAA,MAAAC,GA4BjC1O,KAAKyB,SAAS,CAAEgK,uBAChBqB,cAAc9M,KAAKiN,4BACnBjN,KAAKiN,2BAA6BV,YAC9BvM,KAAKkN,mBACL,sCAKJ,OAAO,YAhMiB9M,aA4N1B4O,EAAmB3O,YAxBC,SAAAc,GACtB,MAAO,CACHnc,GAAImc,EAAMnc,KAIW,SAAAF,GACzB,MAAO,CACH4J,OAAQ,kBAAM5J,EAASe,QACvBkP,YAAa,SAAAzH,GAAI,OAAIxI,EAASe,IAAoByH,KAClD6H,WAAY,SAAC7H,EAAMiB,GAAP,OACRzJ,EAASe,IAAmByH,EAAMiB,KACtCmH,cAAe,SAACpI,EAAMiB,GAAP,OACXzJ,EAASe,IAAsByH,EAAMiB,KACzCqH,eAAgB,SAACtI,EAAMiB,GAAP,OACZzJ,EAASe,IAAuByH,EAAMiB,KAC1C0G,eAAgB,SAAA3H,GAAI,OAAIxI,EAASe,IAAuByH,KACxD4H,eAAgB,SAAA5H,GAAI,OAAIxI,EAASe,IAAuByH,KACxDuE,cAAe,SAAAuB,GAAgB,OAC3BtO,EAASe,IAAsBuN,KACnCuZ,aAAc,SAAArf,GAAI,OAAIxI,EAASe,IAAkCyH,OAIhD+S,CAGvBmL,GA2BanL,gBAdS,SAAAc,GACpB,MAAO,CACH3R,OAAQ2R,EAAM3R,OACd7C,iBAAkBwU,EAAMxU,iBACxBqY,YAAa7D,EAAM6D,cAIA,SAAAlgB,GACvB,MAAO,CACHuN,aAAc,SAAArN,GAAE,OAAIF,EAASe,IAAqBb,OAI3Cqb,CAzBQ,SAAAjC,GACnB,IAAM6Q,ECvPK,SAACzf,EAAQ7C,EAAkBqY,GACtC,IACI/Q,EACAib,EACA9b,EACAI,EAQA2b,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3B,EACA4B,EACAzB,EACAE,EACAla,EACA+R,EACAjgB,EACA4pB,EACA1pB,EAGA2pB,EACAC,EACA7pB,EAGA8pB,EACAC,EACAC,EACAre,EAvCEjB,EAAahE,EAAiB6C,GAKhC2c,EAAiB,GACjB+D,EAAqB,GACrBzjB,EAAmB,GACnBqhB,EAAgB,GAChB3Z,EAAmB,GACnB8Z,EAAoB,GACpBE,EAAkB,GAkBlBgC,EAAmB,GACnBnC,EAAiB,GAIjBoC,EAAsB,GACtBC,EAAoB,GAKxB,GAAI1f,IACAsD,EAAWtD,EAAWsD,WAEdA,EAASlQ,OAAS,GAAK4M,EAAWD,WAClCkB,EAAcjB,EAAWD,SAASkB,YAC9BjB,EAAWD,SAASoB,iBACpBod,EAAqBjb,EAAS3O,KAC1B,SAAApB,GAAI,OAAIA,EAAKC,KAAOwM,EAAWD,SAASoB,kBAG5Cod,IAEA1b,EAAuB7G,EADvByG,EAAmB8b,EAAmB/qB,MAEZ,CACtBgoB,EAAiB3Y,EAAqB2Y,eACtC+D,EACI1c,EAAqB0c,mBACzBzjB,EAAmB+G,EAAqB/G,iBAExC,IAAM6jB,EACF3f,EAAWD,SAASuD,SAASb,GACjC,GAAIkd,EAA4B,CAC5BxC,EACIwC,EAA2BxC,cAC/B3Z,EACImc,EAA2Bnc,iBAC/B8Z,EACIqC,EAA2BrC,kBAC/BE,EACImC,EAA2BnC,gBAE/BgB,EAAkBhD,EAAe7mB,KAC7B,SAAApB,GAAI,OAAIA,EAAKC,KAAO2pB,IAExBsB,EAAqBjD,EAAe7mB,KAChC,SAAApB,GAAI,OAAIA,EAAKC,KAAOgQ,IAExBkb,EAAsBa,EAAmB5qB,KACrC,SAAApB,GAAI,OAAIA,EAAKC,KAAO8pB,IAExBqB,EAAoB7iB,EAAiBnH,KACjC,SAAApB,GAAI,OAAIA,EAAKC,KAAOgqB,IAEpBgB,KACAI,EACI5iB,EAAiBmhB,MAEjBC,EAAoBwB,EACf1iB,QAAQ7I,UAEPurB,EAAkB1iB,QADlB0iB,EAAkB1rB,QAG5BssB,EACIhB,EAAgBoB,UAAY,MAE5BV,EAAmBK,EAAmB5qB,KAClC,SAAApB,GAAI,OAAIA,EAAKwI,OAASyjB,OAItBL,EACInjB,EAFJqhB,EAAiB6B,EAAiB1rB,OAI9B8B,EAAqB6pB,EAChBjjB,QAAQ7I,UAEP8rB,EAAmBjjB,QADnBijB,EAAmBjsB,QAMrCurB,KACAI,EACI7iB,EAAiBwH,MAEjBwb,EAAuBH,EAClB3iB,QAAQ7I,UAEPwrB,EAAqB3iB,QADrB2iB,EAAqB3rB,QAG/BusB,EACIhB,EAAmBmB,UAAY,MAE/BR,EAAsBG,EAAmB5qB,KACrC,SAAApB,GAAI,OACAA,EAAKwI,OAAS0jB,OAKlBJ,EACIrjB,EAHJ0jB,EACIN,EAAoB5rB,OAIpB8rB,EAAwBD,EACnBnjB,QAAQ7I,UAEPgsB,EAAsBnjB,QADtBmjB,EAAsBnsB,QAOxCwrB,IACAI,EACI9iB,EAAiBshB,MAEjBC,EAAwBuB,EACnB5iB,QAAQ7I,UAEPyrB,EAAsB5iB,QADtB4iB,EAAsB5rB,OAIhCyrB,IACAI,EACI/iB,EAAiBwhB,MAEjBC,EAAsBsB,EACjB7iB,QAAQ7I,UAEP0rB,EAAoB7iB,QADpB6iB,EAAoB7rB,OAKlC,IAAM2sB,EAAyBrE,EAAe7mB,KAC1C,SAAApB,GAAI,OAAIA,EAAKusB,kBAEbD,IAEAvK,EACItZ,EAFJuH,EAAuBsc,EAAuBrsB,OAI1C6B,EAA2BigB,EACtBpZ,QAAQ7I,UAEPiiB,EAAyBpZ,QADzBoZ,EAAyBpiB,OAKvC,IAAM6sB,EAA6BR,EAAmB5qB,KAClD,SAAApB,GAAI,OAAIA,EAAKusB,kBAEjB,GAAIC,EAA4B,CAG5B,IAAMC,EACFhkB,EAHJijB,EACIc,EAA2BvsB,IAG3BwsB,IACAzqB,EAA+ByqB,EAC1B9jB,QAAQ7I,UAEP2sB,EAA6B9jB,QAD7B8jB,EAA6B9sB,SAUnE,MAAO,CACH8M,aACAsD,WACAib,qBACA9b,mBACAI,uBACA2Y,iBACA+D,qBACAzjB,mBACAqhB,gBACA3Z,mBACA8Z,oBACAE,kBACAgB,kBACAC,qBACAC,sBACAC,oBACAC,oBACAC,uBACAC,wBACAC,sBACA3B,mBACA4B,sBACAzB,uBACAE,qBACAla,uBACA+R,2BACAjgB,0BACA4pB,2BACA1pB,8BACAiqB,mBACAnC,iBACA6B,mBACAC,qBACA7pB,oBACAmqB,sBACAC,oBACAN,sBACAC,wBACAC,uBACAtjB,mBACA6C,SACAwV,cACApT,eDIagf,CACbxS,EAAM5O,OACN4O,EAAMzR,iBACNyR,EAAM4G,aAIV,OADA5G,EAAM/L,aAAa4c,GACZ/O,EAAA7B,EAAAC,cAAC0Q,EAAD,wCE9PXjZ,EAAAC,EAAAC,EAAA,sBAAAjS,IAAA+R,EAAAC,EAAAC,EAAA,sBAAAhP,IAAA8O,EAAAC,EAAAC,EAAA,sBAAA/Q,IAAA6Q,EAAAC,EAAAC,EAAA,sBAAAqF,IAAAvF,EAAAC,EAAAC,EAAA,sBAAA2F,IAAO,IAAM5X,EAAY,CACrB6sB,KAAM,iBACNrkB,OAAQ,mBACR+jB,SAAU,sBAGDtpB,EAAU,CACnB4pB,KAAM,gBACNrkB,OAAQ,kBACR+jB,SAAU,qBAGDrrB,EAAqB,CAC9B2rB,KAAM,mBACNrkB,OAAQ,qBACR+jB,SAAU,wBAGDjV,EAAoB,CAC7BuV,KAAM,kBACNrkB,OAAQ,oBACR+jB,SAAU,uBAGD3U,EAAsB,CAC/BiV,KAAM,oBACNrkB,OAAQ,sBACR+jB,SAAU,6CC1Bd5Y,EAAAC,QAAA,CAAkB8G,IAAA,sBAAAM,MAAA,wBAAA8R,cAAA,gCAAAnS,OAAA,2DCDlB,IAAAZ,EAAAhI,EAAA,GAAAiI,EAAAjI,EAAAoD,EAAA4E,GA0GegF,IA3FI,SAAC3E,GAChB,IAqEI9Z,EAAS,KACb,GAAI8Z,EAAM4E,KAAM,CACZ,IAAM+N,EAvEa,SAACC,GAKpB,IAJA,IAAMpc,EAAM,GAENqc,EAAQ,GAEPD,EAAIjtB,OAAS,GAEhB,GAA0B,KAD1BitB,EAAMA,EAAIzjB,QACFvB,QAAQ,OACZglB,EAAMA,EAAIE,UAAU,IACZllB,QAAQ,KAAO,GACnBglB,EAAMA,EAAIE,UAAUF,EAAIhlB,QAAQ,MAChCilB,EAAMvK,OAENsK,EAAM,OAEP,CAEH,IAAMG,EAAS,CACXtsB,MAFJmsB,EAAMA,EAAIE,UAAUF,EAAIhlB,QAAQ,OAElBklB,UAAU,EAAGF,EAAIhlB,QAAQ,MACnC6B,SAAU,IAGVujB,GADJJ,EAAMA,EAAIE,UAAUF,EAAIhlB,QAAQ,OACjBklB,UAAU,EAAGF,EAAIhlB,QAAQ,MACpCqlB,EAAcD,EAAKplB,QAAQ,OAAS,EAGxC,IADAglB,EAAMA,EAAIE,UAAUF,EAAIhlB,QAAQ,KAAO,GAAGuB,OACnC6jB,EAAKrtB,OAAS,GAAG,CACpB,IAAI8C,EAAMuqB,EAAKF,UAAU,EAAGE,EAAKplB,QAAQ,MAAMuB,OAE3CjH,GADJ8qB,EAAOA,EAAKF,UAAUE,EAAKplB,QAAQ,KAAO,IACzBklB,UAAU,EAAGE,EAAKplB,QAAQ,MAAMuB,OACjD6jB,EAAOA,EAAKF,UAAUE,EAAKplB,QAAQ,KAAO,GAAGuB,OAC7C4jB,EAAOtqB,GAAOP,EAEG,IAAjB2qB,EAAMltB,OACN6Q,EAAIrQ,KAAK4sB,GAETF,EAAMA,EAAMltB,OAAS,GAAG8J,SAAStJ,KAAK4sB,GAErCE,GACDJ,EAAM1sB,KAAK4sB,GAIvB,OAAOvc,EAAI,GA4BO0c,CAAelT,EAAM4E,MAEvC1e,EACI0Z,EAAAK,EAAAC,cAAA,OACIO,cAAaT,EAAMU,YAAc,MACjCxN,OAAQyf,EAAUzf,OAClBJ,MAAO6f,EAAU7f,MACjBqgB,QAASR,EAAUQ,QACnBhT,UAAWH,EAAMG,WAEhBwS,EAAUljB,SAASzI,IAAI,SAACkD,EAAS7D,GAAV,OAnCN,SAAxB+sB,EAAyBlpB,EAAkBvB,GAC7C,OAAQuB,EAAQzD,MACZ,IAAK,OACD,OACImZ,EAAAK,EAAAC,cAAA,QAAMzX,IAAKE,EAAciP,EAAG1N,EAAQ0N,EAAGyb,KAAMnpB,EAAQmpB,MAChDnpB,EAAQuF,SAASzI,IAAI,SAACssB,EAAajtB,GAAd,OAClB+sB,EAAsBE,EAAIjtB,MAI1C,IAAK,IACD,OACIuZ,EAAAK,EAAAC,cAAA,KAAGzX,IAAKE,EAAc0qB,KAAMnpB,EAAQmpB,MAC/BnpB,EAAQuF,SAASzI,IAAI,SAACssB,EAAajtB,GAAd,OAClB+sB,EAAsBE,EAAIjtB,MAI1C,QACI,QAiBI+sB,CAAsBlpB,EAAS7D,MAK/C,OAAOH,uBCtGXqT,EAAAC,QAAA,CAAkB4L,OAAA,wBAAAmO,MAAA,uBAAApO,MAAA","file":"static/js/main.7aaedfee.chunk.js","sourcesContent":["import * as actions from './index'\nimport * as wsActions from '../../websocketActions'\nimport isEqual from 'lodash/isEqual'\nimport omit from 'lodash/omit'\nimport isObject from 'lodash/isObject'\nimport { current, resourceDraftIndex } from '../../utils/resourceTypeIndex'\n\nimport type { resourceType } from '../../store/reducer/reducer'\nvar htmlparser = require('htmlparser2')\n\nconst findElementIndex = (draft: resourceType): number => {\n    if (!draft.currentBox) return -1\n    if (draft.currentBox.length < 1) return -1\n    return draft.structure.findIndex(item => item.id === draft.currentBox)\n}\n\nconst findRouteElements = (\n    draft: resourceType,\n    mode: 'plugin' | 'template' | 'page'\n): Array<number> => {\n    const result = []\n    if (mode === 'plugin') {\n        result.push(0)\n    } else if (mode === 'template') {\n        draft.structure.forEach((item, index) => {\n            if (item.path.length === 0 || isEqual(item.path, ['element_01']))\n                result.push(index)\n        })\n    }\n    return result\n}\n\nexport const saveElementsStructure = (\n    type,\n    structure: $PropertyType<resourceType, 'structure'>\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !resourceDraft || !structure) return\n\n    const newStructure = structure.map(item => {\n        const oldItem = resourceDraft.structure.find(\n            itemInn => itemInn.id === item.id\n        )\n        if (oldItem)\n            return {\n                ...item,\n                ...oldItem,\n                expanded: item.expanded,\n                path: item.path,\n            }\n        else return item\n    })\n    const draft = { ...resourceDraft, structure: newStructure }\n\n    const isNotForHistory = isEqual(\n        resourceDraft.structure.map(item =>\n            omit(item, ['expanded', 'children', 'itemPath'])\n        ),\n        newStructure.map(item =>\n            omit(item, ['expanded', 'children', 'itemPath'])\n        )\n    )\n    dispatch(actions.addResourceVersion(mD, type, draft, {}, isNotForHistory))\n}\n\nexport const saveElementsStructureFromBuilder = (\n    type,\n    structure: $PropertyType<resourceType, 'structure'>,\n    globalSettings?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = globalSettings\n        ? mD.globalSettingsPageDraft\n        : mD[resourceDraftIndex[type]]\n\n    if (!mD || !type || !resourceDraft || !structure) return\n\n    const pageTemplateDraft = globalSettings\n        ? mD.globalSettingsTemplateDraft\n        : mD.pageTemplateDraft\n\n    const newValues = {}\n    const newStructure = structure.map(item => {\n        const oldItem = resourceDraft.structure.find(\n            itemInn => itemInn.id === item.id\n        )\n        let newItem = { ...item }\n        if (oldItem) newItem = { ...newItem, expanded: oldItem.expanded }\n\n        newValues[item.id] = {\n            ...pageTemplateDraft.values[item.id],\n            value: '',\n            menuItems: [],\n            currentMenuItem: '',\n            currentMenuId: 0,\n            // properties: {},\n\n            ...(resourceDraft.values[item.id] || {}),\n        }\n\n        return { ...newItem, path: item.path }\n    })\n    const draft = {\n        ...resourceDraft,\n        structure: newStructure,\n        values: newValues,\n    }\n\n    const isNotForHistory =\n        isEqual(\n            resourceDraft.structure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath'])\n            ),\n            newStructure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath'])\n            )\n        ) && isEqual(resourceDraft.values, draft.values)\n    dispatch(\n        actions.addResourceVersion(\n            mD,\n            type,\n            draft,\n            {},\n            isNotForHistory,\n            globalSettings\n        )\n    )\n}\n\nexport const chooseBox = (type, item: string) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !item || !resourceDraft) return\n    const draft = { ...resourceDraft, currentBox: item }\n    dispatch(actions.addResourceVersion(mD, type, draft, {}, true))\n    dispatch(unhoverBox())\n}\n\nexport const changeBoxPropertyInStructure = (\n    type,\n    key: string | {},\n    value: any,\n    isNotForHistory?: boolean,\n    boxId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !key || !resourceDraft) return\n    let elementIndex\n    if (boxId) {\n        elementIndex = resourceDraft.structure.findIndex(\n            item => item.id === boxId\n        )\n    } else {\n        elementIndex = findElementIndex(resourceDraft)\n    }\n    if (elementIndex < 0) return\n    if (key === 'tag') {\n        dispatch(\n            deleteFromHoveredSizes(mD[current[type]], [\n                resourceDraft.structure[elementIndex].id,\n            ])\n        )\n    }\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            {\n                ...resourceDraft.structure[elementIndex],\n                ...changes,\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n\n    dispatch(\n        actions.addResourceVersion(\n            mD,\n            type,\n            draft,\n            {\n                throttle: 100,\n            },\n            isNotForHistory\n        )\n    )\n}\n\nexport const changeBoxPropertyInValues = (\n    type,\n    key: string | {},\n    value: any,\n    isNotForHistory?: boolean,\n    boxId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!mD || !type || !key || !resourceDraft) return\n    let elementIndex\n    if (boxId) {\n        elementIndex = resourceDraft.structure.findIndex(\n            item => item.id === boxId\n        )\n    } else {\n        elementIndex = findElementIndex(resourceDraft)\n    }\n    if (elementIndex < 0) return\n    if (key === 'tag') {\n        dispatch(\n            deleteFromHoveredSizes(mD[current[type]], [\n                resourceDraft.structure[elementIndex].id,\n            ])\n        )\n    }\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n    const draft = {\n        ...resourceDraft,\n        values: {\n            ...resourceDraft.values,\n            [resourceDraft.structure[elementIndex].id]: {\n                ...resourceDraft.values[\n                    resourceDraft.structure[elementIndex].id\n                ],\n                ...changes,\n            },\n        },\n    }\n\n    dispatch(\n        actions.addResourceVersion(\n            mD,\n            type,\n            draft,\n            {\n                throttle: 1000,\n            },\n            isNotForHistory\n        )\n    )\n}\n\nexport const saveHoveredElementRect = (path: Array<string>, size: Object) => ({\n    type: 'SAVE_HOVERED_ELEMENT_RECT',\n    path,\n    size,\n})\n\nconst deleteFromHoveredSizes = (currentResource, removedElements) => ({\n    type: 'REMOVE_FROM_HOVERED_SIZES',\n    currentResource,\n    removedElements,\n})\n\nexport const hoverBox = (id: string, mode: string, fromFrame?: boolean) => ({\n    type: 'HOVER_ELEMENT',\n    id,\n    mode,\n    fromFrame,\n})\n\nexport const unhoverBox = () => ({\n    type: 'UNHOVER_ELEMENT',\n})\n\nexport const toggleFindMode = (value?: string) => ({\n    type: 'TOGGLE_FIND_MODE',\n    value,\n})\n\nexport const addBox = (\n    mode: 'plugin' | 'template' | 'page',\n    type?: 'children' | 'inside' | 'text' | 'cmsVariable'\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[mode]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n\n    let putInside\n    if (mode === 'plugin') {\n        if (elementIndex <= 0) {\n            elementIndex = 0\n            putInside = true\n        }\n    } else if (mode === 'template') {\n        if (elementIndex < 0)\n            elementIndex = routeElements[routeElements.length - 1]\n\n        if (resourceDraft.structure[elementIndex].id === 'element_01')\n            elementIndex = routeElements[routeElements.length - 1]\n\n        if (\n            resourceDraft.structure[elementIndex].path.length < 2 &&\n            !isEqual(resourceDraft.structure[elementIndex].path, ['element_02'])\n        )\n            putInside = true\n    }\n\n    const element = resourceDraft.structure[elementIndex]\n    if (element.isChildren) {\n        putInside = false\n    } else if (element.childrenTo) {\n        putInside = true\n    } else {\n        if (type === 'inside') putInside = true\n    }\n\n    if (type === 'inside') putInside = true\n\n    const newId = `element_${resourceDraft.currentId}`\n    const newCurrentId = resourceDraft.currentId + 1\n\n    const isCMSVariable =\n        resourceDraft.structure[elementIndex].id === 'element_02' ||\n        isEqual(resourceDraft.structure[elementIndex].path, ['element_02'])\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n            {\n                id: newId,\n                path: putInside\n                    ? [\n                          ...resourceDraft.structure[elementIndex].path,\n                          resourceDraft.structure[elementIndex].id,\n                      ]\n                    : [...resourceDraft.structure[elementIndex].path],\n                tag:\n                    type === 'text'\n                        ? 'text'\n                        : type === 'children'\n                        ? 'New children'\n                        : isCMSVariable\n                        ? 'New CMS variable'\n                        : 'div',\n                textMode: 'text',\n                text: type === 'text',\n                isChildren: type === 'children',\n                isCMSVariable: isCMSVariable,\n                isElementFromCMSVariable: type === 'cmsVariable',\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            [newId]: {\n                textContent: '',\n                properties: {},\n                propertiesString: '',\n                CMSVariableType: 'text',\n                CMSVariableSystemName: 'newCmsVariable',\n                CMSVariableDescription: 'New CMS variable description',\n                CMSVariableDefaultValue: 'New CMS variable default value',\n            },\n        },\n        currentId: newCurrentId,\n        currentBox: newId,\n    }\n    dispatch(actions.addResourceVersion(mD, mode, draft))\n}\n\nexport const deleteBox = (\n    type: 'page' | 'plugin' | 'template',\n    withChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    let draft = {}\n    const removedElements = [elementId]\n    if (withChildren) {\n        draft = {\n            ...resourceDraft,\n            structure: resourceDraft.structure.filter(item => {\n                const notRemove =\n                    elementId !== item.id && !item.path.includes(elementId)\n                if (!notRemove) removedElements.push(item.id)\n                return notRemove\n            }),\n        }\n    } else {\n        const newPageStructure = resourceDraft.structure.map(item => ({\n            ...item,\n            path: item.path.filter(pathItem => pathItem !== elementId),\n        }))\n\n        draft = {\n            ...resourceDraft,\n            structure: [\n                ...newPageStructure.slice(0, elementIndex),\n                ...newPageStructure.slice(elementIndex + 1),\n            ],\n        }\n    }\n    for (let item of removedElements) {\n        delete draft.values[item.id]\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n    dispatch(deleteFromHoveredSizes(mD[current[type]], removedElements))\n}\n\nexport const duplicateBox = (\n    type: 'page' | 'plugin' | 'template',\n    withChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const sourceChildren = resourceDraft.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `element_${resourceDraft.currentId}`\n    let draft = { currentId: resourceDraft.currentId + 1 }\n\n    if (withChildren) {\n        const idMatch = { [elementId]: newId }\n        const newValuesElements = { [newId]: resourceDraft.values[elementId] }\n        const newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `element_${draft.currentId}`\n                draft.currentId += 1\n                idMatch[item.id] = newItemId\n                newValuesElements[newItemId] = resourceDraft.values[item.id]\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    // $FlowFixMe\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...newChildren,\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n            values: {\n                ...resourceDraft.values,\n                ...newValuesElements,\n            },\n        }\n    } else {\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n            values: {\n                ...resourceDraft.values,\n                [newId]: resourceDraft.values[elementId],\n            },\n        }\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const splitText = (type, start: number, end: number) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    let newId\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n        },\n    ]\n\n    const newValues = {\n        [elementIndex]: {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent0,\n        },\n    }\n\n    if (textContent1.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent1,\n        }\n    }\n\n    if (textContent2.length > 0 || textContent1.length === 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent2,\n        }\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const textToSpan = (type, start: number, end: number) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let newId\n    let draft = { currentId: resourceDraft.currentId }\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n        },\n    ]\n\n    const newValues = {\n        [elementIndex]: {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent0,\n        },\n    }\n\n    const spanId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        id: spanId,\n        path: [...resourceDraft.structure[elementIndex].path],\n        tag: 'span',\n        text: false,\n    })\n\n    newValues[spanId] = {\n        textContent: '',\n        style: '',\n        properties: {},\n    }\n\n    newId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        ...resourceDraft.structure[elementIndex],\n        path: [...resourceDraft.structure[elementIndex].path, spanId],\n        textContent: textContent1,\n        id: newId,\n    })\n\n    newValues[newId] = {\n        ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n        textContent: textContent1,\n    }\n\n    if (textContent2.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n        newValues[newId] = {\n            ...resourceDraft.values[resourceDraft.structure[elementIndex].id],\n            textContent: textContent2,\n        }\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n//Menu\n\nexport const changeMenuItemProperty = (\n    type,\n    key: string,\n    value: string,\n    itemId?: string\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resource = mD[resourceDraftIndex[type]]\n\n    if (!resource) return\n\n    const elementIndex = findElementIndex(resource)\n    if (elementIndex < 0) return\n    const elementId = resource.structure[elementIndex].id\n\n    if (!resource.values[elementId].menuItems) return\n    const newMenuItems = resource.values[elementId].menuItems.map(item => {\n        if (\n            item.id ===\n            (itemId ? itemId : resource.values[elementId].currentMenuItem)\n        ) {\n            return { ...item, [key]: value }\n        } else {\n            return item\n        }\n    })\n    if (!isEqual(newMenuItems, resource.values[elementId].menuItems)) {\n        dispatch(changeBoxPropertyInValues(type, 'menuItems', newMenuItems))\n    }\n}\nexport const markRefreshing = (refreshing: boolean) => ({\n    type: 'MARK_REFRESHING',\n    refreshing,\n})\n\nexport const markShouldRefreshing = (value?: boolean) => ({\n    type: 'MARK_SHOULD_REFRESHING',\n    value,\n})\n\nexport const mergeBoxToPlugin = (\n    type: 'page' | 'plugin' | 'template',\n    onlyChildren?: boolean\n) => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n\n    if (!resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, type)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (\n        elementIndex <= 0 ||\n        (!onlyChildren && routeElements.includes(elementIndex))\n    )\n        return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    let currentId = 1\n    const newResourcesIds = ['element_0']\n    const oldResourcesIds = ['element_0']\n    const resourceDataValues = {}\n\n    const resourceDataStructure = resourceDraft.structure\n        .filter(\n            item =>\n                (!onlyChildren && item.id === elementId) ||\n                item.path.includes(elementId)\n        )\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = { ...item, id: `element_${currentId}` }\n            resourceDataValues[newItem.id] = {\n                ...resourceDraft.values[item.id],\n            }\n            if (item.id === elementId) {\n                newItem.path = ['element_0']\n            } else {\n                newItem.path = [\n                    'element_0',\n                    ...newItem.path.slice(\n                        newItem.path.indexOf(elementId) + (onlyChildren ? 1 : 0)\n                    ),\n                ]\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: item.path.map(\n                id => newResourcesIds[oldResourcesIds.indexOf(id)]\n            ),\n        }))\n    if (resourceDataStructure.length === 0) return\n    const resourceData = {\n        structure: [\n            {\n                id: 'element_0',\n                path: [],\n                tag: 'Main element',\n                textMode: '',\n            },\n            ...resourceDataStructure,\n        ],\n        values: {\n            ...resourceDataValues,\n            element_0: {\n                properties: {},\n                propertiesString: '',\n                textContent: '',\n            },\n        },\n        currentId,\n    }\n\n    const newPluginName =\n        prompt('Name the new plugin', 'New plugin') || 'New plugin'\n\n    dispatch(\n        wsActions.addResource('plugin', false, newPluginName, resourceData)\n    )\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(\n                0,\n                elementIndex + (onlyChildren ? 1 : 0)\n            ),\n            {\n                ...resourceDraft.structure[elementIndex],\n                path: [\n                    ...resourceDraft.structure[elementIndex].path,\n                    ...(onlyChildren\n                        ? [resourceDraft.structure[elementIndex].id]\n                        : []),\n                ],\n                tag: newPluginName,\n                text: false,\n                id: oldResourcesIds[1],\n            },\n            ...resourceDraft.structure.slice(\n                elementIndex +\n                    (onlyChildren ? 1 : 0) +\n                    resourceDataStructure.length\n            ),\n        ],\n        values: {\n            ...resourceDraft.values,\n            [oldResourcesIds[1]]: {\n                textContent: '',\n                propertiesString: '',\n                properties: {},\n            },\n        },\n    }\n    for (let i = 2; i < oldResourcesIds.length; i++) {\n        delete draft.values[oldResourcesIds[i]]\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft, { throttle: 1000 }))\n}\n\nexport const dissolvePluginToBox = type => (dispatch: Object, getState) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    // const elementId = resourceDraft.structure[elementIndex].id\n\n    const plugin = mD.pluginsStructure.find(\n        item => item.name === resourceDraft.structure[elementIndex].tag\n    )\n    if (!plugin) return\n    if (!mD.resourcesObjects[plugin.id]) return\n\n    const pluginResource = !mD.resourcesObjects[plugin.id].present.structure\n        ? mD.resourcesObjects[plugin.id].draft\n        : mD.resourcesObjects[plugin.id].present\n\n    let currentId = resourceDraft.currentId\n    const newResourcesIds = []\n    const oldResourcesIds = []\n    const pluginDataValues = {}\n\n    const pluginDataStructure = pluginResource.structure\n        .filter(item => item.path.length > 0)\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = {\n                ...item,\n                id: `element_${currentId}`,\n                path: [...item.path.slice(1)],\n            }\n            pluginDataValues[newItem.id] = resourceDraft.values[item.id]\n\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: [\n                ...resourceDraft.structure[elementIndex].path,\n                ...item.path.map(\n                    id => newResourcesIds[oldResourcesIds.indexOf(id)]\n                ),\n            ],\n        }))\n\n    const draft = {\n        ...resourceDraft,\n        currentId,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...pluginDataStructure,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...pluginDataValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\nexport const setCurrentSiteBuilderMode = (mode: string) => ({\n    type: 'SET_CURRENT_SITEBUILDER_MODE',\n    mode,\n})\n\nexport const parseHTML = (type, value: string) => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    const resourceDraft = mD[resourceDraftIndex[type]]\n    if (!resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n    let draft = { currentId: resourceDraft.currentId }\n\n    const htmlArray = htmlparser.parseDOM(value)\n    const newElements = []\n    const newElementsValues = {}\n    const parseToWebsiter = (curArray, path) => {\n        curArray.forEach(item => {\n            if (!(item.type === 'text' && item.data.trim() === '')) {\n                if (item.type === 'text' || item.type === 'tag') {\n                    const newId = `element_${draft.currentId}`\n                    draft.currentId = draft.currentId + 1\n                    const properties = item.attribs\n                        ? omit(item.attribs, 'style')\n                        : {}\n                    const newElement = {\n                        id: newId,\n                        path,\n                        tag: item.name || 'div',\n                        text: false,\n                    }\n                    const newElementValues = {\n                        textContent: '',\n                        style: item.attribs ? item.attribs.style || '' : '',\n                        properties,\n                        propertiesString: JSON.stringify(properties),\n                    }\n                    if (item.type === 'text') {\n                        newElement.tag = 'text'\n                        newElement.text = true\n                        newElementValues.textMode = 'text'\n                        newElementValues.textContent = item.data\n                    }\n                    newElements.push(newElement)\n                    newElementsValues[newId] = newElementValues\n                    if (item.children)\n                        parseToWebsiter(item.children, [...path, newId])\n                }\n            }\n        })\n    }\n    parseToWebsiter(htmlArray, resourceDraft.structure[elementIndex].path)\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        values: {\n            ...resourceDraft.values,\n            ...newElementsValues,\n        },\n    }\n    dispatch(actions.addResourceVersion(mD, type, draft))\n}\n\n/////////////////////OLDOLDOLDOLDOLD\n// export const changeElementStyleValue = (\n//     index: number,\n//     key: string,\n//     value: any,\n//     elementId: string\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_STYLE_VALUE,\n//     index,\n//     key,\n//     value,\n//     elementId,\n// })\n\n// export const addElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.ADD_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const deleteElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.DELETE_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const changeElementPropertyValue = (\n//     value: any,\n//     key: string,\n//     isSection?: boolean,\n//     isNotForHistory?: boolean\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_PROPERTY_VALUE,\n//     value,\n//     key,\n//     isSection,\n//     isNotForHistory,\n// })\n\n// export const builderZoomOut = () => ({ type: actionTypes.BUILDER_ZOOM_OUT })\n// export const builderZoomIn = () => ({ type: actionTypes.BUILDER_ZOOM_IN })\n// export const builderZoomReset = () => ({ type: actionTypes.BUILDER_ZOOM_RESET })\n\n// export const saveToHistory = () => ({ type: actionTypes.SAVE_TO_HISTORY })\n\n// export const loadCurrentPageToBuilder = (\n//     _id: ?string,\n//     resourcesObjects?: Object,\n//     pageObject?: Object\n// ) => ({\n//     type: actionTypes.LOAD_CURRENT_PAGE_TO_BUILDER,\n//     _id,\n//     resourcesObjects,\n//     pageObject,\n// })\n","import axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\n\nimport * as actions from './index'\n\nimport cloneDeep from 'lodash/cloneDeep'\nimport { webSocket } from '../../components/ReserveWebsite/ReserveWebsite'\n\nconst cookies = new Cookies()\n\nexport const authStart = () => ({\n    type: 'AUTH_START',\n})\n\nexport const authSuccess = (data: Object) => ({\n    type: 'AUTH_SUCCESS',\n    data,\n})\n\nexport const authFail = (error: string) => ({\n    type: 'AUTH_FAIL',\n    error,\n})\n\nexport const deleteStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const deleteSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const deleteFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const deleteUser = () => (dispatch: Object) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (window.confirm('Are you sure you would like to delete your account?'))\n        if (\n            window.confirm(\n                'This action cannot be reverted. All your websites will be deleted.'\n            )\n        )\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'deleteUser',\n                })\n            )\n}\n\nexport const logout = (all?: boolean) => (dispatch: Object) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (!all) {\n        cookies.remove('auth_token')\n        axios.defaults.headers.common['x-auth-token'] = null\n        dispatch(logoutDo())\n    } else {\n        if (webSocket) {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'logoutAll',\n                })\n            )\n        }\n    }\n}\n\nconst logoutDo = () => ({\n    type: 'AUTH_LOGOUT',\n})\n\nexport const authCheckState = () => (dispatch: Object) => {\n    sessionStorage.setItem('systemRefresh', '0')\n    const tryWebsiter = cookies.get('try_websiter')\n    if (tryWebsiter) {\n        cookies.remove('try_websiter', {\n            path: '/',\n        })\n        sessionStorage.setItem('tryWebsiter', '1')\n        dispatch(\n            authSuccess({\n                _id: 'try',\n            })\n        )\n        return\n    }\n    const token = cookies.get('auth_token')\n    const rememberMe = cookies.get('rememberme')\n    if (rememberMe) {\n        cookies.remove('rememberme', {\n            path: '/',\n        })\n        if (rememberMe === 'false') {\n            cookies.remove('auth_token', {\n                path: '/',\n            })\n        }\n    }\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n\n    if (!token || !userId) {\n        dispatch(logout())\n    } else {\n        axios.defaults.headers.common['x-auth-token'] = token\n        axios.defaults.headers.post['x-auth-token'] = token\n        axios.defaults.headers.get['x-auth-token'] = token\n        axios.defaults.headers.delete['x-auth-token'] = token\n        axios.defaults.headers.put['x-auth-token'] = token\n        dispatch(authStart())\n        return axios\n            .get('/api/users')\n            .then(response => {\n                sessionStorage.removeItem('tryWebsiter')\n                dispatch(\n                    authSuccess({\n                        _id: userId._id,\n                    })\n                )\n            })\n            .catch(err => {\n                cookies.remove('auth_token', {\n                    path: '/',\n                })\n                dispatch(authFail(err.message))\n            })\n    }\n}\n\nexport const changeBarSizeDo = (key: string, value: number) => ({\n    type: 'CHANGE_BAR_SIZE',\n    key,\n    value,\n})\n\nexport const savePropertiesOnLeave = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter')) return\n    const { mD, barSizes } = getState()\n    webSocket.send(\n        JSON.stringify({\n            messageCode: 'saveSettings',\n            settings: {\n                ...mD.userObject.settings,\n                barSizes,\n            },\n        })\n    )\n}\n\nexport const changeBarSize = (initiator?: { key: string, value: number }) => (\n    dispatch: Object,\n    getState\n) => {\n    const { barSizes } = getState()\n    const width = Math.max(window.innerWidth, 700),\n        height = window.innerHeight\n    let value, dif, dif2, value2, value3\n\n    if (!initiator) {\n        if (barSizes.height > height - 50) {\n            dispatch(actions.changeBarSizeDo('height', height - 50))\n        }\n        if (barSizes.width > width - 100) {\n            dispatch(actions.changeBarSizeDo('width', width - 100))\n        }\n        if (barSizes.width + barSizes.width2 > width - 50) {\n            dispatch(\n                actions.changeBarSizeDo('width2', width - barSizes.width - 50)\n            )\n        }\n    } else {\n        switch (initiator.key) {\n            case 'height':\n                value = initiator.value\n                if (value < 50) value = 50\n                if (value > height - 50) value = height - 50\n                dispatch(actions.changeBarSizeDo('height', value))\n                break\n            case 'width':\n                value = initiator.value\n                if (value < 50) value = 50\n                dif = value - barSizes.width\n                value2 = barSizes.width2 - dif\n                value3 = barSizes.width3\n                if (value2 < 50) {\n                    dif2 = value2 - 50\n                    value2 = 50\n                    value3 = barSizes.width3 + dif2\n                    if (value3 < 50) value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value = width - 150\n                    value2 = 50\n                    value3 = 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width2':\n                value2 = initiator.value\n                value = barSizes.width\n                dif = value2 - 50\n                if (dif < 0) {\n                    value = value + dif\n                    if (value < 50) value = 50\n                    dif2 = value - barSizes.width\n                    value3 = barSizes.width3 - dif2\n                    value2 = 50\n                }\n                dif = value + value2 - barSizes.width - barSizes.width2\n                value3 = barSizes.width3 - dif\n                if (value3 < 50) value3 = 50\n                if (value + value2 + value3 + 50 > width) {\n                    value2 = width - value - 100\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width3':\n                value3 = initiator.value\n                value = barSizes.width\n                value2 = barSizes.width2\n                dif = value3 - 50\n                if (dif < 0) {\n                    value2 = value2 + dif\n                    dif2 = value2 - 50\n                    if (dif2 < 0) {\n                        value = value + dif2\n                        if (value < 50) value = 50\n                        value2 = 50\n                    }\n                    value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value3 = width - value - value2 - 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            default:\n                break\n        }\n    }\n}\n\nexport const switchTooltips = () => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    userObject.settings.tooltipsOff = !userObject.settings.tooltipsOff\n    dispatch(actions.saveObject(userObject))\n}\n","import cloneDeep from 'lodash/cloneDeep'\n\nexport const chooseWebsite = id => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    userObject.settings.currentWebsite = id\n    dispatch(saveObject(userObject))\n}\n\nexport const saveObject = data => ({\n    type: 'SAVE_OBJECT',\n    data,\n})\n\nexport const chooseUserInWebsiteSharing = (id: string) => ({\n    type: 'CHOOSE_USER_IN_WEBSITE_SHARING',\n    id,\n})\n\nexport const setSizeIsChanging = (isChanging: boolean) => ({\n    type: 'SIZE_IS_CHANGING',\n    isChanging,\n})\n\nexport const setCurrentTopTab = (currentTopTab: string) => ({\n    type: 'SET_CURRENT_TOP_TAB',\n    currentTopTab,\n})\n\nexport const saveMainData = mD => ({\n    type: 'SAVE_MAIN_DATA',\n    mD,\n})\n","import axios from 'axios'\nimport { webSocket } from '../../components/ReserveWebsite/ReserveWebsite'\n\nconst actionStartImageUpload = () => ({\n    type: 'ACTION_START_IMAGE_UPLOAD',\n})\n\nconst actionSuccessImageUpload = () => ({\n    type: 'ACTION_SUCCESS_IMAGE_UPLOAD',\n})\n\nconst actionFailImageUpload = (error: string) => ({\n    type: 'ACTION_FAIL_IMAGE_UPLOAD',\n    error,\n})\n\nconst getSignedRequest = file => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (!mD.currentWebsiteId) return\n    let name =\n        mD.currentWebsiteId +\n        '/' +\n        file.name.replace(/([^a-zA-Z0-9\\\\.\\\\-])/g, '_')\n\n    let namePrefix = ''\n    let k = 0\n\n    const checkName = () =>\n        mD.currentWebsiteObject.images.findIndex(\n            image => name + namePrefix === image.name\n        )\n    while (checkName() >= 0) {\n        k++\n        namePrefix = '_' + k\n    }\n\n    const fileDetails = {\n        size: file.size,\n        name: name + namePrefix,\n        label: file.name + namePrefix,\n        type: file.type,\n        file,\n    }\n\n    return axios\n        .post('/api/sign-s3', {\n            fileName: fileDetails.name,\n            fileType: file.type,\n            fileSize: fileDetails.size,\n            websiteId: mD.currentWebsiteId,\n        })\n        .then(response => {\n            dispatch(\n                uploadFile(\n                    fileDetails,\n                    response.data.signedRequest,\n                    response.data.url,\n                    mD.currentWebsiteId\n                )\n            )\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            if (err.response.status === 400) alert(err.response.data)\n        })\n}\n\nconst uploadFile = (fileDetails, signedRequest, url, websiteId) => (\n    dispatch: Object\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    return axios\n        .put(signedRequest, fileDetails.file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            if (webSocket)\n                webSocket.send(\n                    JSON.stringify({\n                        messageCode: 'addImage',\n                        _id: websiteId,\n                        size: fileDetails.size,\n                        name: fileDetails.name,\n                        label: fileDetails.label,\n                        type: fileDetails.type,\n                        url,\n                    })\n                )\n            dispatch(actionSuccessImageUpload())\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n        })\n}\n\nexport const chooseImage = (image: string) => ({\n    type: 'CHOOSE_IMAGE',\n    image,\n})\n\nexport const imageUpload = (\n    files: Array<{ type: string, size: number, name: string }>\n) => (dispatch: Object) => {\n    const file = files[0]\n\n    if (file == null) {\n        return alert('No file selected.')\n    }\n    if (file.type.split('/')[0] !== 'image') {\n        return alert('File is not an image.')\n    }\n    dispatch(actionStartImageUpload())\n    dispatch(getSignedRequest(file))\n}\n","import * as actions from './'\nimport { current } from '../../utils/resourceTypeIndex'\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport const chooseResource = (\n    id: string,\n    resourceType: 'plugin' | 'page' | 'template'\n) => (dispatch, getState) => {\n    const { mD } = getState()\n    const userObject = cloneDeep(mD.userObject)\n    if (!userObject.settings.websites[userObject.settings.currentWebsite])\n        userObject.settings.websites[userObject.settings.currentWebsite] = {}\n\n    if (mD.globalSettingsPageId !== id && resourceType === 'page') {\n        userObject.settings.websites[\n            userObject.settings.currentWebsite\n        ].currentPageFSBId = id\n    }\n\n    userObject.settings.websites[userObject.settings.currentWebsite][\n        current[resourceType]\n    ] = id\n\n    dispatch(actions.saveObject(userObject))\n}\n\nexport const addResourceVersion = (\n    mD,\n    resourceType,\n    draft,\n    meta,\n    isNotForHistory?: boolean,\n    globalSettings\n) => ({\n    type: 'ADD_RESOURCE_VERSION',\n    mD,\n    resourceType,\n    draft,\n    meta,\n    isNotForHistory,\n    globalSettings,\n})\n\nexport const undoResourceVersion = () => ({\n    type: 'UNDO_RESOURCE_VERSION',\n})\n\nexport const redoResourceVersion = () => ({\n    type: 'REDO_RESOURCE_VERSION',\n})\n\nexport const removeResourceFromUnsaved = data => ({\n    type: 'REMOVE_RESOURCE_FROM_UNSAVED',\n    _id: data._id,\n})\n","import cloneDeep from 'lodash/cloneDeep'\nimport omit from 'lodash/omit'\nimport isEmpty from 'lodash/isEmpty'\n\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nexport const addResource = (data: Object) => (dispatch, getState) => {\n    dispatch(addResourceDo(data))\n}\n\nexport const addResourceDo = (data: Object) => ({\n    type: 'ADD_RESOURCE',\n    data,\n})\n\nexport const deleteResource = (data: Object) => ({\n    type: 'DELETE_RESOURCE',\n    data,\n})\n\nexport const revertResource = (data: Object) => ({\n    type: 'REVERT_RESOURCE',\n    data,\n})\n\nexport const updateUser = (data: Object, webSocket) => (dispatch, getState) => {\n    if (data) {\n        const { mD } = getState()\n        const currentUser = omit(\n            cloneDeep(mD.resourcesObjects[data.resourceId]),\n            ['settings']\n        )\n        if (currentUser) {\n            if (currentUser.__v === data.resource.__v - 1) {\n                currentUser.websites = diffpatcher.patch(\n                    currentUser.websites,\n                    data.resource.__patch__\n                )\n                currentUser.__v = data.resource.__v\n                dispatch(addResource(currentUser, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nexport const updateWebsite = (data: Object, webSocket) => (\n    dispatch,\n    getState\n) => {\n    if (data) {\n        const { mD } = getState()\n        const currentWebsite = cloneDeep(mD.resourcesObjects[data.resourceId])\n        if (currentWebsite) {\n            if (currentWebsite.__v === data.resource.__v - 1) {\n                const newWebsite = diffpatcher.patch(\n                    currentWebsite,\n                    data.resource.__patch__\n                )\n                newWebsite.__v = data.resource.__v\n                dispatch(addResource(newWebsite, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nexport const updateResource = (data: Object, webSocket) => (\n    dispatch,\n    getState\n) => {\n    if (data) {\n        const { mD } = getState()\n        const currentResource = cloneDeep(mD.resourcesObjects[data.resourceId])\n        if (currentResource) {\n            if (currentResource.__v === data.resource.__v - 1) {\n                if (!isEmpty(data.resource.__patch__)) {\n                    currentResource.draft = diffpatcher.patch(\n                        currentResource.draft,\n                        data.resource.__patch__\n                    )\n                }\n                currentResource.__v = data.resource.__v\n                dispatch(addResource(currentResource, mD))\n                return\n            }\n        }\n        requestResource(data.resource._id, data.type, webSocket)\n    }\n}\n\nconst requestResource = (id, type, webSocket) => {\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'requestResource',\n                id,\n                type,\n            })\n        )\n    }\n}\n","export {\n    chooseBox,\n    addBox,\n    deleteBox,\n    duplicateBox,\n    saveElementsStructure,\n    saveElementsStructureFromBuilder,\n    changeBoxPropertyInStructure,\n    changeBoxPropertyInValues,\n    hoverBox,\n    unhoverBox,\n    saveHoveredElementRect,\n    splitText,\n    textToSpan,\n    changeMenuItemProperty,\n    markRefreshing,\n    mergeBoxToPlugin,\n    dissolvePluginToBox,\n    toggleFindMode,\n    markShouldRefreshing,\n    setCurrentSiteBuilderMode,\n    parseHTML,\n} from './builder'\n\nexport {\n    logout,\n    authCheckState,\n    deleteUser,\n    changeBarSize,\n    changeBarSizeDo,\n    savePropertiesOnLeave,\n    switchTooltips,\n} from './auth'\n\nexport {\n    setSizeIsChanging,\n    chooseWebsite,\n    setCurrentTopTab,\n    chooseUserInWebsiteSharing,\n    saveObject,\n    saveMainData,\n} from './website'\n\nexport { imageUpload, chooseImage } from './images'\n\nexport {\n    chooseResource,\n    addResourceVersion,\n    undoResourceVersion,\n    redoResourceVersion,\n    removeResourceFromUnsaved,\n} from './resources'\n\nexport {\n    addResource,\n    updateUser,\n    updateWebsite,\n    updateResource,\n    deleteResource,\n    revertResource,\n} from './webSocket'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"LoginButton_Button__2dj44\",\"Success\":\"LoginButton_Success__21MoZ\",\"Danger\":\"LoginButton_Danger__2V7Lr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__3LJcp\",\"Form\":\"Auth_Form__2cblE\",\"Title\":\"Auth_Title__akRbA\",\"Subtitle\":\"Auth_Subtitle__2ymfd\",\"ActionBlock\":\"Auth_ActionBlock__3jKGi\",\"Middle\":\"Auth_Middle__J8yom\",\"RememberForgot\":\"Auth_RememberForgot__vAgsm\",\"ForgotPassword\":\"Auth_ForgotPassword__2P2hF\",\"Link\":\"Auth_Link__1O5md\",\"RememberMe\":\"Auth_RememberMe__3xI2n\",\"RememberMeLabel\":\"Auth_RememberMeLabel__2SEKu\",\"Container\":\"Auth_Container__KMvOh\",\"socialButtons\":\"Auth_socialButtons__37I7_\"};","import isEmpty from 'lodash/isEmpty'\n\nexport const checkIfCapital = (char: string) => {\n    if (char === char.toUpperCase() && char !== char.toLowerCase()) {\n        return true\n    }\n}\n\nexport const getCurrentResourceValue = (id: string, resourcesObjects: {}) =>\n    id\n        ? resourcesObjects[id]\n            ? isEmpty(resourcesObjects[id].present)\n                ? resourcesObjects[id].draft\n                : resourcesObjects[id].present\n            : null\n        : null\n\nfunction _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {}\n        var ownKeys = Object.keys(source)\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(\n                //eslint-disable-next-line\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(\n                        source,\n                        sym\n                        // $FlowFixMe\n                    ).enumerable\n                })\n            )\n        }\n        //eslint-disable-next-line\n        ownKeys.forEach(function(key) {\n            // $FlowFixMe\n            _defineProperty(target, key, source[key])\n        })\n    }\n    return target\n}\n\nfunction _defineProperty(obj, key, value) {\n    // $FlowFixMe\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true,\n        })\n    } else {\n        // $FlowFixMe\n        obj[key] = value\n    }\n    return obj\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n    if (source == null) return {}\n    var target = _objectWithoutPropertiesLoose(source, excluded)\n    var key, i\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i]\n            if (excluded.indexOf(key) >= 0) continue\n            if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                continue\n            // $FlowFixMe\n            target[key] = source[key]\n        }\n    }\n    return target\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {}\n    var target = {}\n    var sourceKeys = Object.keys(source)\n    var key, i\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i]\n        if (excluded.indexOf(key) >= 0) continue\n        target[key] = source[key]\n    }\n    return target\n}\n// $FlowFixMe\nexport function buildTree(items) {\n    var buildItem = function buildItem(item) {\n        // var path = item.path,\n        var data = _objectWithoutProperties(item, ['path'])\n        // $FlowFixMe\n        return _objectSpread({}, data, {\n            children: items\n                .filter(function(child) {\n                    return child.path[child.path.length - 1] === item.id\n                })\n                .map(function(child) {\n                    return buildItem(child)\n                }),\n        })\n    }\n\n    var tree = items\n        .filter(function(item) {\n            return item.path.length === 0\n        })\n        .map(function(item) {\n            return buildItem(item)\n        })\n    return tree\n}\n\nexport const getInheritedPropertyName = (value: string) => {\n    const length = value.length\n    if (length > 2) {\n        if (value.charAt(0) === '$' && value.charAt(length - 1) === '$') {\n            return value.substr(1, length - 2)\n        }\n    }\n    return false\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport {\n    resourceItemIndex,\n    resourceDraftIndex,\n} from '../utils/resourceTypeIndex'\n\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nexport const sendUpdate = (\n    type: 'user' | 'website' | 'page' | 'template' | 'plugin',\n    changes: {},\n    id: string\n) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    const oldResource = mD.resourcesObjects[id]\n    if (oldResource) {\n        let draft, currentDraft\n        if (['page', 'template', 'plugin'].includes(type)) {\n            draft = oldResource.draft\n            currentDraft = mD[resourceDraftIndex[type]]\n        } else {\n            draft = oldResource\n            currentDraft = oldResource\n        }\n        if (draft && changes) {\n            const newResource = { ...currentDraft, ...changes }\n            const patch = diffpatcher.diff(draft, newResource)\n            if (patch) {\n                if (webSocket && webSocket.readyState !== 3) {\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'updateResource',\n                            type,\n                            _id: id,\n                            __patch__: patch,\n                            __v: oldResource.__v,\n                            markPublish: [\n                                'page',\n                                'template',\n                                'plugin',\n                            ].includes(type)\n                                ? !mD[resourceItemIndex[type]].notPublished\n                                : false,\n                        })\n                    )\n                }\n            }\n        }\n    }\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport { current, resourceObjectIndex } from '../utils/resourceTypeIndex'\nimport * as actions from '../store/actions'\n\nexport const addResource = (\n    type: 'page' | 'plugin' | 'template',\n    duplicate?: boolean,\n    newResourceName?: string,\n    resourceData?: {}\n) => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addResource',\n                type,\n                websiteId: mD.currentWebsiteId,\n                duplicate,\n                _id: mD[current[type]],\n                name: newResourceName,\n                resourceData,\n            })\n        )\n    }\n}\n\nexport const deleteResource = (type: 'page' | 'plugin' | 'template') => (\n    dispatch: Object,\n    getState\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (!window.confirm('Are you sure you want to delete this resource?'))\n        return\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteResource',\n                type,\n                _id: mD[current[type]],\n            })\n        )\n    }\n}\n\nexport const publishResource = (type: 'page' | 'plugin' | 'template') => (\n    dispatch: Object,\n    getState\n) => {\n    const { mD } = getState()\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'publishResource',\n                type,\n                _id: mD[current[type]],\n            })\n        )\n    }\n}\n\nexport const revertResource = (type, to) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (to === 'draft') {\n        dispatch(\n            actions.revertResource({\n                _id: mD[current[type]],\n                draft: mD[resourceObjectIndex[type]].draft,\n                to,\n            })\n        )\n    } else {\n        if (webSocket && webSocket.readyState !== 3) {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'revertResource',\n                    type,\n                    _id: mD[current[type]],\n                    to,\n                })\n            )\n        }\n    }\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\nimport { sendUpdate } from './sendUpdate'\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport const changeWebsiteProperty = (key, value, id) => (\n    dispatch,\n    getState\n) => {\n    const { mD } = getState()\n    if (!mD.currentWebsiteObject || !mD.currentWebsiteId) return\n    const newResource = cloneDeep(\n        id ? mD.resourcesObjects[id] : mD.currentWebsiteObject\n    )\n    if (!newResource) return\n    newResource[key] = value\n    dispatch(sendUpdate('website', newResource, mD.currentWebsiteId))\n}\n\nexport const addWebsite = (duplicate?: boolean) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addWebsite',\n                _id: mD.currentWebsiteId,\n                duplicate,\n            })\n        )\n    }\n}\n\nexport const deleteWebsite = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteWebsite',\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const verifyCustomDomain = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (webSocket && webSocket.readyState !== 3) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'verifyCustomDomain',\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const sharingRightsChange = (userId, right, value) => (\n    dispatch,\n    getState\n) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const newSharing = cloneDeep(mD.currentWebsiteObject.sharing)\n        const account = newSharing.find(item => item.userId === userId)\n        if (account) {\n            let newRights = []\n            if (value) {\n                newRights = [...account.rights, right]\n            } else {\n                newRights = account.rights.filter(item => item !== right)\n            }\n            // const updatedSharing = mD.currentWebsiteObject.sharing.filter(\n            //     item => item.userId !== userId\n            // )\n            // updatedSharing.push({\n            //     ...account,\n            //     rights: newRights,\n            // })\n            account.rights = newRights\n            dispatch(\n                changeWebsiteProperty(\n                    'sharing',\n                    newSharing,\n                    mD.currentWebsiteId\n                )\n            )\n        }\n    }\n}\n\nexport const addUserInWebsiteSharing = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const id = window.prompt('Paste the user id to share the website.')\n        if (!id) return\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'addUserInSharing',\n                _id: mD.currentWebsiteId,\n                userId: id,\n                type: 'add',\n            })\n        )\n    }\n}\n\nexport const deleteUserInWebsiteSharing = userId => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (userId && userId !== mD.userId) {\n        if (\n            !window.confirm(\n                'Are you sure you want to remove this user from sharing?'\n            )\n        )\n            return\n    }\n\n    webSocket.send(\n        JSON.stringify({\n            messageCode: 'addUserInSharing',\n            _id: mD.currentWebsiteId,\n            userId,\n            type: 'delete',\n        })\n    )\n}\n\nexport const transferWebsite = () => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        const userTo = window.prompt(\n            'Enter the user id to whom you would like to transfer the website. It can be found in the user account menu tab.'\n        )\n        if (\n            !userTo ||\n            !window.confirm(\n                'Are you sure you want to transfer this website to user - ' +\n                    userTo +\n                    '?'\n            )\n        )\n            return\n\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'transferWebsite',\n                _id: mD.currentWebsiteId,\n                userTo,\n            })\n        )\n    }\n}\n\nexport const saveDomainName = (name, type) => (dispatch, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (mD.currentWebsiteObject) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'saveDomainName',\n                _id: mD.currentWebsiteId,\n                name,\n                type,\n            })\n        )\n    }\n}\n","import { webSocket } from '../components/ReserveWebsite/ReserveWebsite'\n\nexport const deleteImage = (url: string) => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    if (\n        window.confirm(\n            'Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.'\n        )\n    ) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'deleteImage',\n                url,\n                _id: mD.currentWebsiteId,\n            })\n        )\n    }\n}\n\nexport const renameImage = (url: string) => (dispatch: Object, getState) => {\n    if (sessionStorage.getItem('tryWebsiter'))\n        return alert(\n            'This function is not available in test mode. Please create your free account at https://my.websiter.dev/login'\n        )\n    const { mD } = getState()\n    const label = window.prompt('Type a new name for the image.')\n    if (label !== null) {\n        webSocket.send(\n            JSON.stringify({\n                messageCode: 'renameImage',\n                url,\n                _id: mD.currentWebsiteId,\n                label,\n            })\n        )\n    }\n}\n","export { sendUpdate } from './sendUpdate'\n\nexport {\n    addResource,\n    deleteResource,\n    publishResource,\n    revertResource,\n} from './resources'\n\nexport {\n    addWebsite,\n    deleteWebsite,\n    changeWebsiteProperty,\n    verifyCustomDomain,\n    sharingRightsChange,\n    addUserInWebsiteSharing,\n    deleteUserInWebsiteSharing,\n    transferWebsite,\n    saveDomainName,\n} from './websites'\n\nexport { renameImage, deleteImage } from './images'\n","import React from 'react'\n//import { connect } from 'react-redux';\nimport type { Node } from 'react'\n\n//import * as actions from '../../../store/actions/index';\nimport classes from './Checkbox.module.css'\n//import SmallButton from '../Buttons/SmallButton/SmallButton';\n\ntype Props = {\n    checked?: boolean,\n    title?: string,\n    onChange: Function,\n    datatestid?: string,\n    radio?: boolean,\n    children?: Node,\n    inline?: boolean,\n}\n\nconst Checkbox = (props: Props) => {\n    return (\n        <div\n            className={\n                props.inline\n                    ? [classes.Div, classes.Inline].join(' ')\n                    : classes.Div\n            }\n        >\n            <label>\n                <input\n                    data-testid={props.datatestid}\n                    type={props.radio ? 'radio' : 'checkbox'}\n                    className={classes.Input}\n                    checked={props.checked || false}\n                    onChange={e => props.onChange(e.target.checked)}\n                />\n                {props.title}\n                {props.children}\n            </label>\n        </div>\n    )\n}\n\nexport default Checkbox\n","import throttle from 'lodash.throttle'\n\nexport const CANCEL = 'redux-throttle/CANCEL'\nexport const FLUSH = 'redux-throttle/FLUSH'\n\nfunction map(throttled, action, method) {\n    if (action.payload && action.payload.type) {\n        let types = action.payload.type\n        if (!Array.isArray(types)) {\n            types = [types]\n        }\n        Object.keys(throttled)\n            .filter(t => types.includes(t))\n            .forEach(t => throttled[t][method]())\n        return\n    }\n    Object.keys(throttled).forEach(t => throttled[t][method]())\n    return\n}\n\nexport default function middleware(\n    defaultWait = 300,\n    defaultThrottleOption = {}\n) {\n    const throttled = {}\n    return store => next => action => {\n        if (action.type === CANCEL) {\n            map(throttled, action, 'cancel')\n            return next(action)\n        }\n\n        if (action.type === FLUSH) {\n            map(throttled, action, 'flush')\n            return next(action)\n        }\n\n        const shouldThrottle = (action.meta || {}).throttle\n\n        if (!shouldThrottle) {\n            return next(action)\n        }\n\n        if (throttled[action.type]) {\n            return throttled[action.type](action)\n        }\n\n        let wait = defaultWait\n        let options = defaultThrottleOption\n\n        if (!isNaN(shouldThrottle) && shouldThrottle !== true) {\n            wait = shouldThrottle\n        } else if (typeof shouldThrottle === 'object') {\n            wait = shouldThrottle.wait || defaultWait\n            options = { ...defaultThrottleOption, ...shouldThrottle }\n        }\n\n        throttled[action.type] = throttle(next, wait, options)\n\n        return throttled[action.type](action)\n    }\n}\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport * as actions from '../../../store/actions/index'\n\ntype Props = {\n    onLogout: () => {},\n}\n\nclass Logout extends Component<Props> {\n    componentDidMount() {\n        this.props.onLogout()\n    }\n\n    render() {\n        return <Redirect to=\"/login\" />\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(Logout)\n","import React, { Component } from 'react'\n\ntype Props = {}\n\ntype State = {\n    component: Object | null,\n}\n\nconst asyncComponent = (importComponent: Object) => {\n    return class extends Component<Props, State> {\n        state = {\n            component: null,\n        }\n\n        componentDidMount() {\n            importComponent().then(cmp => {\n                this.setState({ component: cmp.default })\n            })\n        }\n\n        render() {\n            const C = this.state.component\n            return C ? <C {...this.props} /> : <div>Loading...</div>\n        }\n    }\n}\n\nexport default asyncComponent\n","import React from 'react'\nimport type { Node } from 'react'\nimport classes from './LoginButton.module.css'\n\ntype Props = {\n    clicked?: Function,\n    disabled?: boolean,\n    btnType?: 'Success' | 'Danger',\n    children?: Node,\n    datatestid?: string,\n}\n\nconst LoginButton = (props: Props) => (\n    <button\n        data-testid={props.datatestid || 'LoginButton'}\n        disabled={props.disabled}\n        className={[classes.Button, classes[props.btnType]].join(' ')}\n        onClick={props.clicked}\n    >\n        {props.children}\n    </button>\n)\n\nexport default LoginButton\n","import React, { useState, useEffect } from 'react'\n\nimport Checkbox from '../../components/UI/Checkbox/Checkbox'\nimport Cookies from 'universal-cookie'\nimport LoginButton from '../../components/UI/LoginButton/LoginButton'\nimport classes from './Auth.module.css'\nimport Svg from '../../components/Svg/Svg'\n\nconst cookies = new Cookies()\n\ntype Props = {\n    test?: boolean,\n}\n\nconst Auth = (props: Props) => {\n    const [state: boolean, setState] = useState(false)\n    const [cookieConsent: boolean, setCookieConsent] = useState(false)\n\n    useEffect(() => {\n        checkCookieConsent()\n    })\n\n    let remeberMeParam = '?rememberme=false'\n    if (state) {\n        remeberMeParam = '?rememberme=true'\n    }\n\n    const checkCookieConsent = () => {\n        const cookiesConsent = cookies.get('cookies_consent')\n        if (cookiesConsent) {\n            setCookieConsent(true)\n        }\n    }\n\n    const agreeWithCookies = () => {\n        cookies.set('cookies_consent', 'true', {\n            path: '/',\n            maxAge: 31530000,\n        })\n        checkCookieConsent()\n    }\n    const basicURL =\n        process.env.NODE_ENV !== 'development'\n            ? 'https://my.websiter.dev/api/auth/'\n            : 'http://my.websiter.dev:5000/api/auth/'\n    return (\n        <div className={classes.Container}>\n            {!cookieConsent ? (\n                <>\n                    <div>\n                        We use cookies only for login purposes. In order to\n                        proceed you need to agree with the use of cookies.\n                    </div>\n                    <LoginButton btnType=\"Success\" clicked={agreeWithCookies}>\n                        AGREE\n                    </LoginButton>\n                    <LoginButton\n                        btnType=\"Danger\"\n                        clicked={() => {\n                            window.open('https://websiter.dev', '_self')\n                        }}\n                    >\n                        Return to the homepage\n                    </LoginButton>\n                </>\n            ) : (\n                <>\n                    <h1>Continue with:</h1>\n                    <div className={classes.socialButtons}>\n                        <a href={basicURL + `google/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#4285F4\" d=\"M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z\"></path></svg>' />\n                            <div>GOOGLE</div>\n                        </a>\n                        <a href={basicURL + `facebook/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#1877F2\" d=\"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z\"></path></svg>' />\n                            <div>FACEBOOK</div>\n                        </a>\n                        <a href={basicURL + `twitter/start${remeberMeParam}`}>\n                            <Svg icon='<svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\"><path fill=\"#1DA1F2\" d=\"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"></path></svg>' />\n                            <div>TWITTER</div>\n                        </a>\n                    </div>\n                    <Checkbox\n                        title=\"Remember me\"\n                        checked={state}\n                        onChange={() => setState(!state)}\n                    />\n                </>\n            )}\n        </div>\n    )\n}\nexport default Auth\n","import React from 'react'\nimport classes from './Spinner.module.css'\n\ntype Props = {\n    cover?: boolean,\n    datatestid?: string,\n}\n\nconst spinner = (props: Props) => (\n    <>\n        {props.cover ? (\n            <div\n                className={classes.Cover}\n                data-testid={props.datatestid || 'cover'}\n            >\n                <div className={classes.Loader}>Loading...</div>\n            </div>\n        ) : (\n            <div className={classes.Loader}>Loading...</div>\n        )}\n    </>\n)\n\nexport default spinner\n","import isEqual from 'lodash/isEqual'\nimport omit from 'lodash/omit'\n\nexport default (draft1, draft2) =>\n    isEqual(\n        {\n            structure: draft1.structure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath', 'itemIndex'])\n            ),\n            values: draft1.values,\n        },\n        {\n            structure: draft2.structure.map(item =>\n                omit(item, ['expanded', 'children', 'itemPath', 'itemIndex'])\n            ),\n            values: draft2.values,\n        }\n    )\n","import {\n    structure,\n    current,\n    resourceObjectIndex,\n} from '../../utils/resourceTypeIndex'\nimport cloneDeep from 'lodash/cloneDeep'\nimport isEqual from 'lodash/isEqual'\nimport { checkIfCapital } from '../../utils/basic'\nimport resourcesAreEqual from '../../utils/resourcesAreEqual'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n    propertyFilter: (name, context) => name !== '__patch__',\n})\n\nconst patchStructure = (state: Object, action: Object) => {\n    return diffpatcher.patch(\n        state[structure[action.resourceType]],\n        action.structurePatch\n    )\n}\n\nexport const addResourceSuccess = (state: Object, action: Object) => {\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state.resourcesObjects[action._id] = action.resource\n}\n\nexport const deleteResourceSuccess = (state: Object, action: Object) => {\n    action.deletedResources.forEach(id => delete state.resourcesObjects[id])\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state[current[action.resourceType]] = action.current || ''\n}\n\nexport const setCurrentResource = (state: Object, action: Object) => {\n    state.resourcesObjects[action.mD.currentWebsiteId][\n        current[action.resourceType]\n    ] = action._id\n    if (action.resourceType === 'page') {\n        state.hoveredElementSize = {}\n    }\n}\n\nexport const saveResourcesStructureSuccess = (\n    state: Object,\n    action: Object\n) => {\n    state[structure[action.resourceType]] = action.structure\n}\n\nexport const removeResourceFromUnsaved = (state: Object, action: Object) => {\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action._id\n    )\n}\n\nexport const addResourceToUnsaved = (state: Object, action: Object) => {\n    if (!state.notSavedResources.includes(action._id))\n        state.notSavedResources.push(action._id)\n}\n\nexport const removeResourceFromNewVersions = (\n    state: Object,\n    action: Object\n) => {\n    state.newVersionResources = state.newVersionResources.filter(\n        item => item !== action._id\n    )\n}\n\nexport const addResourceToNewVersions = (state: Object, action: Object) => {\n    if (!state.newVersionResources.includes(action._id))\n        state.newVersionResources.push(action._id)\n}\n\nexport const savePageInState = (state: Object, action: Object) => ({\n    ...state,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [state.currentPage]: {\n            ...state.resourcesObjects[state.currentPage],\n            content: action.value,\n        },\n    },\n})\n\nexport const saveResourceDraftInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n}\n\nexport const saveResourceInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n    state.resourcesObjects[action.currentResource].present = action.draft\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const addResourceVersion = (state: Object, action: Object) => {\n    const resource = cloneDeep(\n        action.globalSettings\n            ? action.mD.globalSettingsPageObject\n            : action.mD[resourceObjectIndex[action.resourceType]]\n    )\n    if (!isEqual(resource.present, action.draft)) {\n        if (action.isNotForHistory) {\n            resource.present = action.draft\n            state.resourcesObjects[resource._id] = resource\n        } else {\n            const newDraft = { ...action.draft }\n            if (\n                action.draft.structure &&\n                ['template', 'plugin'].includes(action.resourceType)\n            ) {\n                const connectedResources = []\n                action.draft.structure.forEach(item => {\n                    if (item.tag.length > 0 && item.path.length > 0) {\n                        if (\n                            checkIfCapital(item.tag.charAt(0)) &&\n                            !item.childrenTo &&\n                            !item.isChildren &&\n                            !item.isElementFromCMSVariable\n                        ) {\n                            connectedResources.push({\n                                name: item.tag,\n                                type: 'plugin',\n                            })\n                        }\n                    }\n                })\n                newDraft.connectedResources = connectedResources\n\n                // let resource =\n                //     state.resourcesObjects[\n                //         state.resourcesObjects[state.userId].loadedWebsite\n                //     ].templatesStructure.find(\n                //         item => item.id === action.currentResource\n                //     ) ||\n                //     state.pluginsStructure.find(\n                //         item => item.id === action.currentResource\n                //     )\n                // if (resource) {\n                //     resource.connectedResources = connectedResources\n                // }\n            }\n            const currentResourceId = action.globalSettings\n                ? action.mD.globalSettingsPageId\n                : action.mD[current[action.resourceType]]\n            if (\n                !resourcesAreEqual(\n                    resource.present.structure\n                        ? resource.present\n                        : resource.draft,\n                    newDraft\n                )\n            ) {\n                if (!state.notSavedResources.includes(currentResourceId))\n                    state.notSavedResources.push(currentResourceId)\n            }\n            if (resource.past.length > 100) resource.past.shift()\n            resource.past.push(diffpatcher.diff(resource.present, newDraft))\n            resource.present = newDraft\n            resource.future = []\n            state.resourcesObjects[resource._id] = resource\n        }\n    }\n}\n\nexport const undoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.past.length > 0) {\n            if (\n                !isEqual(\n                    resource.present,\n                    resource.past[resource.past.length - 1]\n                )\n            ) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.past.pop()\n            resource.future.unshift(delta)\n            resource.present = diffpatcher.unpatch(resource.present, delta)\n        }\n    }\n}\n\nexport const redoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.future.length > 0) {\n            if (!isEqual(resource.present, resource.future[0])) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.future.shift()\n            resource.past.push(delta)\n            resource.present = diffpatcher.patch(resource.present, delta)\n        }\n    }\n}\n","import * as auth from './auth'\nimport * as images from './images'\nimport * as resources from './resources'\nimport { createReducer } from '@reduxjs/toolkit'\nimport resourcesAreEqual from '../../utils/resourcesAreEqual'\n\nexport type menuItemType = {\n    all: boolean,\n    id: string,\n    generatedFrom: string,\n    sourceItem: boolean,\n    name: string,\n    type: string,\n    path: Array<string>,\n    properties: {\n        url: string,\n        class: string,\n    },\n}\n\nexport type requiredRightsType = Array<string>\n\nexport type elementType = {\n    id: string,\n    path: Array<string>,\n    tag: string,\n    properties: {\n        name?: string,\n        topMenuBlockClasses?: Array<string>,\n        topMenuItemClasses?: Array<string>,\n        topMenuItemActiveClasses?: Array<string>,\n        popupMenuBlockClasses?: Array<string>,\n        popupMenuItemClasses?: Array<string>,\n        popupMenuItemActiveClasses?: Array<string>,\n        mode?: 'horizontal' | 'vertical',\n        trigger?: 'click',\n        id?: string,\n        class?: string,\n    },\n    propertiesString: string,\n    style?: string,\n    expanded?: boolean,\n    textMode: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    text?: boolean,\n    textContent?: string,\n    isChildren?: boolean,\n    childrenTo?: string,\n    forPlugin?: string,\n    sourcePlugin?: string,\n    menuItems?: Array<menuItemType>,\n    currentMenuItem?: string,\n    children?: Array<elementType>,\n    isElementFromCMSVariable?: boolean,\n    isCMSVariable?: boolean,\n    CMSVariableType?: string,\n    CMSVariableSystemName?: string,\n    CMSVariableDescription?: string,\n    CMSVariableDefaultValue?: any,\n    currentMenuId?: string,\n    defaultMenuItems?: Array<menuItemType>,\n    value?: any,\n}\nexport type resourceType = {\n    currentId: number,\n    structure: Array<elementType>,\n    currentBox?: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    value?: string,\n}\n\nexport type pageType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    hidden: boolean,\n    notPublished: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type pluginType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type templateType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    template: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type imageType = {\n    name: string,\n    label: string,\n    url: string,\n    size: number,\n}\nexport type websiteType = {\n    _id: string,\n    domain: string,\n    name: string,\n    customDomain?: string,\n    domainHidden?: boolean,\n    customDomainHidden?: boolean,\n    customDomainVerified?: boolean,\n    verifyCode?: string,\n    cname?: string,\n    domainNoIndex?: boolean,\n    sharing: Array<{\n        userId: string,\n        rights: Array<string>,\n    }>,\n    user: string,\n    storage: number,\n    images: Array<imageType>,\n}\n\nexport type initialStateType = {\n    websites: Array<websiteType>,\n    resourcesObjects: {\n        [key: string]: {\n            draft: resourceType,\n            present: resourceType,\n            future: Array<resourceType>,\n            past: Array<resourceType>,\n        },\n    },\n    pagesStructure: Array<pageType>,\n    pluginsStructure: Array<pluginType>,\n    templatesStructure: Array<templateType>,\n    loadedWebsite: string,\n    error: null | {},\n    loading: boolean,\n    currentPage: string,\n    currentPlugin: string,\n    currentTemplate: string,\n    domainNotOk: boolean,\n    customDomainNotOk: boolean,\n    maxStorage: number,\n    uploadingImage: boolean,\n    currentBoxInPlugin: string,\n    currentImage: string,\n    sizeIsChanging: boolean,\n    currentWebsite: string,\n    notSavedResources: Array<string>,\n    pageZoom: number,\n    hoveredElementId: null | string,\n    hoveredElementSize: {\n        [key: string]: {\n            children: {},\n            left: number,\n            top: number,\n            width: number,\n            height: number,\n        },\n    },\n    isRefreshing: boolean,\n    userId: null | string,\n    barSizes: { height: number, width: number, width2: number, width3: number },\n    currentTopTab: string,\n    findMode: null | string,\n    hoverMode: string,\n    fromFrame: boolean,\n    search: {},\n    tryWebsiter: boolean,\n    currentUserInWebsiteSharing: string,\n    currentSiteBuilderMode: 'template' | 'page' | '',\n    accountInfo: {\n        displayName?: string,\n        emails?: Array<string>,\n        photos?: Array<string>,\n    },\n}\n\nexport const initialState: initialStateType = {\n    resourcesObjects: {},\n    error: null,\n    loading: false,\n    domainNotOk: false,\n    customDomainNotOk: false,\n    maxStorage: 0,\n    uploadingImage: false,\n    currentBoxInPlugin: '',\n    currentImage: '',\n    sizeIsChanging: false,\n    notSavedResources: [],\n    newVersionResources: [],\n    pageZoom: 100,\n    hoveredElementId: null,\n    hoveredElementSize: {},\n    isRefreshing: false,\n    userId: null,\n    barSizes: {\n        height: 200,\n        width: 400,\n        width2: 200,\n        width3: 200,\n    },\n    currentTopTab: 'page',\n    findMode: null,\n    hoverMode: '',\n    fromFrame: false,\n    search: {},\n    shouldRefresh: false,\n    tryWebsiter: false,\n    currentUserInWebsiteSharing: '',\n    // currentSiteBuilderMode: '',\n    mD: {},\n}\n\nconst saveHoveredElementRect = (state, action) => {\n    const checkAndCreatePath = (path, index, parent) => {\n        if (index < path.length - 1) {\n            if (!parent[path[index].id]) {\n                parent[path[index].id] = {\n                    plugin: path[index].plugin,\n                    children: {},\n                }\n            }\n            checkAndCreatePath(\n                action.path,\n                index + 1,\n                parent[path[index].id].children\n            )\n        } else {\n            parent[path[index].id] = {\n                plugin: path[index].plugin,\n                children: {},\n                ...action.size,\n            }\n        }\n    }\n    if (action.path.length > 0)\n        checkAndCreatePath(action.path, 0, state.hoveredElementSize)\n}\n\nconst removeFromHoveredSizes = (state, action) => {\n    // ,\n    // removedElements,\n    const checkAndRemoveElement = parent => {\n        for (const item in parent) {\n            if (parent[item].plugin === action.currentResource) {\n                for (const child in parent[item].children) {\n                    if (action.removedElements.includes(child))\n                        delete parent[item].children[child]\n                }\n            } else {\n                checkAndRemoveElement(parent.children)\n            }\n        }\n    }\n    checkAndRemoveElement(state.hoveredElementSize)\n}\n\nconst toggleFindMode = (state, action) => {\n    if (action.value) {\n        if (state.findMode === action.value) {\n            state.findMode = null\n        } else {\n            state.findMode = action.value\n        }\n    } else {\n        state.findMode = null\n    }\n}\n\nconst reducer = createReducer(initialState, {\n    REMOVE_RESOURCE_FROM_UNSAVED: (state, action) =>\n        resources.removeResourceFromUnsaved(state, action),\n    ACTION_START_IMAGE_UPLOAD: (state, action) =>\n        images.actionStartImageUpload(state),\n    ACTION_FAIL_IMAGE_UPLOAD: (state, action) =>\n        images.actionFailImageUpload(state, action),\n    ACTION_SUCCESS_IMAGE_UPLOAD: (state, action) =>\n        images.actionSuccessImageUpload(state),\n    CHOOSE_IMAGE: (state, action) => images.chooseImage(state, action),\n\n    SIZE_IS_CHANGING: (state, action) => {\n        state.sizeIsChanging = action.isChanging\n    },\n    ACTION_START: (state, action) => {\n        state.error = null\n        state.pagesLoading = true\n    },\n    ACTION_FAIL: (state, action) => {\n        state.error = action.error\n        state.pagesLoading = false\n    },\n    ACTION_SUCCESS: (state, action) => {\n        state.error = null\n        state.pagesLoading = false\n    },\n\n    ADD_RESOURCE_VERSION: (state, action) =>\n        resources.addResourceVersion(state, action),\n    UNDO_RESOURCE_VERSION: (state, action) =>\n        resources.undoResourceVersion(state, action),\n    REDO_RESOURCE_VERSION: (state, action) =>\n        resources.redoResourceVersion(state, action),\n\n    AUTH_START: (state, action) => auth.authStart(state),\n    AUTH_SUCCESS: (state, action) => auth.authSuccess(state, action),\n    AUTH_FAIL: (state, action) => auth.authFail(state, action),\n    AUTH_LOGOUT: (state, action) => auth.authLogout(state),\n    CHANGE_BAR_SIZE: (state, action) => auth.changeBarSize(state, action),\n    SET_CURRENT_TOP_TAB: (state, action) => {\n        state.currentTopTab = action.currentTopTab\n    },\n\n    SAVE_HOVERED_ELEMENT_RECT: (state: Object, action: Object) =>\n        saveHoveredElementRect(state, action),\n    REMOVE_FROM_HOVERED_SIZES: (state: Object, action: Object) =>\n        removeFromHoveredSizes(state, action),\n    HOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = action.id\n        state.hoverMode = action.mode\n        state.fromFrame = action.fromFrame\n    },\n    UNHOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = null\n        state.fromFrame = false\n    },\n    TOGGLE_FIND_MODE: (state: Object, action: Object) =>\n        toggleFindMode(state, action),\n    MARK_REFRESHING: (state: Object, action: Object) => {\n        state.isRefreshing = action.refreshing\n    },\n    MARK_SHOULD_REFRESHING: (state: Object, action: Object) => {\n        state.shouldRefresh = action.value\n    },\n    CHOOSE_USER_IN_WEBSITE_SHARING: (state: Object, action: Object) => {\n        state.currentUserInWebsiteSharing = action.id\n    },\n    SET_CURRENT_SITEBUILDER_MODE: (state: Object, action: Object) => {\n        state.currentSiteBuilderMode = action.mode\n    },\n    SAVE_MAIN_DATA: (state: Object, action: Object) => {\n        state.mD = action.mD\n    },\n    //ws\n    ADD_RESOURCE: (state: Object, action: Object) => {\n        const { mD } = state\n        if (action.data) {\n            if (action.data._id) {\n                if (mD.resourcesObjects[action.data._id]) {\n                    if (mD.resourcesObjects[action.data._id].draft) {\n                        state.resourcesObjects[action.data._id] = {\n                            ...mD.resourcesObjects[action.data._id],\n                            draft: action.data.draft,\n                            __v: action.data.__v,\n                        }\n                        let saved\n                        if (\n                            !mD.resourcesObjects[action.data._id].present\n                                .structure\n                        )\n                            saved = true\n                        else\n                            saved = resourcesAreEqual(\n                                action.data.draft,\n                                mD.resourcesObjects[action.data._id].present\n                            )\n\n                        if (saved) {\n                            resources.removeResourceFromUnsaved(state, {\n                                _id: action.data._id,\n                            })\n                            resources.removeResourceFromNewVersions(state, {\n                                _id: action.data._id,\n                            })\n                        } else {\n                            resources.addResourceToUnsaved(state, {\n                                _id: action.data._id,\n                            })\n                            resources.addResourceToNewVersions(state, {\n                                _id: action.data._id,\n                            })\n                        }\n                    } else {\n                        state.resourcesObjects[action.data._id] = {\n                            ...state.resourcesObjects[action.data._id],\n                            ...action.data,\n                        }\n                    }\n                } else state.resourcesObjects[action.data._id] = action.data\n                if (action.data._id.toString() === mD.userId.toString()) {\n                    if (action.data.settings)\n                        if (action.data.settings.barSizes)\n                            state.barSizes = action.data.settings.barSizes\n                }\n            }\n        }\n    },\n\n    DELETE_RESOURCE: (state: Object, action: Object) => {\n        if (action.data) {\n            delete state.resourcesObjects[action.data.resourceId]\n        }\n    },\n    REVERT_RESOURCE: (state: Object, action: Object) => {\n        if (action.data) {\n            state.resourcesObjects[action.data._id].present = action.data.draft\n            if (action.data.to === 'draft') {\n                resources.removeResourceFromUnsaved(state, {\n                    _id: action.data._id,\n                })\n                resources.removeResourceFromNewVersions(state, {\n                    _id: action.data._id,\n                })\n            }\n        }\n    },\n    SAVE_OBJECT: (state: Object, action: Object) => {\n        if (action.data) {\n            state.resourcesObjects[action.data._id] = action.data\n        }\n    },\n})\n\nexport default reducer\n","import { initialState } from './reducer'\n\nexport const actionStartImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: true,\n})\n\nexport const actionSuccessImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: false,\n})\n\nexport const actionFailImageUpload = (state: Object, action: Object) => ({\n    ...state,\n    error: action.error,\n    loading: false,\n})\n\nexport const chooseImage = (state: Object = initialState, action: Object) => {\n    state.currentImage = action.image\n}\n","export const authStart = (state: Object) => {\n    state.loading = true\n    state.error = null\n}\n\nexport const authFail = (state: Object, action: Object) => {\n    state.loading = false\n    state.error = action.error\n    state.userId = null\n}\n\nexport const authLogout = (state: Object) => {\n    state.userId = null\n}\n\nexport const authSuccess = (state: Object, action: Object) => {\n    state.userId = action.data._id\n    state.accountInfo = action.data.accountInfo\n    state.error = null\n    state.loading = false\n    state.barSizes = { ...state.barSizes, ...action.data.barSizes }\n    state.tryWebsiter = action.data.tryWebsiter\n}\n\nexport const changeBarSize = (state: Object, action: Object) => {\n    state.barSizes[action.key] = action.value\n}\n","import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Logout from './containers/Auth/Logout/Logout'\nimport asyncComponent from './hoc/asyncComponent'\nimport * as actions from './store/actions/index'\nimport Auth from './containers/Auth/Auth'\nimport Spinner from './components/UI/Spinner/Spinner'\n\nimport { initialState } from './store/reducer/reducer'\n\nconst asyncSiteBuilderLayout = asyncComponent(() => {\n    return import('./components/SiteBuilderLayout/SiteBuilderLayout')\n})\n\ntype Props = {\n    onTryAutoSignup: Function,\n    isAuthenticated: boolean,\n    loading: typeof initialState.loading,\n}\n\nclass App extends Component<Props> {\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        let routes = (\n            <Switch>\n                <Route path=\"/login\" component={Auth} />\n                <Redirect to=\"/login\" />\n            </Switch>\n        )\n        if (this.props.isAuthenticated) {\n            routes = (\n                <div style={{ height: '100%' }}>\n                    <Switch>\n                        <Route\n                            path=\"/editor\"\n                            component={asyncSiteBuilderLayout}\n                        />\n                        <Route path=\"/logout\" component={Logout} />\n                        <Redirect to=\"/editor\" />\n                    </Switch>\n                </div>\n            )\n        }\n        return (\n            <>\n                {routes} {this.props.loading ? <Spinner cover /> : null}\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthenticated: state.userId !== null,\n        loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport axios from 'axios'\nimport throttle from './store/middleware/throttle'\n\nimport './index.css'\nimport App from './App'\n//import * as serviceWorker from './serviceWorker';\nimport reducer from './store/reducer/reducer'\n// $FlowFixMe\nimport 'react-sortable-tree/style.css'\n\n// const composeEnhancers =\n//     process.env.NODE_ENV === 'development'\n//         ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n//         : null || compose\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://api.websiter.dev:5000'\n} else {\n    axios.defaults.baseURL = 'https://api.websiter.dev'\n}\n\nconst defaultWait = 300\nconst defaultThrottleOption = {\n    leading: true,\n    trailing: true,\n}\n\nconst throttleMiddleware = throttle(defaultWait, defaultThrottleOption)\n\nexport const store = createStore(\n    reducer,\n    composeEnhancers\n        ? composeEnhancers(applyMiddleware(throttleMiddleware, thunk))\n        : applyMiddleware(throttleMiddleware, thunk)\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\nconst inIframe = window.self !== window.top\n\nconst root = document.getElementById('root')\nif (root !== null && !inIframe) {\n    ReactDOM.render(app, root)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","const addConnectedResources = (\n    draft,\n    id,\n    newRequestedResourcesList,\n    currentWebsiteObject,\n    resourcesObjects\n) => {\n    if (!resourcesObjects[id])\n        newRequestedResourcesList.push({\n            id,\n            type: 'resource',\n        })\n    if (draft)\n        if (draft.connectedResources)\n            draft.connectedResources.forEach(connectedResource => {\n                let nextResourceItem\n                if (connectedResource.type === 'plugin') {\n                    nextResourceItem = currentWebsiteObject.pluginsStructure.find(\n                        item => item.name === connectedResource.name\n                    )\n                }\n                if (nextResourceItem) {\n                    const nextResourceObject =\n                        resourcesObjects[nextResourceItem.id]\n                    let nextResourceDraft = {}\n                    if (nextResourceObject) {\n                        nextResourceDraft = nextResourceObject.present.structure\n                            ? nextResourceObject.present\n                            : nextResourceObject.draft\n                    }\n                    addConnectedResources(\n                        nextResourceDraft,\n                        nextResourceItem.id,\n                        newRequestedResourcesList,\n                        currentWebsiteObject,\n                        resourcesObjects\n                    )\n                }\n            })\n}\n\nexport default props => {\n    const { mD } = props\n    let newRequestedResourcesList = []\n    if (mD.userId && mD.resourcesObjects) {\n        if (!mD.userObject) {\n            newRequestedResourcesList.push({\n                id: mD.userId,\n                type: 'user',\n            })\n        } else {\n            let currentWebsiteId = mD.currentWebsiteId\n            for (let item of mD.websites) {\n                newRequestedResourcesList.push({\n                    id: item.id,\n                    type: 'website',\n                })\n            }\n            if (!currentWebsiteId) {\n                if (mD.websites.length > 0) currentWebsiteId = mD.websites[0].id\n                if (currentWebsiteId) {\n                    props.chooseWebsite(currentWebsiteId)\n                }\n            } else {\n                if (mD.currentPageId) {\n                    // if (!mD.currentPageObject) {\n                    //     newRequestedResourcesList.push({\n                    //         id: mD.currentPageId,\n                    //         type: 'resource',\n                    //     })\n                    // }\n\n                    addConnectedResources(\n                        mD.currentPageDraft,\n                        mD.currentPageId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                    if (mD.pageTemplateId) {\n                        addConnectedResources(\n                            mD.pageTemplateDraft,\n                            mD.pageTemplateId,\n                            newRequestedResourcesList,\n                            mD.currentWebsiteObject,\n                            mD.resourcesObjects\n                        )\n                    }\n                }\n                if (mD.currentTemplateId) {\n                    addConnectedResources(\n                        mD.currentTemplateDraft,\n                        mD.currentTemplateId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n                if (mD.currentPluginId) {\n                    addConnectedResources(\n                        mD.currentPluginDraft,\n                        mD.currentPluginId,\n                        newRequestedResourcesList,\n                        mD.currentWebsiteObject,\n                        mD.resourcesObjects\n                    )\n                }\n            }\n        }\n    }\n    newRequestedResourcesList = Array.from(new Set(newRequestedResourcesList))\n    return newRequestedResourcesList\n}\n","import React from 'react'\n\nimport { connect } from 'react-redux'\nimport axios from 'axios'\n\nimport * as actions from '../../store/actions/index'\nimport { Component } from 'react'\nimport getListOfNeededResources from './methods/getListOfNeededResources'\nimport getEssentialData from '../../utils/getEssentialData'\n\ntype Props = {\n    loadedWebsite: string,\n}\n\ntype State = {\n    requestedResources: Array<{}>,\n    taskId: number,\n}\n\nexport let webSocket = false\n\nclass ReserveWebsiteInn extends Component<Props, State> {\n    state = {\n        requestedResources: [],\n        taskId: 0,\n    }\n\n    start = () => {\n        let url\n        if (process.env.NODE_ENV === 'development') {\n            url = 'ws://api.websiter.dev:5000'\n        } else {\n            url = 'wss://api.websiter.dev'\n        }\n        let pingTimeout, authInterval\n        webSocket = new WebSocket(url)\n\n        const heartbeat = () => {\n            clearTimeout(pingTimeout)\n            pingTimeout = setTimeout(() => {\n                webSocket.close()\n            }, 30000 + 1000)\n            const versions = {}\n            for (let id in this.props.mD.resourcesObjects) {\n                versions[id] = {\n                    __v: this.props.mD.resourcesObjects[id].__v,\n                    type: this.props.mD.resourcesObjects[id].draft\n                        ? 'resource'\n                        : this.props.mD.resourcesObjects[id].pagesStructure\n                        ? 'website'\n                        : 'user',\n                }\n            }\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'heartbeat',\n                    versions,\n                })\n            )\n        }\n\n        webSocket.onopen = event => {\n            webSocket.send(\n                JSON.stringify({\n                    messageCode: 'auth',\n                    user: axios.defaults.headers.common['x-auth-token'],\n                    tryWebsiter: sessionStorage.getItem('tryWebsiter'),\n                })\n            )\n            authInterval = setInterval(\n                () =>\n                    webSocket.send(\n                        JSON.stringify({\n                            messageCode: 'auth',\n                            noRequest: true,\n                            user: axios.defaults.headers.common['x-auth-token'],\n                            tryWebsiter: sessionStorage.getItem('tryWebsiter'),\n                        })\n                    ),\n                600000\n            )\n            heartbeat()\n        }\n        webSocket.onmessage = event => {\n            const data = JSON.parse(event.data)\n\n            switch (data.messageCode) {\n                case 'heartbeat':\n                    heartbeat()\n                    break\n                case 'logout':\n                    this.props.logout()\n                    break\n                case 'addResource':\n                    let resource = data.resource\n                    this.props.addResource(resource)\n                    break\n                case 'updateuser':\n                    this.props.updateUser(data, webSocket)\n                    break\n                case 'updatewebsite':\n                    this.props.updateWebsite(data, webSocket)\n                    break\n                case 'updateresource':\n                    this.props.updateResource(data, webSocket)\n                    break\n                case 'revertResource':\n                    this.props.revertResource(data)\n                    break\n                case 'deleteuser':\n                case 'deletewebsite':\n                case 'deleteresource':\n                    this.props.deleteResource(data)\n                    break\n                case 'confirmSaved':\n                    this.props.confirmSaved(data)\n                    break\n                case 'notFoundResource':\n                    this.markNotFoundResource(data)\n                    break\n                case 'error':\n                    alert(data.text)\n                    break\n                default:\n                    break\n            }\n        }\n        webSocket.onclose = event => {\n            clearTimeout(pingTimeout)\n            clearInterval(authInterval)\n        }\n    }\n\n    markNotFoundResource = data => {\n        const requestedResources = this.state.requestedResources.filter(\n            item => item.id.toString() === data._id.toString()\n        )\n        this.setState({ requestedResources })\n    }\n\n    checkInterval = null\n\n    check = () => {\n        if (!webSocket || webSocket.readyState === 3) {\n            this.start()\n        }\n    }\n    componentWillMount() {\n        this.checkInterval = setInterval(this.check, 5000)\n    }\n\n    reRequestResourcesInterval = null\n    reRequestResources = () => {\n        for (let requestedResource of this.state.requestedResources) {\n            if (requestedResource)\n                if (!this.props.mD.resourcesObjects[requestedResource.id]) {\n                    if (webSocket && webSocket.readyState !== 3) {\n                        webSocket.send(\n                            JSON.stringify({\n                                messageCode: 'requestResource',\n                                id: requestedResource.id,\n                                type: requestedResource.type,\n                            })\n                        )\n                    }\n                }\n        }\n    }\n    componentWillUnmount() {\n        clearInterval(this.reRequestResourcesInterval)\n        clearInterval(this.checkInterval)\n        if (webSocket) {\n            webSocket.close()\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const newRequestedResourcesList = getListOfNeededResources(nextProps)\n        const requestedResources = []\n        for (const requestItem of newRequestedResourcesList) {\n            if (requestItem) {\n                let requestedResourceItem = this.state.requestedResources.find(\n                    item => item.id === requestItem.id\n                )\n                if (!requestedResourceItem) {\n                    if (webSocket && webSocket.readyState !== 3) {\n                        webSocket.send(\n                            JSON.stringify({\n                                messageCode: 'requestResource',\n                                id: requestItem.id,\n                                type: requestItem.type,\n                            })\n                        )\n                        requestedResourceItem = {\n                            id: requestItem.id,\n                            type: requestItem.type,\n                            state: 'sent',\n                        }\n                    }\n                }\n                if (requestedResourceItem)\n                    requestedResources.push(requestedResourceItem)\n            }\n        }\n        this.setState({ requestedResources })\n        clearInterval(this.reRequestResourcesInterval)\n        this.reRequestResourcesInterval = setInterval(\n            this.reRequestResources,\n            3000\n        )\n    }\n\n    render() {\n        return null\n    }\n}\n\nconst mapStateToPropsDo = state => {\n    return {\n        mD: state.mD,\n    }\n}\n\nconst mapDispatchToPropsDo = dispatch => {\n    return {\n        logout: () => dispatch(actions.logout()),\n        addResource: data => dispatch(actions.addResource(data)),\n        updateUser: (data, webSocket) =>\n            dispatch(actions.updateUser(data, webSocket)),\n        updateWebsite: (data, webSocket) =>\n            dispatch(actions.updateWebsite(data, webSocket)),\n        updateResource: (data, webSocket) =>\n            dispatch(actions.updateResource(data, webSocket)),\n        deleteResource: data => dispatch(actions.deleteResource(data)),\n        revertResource: data => dispatch(actions.revertResource(data)),\n        chooseWebsite: currentWebsiteId =>\n            dispatch(actions.chooseWebsite(currentWebsiteId)),\n        confirmSaved: data => dispatch(actions.removeResourceFromUnsaved(data)),\n    }\n}\n\nconst ReserveWebsiteDo = connect(\n    mapStateToPropsDo,\n    mapDispatchToPropsDo\n)(ReserveWebsiteInn)\n\nconst ReserveWebsite = props => {\n    const mainData = getEssentialData(\n        props.userId,\n        props.resourcesObjects,\n        props.tryWebsiter\n    )\n\n    props.saveMainData(mainData)\n    return <ReserveWebsiteDo />\n}\n\nconst mapStateToProps = state => {\n    return {\n        userId: state.userId,\n        resourcesObjects: state.resourcesObjects,\n        tryWebsiter: state.tryWebsiter,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        saveMainData: mD => dispatch(actions.saveMainData(mD)),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ReserveWebsite)\n","export default (userId, resourcesObjects, tryWebsiter) => {\n    const userObject = resourcesObjects[userId]\n    let websites,\n        currentWebsiteItem,\n        currentWebsiteId,\n        currentWebsiteObject,\n        pagesStructure = [],\n        templatesStructure = [],\n        pluginsStructure = [],\n        currentPageId = '',\n        currentPageFSBId = '',\n        currentTemplateId = '',\n        currentPluginId = '',\n        currentPageItem,\n        currentPageFSBItem,\n        currentTemplateItem,\n        currentPluginItem,\n        currentPageObject,\n        currentPageFSBObject,\n        currentTemplateObject,\n        currentPluginObject,\n        currentPageDraft,\n        currentPageFSBDraft,\n        currentTemplateDraft,\n        currentPluginDraft,\n        globalSettingsPageId,\n        globalSettingsPageObject,\n        globalSettingsPageDraft,\n        globalSettingsTemplateId,\n        globalSettingsTemplateDraft,\n        pageTemplateName = '',\n        pageTemplateId = '',\n        pageTemplateItem,\n        pageTemplateObject,\n        pageTemplateDraft,\n        pageTemplateFSBName = '',\n        pageTemplateFSBId = '',\n        pageTemplateFSBItem,\n        pageTemplateFSBObject,\n        pageTemplateFSBDraft,\n        tooltipsOff\n    if (userObject) {\n        websites = userObject.websites\n        if (websites) {\n            if (websites.length > 0 && userObject.settings) {\n                tooltipsOff = userObject.settings.tooltipsOff\n                if (userObject.settings.currentWebsite) {\n                    currentWebsiteItem = websites.find(\n                        item => item.id === userObject.settings.currentWebsite\n                    )\n                }\n                if (currentWebsiteItem) {\n                    currentWebsiteId = currentWebsiteItem.id\n                    currentWebsiteObject = resourcesObjects[currentWebsiteId]\n                    if (currentWebsiteObject) {\n                        pagesStructure = currentWebsiteObject.pagesStructure\n                        templatesStructure =\n                            currentWebsiteObject.templatesStructure\n                        pluginsStructure = currentWebsiteObject.pluginsStructure\n\n                        const currentWebsiteItemSettings =\n                            userObject.settings.websites[currentWebsiteId]\n                        if (currentWebsiteItemSettings) {\n                            currentPageId =\n                                currentWebsiteItemSettings.currentPageId\n                            currentPageFSBId =\n                                currentWebsiteItemSettings.currentPageFSBId\n                            currentTemplateId =\n                                currentWebsiteItemSettings.currentTemplateId\n                            currentPluginId =\n                                currentWebsiteItemSettings.currentPluginId\n\n                            currentPageItem = pagesStructure.find(\n                                item => item.id === currentPageId\n                            )\n                            currentPageFSBItem = pagesStructure.find(\n                                item => item.id === currentPageFSBId\n                            )\n                            currentTemplateItem = templatesStructure.find(\n                                item => item.id === currentTemplateId\n                            )\n                            currentPluginItem = pluginsStructure.find(\n                                item => item.id === currentPluginId\n                            )\n                            if (currentPageItem) {\n                                currentPageObject =\n                                    resourcesObjects[currentPageId]\n                                if (currentPageObject) {\n                                    currentPageDraft = !currentPageObject\n                                        .present.structure\n                                        ? currentPageObject.draft\n                                        : currentPageObject.present\n                                }\n                                pageTemplateName =\n                                    currentPageItem.template || ''\n                                if (pageTemplateName) {\n                                    pageTemplateItem = templatesStructure.find(\n                                        item => item.name === pageTemplateName\n                                    )\n                                    if (pageTemplateItem) {\n                                        pageTemplateId = pageTemplateItem.id\n                                        pageTemplateObject =\n                                            resourcesObjects[pageTemplateId]\n                                        if (pageTemplateObject) {\n                                            pageTemplateDraft = !pageTemplateObject\n                                                .present.structure\n                                                ? pageTemplateObject.draft\n                                                : pageTemplateObject.present\n                                        }\n                                    }\n                                }\n                            }\n                            if (currentPageFSBItem) {\n                                currentPageFSBObject =\n                                    resourcesObjects[currentPageFSBId]\n                                if (currentPageFSBObject) {\n                                    currentPageFSBDraft = !currentPageFSBObject\n                                        .present.structure\n                                        ? currentPageFSBObject.draft\n                                        : currentPageFSBObject.present\n                                }\n                                pageTemplateFSBName =\n                                    currentPageFSBItem.template || ''\n                                if (pageTemplateFSBName) {\n                                    pageTemplateFSBItem = templatesStructure.find(\n                                        item =>\n                                            item.name === pageTemplateFSBName\n                                    )\n                                    if (pageTemplateFSBItem) {\n                                        pageTemplateFSBId =\n                                            pageTemplateFSBItem.id\n                                        pageTemplateFSBObject =\n                                            resourcesObjects[pageTemplateFSBId]\n                                        if (pageTemplateFSBObject) {\n                                            pageTemplateFSBDraft = !pageTemplateFSBObject\n                                                .present.structure\n                                                ? pageTemplateFSBObject.draft\n                                                : pageTemplateFSBObject.present\n                                        }\n                                    }\n                                }\n                            }\n\n                            if (currentTemplateItem) {\n                                currentTemplateObject =\n                                    resourcesObjects[currentTemplateId]\n                                if (currentTemplateObject) {\n                                    currentTemplateDraft = !currentTemplateObject\n                                        .present.structure\n                                        ? currentTemplateObject.draft\n                                        : currentTemplateObject.present\n                                }\n                            }\n                            if (currentPluginItem) {\n                                currentPluginObject =\n                                    resourcesObjects[currentPluginId]\n                                if (currentPluginObject) {\n                                    currentPluginDraft = !currentPluginObject\n                                        .present.structure\n                                        ? currentPluginObject.draft\n                                        : currentPluginObject.present\n                                }\n                            }\n\n                            const globalSettingsPageItem = pagesStructure.find(\n                                item => item.generalSettings\n                            )\n                            if (globalSettingsPageItem) {\n                                globalSettingsPageId = globalSettingsPageItem.id\n                                globalSettingsPageObject =\n                                    resourcesObjects[globalSettingsPageId]\n                                if (globalSettingsPageObject) {\n                                    globalSettingsPageDraft = !globalSettingsPageObject\n                                        .present.structure\n                                        ? globalSettingsPageObject.draft\n                                        : globalSettingsPageObject.present\n                                }\n                            }\n\n                            const globalSettingsTemplateItem = templatesStructure.find(\n                                item => item.generalSettings\n                            )\n                            if (globalSettingsTemplateItem) {\n                                globalSettingsTemplateId =\n                                    globalSettingsTemplateItem.id\n                                const globalSettingsTemplateObject =\n                                    resourcesObjects[globalSettingsTemplateId]\n                                if (globalSettingsTemplateObject) {\n                                    globalSettingsTemplateDraft = !globalSettingsTemplateObject\n                                        .present.structure\n                                        ? globalSettingsTemplateObject.draft\n                                        : globalSettingsTemplateObject.present\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return {\n        userObject,\n        websites,\n        currentWebsiteItem,\n        currentWebsiteId,\n        currentWebsiteObject,\n        pagesStructure,\n        templatesStructure,\n        pluginsStructure,\n        currentPageId,\n        currentPageFSBId,\n        currentTemplateId,\n        currentPluginId,\n        currentPageItem,\n        currentPageFSBItem,\n        currentTemplateItem,\n        currentPluginItem,\n        currentPageObject,\n        currentPageFSBObject,\n        currentTemplateObject,\n        currentPluginObject,\n        currentPageDraft,\n        currentPageFSBDraft,\n        currentTemplateDraft,\n        currentPluginDraft,\n        globalSettingsPageId,\n        globalSettingsPageObject,\n        globalSettingsPageDraft,\n        globalSettingsTemplateId,\n        globalSettingsTemplateDraft,\n        pageTemplateName,\n        pageTemplateId,\n        pageTemplateItem,\n        pageTemplateObject,\n        pageTemplateDraft,\n        pageTemplateFSBName,\n        pageTemplateFSBId,\n        pageTemplateFSBItem,\n        pageTemplateFSBObject,\n        pageTemplateFSBDraft,\n        resourcesObjects,\n        userId,\n        tryWebsiter,\n        tooltipsOff,\n    }\n}\n","export const structure = {\n    page: 'pagesStructure',\n    plugin: 'pluginsStructure',\n    template: 'templatesStructure',\n}\n\nexport const current = {\n    page: 'currentPageId',\n    plugin: 'currentPluginId',\n    template: 'currentTemplateId',\n}\n\nexport const resourceDraftIndex = {\n    page: 'currentPageDraft',\n    plugin: 'currentPluginDraft',\n    template: 'currentTemplateDraft',\n}\n\nexport const resourceItemIndex = {\n    page: 'currentPageItem',\n    plugin: 'currentPluginItem',\n    template: 'currentTemplateItem',\n}\n\nexport const resourceObjectIndex = {\n    page: 'currentPageObject',\n    plugin: 'currentPluginObject',\n    template: 'currentTemplateObject',\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Div\":\"Checkbox_Div__2PqSf\",\"Input\":\"Checkbox_Input__1KbTF\",\"StyleControls\":\"Checkbox_StyleControls__cb7Ky\",\"Inline\":\"Checkbox_Inline__3XkB8\"};","import React from 'react'\n\ntype Props = {\n    className?: string,\n    icon: ?string,\n    datatestid?: string,\n}\n\ntype Element = {\n    type: string,\n    children: Array<Element>,\n    fill: string,\n    d: string,\n}\n\nexport const Svg = (props: Props) => {\n    const svgStringToObj = (svg: string): Object => {\n        const obj = []\n\n        const stack = []\n\n        while (svg.length > 0) {\n            svg = svg.trim()\n            if (svg.indexOf('</') === 0) {\n                svg = svg.substring(2)\n                if (svg.indexOf('<') > 0) {\n                    svg = svg.substring(svg.indexOf('<'))\n                    stack.pop()\n                } else {\n                    svg = ''\n                }\n            } else {\n                svg = svg.substring(svg.indexOf('<'))\n                const curObj = {\n                    type: svg.substring(1, svg.indexOf(' ')),\n                    children: [],\n                }\n                svg = svg.substring(svg.indexOf(' '))\n                let attr = svg.substring(0, svg.indexOf('>'))\n                let selfclosing = attr.indexOf('/>') >= 0\n\n                svg = svg.substring(svg.indexOf('>') + 1).trim()\n                while (attr.length > 0) {\n                    let key = attr.substring(0, attr.indexOf('=')).trim()\n                    attr = attr.substring(attr.indexOf('\"') + 1)\n                    let value = attr.substring(0, attr.indexOf('\"')).trim()\n                    attr = attr.substring(attr.indexOf('\"') + 1).trim()\n                    curObj[key] = value\n                }\n                if (stack.length === 0) {\n                    obj.push(curObj)\n                } else {\n                    stack[stack.length - 1].children.push(curObj)\n                }\n                if (!selfclosing) {\n                    stack.push(curObj)\n                }\n            }\n        }\n        return obj[0]\n    }\n\n    const svgChildrenToElements = (element: Element, elementIndex: number) => {\n        switch (element.type) {\n            case 'path':\n                return (\n                    <path key={elementIndex} d={element.d} fill={element.fill}>\n                        {element.children.map((el: Element, index) =>\n                            svgChildrenToElements(el, index)\n                        )}\n                    </path>\n                )\n            case 'g':\n                return (\n                    <g key={elementIndex} fill={element.fill}>\n                        {element.children.map((el: Element, index) =>\n                            svgChildrenToElements(el, index)\n                        )}\n                    </g>\n                )\n            default:\n                return\n        }\n    }\n\n    let result = null\n    if (props.icon) {\n        const objectSvg = svgStringToObj(props.icon)\n\n        result = (\n            <svg\n                data-testid={props.datatestid || 'svg'}\n                height={objectSvg.height}\n                width={objectSvg.width}\n                viewBox={objectSvg.viewBox}\n                className={props.className}\n            >\n                {objectSvg.children.map((element, index) =>\n                    svgChildrenToElements(element, index)\n                )}\n            </svg>\n        )\n    }\n    return result\n}\n\nexport default Svg\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__2Sex0\",\"load3\":\"Spinner_load3__jNmcI\",\"Cover\":\"Spinner_Cover__3iRbu\"};"],"sourceRoot":""}