{"version":3,"sources":["hoc/asyncComponent.js","containers/Auth/Auth.js","components/UI/Spinner/Spinner.js","App.js","store/reducer/plugins.js","store/reducer/resources.js","store/reducer/reducer.js","store/reducer/images.js","store/reducer/auth.js","index.js","utils/resourceTypeIndex.js","store/actions/builder.js","store/actions/actionTypes.js","store/actions/auth.js","store/actions/website.js","store/actions/images.js","store/actions/resources.js","store/actions/index.js","components/UI/Spinner/Spinner.module.css","utils/basic.js","containers/Auth/Logout/Logout.js"],"names":["asyncComponent","importComponent","_Component","_temp","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","component","inherits","createClass","key","value","_this2","then","cmp","setState","default","C","react_default","a","createElement","props","Component","Auth","href","spinner","Fragment","cover","className","classes","Cover","data-testid","datatestid","Loader","asyncSiteBuilder","Promise","all","__webpack_require__","e","bind","App","onTryAutoSignup","routes","Switch","Route","path","Redirect","to","isAuthenticated","style","height","Logout","loading","Spinner","withRouter","connect","userId","dispatch","actions","findElementIndex","currentPlugin","resourcesObjects","structure","findIndex","item","id","currentBoxInPlugin","diffpatcher","require","create","objectHash","obj","patchStructure","action","patch","resourceType","structurePatch","initialState","websites","pagesStructure","filesStructure","pluginsStructure","loadedWebsite","error","currentPage","currentFile","domainNotOk","customDomainNotOk","storage","images","uploadingImage","currentImage","sizeIsChanging","currentWebsite","notSavedResources","pageZoom","hoveredElementId","hoveredElementSize","isRefreshing","barSizes","width","width2","currentTopTab","findMode","hoverMode","fromFrame","reducer","createReducer","SAVE_ALL_WEBSITES_DATA_FROM_SERVER","objectSpread","data","saveAllWebsitesDataFromServer","CHOOSE_WEBSITE","ACTION_START_IMAGE_UPLOAD","ACTION_FAIL_IMAGE_UPLOAD","loadng","ACTION_SUCCESS_IMAGE_UPLOAD","CHOOSE_IMAGE","undefined","image","SAVE_IMAGE_AND_SIZE_IN_REDUX","SIZE_IS_CHANGING","isChanging","ACTION_START","pagesLoading","ACTION_FAIL","ACTION_SUCCESS","ADD_RESOURCE_SUCCESS","_id","resource","resources","DELETE_RESOURCE_SUCCESS","deletedResources","forEach","current","SAVE_RESOURCES_STRUCTURE_SUCCESS","SET_CURRENT_RESOURCE","SAVE_RESOURCE_IN_STATE","currentResource","draft","present","filter","REMOVE_RESOURCE_FROM_UNSAVED","SAVE_RESOURCE_DRAFT_IN_STATE","ADD_RESOURCE_VERSION","isEqual","isNotForHistory","connectedResources","tag","checkIfCapital","charAt","push","properties","name","find","includes","past","shift","diff","future","UNDO_RESOURCE_VERSION","delta","pop","unshift","unpatch","REDO_RESOURCE_VERSION","CHOOSE_BOX_IN_PLUGIN","plugins","ADD_BOX_IN_PLUGIN","elementIndex","plugin","newId","currentId","newElement","toConsumableArray","text","textContent","styles","splice","DELETE_BOX_IN_PLUGIN","elementId","withChildren","map","pathItem","DUPLICATE_BOX_IN_PLUGIN","_plugin$structure","sourceChildren","newChildren","idMatch","defineProperty","newItemId","CHANGE_BOX_PROPERTY_IN_PLUGIN","SAVE_STRUCTURE_IN_PLUGIN","AUTH_START","auth","AUTH_SUCCESS","AUTH_FAIL","AUTH_LOGOUT","CHANGE_BAR_SIZE","SET_CURRENT_TOP_TAB","SAVE_HOVERED_ELEMENT_RECT","checkAndCreatePath","index","parent","children","size","saveHoveredElementRect","REMOVE_FROM_HOVERED_SIZES","checkAndRemoveElement","child","removedElements","removeFromHoveredSizes","HOVER_ELEMENT","mode","UNHOVER_ELEMENT","TOGGLE_FIND_MODE","toggleFindMode","d","__webpack_exports__","store","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","axios","defaults","baseURL","createStore","applyMiddleware","thunk","interceptors","request","use","config","localStorage","getItem","headers","currentAction","setItem","parseInt","toString","response","common","status","logout","reject","app","es","BrowserRouter","src_App","root","document","getElementById","ReactDOM","render","module","exports","page","file","currentBox","findRouteElements","result","saveElementsStructure","resourceDraft","omit","chooseBox","unhoverBox","changeBoxProperty","changes","isObject","slice","type","hoverBox","addBox","routeElements","newCurrentId","deleteBox","notRemove","newPageStructure","deleteFromHoveredSizes","duplicateBox","splitText","start","end","textContent0","substr","textContent1","textContent2","newElements","textToSpan","spanId","chooseMenuItem","resourceId","isEmpty","changeMenuItemProperty","menuItems","newMenuItems","currentMenuItem","markRefreshing","refreshing","mergeBoxToPlugin","websiteId","newResourcesIds","oldResourcesIds","resourceDataStructure","newItem","indexOf","resourceData","newResourceName","dissolvePluginToBox","pluginResource","pluginDataStructure","cookies","Cookies","authSuccess","authFail","deleteUser","delete","catch","err","message","post","remove","authCheckState","token","get","jwt","decode","put","Accept","console","log","changeBarSizeDo","saveBarSizes","changeBarSize","initiator","dif","dif2","value2","value3","innerWidth","innerHeight","width3","addWebsite","duplicate","actionStart","JSON","stringify","actionSuccess","actionFail","loadWebsite","chooseWebsite","changeWebsiteProperty","deleteWebsite","confirm","setSizeIsChanging","setCurrentTopTab","actionFailImageUpload","uploadFile","fileDetails","signedRequest","url","Content-Type","saveImageUrlAndSize","fileSize","parseFloat","newStorage","newImages","label","saveImageUrlAndSizeInRedux","deleteImage","renameImage","prompt","chooseImage","imageUpload","files","alert","split","replace","namePrefix","k","getSignedRequest","addResource","currentResourceId","callback","addResourceSuccess","deleteResource","params","deleteResourceSuccess","saveResourcesStructure","newStructure","oldStructure","saveResourcesStructureSuccess","chooseResource","saveResource","resourcePatch","saveResourceInState","publishRevertResource","revert","saveResourceDraftInState","addResourceVersion","removeResourceFromUnsaved","revertResourceToSaved","undoResourceVersion","redoResourceVersion","builder_chooseBox","builder_addBox","builder_deleteBox","builder_duplicateBox","builder_saveElementsStructure","builder_changeBoxProperty","builder_splitText","builder_textToSpan","builder_chooseMenuItem","builder_changeMenuItemProperty","builder_markRefreshing","builder_mergeBoxToPlugin","builder_dissolvePluginToBox","auth_logout","auth_authCheckState","auth_deleteUser","auth_changeBarSize","auth_changeBarSizeDo","auth_saveBarSizes","website_addWebsite","website_loadWebsite","website_deleteWebsite","website_changeWebsiteProperty","images_deleteImage","images_renameImage","images_chooseImage","resources_saveResourcesStructure","resources_addResource","resources_deleteResource","resources_saveResource","resources_publishRevertResource","load3","getCurrentResourceValue","buildTree","lodash__WEBPACK_IMPORTED_MODULE_0__","char","toUpperCase","toLowerCase","_defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","i","target","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","items","buildItem","ownKeys","sym","getOwnPropertyDescriptor","_objectSpread","onLogout","react__WEBPACK_IMPORTED_MODULE_5___default","react_router_dom__WEBPACK_IMPORTED_MODULE_6__"],"mappings":"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","file":"static/js/main.f1d80181.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\ntype Props = {\n\n}\n\ntype State = {\n    component: Object | null    \n}\n\nconst asyncComponent = (importComponent: Object) => {\n    return class extends Component<Props, State> {\n        state = {\n            component: null\n        }\n\n        componentDidMount () {\n            importComponent()\n                .then(cmp => {\n                    this.setState({component: cmp.default});\n                });\n        }\n        \n        render () {\n            const C = this.state.component;\n            return C ? <C {...this.props} /> : null;\n        }\n    }\n}\n\nexport default asyncComponent;","import React from 'react'\n\ntype Props = {\n    test?: boolean,\n}\n\nconst Auth = (props: Props) => (\n    <div>\n        <a href=\"https://my.websiter.dev/api/auth/google/start\">GOOGLE</a>\n        <a href=\"https://api.websiter.dev/api/auth/facebook/start\">FACEBOOK</a>\n        <a href=\"https://api.websiter.dev/api/auth/twitter/start\">TWITTER</a>\n    </div>\n)\n\nexport default Auth\n","import React from 'react'\nimport classes from './Spinner.module.css'\n\ntype Props = {\n    cover?: boolean,\n    datatestid?: string,\n}\n\nconst spinner = (props: Props) => (\n    <>\n        {props.cover ? (\n            <div\n                className={classes.Cover}\n                data-testid={props.datatestid || 'cover'}\n            >\n                <div className={classes.Loader}>Loading...</div>\n            </div>\n        ) : (\n            <div className={classes.Loader}>Loading...</div>\n        )}\n    </>\n)\n\nexport default spinner\n","import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Logout from './containers/Auth/Logout/Logout'\nimport asyncComponent from './hoc/asyncComponent'\nimport * as actions from './store/actions/index'\nimport Auth from './containers/Auth/Auth'\nimport Spinner from './components/UI/Spinner/Spinner'\n\n// import LiveWebsite from './containers/LiveWebsite/LiveWebsite'\n\nconst asyncSiteBuilder = asyncComponent(() => {\n    return import('./containers/SiteBuilder/SiteBuilder')\n})\n\ntype Props = {\n    onTryAutoSignup: Object,\n    isAuthenticated: boolean,\n    loading: boolean,\n}\n\nclass App extends Component<Props> {\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        let routes = (\n            <Switch>\n                <Route path=\"/login\" component={Auth} />\n                <Route path=\"/signup\" component={Auth} />\n                {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                <Redirect to=\"/login\" />\n            </Switch>\n        )\n        if (this.props.isAuthenticated) {\n            routes = (\n                <div style={{ height: '100%' }}>\n                    <Switch>\n                        <Route path=\"/editor\" component={asyncSiteBuilder} />\n                        <Route path=\"/logout\" component={Logout} />\n                        {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                        <Redirect to=\"/editor\" />\n                    </Switch>\n                </div>\n            )\n        }\n        return (\n            <>\n                {routes} {this.props.loading ? <Spinner cover /> : null}\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthenticated: state.userId !== null,\n        loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import { omit } from 'lodash'\nimport { initialState } from './reducer'\n\nconst findElementIndex = (state: Object): number => {\n    if (state.currentPlugin.length < 1) return -1\n    const plugin = state.resourcesObjects[state.currentPlugin]\n    return plugin.value.structure.findIndex(\n        item => item.id === state.currentBoxInPlugin\n    )\n}\n\nexport const savePluginsStructureToStore = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    ...omit(action, ['type']),\n    urlNotValid: false,\n})\n\nexport const choosePlugin = (state: Object = initialState, action: Object) => {\n    state.currentPlugin = action.id\n}\n\nexport const deletePluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const newresourcesObjects = { ...state.resourcesObjects }\n    for (let i in newresourcesObjects) {\n        const isDeleted = !action.pluginsStructure.some(\n            item => item.id.toString() === i.toString()\n        )\n        if (isDeleted) {\n            delete newresourcesObjects[i]\n        }\n    }\n    return {\n        ...state,\n        resourcesObjects: newresourcesObjects,\n        pluginsStructure: action.pluginsStructure,\n        error: null,\n        loading: false,\n        pagesLoading: false,\n        currentPlugin: '',\n    }\n}\n\nexport const addPluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    pluginsStructure: action.pluginsStructure,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [action.plugin._id]: action.plugin,\n    },\n    error: null,\n    loading: false,\n    pagesLoading: false,\n    currentPlugin: action.plugin._id,\n})\n\nexport const savePluginInRedux = (\n    state: Object = initialState,\n    action: Object\n) => {\n    if (action.id)\n        if (action.value !== state.resourcesObjects[action.id].value) {\n            state.resourcesObjects[action.id] = {\n                ...state.resourcesObjects[action.id],\n                ...omit(action, ['type']),\n            }\n            state.notSavedPlugins.push(action.id)\n        }\n}\n\nexport const markPluginAsSaved = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.notSavedPlugins = state.notSavedPlugins.filter(\n        plugin => plugin !== action.id\n    )\n}\n\nexport const savePluginNameChange = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const index = state.pluginsStructure.findIndex(\n        item => item.id === action.id\n    )\n    state.pluginsStructure[index].name = action.value\n    state.notSavedPlugins.push(action.id)\n}\n\nexport const chooseBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.currentBoxInPlugin = action.item\n}\n\nexport const addBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    const newElement = {\n        id: newId,\n        path:\n            elementIndex <= 0\n                ? [plugin.structure[0].id]\n                : [...plugin.structure[elementIndex].path],\n        tag: action.text ? 'text' : 'div',\n        text: action.text,\n        textContent: '',\n        style: [],\n        styles: [],\n    }\n\n    plugin.structure.splice(elementIndex + 1, 0, newElement)\n}\n\nexport const deleteBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    if (action.withChildren) {\n        plugin.structure = plugin.structure.filter(\n            item => elementId !== item.id && !item.path.includes(elementId)\n        )\n    } else {\n        plugin.structure = plugin.structure.map(item => {\n            return {\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }\n        })\n        plugin.structure.splice(elementIndex, 1)\n    }\n}\n\nexport const duplicateBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return { ...state }\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    const sourceChildren = plugin.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    let newChildren = []\n\n    if (action.withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `plugin_element_${plugin.currentId}`\n                plugin.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n    }\n    plugin.structure.splice(\n        elementIndex + sourceChildren.length + 1,\n        0,\n        {\n            ...plugin.structure[elementIndex],\n            id: newId,\n        },\n        ...newChildren\n    )\n}\n\nexport const changeBoxPropertyInPlugin = (state: Object, action: Object) => {\n    const elementIndex = findElementIndex(state)\n    if (elementIndex < 0) return\n    state.resourcesObjects[state.currentPlugin].value.structure[elementIndex][\n        action.key\n    ] = action.value\n}\n\nexport const saveStructureInPlugin = (state: Object, action: Object) => {\n    if (state.resourcesObjects[state.currentPlugin]) {\n        state.resourcesObjects[state.currentPlugin].value.structure =\n            action.structure\n    }\n}\n","import { structure, current } from '../../utils/resourceTypeIndex'\nimport { isEqual } from 'lodash'\nimport { checkIfCapital } from '../../utils/basic'\nimport { SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS } from 'constants'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nconst patchStructure = (state: Object, action: Object) => {\n    return diffpatcher.patch(\n        state[structure[action.resourceType]],\n        action.structurePatch\n    )\n}\n\nexport const addResourceSuccess = (state: Object, action: Object) => {\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state.resourcesObjects[action._id] = action.resource\n}\n\nexport const deleteResourceSuccess = (state: Object, action: Object) => {\n    action.deletedResources.forEach(id => delete state.resourcesObjects[id])\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state[current[action.resourceType]] = action.current || ''\n}\n\nexport const setCurrentResource = (state: Object, action: Object) => {\n    state[current[action.resourceType]] = action._id\n}\n\nexport const saveResourcesStructureSuccess = (\n    state: Object,\n    action: Object\n) => {\n    state[structure[action.resourceType]] = action.structure\n}\n\nexport const removeResourceFromUnsaved = (state: Object, action: Object) => {\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const savePageInState = (state: Object, action: Object) => ({\n    ...state,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [state.currentPage]: {\n            ...state.resourcesObjects[state.currentPage],\n            content: action.value,\n        },\n    },\n})\n\nexport const saveResourceDraftInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n}\n\nexport const saveResourceInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n    state.resourcesObjects[action.currentResource].present = action.draft\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const addResourceVersion = (state: Object, action: Object) => {\n    const resource = state.resourcesObjects[action.currentResource]\n    if (!isEqual(resource.present, action.draft)) {\n        if (action.isNotForHistory) {\n            resource.present = action.draft\n        } else {\n            if (action.draft.structure) {\n                const connectedResources = []\n                action.draft.structure.forEach(item => {\n                    if (item.tag.length > 0) {\n                        if (checkIfCapital(item.tag.charAt(0))) {\n                            connectedResources.push(item.tag)\n                        } else if (item.tag === 'style') {\n                            connectedResources.push(item.properties.name)\n                        }\n                    }\n                })\n                let resource =\n                    state.pagesStructure.find(\n                        item => item.id === action.currentResource\n                    ) ||\n                    state.pluginsStructure.find(\n                        item => item.id === action.currentResource\n                    )\n                if (resource) {\n                    resource.connectedResources = connectedResources\n                }\n            }\n            if (!state.notSavedResources.includes(action.currentResource))\n                state.notSavedResources.push(action.currentResource)\n            if (resource.past.length > 100) resource.past.shift()\n            resource.past.push(diffpatcher.diff(resource.present, action.draft))\n            resource.present = action.draft\n            resource.future = []\n        }\n    }\n}\n\nexport const undoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.past.length > 0) {\n            if (\n                !isEqual(\n                    resource.present,\n                    resource.past[resource.past.length - 1]\n                )\n            ) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.past.pop()\n            resource.future.unshift(delta)\n            resource.present = diffpatcher.unpatch(resource.present, delta)\n        }\n    }\n}\n\nexport const redoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.future.length > 0) {\n            if (!isEqual(resource.present, resource.future[0])) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.future.shift()\n            resource.past.push(delta)\n            resource.present = diffpatcher.patch(resource.present, delta)\n        }\n    }\n}\n","import * as plugins from './plugins'\nimport * as auth from './auth'\nimport * as images from './images'\nimport * as resources from './resources'\nimport { createReducer } from 'redux-starter-kit'\n\nexport const initialState = {\n    websites: [],\n    resourcesObjects: {},\n    pagesStructure: [],\n    filesStructure: [],\n    pluginsStructure: [],\n    loadedWebsite: '',\n    error: null,\n    loading: false,\n    currentPage: '',\n    currentFile: '',\n    currentPlugin: '',\n    domainNotOk: false,\n    customDomainNotOk: false,\n    storage: 0,\n    images: [],\n    uploadingImage: false,\n    currentBoxInPlugin: '',\n    currentImage: '',\n    sizeIsChanging: false,\n    currentWebsite: '',\n    notSavedResources: [],\n    pageZoom: 100,\n    hoveredElementId: null,\n    hoveredElementSize: {},\n    isRefreshing: false,\n    userId: null,\n    barSizes: {\n        height: 200,\n        width: 500,\n        width2: 200,\n    },\n    currentTopTab: 'page',\n    findMode: null,\n    hoverMode: '',\n    fromFrame: false,\n}\n\nconst saveAllWebsitesDataFromServer = (state, action) => {\n    return {\n        ...state,\n        ...action.data,\n        domainNotOk: false,\n        customDomainNotOk: false,\n        currentPage:\n            action.data.currentPage ||\n            (state.resourcesObjects[state.currentPage]\n                ? state.currentPage\n                : ''),\n        barSizes: { ...state.barSizes, ...action.data.barSizes },\n        currentWebsite: action.data.loadedWebsite,\n    }\n}\n\nconst saveHoveredElementRect = (state, action) => {\n    const checkAndCreatePath = (path, index, parent) => {\n        if (index < path.length - 1) {\n            if (!parent[path[index].id]) {\n                parent[path[index].id] = {\n                    plugin: path[index].plugin,\n                    children: {},\n                }\n            }\n            checkAndCreatePath(\n                action.path,\n                index + 1,\n                parent[path[index].id].children\n            )\n        } else {\n            parent[path[index].id] = {\n                plugin: path[index].plugin,\n                children: {},\n                ...action.size,\n            }\n        }\n    }\n    if (action.path.length > 0)\n        checkAndCreatePath(action.path, 0, state.hoveredElementSize)\n}\n\nconst removeFromHoveredSizes = (state, action) => {\n    // ,\n    // removedElements,\n    const checkAndRemoveElement = parent => {\n        for (const item in parent) {\n            if (parent[item].plugin === action.currentResource) {\n                for (const child in parent[item].children) {\n                    if (action.removedElements.includes(child))\n                        delete parent[item].children[child]\n                }\n            } else {\n                checkAndRemoveElement(parent.children)\n            }\n        }\n    }\n    checkAndRemoveElement(state.hoveredElementSize)\n}\n\nconst toggleFindMode = (state, action) => {\n    if (action.value) {\n        if (state.findMode === action.value) {\n            state.findMode = null\n        } else {\n            state.findMode = action.value\n        }\n    } else {\n        state.findMode = null\n    }\n}\n\nconst reducer = createReducer(initialState, {\n    SAVE_ALL_WEBSITES_DATA_FROM_SERVER: (state, action) =>\n        saveAllWebsitesDataFromServer(state, action),\n    CHOOSE_WEBSITE: (state, action) => {\n        state.currentWebsite = action.id\n    },\n\n    ACTION_START_IMAGE_UPLOAD: (state, action) =>\n        images.actionStartImageUpload(state),\n    ACTION_FAIL_IMAGE_UPLOAD: (state, action) =>\n        images.actionFailImageUpload(state, action),\n    ACTION_SUCCESS_IMAGE_UPLOAD: (state, action) =>\n        images.actionSuccessImageUpload(state),\n    CHOOSE_IMAGE: (state, action) => images.chooseImage(state, action),\n\n    SAVE_IMAGE_AND_SIZE_IN_REDUX: (state, action) => {\n        state.images = action.images || state.images\n        state.storage = action.storage || state.storage\n    },\n\n    SIZE_IS_CHANGING: (state, action) => {\n        state.sizeIsChanging = action.isChanging\n    },\n\n    ACTION_START: (state, action) => {\n        state.error = null\n        state.pagesLoading = true\n    },\n    ACTION_FAIL: (state, action) => {\n        state.error = action.error\n        state.pagesLoading = false\n    },\n    ACTION_SUCCESS: (state, action) => {\n        state.error = null\n        state.pagesLoading = false\n    },\n\n    ADD_RESOURCE_SUCCESS: (state, action) =>\n        resources.addResourceSuccess(state, action),\n    DELETE_RESOURCE_SUCCESS: (state, action) =>\n        resources.deleteResourceSuccess(state, action),\n    SAVE_RESOURCES_STRUCTURE_SUCCESS: (state, action) =>\n        resources.saveResourcesStructureSuccess(state, action),\n    SET_CURRENT_RESOURCE: (state, action) =>\n        resources.setCurrentResource(state, action),\n    SAVE_RESOURCE_IN_STATE: (state, action) =>\n        resources.saveResourceInState(state, action),\n    REMOVE_RESOURCE_FROM_UNSAVED: (state, action) =>\n        resources.removeResourceFromUnsaved(state, action),\n    SAVE_RESOURCE_DRAFT_IN_STATE: (state, action) =>\n        resources.saveResourceDraftInState(state, action),\n    ADD_RESOURCE_VERSION: (state, action) =>\n        resources.addResourceVersion(state, action),\n    UNDO_RESOURCE_VERSION: (state, action) =>\n        resources.undoResourceVersion(state, action),\n    REDO_RESOURCE_VERSION: (state, action) =>\n        resources.redoResourceVersion(state, action),\n\n    CHOOSE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.chooseBoxInPlugin(state, action),\n    ADD_BOX_IN_PLUGIN: (state, action) => plugins.addBoxInPlugin(state, action),\n    DELETE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.deleteBoxInPlugin(state, action),\n    DUPLICATE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.duplicateBoxInPlugin(state, action),\n    CHANGE_BOX_PROPERTY_IN_PLUGIN: (state, action) =>\n        plugins.changeBoxPropertyInPlugin(state, action),\n    SAVE_STRUCTURE_IN_PLUGIN: (state, action) =>\n        plugins.saveStructureInPlugin(state, action),\n\n    AUTH_START: (state, action) => auth.authStart(state),\n    AUTH_SUCCESS: (state, action) => auth.authSuccess(state, action),\n    AUTH_FAIL: (state, action) => auth.authFail(state, action),\n    AUTH_LOGOUT: (state, action) => auth.authLogout(state),\n    CHANGE_BAR_SIZE: (state, action) => auth.changeBarSize(state, action),\n    SET_CURRENT_TOP_TAB: (state, action) => {\n        state.currentTopTab = action.currentTopTab\n    },\n\n    SAVE_HOVERED_ELEMENT_RECT: (state: Object, action: Object) =>\n        saveHoveredElementRect(state, action),\n    REMOVE_FROM_HOVERED_SIZES: (state: Object, action: Object) =>\n        removeFromHoveredSizes(state, action),\n    HOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = action.id\n        state.hoverMode = action.mode\n        state.fromFrame = action.fromFrame\n    },\n    UNHOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = null\n        state.fromFrame = false\n    },\n    TOGGLE_FIND_MODE: (state: Object, action: Object) =>\n        toggleFindMode(state, action),\n})\n\nexport default reducer\n","import { initialState } from './reducer'\n\nexport const actionStartImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: true,\n})\n\nexport const actionSuccessImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: false,\n})\n\nexport const actionFailImageUpload = (state: Object, action: Object) => ({\n    ...state,\n    error: action.error,\n    loadng: false,\n})\n\nexport const chooseImage = (state: Object = initialState, action: Object) => {\n    state.currentImage = action.image\n}\n","export const authStart = (state: Object) => {\n    state.loading = true\n    state.error = null\n}\n\nexport const authFail = (state: Object, action: Object) => {\n    state.loading = false\n    state.error = action.error\n    state.userId = null\n}\n\nexport const authLogout = (state: Object) => {\n    state.userId = null\n}\n\nexport const authSuccess = (state: Object, action: Object) => {\n    state.userId = action.data._id\n    state.error = null\n    state.loading = false\n    state.storage = action.data.storage\n    state.images = action.data.images\n    state.barSizes = { ...state.barSizes, ...action.data.barSizes }\n}\n\nexport const changeBarSize = (state: Object, action: Object) => {\n    state.barSizes[action.key] = action.value\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport axios from 'axios'\n\nimport './index.css'\nimport App from './App'\n//import * as serviceWorker from './serviceWorker';\nimport reducer from './store/reducer/reducer'\nimport { logout } from './store/actions/index'\n// $FlowFixMe\nimport 'react-sortable-tree/style.css'\n\n// const composeEnhancers =\n//     process.env.NODE_ENV === 'development'\n//         ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n//         : null || compose\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://localhost:5000'\n} else {\n    axios.defaults.baseURL = 'https://api.websiter.dev'\n}\n\nexport const store = createStore(\n    reducer,\n    composeEnhancers\n        ? composeEnhancers(applyMiddleware(thunk))\n        : applyMiddleware(thunk)\n)\n\n// set axios interceptors\naxios.interceptors.request.use(function(config) {\n    if (localStorage.getItem('currentAction')) {\n        // $FlowFixMe\n        config.headers.currentAction = localStorage.getItem('currentAction')\n        localStorage.setItem(\n            'currentAction',\n            (parseInt(localStorage.getItem('currentAction')) + 1).toString()\n        )\n    }\n    return config\n})\n\naxios.interceptors.response.use(\n    function(response: { data: mixed }) {\n        if (response.headers['x-auth-token'])\n            axios.defaults.headers.common['x-auth-token'] =\n                response.headers['x-auth-token']\n        return response\n    },\n    function(error) {\n        if (error.response) {\n            if (parseInt(error.response.status) === 412) {\n                store.dispatch(logout())\n            }\n        }\n        return Promise.reject(error)\n    }\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\n\nconst root = document.getElementById('root')\nif (root !== null) {\n    ReactDOM.render(app, root)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports.structure = {\n    page: 'pagesStructure',\n    file: 'filesStructure',\n    plugin: 'pluginsStructure',\n}\n\nmodule.exports.current = {\n    page: 'currentPage',\n    file: 'currentFile',\n    plugin: 'currentPlugin',\n}\n","import * as actionTypes from './actionTypes'\nimport * as actions from './index'\nimport type { pageStructureType } from '../../../flowTypes'\nimport { isEqual, omit, isObject, isEmpty, cloneDeep } from 'lodash'\n\nconst findElementIndex = (draft: Object): number => {\n    if (draft.currentBox.length < 1) return -1\n    return draft.structure.findIndex(item => item.id === draft.currentBox)\n}\n\nconst findRouteElements = (draft: Object, mode: string) => {\n    const result = []\n    if (mode === 'plugin') {\n        result.push(0)\n    } else if (mode === 'page') {\n        draft.structure.forEach((item, index) => {\n            if (item.path.length < 2) result.push(index)\n        })\n    }\n    return result\n}\n\nexport const saveElementsStructure = (\n    structure: pageStructureType,\n    currentResource: string,\n    resourceDraft: {}\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft || !structure) return\n    const draft = { ...resourceDraft, structure }\n\n    const isNotForHistory = isEqual(\n        resourceDraft.structure.map(item => omit(item, ['expanded'])),\n        structure.map(item => omit(item, ['expanded']))\n    )\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const chooseBox = (\n    item: string,\n    currentResource: string,\n    resourceDraft: {}\n) => (dispatch: Object) => {\n    if (!currentResource || !item || !resourceDraft) return\n    const draft = { ...resourceDraft, currentBox: item }\n    dispatch(actions.addResourceVersion(currentResource, draft, true))\n    dispatch(unhoverBox())\n}\n\nexport const changeBoxProperty = (\n    key: string | Array<{}>,\n    value: any,\n    currentResource: string,\n    resourceDraft: {},\n    isNotForHistory?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !key || !resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    const changes = isObject(key) ? key : { [key]: value }\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            {\n                ...resourceDraft.structure[elementIndex],\n                ...changes,\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const saveHoveredElementRect = (path: Array<string>, size: Object) => ({\n    type: 'SAVE_HOVERED_ELEMENT_RECT',\n    path,\n    size,\n})\n\nconst deleteFromHoveredSizes = (currentResource, removedElements) => ({\n    type: 'REMOVE_FROM_HOVERED_SIZES',\n    currentResource,\n    removedElements,\n})\n\nconst expandAllParents = (\n    id: string,\n    currentResource: string,\n    resourceDraft: {}\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const box = resourceDraft.structure.find(item => item.id === id)\n    if (!box) return\n\n    const draft = cloneDeep(resourceDraft)\n\n    box.path.forEach(item => {\n        const element = draft.structure.find(element => element.id === item)\n        if (element) element.expanded = true\n    })\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const hoverBox = (id: string, mode: string, fromFrame?: boolean) => ({\n    type: 'HOVER_ELEMENT',\n    id,\n    mode,\n    fromFrame,\n})\n\nexport const unhoverBox = () => ({\n    type: 'UNHOVER_ELEMENT',\n})\n\nexport const toggleFindMode = (value?: string) => ({\n    type: 'TOGGLE_FIND_MODE',\n    value,\n})\n\nexport const addBox = (\n    currentResource: string,\n    resourceDraft: {},\n    mode: 'page' | 'plugin',\n    text: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (mode === 'plugin') {\n        if (elementIndex < 0) {\n            elementIndex = 0\n        }\n    } else if (mode === 'page') {\n        if (elementIndex < 1) {\n            elementIndex = routeElements[routeElements.length - 1]\n        }\n    }\n    const newId = `element_${resourceDraft.currentId}`\n    const newCurrentId = resourceDraft.currentId + 1\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n            {\n                id: newId,\n                path:\n                    resourceDraft.structure[elementIndex].path.length === 0\n                        ? [resourceDraft.structure[elementIndex].id]\n                        : [...resourceDraft.structure[elementIndex].path],\n                tag: text ? 'text' : 'div',\n                text: text,\n                textContent: '',\n                properties: {},\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        currentId: newCurrentId,\n        currentBox: newId,\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const deleteBox = (\n    currentResource: string,\n    resourceDraft: {},\n    mode: 'page' | 'plugin',\n    withChildren: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    let draft = {}\n    const removedElements = [elementId]\n    if (withChildren) {\n        draft = {\n            ...resourceDraft,\n            structure: resourceDraft.structure.filter(item => {\n                const notRemove =\n                    elementId !== item.id && !item.path.includes(elementId)\n                if (!notRemove) removedElements.push(item.id)\n                return notRemove\n            }),\n        }\n    } else {\n        const newPageStructure = resourceDraft.structure.map(item => ({\n            ...item,\n            path: item.path.filter(pathItem => pathItem !== elementId),\n        }))\n\n        draft = {\n            ...resourceDraft,\n            structure: [\n                ...newPageStructure.slice(0, elementIndex),\n                ...newPageStructure.slice(elementIndex + 1),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n    dispatch(deleteFromHoveredSizes(currentResource, removedElements))\n}\n\nexport const duplicateBox = (\n    currentResource: string,\n    resourceDraft: {},\n    mode: 'page' | 'plugin',\n    withChildren: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const sourceChildren = resourceDraft.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `element_${resourceDraft.currentId}`\n    let draft = { currentId: resourceDraft.currentId + 1 }\n\n    if (withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        const newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `element_${draft.currentId}`\n                draft.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    // $FlowFixMe\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...newChildren,\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    } else {\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const splitText = (\n    start: Number,\n    end: number,\n    currentResource: string,\n    resourceDraft: {}\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    let newId\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n    if (textContent1.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent1,\n            id: newId,\n        })\n    }\n\n    if (textContent2.length > 0 || textContent1.length === 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const textToSpan = (\n    start: Number,\n    end: number,\n    currentResource: string,\n    resourceDraft: {}\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let newId\n    let draft = { currentId: resourceDraft.currentId }\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n\n    const spanId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        id: spanId,\n        path: [...resourceDraft.structure[elementIndex].path],\n        tag: 'span',\n        text: false,\n        textContent: '',\n        style: [],\n        styles: [],\n    })\n\n    newId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        ...resourceDraft.structure[elementIndex],\n        path: [...resourceDraft.structure[elementIndex].path, spanId],\n        textContent: textContent1,\n        id: newId,\n    })\n\n    if (textContent2.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n// Menu\nexport const chooseMenuItem = (\n    id: string,\n    resourceId: string,\n    resourcesObjects: {}\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n    if (!resource) return\n    dispatch(\n        changeBoxProperty('currentMenuItem', id, resourceId, resource, true)\n    )\n}\n\nexport const changeMenuItemProperty = (\n    key: string,\n    value: string,\n    resourceId: string,\n    resourcesObjects: {}\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n\n    if (!resource) return\n    const elementIndex = findElementIndex(resource)\n    if (elementIndex < 0) return\n    if (!resource.structure[elementIndex].menuItems) return\n    const newMenuItems = resource.structure[elementIndex].menuItems.map(\n        item => {\n            if (item.id === resource.structure[elementIndex].currentMenuItem) {\n                return { ...item, [key]: value }\n            } else {\n                return item\n            }\n        }\n    )\n    if (!isEqual(newMenuItems, resource.structure[elementIndex].menuItems)) {\n        dispatch(\n            changeBoxProperty('menuItems', newMenuItems, resourceId, resource)\n        )\n    }\n}\nexport const markRefreshing = (refreshing: boolean) => ({\n    type: actionTypes.MARK_REFRESHING,\n    refreshing,\n})\n\nexport const mergeBoxToPlugin = (\n    currentResource: string,\n    resourceDraft: {},\n    websiteId: string,\n    mode: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    let currentId = 1\n    const newResourcesIds = ['element_0']\n    const oldResourcesIds = ['element_0']\n\n    const resourceDataStructure = resourceDraft.structure\n        .filter(item => item.id === elementId || item.path.includes(elementId))\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = { ...item, id: `element_${currentId}` }\n            if (item.id === elementId) {\n                newItem.path = ['element_0']\n            } else {\n                newItem.path = [\n                    'element_0',\n                    ...newItem.path.slice(newItem.path.indexOf(elementId)),\n                ]\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: item.path.map(\n                id => newResourcesIds[oldResourcesIds.indexOf(id)]\n            ),\n        }))\n\n    const resourceData = {\n        structure: [\n            {\n                id: 'element_0',\n                path: [],\n                tag: 'Main element',\n                properties: {},\n            },\n            ...resourceDataStructure,\n        ],\n        currentId,\n    }\n\n    dispatch(\n        actions.addResource(\n            websiteId,\n            '',\n            'plugin',\n            false,\n            resourceData,\n            data => {\n                if (data.newResourceName) {\n                    const draft = {\n                        ...resourceDraft,\n                        structure: [\n                            ...resourceDraft.structure.slice(0, elementIndex),\n                            {\n                                ...resourceDraft.structure[elementIndex],\n                                tag: data.newResourceName,\n                                text: false,\n                                textContent: '',\n                                properties: {},\n                            },\n                            ...resourceDraft.structure.slice(elementIndex + 1),\n                        ],\n                    }\n                    dispatch(actions.addResourceVersion(currentResource, draft))\n                }\n            }\n        )\n    )\n}\n\nexport const dissolvePluginToBox = (\n    currentResource: string,\n    resourceDraft: {},\n    pluginsStructure: Array<{}>,\n    resourcesObjects: {}\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const plugin = pluginsStructure.find(\n        item => item.name === resourceDraft.structure[elementIndex].tag\n    )\n    if (!plugin) return\n\n    const pluginResource = isEmpty(resourcesObjects[plugin.id].present)\n        ? resourcesObjects[plugin.id].draft\n        : resourcesObjects[plugin.id].present\n\n    let currentId = resourceDraft.currentId\n    const newResourcesIds = []\n    const oldResourcesIds = []\n\n    const pluginDataStructure = pluginResource.structure\n        .filter(item => item.path.length > 0)\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = {\n                ...item,\n                id: `element_${currentId}`,\n                path: [...item.path.slice(1)],\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: [\n                ...resourceDraft.structure[elementIndex].path,\n                ...item.path.map(\n                    id => newResourcesIds[oldResourcesIds.indexOf(id)]\n                ),\n            ],\n        }))\n\n    const draft = {\n        ...resourceDraft,\n        currentId,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...pluginDataStructure,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n/////////////////////OLDOLDOLDOLDOLD\n// export const changeElementStyleValue = (\n//     index: number,\n//     key: string,\n//     value: any,\n//     elementId: string\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_STYLE_VALUE,\n//     index,\n//     key,\n//     value,\n//     elementId,\n// })\n\n// export const addElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.ADD_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const deleteElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.DELETE_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const changeElementPropertyValue = (\n//     value: any,\n//     key: string,\n//     isSection?: boolean,\n//     isNotForHistory?: boolean\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_PROPERTY_VALUE,\n//     value,\n//     key,\n//     isSection,\n//     isNotForHistory,\n// })\n\n// export const builderZoomOut = () => ({ type: actionTypes.BUILDER_ZOOM_OUT })\n// export const builderZoomIn = () => ({ type: actionTypes.BUILDER_ZOOM_IN })\n// export const builderZoomReset = () => ({ type: actionTypes.BUILDER_ZOOM_RESET })\n\n// export const saveToHistory = () => ({ type: actionTypes.SAVE_TO_HISTORY })\n\n// export const loadCurrentPageToBuilder = (\n//     _id: ?string,\n//     resourcesObjects?: Object,\n//     pageObject?: Object\n// ) => ({\n//     type: actionTypes.LOAD_CURRENT_PAGE_TO_BUILDER,\n//     _id,\n//     resourcesObjects,\n//     pageObject,\n// })\n","export const CHOOSE_BOX = 'CHOOSE_BOX'\nexport const CHOOSE_SECTION = 'CHOOSE_SECTION'\nexport const DESELECT_ELEMENTS = 'DESELECT_ELEMENTS'\n\nexport const CLICK_TOP_MENU_ITEM = 'CLICK_TOP_MENU_ITEM'\nexport const CHANGE_ALIGN_MODE = 'CHANGE_ALIGN_MODE'\n\nexport const SAVE_PAGE_STRUCTURE = 'SAVE_PAGE_STRUCTURE'\nexport const ADD_ELEMENT_STYLE_VALUE = 'ADD_ELEMENT_STYLE_VALUE'\nexport const DELETE_ELEMENT_STYLE_VALUE = 'DELETE_ELEMENT_STYLE_VALUE'\nexport const CHANGE_ELEMENT_STYLE_VALUE = 'CHANGE_ELEMENT_STYLE_VALUE'\nexport const CHANGE_ELEMENT_PROPERTY_VALUE = 'CHANGE_ELEMENT_PROPERTY_VALUE'\nexport const CHANGE_ELEMENT_PROPERTY_VALUES = 'CHANGE_ELEMENT_PROPERTY_VALUES'\n\nexport const DELETE_SECTION = 'DELETE_SECTION'\nexport const ADD_SECTION = 'ADD_SECTION'\nexport const DUPLICATE_SECTION = 'DUPLICATE_SECTION'\nexport const MOVE_UP_SECTION = 'MOVE_UP_SECTION'\nexport const MOVE_DOWN_SECTION = 'MOVE_DOWN_SECTION'\n\nexport const SPLIT_TEXT = 'SPLIT_TEXT'\nexport const TEXT_TO_SPAN = 'TEXT_TO_SPAN'\n\nexport const CHOOSE_MENU_ITEM = 'CHOOSE_MENU_ITEM'\nexport const CHANGE_NAME_MENU_ITEM = 'CHANGE_NAME_MENU_ITEM'\n\nexport const SAVE_HOVERED_ELEMENT_RECT = 'SAVE_HOVERED_ELEMENT_RECT'\nexport const HOVER_ELEMENT = 'HOVER_ELEMENT'\nexport const UNHOVER_ELEMENT = 'UNHOVER_ELEMENT'\nexport const CHANGE_BOX_PROPERTY = 'CHANGE_BOX_PROPERTY'\nexport const DELETE_BOX = 'DELETE_BOX'\nexport const ADD_BOX = 'ADD_BOX'\nexport const DUPLICATE_BOX = 'DUPLICATE_BOX'\nexport const MOVE_UP_BOX = 'MOVE_UP_BOX'\nexport const MOVE_DOWN_BOX = 'MOVE_DOWN_BOX'\nexport const ZINDEX_UP_BOX = 'ZINDEX_UP_BOX'\nexport const ZINDEX_DOWN_BOX = 'ZINDEX_DOWN_BOX'\nexport const ALIGN_BOXES = 'ALIGN_BOXES'\nexport const COPY_BOX = 'COPY_BOX'\nexport const CUT_BOX = 'CUT_BOX'\nexport const PASTE_BOX = 'PASTE_BOX'\nexport const CLEAR_STYLE = 'CLEAR_STYLE'\n\nexport const ENTER_BOX = 'ENTER_BOX'\nexport const EXIT_BOX = 'EXIT_BOX'\nexport const DESELECT_INNER = 'DESELECT_INNER'\n\nexport const SAVE_TO_HISTORY = 'SAVE_TO_HISTORY'\n\nexport const ADD_ELEMENTS_TO_BUFFER = 'ADD_ELEMENTS_TO_BUFFER'\n\nexport const SET_STATE_HOVER = 'SET_STATE_HOVER'\nexport const SET_STATE_ACTIVE = 'SET_STATE_ACTIVE'\nexport const UNSET_STATE_HOVER_ACTIVE = 'UNSET_STATE_HOVER_ACTIVE'\n\nexport const BUILDER_ZOOM_OUT = 'BUILDER_ZOOM_OUT'\nexport const BUILDER_ZOOM_IN = 'BUILDER_ZOOM_IN'\nexport const BUILDER_ZOOM_RESET = 'BUILDER_ZOOM_RESET'\n\nexport const LOAD_CURRENT_PAGE_TO_BUILDER = 'LOAD_CURRENT_PAGE_TO_BUILDER'\n\nexport const SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\nexport const MARK_PAGE_AS_SAVED = 'MARK_PAGE_AS_SAVED'\nexport const MARK_PAGE_AS_LEAVING = 'MARK_PAGE_AS_LEAVING'\n\nexport const PREVIEW_PAGE = 'PREVIEW_PAGE'\n\nexport const UPDATE_TEXT_VALUES = 'UPDATE_TEXT_VALUES'\n\nexport const AUTH_START = 'AUTH_START'\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS'\nexport const AUTH_FAIL = 'AUTH_FAIL'\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT'\nexport const SET_AUTH_REDIRECT_PATH = 'SET_AUTH_REDIRECT_PATH'\nexport const DELETE_START = 'DELETE_START'\nexport const DELETE_SUCCESS = 'DELETE_SUCCESS'\nexport const DELETE_FAIL = 'DELETE_FAIL'\nexport const CHANGE_BAR_SIZE = 'CHANGE_BAR_SIZE'\n\nexport const SAVE_WEBSITE_DATA_FROM_SERVER = 'SAVE_WEBSITE_DATA_FROM_SERVER'\nexport const LOAD_WEBSITE_FROM_SERVER = 'LOAD_WEBSITE_FROM_SERVER'\nexport const CREATE_WEBSITE = 'CREATE_WEBSITE'\nexport const LOAD_WEBSITE = 'LOAD_WEBSITE'\nexport const ACTION_START = 'ACTION_START'\nexport const ACTION_START_IMAGE_UPLOAD = 'ACTION_START_IMAGE_UPLOAD'\nexport const ACTION_FAIL_IMAGE_UPLOAD = 'ACTION_FAIL_IMAGE_UPLOAD'\nexport const ACTION_SUCCESS_IMAGE_UPLOAD = 'ACTION_SUCCESS_IMAGE_UPLOAD'\nexport const ACTION_START_PAGE_LOAD = 'ACTION_START_PAGE_LOAD'\nexport const ACTION_FAIL = 'ACTION_FAIL'\nexport const ADD_PAGE_SUCCESS = 'ADD_PAGE_SUCCESS'\nexport const DELETE_PAGE_SUCCESS = 'DELETE_PAGE_SUCCESS'\nexport const ACTION_SUCCESS = 'ACTION_SUCCESS'\nexport const ACTION_SUCCESS_PAGE_LOAD = 'ACTION_SUCCESS_PAGE_LOAD'\nexport const SAVE_PAGE_STRUCTURE_TO_STORE = 'SAVE_PAGE_STRUCTURE_TO_STORE'\nexport const SAVE_PAGE_IN_STATE = 'SAVE_PAGE_IN_STATE'\nexport const SET_URL_IS_NOT_VALID = 'SET_URL_IS_NOT_VALID'\nexport const SAVE_IMAGE_AND_SIZE_IN_REDUX = 'SAVE_IMAGE_AND_SIZE_IN_REDUX'\nexport const DELETE_IMAGE = 'DELETE_IMAGE'\nexport const RENAME_IMAGE = 'RENAME_IMAGE'\nexport const CHOOSE_IMAGE = 'CHOOSE_IMAGE'\nexport const CHOOSE_FILE = 'CHOOSE_FILE'\nexport const ADD_FILE_SUCCESS = 'ADD_FILE_SUCCESS'\nexport const DELETE_FILE_SUCCESS = 'DELETE_FILE_SUCCESS'\nexport const SAVE_FILES_STRUCTURE_TO_STORE = 'SAVE_FILES_STRUCTURE_TO_STORE'\nexport const SAVE_FILE_IN_REDUX = 'SAVE_FILE_IN_REDUX'\nexport const MARK_FILE_AS_SAVED = 'MARK_FILE_AS_SAVED'\nexport const SAVE_FILE_NAME_CHANGE = 'SAVE_FILE_NAME_CHANGE'\n\nexport const CHOOSE_PLUGIN = 'CHOOSE_PLUGIN'\nexport const ADD_PLUGIN_SUCCESS = 'ADD_PLUGIN_SUCCESS'\nexport const DELETE_PLUGIN_SUCCESS = 'DELETE_PLUGIN_SUCCESS'\nexport const SAVE_PLUGINS_STRUCTURE_TO_STORE = 'SAVE_PLUGINS_STRUCTURE_TO_STORE'\nexport const SAVE_PLUGIN_IN_REDUX = 'SAVE_PLUGIN_IN_REDUX'\nexport const MARK_PLUGIN_AS_SAVED = 'MARK_PLUGIN_AS_SAVED'\nexport const SAVE_PLUGIN_NAME_CHANGE = 'SAVE_PLUGIN_NAME_CHANGE'\nexport const CHOOSE_BOX_IN_PLUGIN = 'CHOOSE_BOX_IN_PLUGIN'\nexport const ADD_BOX_IN_PLUGIN = 'ADD_BOX_IN_PLUGIN'\nexport const DELETE_BOX_IN_PLUGIN = 'DELETE_BOX_IN_PLUGIN'\nexport const DUPLICATE_BOX_IN_PLUGIN = 'DUPLICATE_BOX_IN_PLUGIN'\nexport const CHANGE_BOX_PROPERTY_IN_PLUGIN = 'CHANGE_BOX_PROPERTY_IN_PLUGIN'\nexport const SAVE_STRUCTURE_IN_PLUGIN = 'SAVE_STRUCTURE_IN_PLUGIN'\n\nexport const MARK_REFRESHING = 'MARK_REFRESHING'\n\nexport const LOAD_GLOBALS_TO_STORE = 'LOAD_GLOBALS_TO_STORE'\n","import axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\n\nimport * as actionTypes from './actionTypes'\nimport * as actions from './index'\n\nconst cookies = new Cookies()\n\nexport const authStart = () => ({\n    type: actionTypes.AUTH_START,\n})\n\nexport const authSuccess = (data: Object) => ({\n    type: actionTypes.AUTH_SUCCESS,\n    data,\n})\n\nexport const authFail = (error: string) => ({\n    type: actionTypes.AUTH_FAIL,\n    error,\n})\n\nexport const deleteStart = () => ({\n    type: actionTypes.ACTION_START,\n})\n\nexport const deleteSuccess = () => ({\n    type: actionTypes.ACTION_SUCCESS,\n})\n\nexport const deleteFail = (error: string) => ({\n    type: actionTypes.ACTION_FAIL,\n    error,\n})\n\nexport const deleteUser = () => (dispatch: Object) => {\n    dispatch(deleteStart())\n    return axios\n        .delete('/api/users')\n        .then(response => {\n            dispatch(logout())\n            dispatch(deleteSuccess())\n        })\n        .catch(err => {\n            dispatch(deleteFail(err.message))\n        })\n}\n\nexport const logout = (all?: boolean) => {\n    if (!all) {\n        cookies.remove('auth_token')\n        axios.defaults.headers.common['x-auth-token'] = null\n        return {\n            type: actionTypes.AUTH_LOGOUT,\n        }\n    } else {\n        return axios\n            .post('/api/auth/logoutall')\n            .then(response => {\n                cookies.remove('auth_token')\n                axios.defaults.headers.common['x-auth-token'] = null\n                return {\n                    type: actionTypes.AUTH_LOGOUT,\n                }\n            })\n            .catch(err => {})\n    }\n}\n\nexport const auth = (email: string, password: string, isSignup?: boolean) => (\n    dispatch: Object\n) => {\n    dispatch(authStart())\n    const authData = {\n        email,\n        password,\n    }\n\n    let url = '/api/users'\n    if (!isSignup) {\n        url = '/api/auth'\n    }\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n\n    return axios\n        .post(url, JSON.stringify(authData))\n        .then(response => {\n            localStorage.setItem('token', response.data.token)\n            localStorage.setItem('userId', response.data._id)\n            localStorage.setItem('currentAction', response.data.currentAction)\n            axios.defaults.headers.common['x-auth-token'] = response.data.token\n            dispatch(authSuccess(response.data))\n            dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n        })\n        .catch(err => {\n            dispatch(authFail(err.message))\n        })\n}\n\nexport const authCheckState = () => (dispatch: Object) => {\n    const token = cookies.get('auth_token')\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n    console.log(userId)\n    console.log(token)\n\n    if (!token || !userId) {\n        dispatch(logout())\n    } else {\n        axios.defaults.headers.common['x-auth-token'] = token\n        console.log('try to login')\n        dispatch(authStart())\n        return axios\n            .get('/api/users')\n            .then(response => {\n                localStorage.setItem(\n                    'currentAction',\n                    response.data.currentAction\n                )\n                console.log('success')\n\n                dispatch(\n                    authSuccess({\n                        ...response.data,\n                        _id: userId._id,\n                    })\n                )\n                dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n            })\n            .catch(err => {\n                console.log('fail')\n                dispatch(authFail(err.message))\n            })\n    }\n}\n\nexport const changeBarSizeDo = (key: string, value: number) => ({\n    type: actionTypes.CHANGE_BAR_SIZE,\n    key,\n    value,\n})\n\nexport const saveBarSizes = (barSizes: Object) => (dispatch: Object) => {\n    return axios\n        .put('/api/users', { barSizes })\n        .then(response => {})\n        .catch(err => {})\n}\n\nexport const changeBarSize = (\n    barSizes: { height: number, width: number, width2: number, width3: number },\n    initiator?: { key: string, value: number }\n) => (dispatch: Object) => {\n    const width = window.innerWidth,\n        height = window.innerHeight\n    let value, dif, dif2, value2, value3\n\n    if (!initiator) {\n        if (barSizes.height > height - 50) {\n            dispatch(actions.changeBarSizeDo('height', height - 50))\n        }\n        if (barSizes.width > width - 100) {\n            dispatch(actions.changeBarSizeDo('width', width - 100))\n        }\n        if (barSizes.width + barSizes.width2 > width - 50) {\n            dispatch(\n                actions.changeBarSizeDo('width2', width - barSizes.width - 50)\n            )\n        }\n    } else {\n        switch (initiator.key) {\n            case 'height':\n                value = initiator.value\n                if (value < 50) value = 50\n                if (value > height - 50) value = height - 50\n                dispatch(actions.changeBarSizeDo('height', value))\n                break\n            case 'width':\n                value = initiator.value\n                if (value < 50) value = 50\n                dif = value - barSizes.width\n                value2 = barSizes.width2 - dif\n                value3 = barSizes.width3\n                if (value2 < 50) {\n                    dif2 = value2 - 50\n                    value2 = 50\n                    value3 = barSizes.width3 + dif2\n                    if (value3 < 50) value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value = width - 150\n                    value2 = 50\n                    value3 = 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width2':\n                value2 = initiator.value\n                value = barSizes.width\n                dif = value2 - 50\n                if (dif < 0) {\n                    value = value + dif\n                    if (value < 50) value = 50\n                    dif2 = value - barSizes.width\n                    value3 = barSizes.width3 - dif2\n                    value2 = 50\n                }\n                dif = value + value2 - barSizes.width - barSizes.width2\n                value3 = barSizes.width3 - dif\n                if (value3 < 50) value3 = 50\n                if (value + value2 + value3 + 50 > width) {\n                    value2 = width - value - 100\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width3':\n                value3 = initiator.value\n                value = barSizes.width\n                value2 = barSizes.width2\n                dif = value3 - 50\n                if (dif < 0) {\n                    value2 = value2 + dif\n                    dif2 = value2 - 50\n                    if (dif2 < 0) {\n                        value = value + dif2\n                        if (value < 50) value = 50\n                        value2 = 50\n                    }\n                    value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value3 = width - value - value2 - 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            default:\n                break\n        }\n    }\n}\n","import axios from 'axios'\n\nimport * as actionTypes from './actionTypes'\nimport * as actions from './index'\n\nexport const saveAllWebsitesDataFromServer = (data: Object) => ({\n    type: 'SAVE_ALL_WEBSITES_DATA_FROM_SERVER',\n    data,\n})\n\nexport const addWebsite = (duplicate?: boolean, currentWebsite?: string) => (\n    dispatch: Object\n) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/websites',\n            JSON.stringify(\n                duplicate && currentWebsite\n                    ? {\n                          duplicate,\n                          currentWebsite,\n                      }\n                    : {}\n            )\n        )\n        .then(response => {\n            dispatch(saveAllWebsitesDataFromServer({ ...response.data }))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const loadWebsite = (_id: string) => (dispatch: Object) => {\n    if (_id) {\n        dispatch(actionStart())\n        return axios\n            .get(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const chooseWebsite = (id: string) => ({\n    type: 'CHOOSE_WEBSITE',\n    id,\n})\n\nexport const changeWebsiteProperty = (\n    key: string,\n    value: string,\n    id: string\n) => (dispatch: Object) => {\n    if (id) {\n        dispatch(actionStart())\n        return axios\n            .put(\n                `/api/websites/${id}`,\n                JSON.stringify({\n                    [key]: value,\n                })\n            )\n            .then(response => {\n                dispatch(saveAllWebsitesDataFromServer(response.data))\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const deleteWebsite = (_id: string) => (dispatch: Object) => {\n    if (_id) {\n        if (\n            !window.confirm(\n                'Are you sure you want to delete this website? All data in this website will be deleted including pages, files and plugins. However, your media files will not be removed.'\n            )\n        )\n            return\n        dispatch(actionStart())\n        return axios\n            .delete(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const setSizeIsChanging = (isChanging: boolean) => ({\n    type: 'SIZE_IS_CHANGING',\n    isChanging,\n})\n\n// export const loadGlobalsToStore = (\n//     pagesStructure: pagesStructureType,\n//     resourcesObjects: Object,\n//     currentPage: string\n// ) => ({\n//     type: actionTypes.LOAD_GLOBALS_TO_STORE,\n//     pagesStructure,\n//     resourcesObjects,\n//     currentPage,\n// })\n\nexport const actionStart = () => ({\n    type: actionTypes.ACTION_START,\n})\n\nexport const actionSuccess = () => ({\n    type: actionTypes.ACTION_SUCCESS,\n})\n\nexport const actionFail = (error: string) => ({\n    type: actionTypes.ACTION_FAIL,\n    error,\n})\n\nexport const setCurrentTopTab = (currentTopTab: string) => ({\n    type: 'SET_CURRENT_TOP_TAB',\n    currentTopTab,\n})\n","import axios from 'axios'\n\nimport * as actionTypes from './actionTypes'\n\nconst actionStartImageUpload = () => ({\n    type: actionTypes.ACTION_START_IMAGE_UPLOAD,\n})\n\nconst actionSuccessImageUpload = () => ({\n    type: actionTypes.ACTION_SUCCESS_IMAGE_UPLOAD,\n})\n\nconst actionFailImageUpload = (error: string) => ({\n    type: actionTypes.ACTION_FAIL_IMAGE_UPLOAD,\n    error,\n})\n\nconst getSignedRequest = (file, images, storage, userId) => (\n    dispatch: Object\n) => {\n    let name = userId + '/' + file.name.replace(/([^a-zA-Z0-9\\\\.\\\\-])/g, '_')\n\n    let namePrefix = ''\n    let k = 0\n\n    const checkName = () =>\n        images.findIndex(image => name + namePrefix === image.name)\n    while (checkName() >= 0) {\n        k++\n        namePrefix = '_' + k\n    }\n\n    const fileDetails = {\n        file,\n        name: name + namePrefix,\n        label: file.name + namePrefix,\n        storage,\n        images,\n    }\n\n    return axios\n        .get(\n            `/api/sign-s3?file-name=${name}${namePrefix}&file-type=${\n                file.type\n            }&file-size=${file.size}`\n        )\n        .then(response => {\n            dispatch(\n                uploadFile(\n                    fileDetails,\n                    response.data.signedRequest,\n                    response.data.url\n                )\n            )\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            if (err.response.status === 400) alert(err.response.data)\n        })\n}\n\nconst uploadFile = (fileDetails, signedRequest, url) => (dispatch: Object) => {\n    return axios\n        .put(signedRequest, fileDetails.file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            dispatch(saveImageUrlAndSize(fileDetails, url))\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n        })\n}\n\nconst saveImageUrlAndSize = (fileDetails, url) => (dispatch: Object) => {\n    const fileSize = parseFloat(fileDetails.file.size)\n    const newStorage = fileDetails.storage + fileSize\n    const newImages = [\n        {\n            url,\n            name: fileDetails.name,\n            size: fileSize,\n            label: fileDetails.label,\n        },\n        ...fileDetails.images,\n    ]\n\n    return axios\n        .put('/api/users', { storage: newStorage, images: newImages })\n        .then(response => {\n            dispatch(saveImageUrlAndSizeInRedux(newStorage, newImages))\n            dispatch(actionSuccessImageUpload())\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            //delete from aws?\n        })\n}\n\nconst saveImageUrlAndSizeInRedux = (storage, images) => ({\n    type: actionTypes.SAVE_IMAGE_AND_SIZE_IN_REDUX,\n    storage,\n    images,\n})\n\nexport const deleteImage = (url: string) => (dispatch: Object) => {\n    if (\n        window.confirm(\n            'Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.'\n        )\n    ) {\n        dispatch(actionStartImageUpload())\n        return axios\n            .post(\n                `/api/awsImage/deleteimage`,\n                JSON.stringify({\n                    url,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(\n                        response.data.storage,\n                        response.data.images\n                    )\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const renameImage = (url: string) => (dispatch: Object) => {\n    const label = window.prompt('Type a new name for the image.')\n    if (label !== null) {\n        dispatch(actionStartImageUpload())\n\n        return axios\n            .post(\n                `/api/awsImage/renameimage`,\n                JSON.stringify({\n                    url,\n                    label,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(false, response.data.images)\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const chooseImage = (image: string) => ({\n    type: actionTypes.CHOOSE_IMAGE,\n    image,\n})\n\nexport const imageUpload = (\n    files: Array<{ type: string, size: number, name: string }>,\n    images: Array<{ url: string, name: string, size: number }>,\n    storage: number,\n    userId: string\n) => (dispatch: Object) => {\n    const file = files[0]\n    if (file == null) {\n        return alert('No file selected.')\n    }\n    if (file.type.split('/')[0] !== 'image') {\n        return alert('File is not an image.')\n    }\n    dispatch(actionStartImageUpload())\n    dispatch(getSignedRequest(file, images, storage, userId))\n}\n","import axios from 'axios'\n\nimport { actionStart, actionFail, actionSuccess } from './website'\nimport * as actionTypes from './actionTypes'\nimport { isEqual } from 'lodash'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nexport const addResource = (\n    websiteId: string,\n    currentResourceId: string,\n    resourceType: string,\n    duplicate?: boolean,\n    resourceData?: Object,\n    callback?: Function\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/resources',\n            JSON.stringify({\n                websiteId,\n                currentResourceId,\n                duplicate,\n                type: resourceType,\n                resourceData,\n            })\n        )\n        .then(response => {\n            dispatch(addResourceSuccess(response.data, resourceType))\n            if (callback) callback(response.data)\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst addResourceSuccess = (data: Object, resourceType: string) => ({\n    type: 'ADD_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const deleteResource = (\n    currentResourceId: string,\n    resourceType: string\n) => (dispatch: Object) => {\n    if (!currentResourceId) return\n    if (\n        !window.confirm(`Are you sure you want to delete this ${resourceType}?`)\n    )\n        return\n    dispatch(actionStart())\n    return axios\n        .delete(`/api/resources/${currentResourceId}`, {\n            params: { type: resourceType },\n        })\n        .then(response => {\n            dispatch(deleteResourceSuccess(response.data, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst deleteResourceSuccess = (data: Object, resourceType: string) => ({\n    type: 'DELETE_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const saveResourcesStructure = (\n    _id: string,\n    newStructure: Array<{}>,\n    oldStructure: Array<{}>,\n    resourceType: string\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    const structurePatch = diffpatcher.diff(oldStructure, newStructure)\n    if (!structurePatch) dispatch(actionSuccess())\n    else {\n        return axios\n            .put(\n                `/api/websites/structure/${_id}`,\n                JSON.stringify({ structurePatch, type: resourceType })\n            )\n            .then(response => {\n                dispatch(\n                    saveResourcesStructureSuccess(newStructure, resourceType)\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nconst saveResourcesStructureSuccess = (\n    structure: Array<{}>,\n    resourceType: string\n) => ({\n    type: 'SAVE_RESOURCES_STRUCTURE_SUCCESS',\n    structure,\n    resourceType,\n})\n\nexport const chooseResource = (_id: string, resourceType: boolean) => ({\n    type: 'SET_CURRENT_RESOURCE',\n    _id,\n    resourceType,\n})\n\nexport const saveResource = (\n    currentResource: string,\n    resourcesObjects: {},\n    structure: Array<{}>,\n    resourceType: string\n) => (dispatch: Object) => {\n    const present = resourcesObjects[currentResource].present\n    const draft = resourcesObjects[currentResource].draft\n    if (isEqual(present, {})) return\n    dispatch(actionStart())\n    const resourcePatch = diffpatcher.diff(draft, present)\n\n    return axios\n        .put(\n            `/api/resources/${currentResource}`,\n            JSON.stringify({ resourcePatch, structure, type: resourceType })\n        )\n        .then(response => {\n            dispatch(saveResourceInState(currentResource, present))\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst saveResourceInState = (currentResource: string, draft: Object) => ({\n    type: 'SAVE_RESOURCE_IN_STATE',\n    currentResource,\n    draft,\n})\n\nconst saveResourceDraftInState = (currentResource: string, draft: Object) => ({\n    type: 'SAVE_RESOURCE_DRAFT_IN_STATE',\n    currentResource,\n    draft,\n})\n\nexport const publishRevertResource = (\n    currentResource: string,\n    structure: Array<{}>,\n    resourceType: string,\n    revert: boolean,\n    resourcesObjects: Object\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .put(\n            `/api/resources/publish/${currentResource}`,\n            JSON.stringify({ structure, type: resourceType, revert })\n        )\n        .then(response => {\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            if (response.data.draft) {\n                dispatch(\n                    saveResourceDraftInState(\n                        currentResource,\n                        response.data.draft\n                    )\n                )\n                dispatch(\n                    addResourceVersion(currentResource, response.data.draft)\n                )\n                dispatch(removeResourceFromUnsaved(currentResource))\n            }\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const revertResourceToSaved = (\n    currentResource: string,\n    resourcesObjects: Object\n) => (dispatch: Object) => {\n    dispatch(\n        addResourceVersion(\n            currentResource,\n            resourcesObjects[currentResource].draft\n        )\n    )\n    dispatch(removeResourceFromUnsaved(currentResource))\n}\n\nconst removeResourceFromUnsaved = (currentResource: string) => ({\n    type: 'REMOVE_RESOURCE_FROM_UNSAVED',\n    currentResource,\n})\n\nexport const addResourceVersion = (\n    currentResource: string,\n    draft: {},\n    isNotForHistory?: boolean\n) => ({\n    type: 'ADD_RESOURCE_VERSION',\n    currentResource,\n    draft,\n    isNotForHistory,\n})\n\nexport const undoResourceVersion = () => ({\n    type: 'UNDO_RESOURCE_VERSION',\n})\n\nexport const redoResourceVersion = () => ({\n    type: 'REDO_RESOURCE_VERSION',\n})\n\nexport const chooseBoxInPlugin = (item: string, ctrl?: boolean) => ({\n    type: actionTypes.CHOOSE_BOX_IN_PLUGIN,\n    item,\n})\n\nexport const addBoxInPlugin = (text: boolean) => ({\n    type: actionTypes.ADD_BOX_IN_PLUGIN,\n    text,\n})\n\nexport const deleteBoxInPlugin = (withChildren: boolean) => ({\n    type: actionTypes.DELETE_BOX_IN_PLUGIN,\n    withChildren,\n})\nexport const duplicateBoxInPlugin = (withChildren: boolean) => ({\n    type: actionTypes.DUPLICATE_BOX_IN_PLUGIN,\n    withChildren,\n})\n\nexport const changeBoxPropertyInPlugin = (key: string, value: any) => ({\n    type: actionTypes.CHANGE_BOX_PROPERTY_IN_PLUGIN,\n    key,\n    value,\n})\n\nexport const saveStructureInPlugin = (structure: Array<{}>) => ({\n    type: actionTypes.SAVE_STRUCTURE_IN_PLUGIN,\n    structure,\n})\n","export {\n    chooseBox,\n    // addElementStyleValue,\n    // deleteElementStyleValue,\n    // changeElementStyleValue,\n    // changeElementPropertyValue,\n    addBox,\n    deleteBox,\n    duplicateBox,\n    // builderZoomOut,\n    // builderZoomIn,\n    // builderZoomReset,\n    // saveToHistory,\n    saveElementsStructure,\n    changeBoxProperty,\n    hoverBox,\n    unhoverBox,\n    saveHoveredElementRect,\n    splitText,\n    textToSpan,\n    chooseMenuItem,\n    changeMenuItemProperty,\n    markRefreshing,\n    mergeBoxToPlugin,\n    dissolvePluginToBox,\n    toggleFindMode,\n} from './builder'\n\nexport {\n    auth,\n    logout,\n    authCheckState,\n    deleteUser,\n    changeBarSize,\n    changeBarSizeDo,\n    saveBarSizes,\n} from './auth'\n\nexport {\n    addWebsite,\n    loadWebsite,\n    deleteWebsite,\n    setSizeIsChanging,\n    chooseWebsite,\n    changeWebsiteProperty,\n    saveAllWebsitesDataFromServer,\n    setCurrentTopTab,\n} from './website'\n\nexport { imageUpload, deleteImage, renameImage, chooseImage } from './images'\n\nexport {\n    saveResourcesStructure,\n    addResource,\n    deleteResource,\n    chooseResource,\n    chooseBoxInPlugin,\n    addBoxInPlugin,\n    duplicateBoxInPlugin,\n    deleteBoxInPlugin,\n    changeBoxPropertyInPlugin,\n    saveStructureInPlugin,\n    saveResource,\n    publishRevertResource,\n    revertResourceToSaved,\n    addResourceVersion,\n    undoResourceVersion,\n    redoResourceVersion,\n} from './resources'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__1JLaC\",\"load3\":\"Spinner_load3__3S5yS\",\"Cover\":\"Spinner_Cover__3GZfV\"};","import { isEmpty } from 'lodash'\n\nexport const checkIfCapital = (char: string) => {\n    if (char === char.toUpperCase() && char !== char.toLowerCase()) {\n        return true\n    }\n}\n\nexport const getCurrentResourceValue = (id: string, resourcesObjects: {}) =>\n    resourcesObjects[id]\n        ? isEmpty(resourcesObjects[id].present)\n            ? resourcesObjects[id].draft\n            : resourcesObjects[id].present\n        : null\n\nfunction _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {}\n        var ownKeys = Object.keys(source)\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(\n                        source,\n                        sym\n                    ).enumerable\n                })\n            )\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key])\n        })\n    }\n    return target\n}\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true,\n        })\n    } else {\n        obj[key] = value\n    }\n    return obj\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n    if (source == null) return {}\n    var target = _objectWithoutPropertiesLoose(source, excluded)\n    var key, i\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i]\n            if (excluded.indexOf(key) >= 0) continue\n            if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                continue\n            target[key] = source[key]\n        }\n    }\n    return target\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {}\n    var target = {}\n    var sourceKeys = Object.keys(source)\n    var key, i\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i]\n        if (excluded.indexOf(key) >= 0) continue\n        target[key] = source[key]\n    }\n    return target\n}\n\nexport function buildTree(items) {\n    var buildItem = function buildItem(item) {\n        var path = item.path,\n            data = _objectWithoutProperties(item, ['path'])\n\n        return _objectSpread({}, data, {\n            children: items\n                .filter(function(child) {\n                    return child.path[child.path.length - 1] === item.id\n                })\n                .map(function(child) {\n                    return buildItem(child)\n                }),\n        })\n    }\n\n    var tree = items\n        .filter(function(item) {\n            return item.path.length === 0\n        })\n        .map(function(item) {\n            return buildItem(item)\n        })\n    return tree\n}\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport * as actions from '../../../store/actions/index'\n\ntype Props = {\n    onLogout: () => {},\n}\n\nclass Logout extends Component<Props> {\n    componentDidMount() {\n        this.props.onLogout()\n    }\n\n    render() {\n        return <Redirect to=\"/login\" />\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(Logout)\n"],"sourceRoot":""}