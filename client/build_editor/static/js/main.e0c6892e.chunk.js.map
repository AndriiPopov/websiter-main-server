{"version":3,"sources":["components/UI/Checkbox/Checkbox.js","containers/Auth/Logout/Logout.js","hoc/asyncComponent.js","containers/Auth/Auth.js","components/UI/Spinner/Spinner.js","store/reducer/plugins.js","store/reducer/resources.js","store/reducer/reducer.js","store/reducer/images.js","store/reducer/auth.js","App.js","index.js","utils/resourceTypeIndex.js","store/actions/builder.js","store/actions/auth.js","store/actions/website.js","store/actions/images.js","store/actions/resources.js","store/actions/index.js","components/UI/Checkbox/Checkbox.module.css","components/UI/Spinner/Spinner.module.css","components/UI/LoginButton/LoginButton.js","components/UI/LoginButton/LoginButton.module.css","utils/basic.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1__","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1___default","Checkbox","props","a","createElement","className","inline","classes","Div","Inline","join","data-testid","datatestid","type","radio","Input","checked","onChange","e","target","title","children","Logout","this","onLogout","react_default","Redirect","to","Component","connect","dispatch","actions","asyncComponent","importComponent","_Component","_temp","_getPrototypeOf2","_this","Object","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","component","inherits","createClass","key","value","_this2","then","cmp","setState","default","C","cookies","Cookies","Auth","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","cookieConsent","setCookieConsent","useEffect","checkCookieConsent","remeberMeParam","get","Fragment","href","LoginButton","btnType","clicked","set","path","maxAge","window","open","spinner","cover","Cover","Loader","findElementIndex","currentPlugin","resourcesObjects","structure","findIndex","item","id","currentBoxInPlugin","diffpatcher","require","create","objectHash","obj","patchStructure","action","patch","resourceType","structurePatch","initialState","websites","pagesStructure","pluginsStructure","loadedWebsite","error","loading","currentPage","domainNotOk","customDomainNotOk","storage","images","uploadingImage","currentImage","sizeIsChanging","currentWebsite","notSavedResources","pageZoom","hoveredElementId","hoveredElementSize","isRefreshing","userId","barSizes","height","width","width2","width3","currentTopTab","findMode","hoverMode","fromFrame","search","tooltipsOn","reducer","createReducer","SAVE_ALL_WEBSITES_DATA_FROM_SERVER","objectSpread","data","saveAllWebsitesDataFromServer","CHOOSE_WEBSITE","ACTION_START_IMAGE_UPLOAD","ACTION_FAIL_IMAGE_UPLOAD","loadng","ACTION_SUCCESS_IMAGE_UPLOAD","CHOOSE_IMAGE","undefined","image","SAVE_IMAGE_AND_SIZE_IN_REDUX","SIZE_IS_CHANGING","isChanging","ACTION_START","pagesLoading","ACTION_FAIL","ACTION_SUCCESS","ADD_RESOURCE_SUCCESS","_id","resource","resources","DELETE_RESOURCE_SUCCESS","deletedResources","forEach","current","SAVE_RESOURCES_STRUCTURE_SUCCESS","SET_CURRENT_RESOURCE","SAVE_RESOURCE_IN_STATE","currentResource","draft","present","filter","REMOVE_RESOURCE_FROM_UNSAVED","SAVE_RESOURCE_DRAFT_IN_STATE","ADD_RESOURCE_VERSION","isEqual","isNotForHistory","connectedResources","tag","checkIfCapital","charAt","push","name","find","includes","past","shift","diff","future","UNDO_RESOURCE_VERSION","delta","pop","unshift","unpatch","REDO_RESOURCE_VERSION","CHOOSE_BOX_IN_PLUGIN","plugins","ADD_BOX_IN_PLUGIN","elementIndex","plugin","newId","currentId","newElement","toConsumableArray","text","textContent","style","styles","splice","DELETE_BOX_IN_PLUGIN","elementId","withChildren","map","pathItem","DUPLICATE_BOX_IN_PLUGIN","_plugin$structure","sourceChildren","newChildren","idMatch","defineProperty","newItemId","CHANGE_BOX_PROPERTY_IN_PLUGIN","SAVE_STRUCTURE_IN_PLUGIN","AUTH_START","auth","AUTH_SUCCESS","AUTH_FAIL","AUTH_LOGOUT","CHANGE_BAR_SIZE","SET_CURRENT_TOP_TAB","SAVE_HOVERED_ELEMENT_RECT","checkAndCreatePath","index","parent","size","saveHoveredElementRect","REMOVE_FROM_HOVERED_SIZES","checkAndRemoveElement","child","removedElements","removeFromHoveredSizes","HOVER_ELEMENT","mode","UNHOVER_ELEMENT","TOGGLE_FIND_MODE","toggleFindMode","MARK_REFRESHING","refreshing","SWITCH_TOOLTIPS","asyncSiteBuilder","Promise","all","bind","App","onTryAutoSignup","routes","Switch","Route","isAuthenticated","Spinner","withRouter","d","__webpack_exports__","store","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","axios","defaults","baseURL","createStore","applyMiddleware","thunk","interceptors","request","use","config","localStorage","getItem","headers","currentAction","setItem","parseInt","toString","response","common","status","logout","reject","app","es","BrowserRouter","src_App","inIframe","self","top","root","document","getElementById","ReactDOM","render","module","exports","page","currentBox","findRouteElements","result","saveElementsStructure","resourceDraft","omit","chooseBox","unhoverBox","changeBoxProperty","changes","isObject","String","slice","hoverBox","addBox","putInside","routeElements","element","isChildren","childrenTo","newCurrentId","textMode","properties","propertiesString","deleteBox","notRemove","newPageStructure","deleteFromHoveredSizes","duplicateBox","splitText","start","end","textContent0","substr","textContent1","textContent2","newElements","textToSpan","spanId","chooseMenuItem","resourceId","isEmpty","changeMenuItemProperty","menuItems","newMenuItems","currentMenuItem","markRefreshing","mergeBoxToPlugin","websiteId","onlyChildren","newResourcesIds","oldResourcesIds","resourceDataStructure","newItem","indexOf","resourceData","newResourceName","dissolvePluginToBox","pluginResource","pluginDataStructure","deleteUser","delete","catch","err","message","post","remove","authCheckState","token","rememberMe","jwt","decode","put","Accept","changeBarSizeDo","savePropertiesOnLeave","changeBarSize","initiator","dif","dif2","value2","value3","innerWidth","innerHeight","switchTooltips","addWebsite","duplicate","actionStart","JSON","stringify","actionSuccess","actionFail","loadWebsite","confirm","chooseWebsite","verifyCustomDomain","changeWebsiteProperty","deleteWebsite","setSizeIsChanging","setCurrentTopTab","actionFailImageUpload","uploadFile","fileDetails","signedRequest","url","file","Content-Type","saveImageUrlAndSize","fileSize","parseFloat","newStorage","newImages","label","saveImageUrlAndSizeInRedux","deleteImage","renameImage","prompt","chooseImage","imageUpload","files","alert","split","replace","namePrefix","k","getSignedRequest","addResource","currentResourceId","callback","addResourceSuccess","deleteResource","params","deleteResourceSuccess","saveResourcesStructure","newStructure","oldStructure","saveResourcesStructureSuccess","chooseResource","saveResource","resourcePatch","saveResourceInState","publishRevertResource","revert","saveResourceDraftInState","addResourceVersion","removeResourceFromUnsaved","revertResourceToSaved","undoResourceVersion","redoResourceVersion","builder_chooseBox","builder_addBox","builder_deleteBox","builder_duplicateBox","builder_saveElementsStructure","builder_changeBoxProperty","builder_splitText","builder_textToSpan","builder_chooseMenuItem","builder_changeMenuItemProperty","builder_mergeBoxToPlugin","builder_dissolvePluginToBox","auth_logout","auth_authCheckState","auth_deleteUser","auth_changeBarSize","auth_savePropertiesOnLeave","website_addWebsite","website_loadWebsite","website_deleteWebsite","website_changeWebsiteProperty","website_verifyCustomDomain","images_deleteImage","images_renameImage","resources_saveResourcesStructure","resources_addResource","resources_deleteResource","resources_saveResource","resources_publishRevertResource","StyleControls","load3","_LoginButton_module_css__WEBPACK_IMPORTED_MODULE_1__","_LoginButton_module_css__WEBPACK_IMPORTED_MODULE_1___default","disabled","Button","onClick","Success","Danger","getCurrentResourceValue","buildTree","getInheritedPropertyName","lodash__WEBPACK_IMPORTED_MODULE_0__","char","toUpperCase","toLowerCase","_defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","i","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","items","buildItem","ownKeys","sym","getOwnPropertyDescriptor","_objectSpread"],"mappings":"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","file":"static/js/main.e0c6892e.chunk.js","sourcesContent":["import React from 'react'\n//import { connect } from 'react-redux';\nimport type { Node } from 'react'\n\n//import * as actions from '../../../store/actions/index';\nimport classes from './Checkbox.module.css'\n//import SmallButton from '../Buttons/SmallButton/SmallButton';\n\ntype Props = {\n    checked?: boolean,\n    title?: string,\n    onChange: Function,\n    datatestid?: string,\n    radio?: boolean,\n    children?: Node,\n    inline?: boolean,\n}\n\nconst Checkbox = (props: Props) => {\n    return (\n        <div\n            className={\n                props.inline\n                    ? [classes.Div, classes.Inline].join(' ')\n                    : classes.Div\n            }\n        >\n            <label>\n                <input\n                    data-testid={props.datatestid}\n                    type={props.radio ? 'radio' : 'checkbox'}\n                    className={classes.Input}\n                    checked={props.checked || false}\n                    onChange={e => props.onChange(e.target.checked)}\n                />\n                {props.title}\n                {props.children}\n            </label>\n            {/* { props.changedStyleValues.includes(props.valueKey) ?\n                <div className={classes.StyleControls}>\n                    <SmallButton \n                        inline\n                        isSection={props.isSection}\n                        value={props.valueKey}\n                        icon='<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\"><path xmlns=\"http://www.w3.org/2000/svg\" d=\"M15 1H9v2h6V1zm4.03 6.39l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-.32-5H6.35c.57 1.62 1.82 2.92 3.41 3.56l-.11-.06 2.03-3.5zm5.97-4c-.57-1.6-1.78-2.89-3.34-3.54L12.26 11h5.39zm-7.04 7.83c.45.11.91.17 1.39.17 1.34 0 2.57-.45 3.57-1.19l-2.11-3.9-2.85 4.92zM7.55 8.99C6.59 10.05 6 11.46 6 13c0 .34.04.67.09 1h4.72L7.55 8.99zm8.79 8.14C17.37 16.06 18 14.6 18 13c0-.34-.04-.67-.09-1h-4.34l2.77 5.13zm-3.01-9.98C12.9 7.06 12.46 7 12 7c-1.4 0-2.69.49-3.71 1.29l2.32 3.56 2.72-4.7z\" ></path></svg>'\n                        buttonClicked=\"transition\" />\n                    <SmallButton\n                        inline\n                        isSection={props.isSection}\n                        value={props.valueKey}\n                        icon='<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" ></path></svg>'\n                        buttonClicked=\"clearStyle\" />\n                </div> : null\n            } */}\n        </div>\n    )\n}\n\nexport default Checkbox\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport * as actions from '../../../store/actions/index'\n\ntype Props = {\n    onLogout: () => {},\n}\n\nclass Logout extends Component<Props> {\n    componentDidMount() {\n        this.props.onLogout()\n    }\n\n    render() {\n        return <Redirect to=\"/login\" />\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(Logout)\n","import React, { Component } from 'react'\n\ntype Props = {}\n\ntype State = {\n    component: Object | null,\n}\n\nconst asyncComponent = (importComponent: Object) => {\n    return class extends Component<Props, State> {\n        state = {\n            component: null,\n        }\n\n        componentDidMount() {\n            importComponent().then(cmp => {\n                this.setState({ component: cmp.default })\n            })\n        }\n\n        render() {\n            const C = this.state.component\n            return C ? <C {...this.props} /> : null\n        }\n    }\n}\n\nexport default asyncComponent\n","import React, { useState, useEffect } from 'react'\n\nimport Checkbox from '../../components/UI/Checkbox/Checkbox'\nimport Cookies from 'universal-cookie'\nimport LoginButton from '../../components/UI/LoginButton/LoginButton'\n\nconst cookies = new Cookies()\n\ntype Props = {\n    test?: boolean,\n}\n\nconst Auth = (props: Props) => {\n    const [state: boolean, setState] = useState(false)\n    const [cookieConsent: boolean, setCookieConsent] = useState(false)\n\n    useEffect(() => {\n        checkCookieConsent()\n    })\n\n    let remeberMeParam = '?rememberme=false'\n    if (state) {\n        remeberMeParam = '?rememberme=true'\n    }\n\n    const checkCookieConsent = () => {\n        const cookiesConsent = cookies.get('cookies_consent')\n        if (cookiesConsent) {\n            setCookieConsent(true)\n        }\n    }\n\n    const agreeWithCookies = () => {\n        cookies.set('cookies_consent', 'true', {\n            path: '/',\n            maxAge: 31530000000,\n        })\n        checkCookieConsent()\n    }\n    return !cookieConsent ? (\n        <>\n            <div>\n                We use cookies only for login purposes. In order to proceed you\n                need to agree with the use of cookies.\n            </div>\n            <LoginButton btnType=\"Success\" clicked={agreeWithCookies}>\n                AGREE\n            </LoginButton>\n            <LoginButton\n                btnType=\"Danger\"\n                clicked={() => {\n                    window.open('https://websiter.dev', '_self')\n                }}\n            >\n                Return to the homepage\n            </LoginButton>\n        </>\n    ) : (\n        <>\n            {process.env.NODE_ENV !== 'development' ? (\n                <div>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/google/start' +\n                            remeberMeParam\n                        }\n                    >\n                        GOOGLE\n                    </a>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/facebook/start' +\n                            remeberMeParam\n                        }\n                    >\n                        FACEBOOK\n                    </a>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/twitter/start' +\n                            remeberMeParam\n                        }\n                    >\n                        TWITTER\n                    </a>\n                </div>\n            ) : (\n                <div>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/google/start' +\n                            remeberMeParam\n                        }\n                    >\n                        GOOGLE\n                    </a>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/facebook/start' +\n                            remeberMeParam\n                        }\n                    >\n                        FACEBOOK\n                    </a>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/twitter/start' +\n                            remeberMeParam\n                        }\n                    >\n                        TWITTER\n                    </a>\n                </div>\n            )}\n            <Checkbox\n                title=\"Remember me\"\n                checked={state}\n                onChange={() => setState(!state)}\n            />\n        </>\n    )\n}\nexport default Auth\n","import React from 'react'\nimport classes from './Spinner.module.css'\n\ntype Props = {\n    cover?: boolean,\n    datatestid?: string,\n}\n\nconst spinner = (props: Props) => (\n    <>\n        {props.cover ? (\n            <div\n                className={classes.Cover}\n                data-testid={props.datatestid || 'cover'}\n            >\n                <div className={classes.Loader}>Loading...</div>\n            </div>\n        ) : (\n            <div className={classes.Loader}>Loading...</div>\n        )}\n    </>\n)\n\nexport default spinner\n","import { omit } from 'lodash'\nimport { initialState } from './reducer'\n\nconst findElementIndex = (state: Object): number => {\n    if (state.currentPlugin.length < 1) return -1\n    const plugin = state.resourcesObjects[state.currentPlugin]\n    return plugin.value.structure.findIndex(\n        item => item.id === state.currentBoxInPlugin\n    )\n}\n\nexport const savePluginsStructureToStore = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    ...omit(action, ['type']),\n    urlNotValid: false,\n})\n\nexport const choosePlugin = (state: Object = initialState, action: Object) => {\n    state.currentPlugin = action.id\n}\n\nexport const deletePluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const newresourcesObjects = { ...state.resourcesObjects }\n    for (let i in newresourcesObjects) {\n        const isDeleted = !action.pluginsStructure.some(\n            item => item.id.toString() === i.toString()\n        )\n        if (isDeleted) {\n            delete newresourcesObjects[i]\n        }\n    }\n    return {\n        ...state,\n        resourcesObjects: newresourcesObjects,\n        pluginsStructure: action.pluginsStructure,\n        error: null,\n        loading: false,\n        pagesLoading: false,\n        currentPlugin: '',\n    }\n}\n\nexport const addPluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    pluginsStructure: action.pluginsStructure,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [action.plugin._id]: action.plugin,\n    },\n    error: null,\n    loading: false,\n    pagesLoading: false,\n    currentPlugin: action.plugin._id,\n})\n\nexport const savePluginInRedux = (\n    state: Object = initialState,\n    action: Object\n) => {\n    if (action.id)\n        if (action.value !== state.resourcesObjects[action.id].value) {\n            state.resourcesObjects[action.id] = {\n                ...state.resourcesObjects[action.id],\n                ...omit(action, ['type']),\n            }\n            state.notSavedPlugins.push(action.id)\n        }\n}\n\nexport const markPluginAsSaved = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.notSavedPlugins = state.notSavedPlugins.filter(\n        plugin => plugin !== action.id\n    )\n}\n\nexport const savePluginNameChange = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const index = state.pluginsStructure.findIndex(\n        item => item.id === action.id\n    )\n    state.pluginsStructure[index].name = action.value\n    state.notSavedPlugins.push(action.id)\n}\n\nexport const chooseBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.currentBoxInPlugin = action.item\n}\n\nexport const addBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    const newElement = {\n        id: newId,\n        path:\n            elementIndex <= 0\n                ? [plugin.structure[0].id]\n                : [...plugin.structure[elementIndex].path],\n        tag: action.text ? 'text' : 'div',\n        text: action.text,\n        textContent: '',\n        style: [],\n        styles: [],\n    }\n\n    plugin.structure.splice(elementIndex + 1, 0, newElement)\n}\n\nexport const deleteBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    if (action.withChildren) {\n        plugin.structure = plugin.structure.filter(\n            item => elementId !== item.id && !item.path.includes(elementId)\n        )\n    } else {\n        plugin.structure = plugin.structure.map(item => {\n            return {\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }\n        })\n        plugin.structure.splice(elementIndex, 1)\n    }\n}\n\nexport const duplicateBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return { ...state }\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    const sourceChildren = plugin.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    let newChildren = []\n\n    if (action.withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `plugin_element_${plugin.currentId}`\n                plugin.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n    }\n    plugin.structure.splice(\n        elementIndex + sourceChildren.length + 1,\n        0,\n        {\n            ...plugin.structure[elementIndex],\n            id: newId,\n        },\n        ...newChildren\n    )\n}\n\nexport const changeBoxPropertyInPlugin = (state: Object, action: Object) => {\n    const elementIndex = findElementIndex(state)\n    if (elementIndex < 0) return\n    state.resourcesObjects[state.currentPlugin].value.structure[elementIndex][\n        action.key\n    ] = action.value\n}\n\nexport const saveStructureInPlugin = (state: Object, action: Object) => {\n    if (state.resourcesObjects[state.currentPlugin]) {\n        state.resourcesObjects[state.currentPlugin].value.structure =\n            action.structure\n    }\n}\n","import { structure, current } from '../../utils/resourceTypeIndex'\nimport { isEqual } from 'lodash'\nimport { checkIfCapital } from '../../utils/basic'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nconst patchStructure = (state: Object, action: Object) => {\n    return diffpatcher.patch(\n        state[structure[action.resourceType]],\n        action.structurePatch\n    )\n}\n\nexport const addResourceSuccess = (state: Object, action: Object) => {\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state.resourcesObjects[action._id] = action.resource\n}\n\nexport const deleteResourceSuccess = (state: Object, action: Object) => {\n    action.deletedResources.forEach(id => delete state.resourcesObjects[id])\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state[current[action.resourceType]] = action.current || ''\n}\n\nexport const setCurrentResource = (state: Object, action: Object) => {\n    state[current[action.resourceType]] = action._id\n    if (action.resourceType === 'page') state.hoveredElementSize = {}\n}\n\nexport const saveResourcesStructureSuccess = (\n    state: Object,\n    action: Object\n) => {\n    state[structure[action.resourceType]] = action.structure\n}\n\nexport const removeResourceFromUnsaved = (state: Object, action: Object) => {\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const savePageInState = (state: Object, action: Object) => ({\n    ...state,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [state.currentPage]: {\n            ...state.resourcesObjects[state.currentPage],\n            content: action.value,\n        },\n    },\n})\n\nexport const saveResourceDraftInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n}\n\nexport const saveResourceInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n    state.resourcesObjects[action.currentResource].present = action.draft\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const addResourceVersion = (state: Object, action: Object) => {\n    const resource = state.resourcesObjects[action.currentResource]\n    if (!isEqual(resource.present, action.draft)) {\n        if (action.isNotForHistory) {\n            resource.present = action.draft\n        } else {\n            if (action.draft.structure) {\n                const connectedResources = []\n                action.draft.structure.forEach(item => {\n                    if (item.tag.length > 0) {\n                        if (checkIfCapital(item.tag.charAt(0))) {\n                            connectedResources.push({\n                                name: item.tag,\n                                type: 'plugin',\n                            })\n                        }\n                    }\n                })\n                let resource =\n                    state.pagesStructure.find(\n                        item => item.id === action.currentResource\n                    ) ||\n                    state.pluginsStructure.find(\n                        item => item.id === action.currentResource\n                    )\n                if (resource) {\n                    resource.connectedResources = connectedResources\n                }\n            }\n            if (!state.notSavedResources.includes(action.currentResource))\n                state.notSavedResources.push(action.currentResource)\n            if (resource.past.length > 100) resource.past.shift()\n            resource.past.push(diffpatcher.diff(resource.present, action.draft))\n            resource.present = action.draft\n            resource.future = []\n        }\n    }\n}\n\nexport const undoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.past.length > 0) {\n            if (\n                !isEqual(\n                    resource.present,\n                    resource.past[resource.past.length - 1]\n                )\n            ) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.past.pop()\n            resource.future.unshift(delta)\n            resource.present = diffpatcher.unpatch(resource.present, delta)\n        }\n    }\n}\n\nexport const redoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.future.length > 0) {\n            if (!isEqual(resource.present, resource.future[0])) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.future.shift()\n            resource.past.push(delta)\n            resource.present = diffpatcher.patch(resource.present, delta)\n        }\n    }\n}\n","import * as plugins from './plugins'\nimport * as auth from './auth'\nimport * as images from './images'\nimport * as resources from './resources'\nimport { createReducer } from 'redux-starter-kit'\n\nexport type menuItemType = {\n    all: boolean,\n    id: string,\n    generatedFrom: string,\n    sourceItem: boolean,\n    name: string,\n    type: string,\n    path: Array<string>,\n    properties: {\n        url: string,\n        class: string,\n    },\n}\n\nexport type elementType = {\n    id: string,\n    path: Array<string>,\n    tag: string,\n    properties: {\n        name?: string,\n        topMenuBlockClasses?: Array<string>,\n        topMenuItemClasses?: Array<string>,\n        topMenuItemActiveClasses?: Array<string>,\n        popupMenuBlockClasses?: Array<string>,\n        popupMenuItemClasses?: Array<string>,\n        popupMenuItemActiveClasses?: Array<string>,\n        mode?: 'horizontal' | 'vertical',\n        trigger?: 'click',\n        id?: string,\n        class?: string,\n    },\n    propertiesString: string,\n    style?: string,\n    expanded?: boolean,\n    textMode: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    text?: boolean,\n    textContent?: string,\n    isChildren?: boolean,\n    childrenTo?: string,\n    forPlugin?: string,\n    sourcePlugin?: string,\n    menuItems?: Array<menuItemType>,\n    currentMenuItem?: string,\n    children?: Array<elementType>,\n}\nexport type resourceType = {\n    currentId: number,\n    structure: Array<elementType>,\n    currentBox?: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    value?: string,\n}\n\nexport type pageType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    homepage: boolean,\n    hidden: boolean,\n    notPublished: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type pluginType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type websiteType = {\n    _id: string,\n    domain: string,\n    name: string,\n    customDomain?: string,\n    domainHidden?: boolean,\n    customDomainHidden?: boolean,\n    customDomainVerified?: boolean,\n    verifyCode?: string,\n    cname?: string,\n}\n\nexport type imageType = {\n    name: string,\n    label: string,\n    url: string,\n    size: number,\n}\n\nexport type initialStateType = {\n    websites: Array<websiteType>,\n    resourcesObjects: {\n        [key: string]: {\n            draft: resourceType,\n            present: resourceType,\n            future: Array<resourceType>,\n            past: Array<resourceType>,\n        },\n    },\n    pagesStructure: Array<pageType>,\n    pluginsStructure: Array<pluginType>,\n    loadedWebsite: string,\n    error: null | {},\n    loading: boolean,\n    currentPage: string,\n    currentPlugin: string,\n    domainNotOk: boolean,\n    customDomainNotOk: boolean,\n    storage: number,\n    images: Array<imageType>,\n    uploadingImage: boolean,\n    currentBoxInPlugin: string,\n    currentImage: string,\n    sizeIsChanging: boolean,\n    currentWebsite: string,\n    notSavedResources: Array<string>,\n    pageZoom: number,\n    hoveredElementId: null | string,\n    hoveredElementSize: {\n        [key: string]: {\n            children: {},\n            left: number,\n            top: number,\n            width: number,\n            height: number,\n        },\n    },\n    isRefreshing: boolean,\n    userId: null | string,\n    barSizes: { height: number, width: number, width2: number, width3: number },\n    currentTopTab: string,\n    findMode: null | string,\n    hoverMode: string,\n    fromFrame: boolean,\n    search: {},\n    tooltipsOn: boolean,\n}\n\nexport const initialState: initialStateType = {\n    websites: [],\n    resourcesObjects: {},\n    pagesStructure: [],\n    pluginsStructure: [],\n    loadedWebsite: '',\n    error: null,\n    loading: false,\n    currentPage: '',\n    currentPlugin: '',\n    domainNotOk: false,\n    customDomainNotOk: false,\n    storage: 0,\n    images: [],\n    uploadingImage: false,\n    currentBoxInPlugin: '',\n    currentImage: '',\n    sizeIsChanging: false,\n    currentWebsite: '',\n    notSavedResources: [],\n    pageZoom: 100,\n    hoveredElementId: null,\n    hoveredElementSize: {},\n    isRefreshing: false,\n    userId: null,\n    barSizes: {\n        height: 200,\n        width: 500,\n        width2: 200,\n        width3: 200,\n    },\n    currentTopTab: 'page',\n    findMode: null,\n    hoverMode: '',\n    fromFrame: false,\n    search: {},\n    tooltipsOn: true,\n}\n\nconst saveAllWebsitesDataFromServer = (state, action) => {\n    return {\n        ...state,\n        ...action.data,\n        domainNotOk: false,\n        customDomainNotOk: false,\n        currentPage:\n            action.data.currentPage ||\n            (state.resourcesObjects[state.currentPage]\n                ? state.currentPage\n                : ''),\n        hoveredElementSize: {},\n        barSizes: { ...state.barSizes, ...action.data.barSizes },\n        currentWebsite: action.data.loadedWebsite || state.currentWebsite,\n    }\n}\n\nconst saveHoveredElementRect = (state, action) => {\n    const checkAndCreatePath = (path, index, parent) => {\n        if (index < path.length - 1) {\n            if (!parent[path[index].id]) {\n                parent[path[index].id] = {\n                    plugin: path[index].plugin,\n                    children: {},\n                }\n            }\n            checkAndCreatePath(\n                action.path,\n                index + 1,\n                parent[path[index].id].children\n            )\n        } else {\n            parent[path[index].id] = {\n                plugin: path[index].plugin,\n                children: {},\n                ...action.size,\n            }\n        }\n    }\n    if (action.path.length > 0)\n        checkAndCreatePath(action.path, 0, state.hoveredElementSize)\n}\n\nconst removeFromHoveredSizes = (state, action) => {\n    // ,\n    // removedElements,\n    const checkAndRemoveElement = parent => {\n        for (const item in parent) {\n            if (parent[item].plugin === action.currentResource) {\n                for (const child in parent[item].children) {\n                    if (action.removedElements.includes(child))\n                        delete parent[item].children[child]\n                }\n            } else {\n                checkAndRemoveElement(parent.children)\n            }\n        }\n    }\n    checkAndRemoveElement(state.hoveredElementSize)\n}\n\nconst toggleFindMode = (state, action) => {\n    if (action.value) {\n        if (state.findMode === action.value) {\n            state.findMode = null\n        } else {\n            state.findMode = action.value\n        }\n    } else {\n        state.findMode = null\n    }\n}\n\nconst reducer = createReducer(initialState, {\n    SAVE_ALL_WEBSITES_DATA_FROM_SERVER: (state, action) =>\n        saveAllWebsitesDataFromServer(state, action),\n    CHOOSE_WEBSITE: (state, action) => {\n        state.currentWebsite = action.id\n    },\n\n    ACTION_START_IMAGE_UPLOAD: (state, action) =>\n        images.actionStartImageUpload(state),\n    ACTION_FAIL_IMAGE_UPLOAD: (state, action) =>\n        images.actionFailImageUpload(state, action),\n    ACTION_SUCCESS_IMAGE_UPLOAD: (state, action) =>\n        images.actionSuccessImageUpload(state),\n    CHOOSE_IMAGE: (state, action) => images.chooseImage(state, action),\n\n    SAVE_IMAGE_AND_SIZE_IN_REDUX: (state, action) => {\n        state.images = action.images || state.images\n        state.storage = action.storage || state.storage\n    },\n\n    SIZE_IS_CHANGING: (state, action) => {\n        state.sizeIsChanging = action.isChanging\n    },\n\n    ACTION_START: (state, action) => {\n        state.error = null\n        state.pagesLoading = true\n    },\n    ACTION_FAIL: (state, action) => {\n        state.error = action.error\n        state.pagesLoading = false\n    },\n    ACTION_SUCCESS: (state, action) => {\n        state.error = null\n        state.pagesLoading = false\n    },\n\n    ADD_RESOURCE_SUCCESS: (state, action) =>\n        resources.addResourceSuccess(state, action),\n    DELETE_RESOURCE_SUCCESS: (state, action) =>\n        resources.deleteResourceSuccess(state, action),\n    SAVE_RESOURCES_STRUCTURE_SUCCESS: (state, action) =>\n        resources.saveResourcesStructureSuccess(state, action),\n    SET_CURRENT_RESOURCE: (state, action) =>\n        resources.setCurrentResource(state, action),\n    SAVE_RESOURCE_IN_STATE: (state, action) =>\n        resources.saveResourceInState(state, action),\n    REMOVE_RESOURCE_FROM_UNSAVED: (state, action) =>\n        resources.removeResourceFromUnsaved(state, action),\n    SAVE_RESOURCE_DRAFT_IN_STATE: (state, action) =>\n        resources.saveResourceDraftInState(state, action),\n    ADD_RESOURCE_VERSION: (state, action) =>\n        resources.addResourceVersion(state, action),\n    UNDO_RESOURCE_VERSION: (state, action) =>\n        resources.undoResourceVersion(state, action),\n    REDO_RESOURCE_VERSION: (state, action) =>\n        resources.redoResourceVersion(state, action),\n\n    CHOOSE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.chooseBoxInPlugin(state, action),\n    ADD_BOX_IN_PLUGIN: (state, action) => plugins.addBoxInPlugin(state, action),\n    DELETE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.deleteBoxInPlugin(state, action),\n    DUPLICATE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.duplicateBoxInPlugin(state, action),\n    CHANGE_BOX_PROPERTY_IN_PLUGIN: (state, action) =>\n        plugins.changeBoxPropertyInPlugin(state, action),\n    SAVE_STRUCTURE_IN_PLUGIN: (state, action) =>\n        plugins.saveStructureInPlugin(state, action),\n\n    AUTH_START: (state, action) => auth.authStart(state),\n    AUTH_SUCCESS: (state, action) => auth.authSuccess(state, action),\n    AUTH_FAIL: (state, action) => auth.authFail(state, action),\n    AUTH_LOGOUT: (state, action) => auth.authLogout(state),\n    CHANGE_BAR_SIZE: (state, action) => auth.changeBarSize(state, action),\n    SET_CURRENT_TOP_TAB: (state, action) => {\n        state.currentTopTab = action.currentTopTab\n    },\n\n    SAVE_HOVERED_ELEMENT_RECT: (state: Object, action: Object) =>\n        saveHoveredElementRect(state, action),\n    REMOVE_FROM_HOVERED_SIZES: (state: Object, action: Object) =>\n        removeFromHoveredSizes(state, action),\n    HOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = action.id\n        state.hoverMode = action.mode\n        state.fromFrame = action.fromFrame\n    },\n    UNHOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = null\n        state.fromFrame = false\n    },\n    TOGGLE_FIND_MODE: (state: Object, action: Object) =>\n        toggleFindMode(state, action),\n    MARK_REFRESHING: (state: Object, action: Object) => {\n        state.isRefreshing = action.refreshing\n    },\n    SWITCH_TOOLTIPS: (state: Object) => {\n        state.tooltipsOn = !state.tooltipsOn\n    },\n})\n\nexport default reducer\n","import { initialState } from './reducer'\n\nexport const actionStartImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: true,\n})\n\nexport const actionSuccessImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: false,\n})\n\nexport const actionFailImageUpload = (state: Object, action: Object) => ({\n    ...state,\n    error: action.error,\n    loadng: false,\n})\n\nexport const chooseImage = (state: Object = initialState, action: Object) => {\n    state.currentImage = action.image\n}\n","export const authStart = (state: Object) => {\n    state.loading = true\n    state.error = null\n}\n\nexport const authFail = (state: Object, action: Object) => {\n    state.loading = false\n    state.error = action.error\n    state.userId = null\n}\n\nexport const authLogout = (state: Object) => {\n    state.userId = null\n}\n\nexport const authSuccess = (state: Object, action: Object) => {\n    state.userId = action.data._id\n    state.error = null\n    state.loading = false\n    state.storage = action.data.storage\n    state.images = action.data.images\n    state.barSizes = { ...state.barSizes, ...action.data.barSizes }\n}\n\nexport const changeBarSize = (state: Object, action: Object) => {\n    state.barSizes[action.key] = action.value\n}\n","import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Logout from './containers/Auth/Logout/Logout'\nimport asyncComponent from './hoc/asyncComponent'\nimport * as actions from './store/actions/index'\nimport Auth from './containers/Auth/Auth'\nimport Spinner from './components/UI/Spinner/Spinner'\n\nimport { initialState } from './store/reducer/reducer'\n\nconst asyncSiteBuilder = asyncComponent(() => {\n    return import('./containers/SiteBuilder/SiteBuilder')\n})\n\ntype Props = {\n    onTryAutoSignup: Function,\n    isAuthenticated: boolean,\n    loading: typeof initialState.loading,\n}\n\nclass App extends Component<Props> {\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        let routes = (\n            <Switch>\n                <Route path=\"/login\" component={Auth} />\n                {/* <Route path=\"/signup\" component={Auth} /> */}\n                {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                <Redirect to=\"/login\" />\n            </Switch>\n        )\n        if (this.props.isAuthenticated) {\n            routes = (\n                <div style={{ height: '100%' }}>\n                    <Switch>\n                        <Route path=\"/editor\" component={asyncSiteBuilder} />\n                        <Route path=\"/logout\" component={Logout} />\n                        {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                        <Redirect to=\"/editor\" />\n                    </Switch>\n                </div>\n            )\n        }\n        return (\n            <>\n                {routes} {this.props.loading ? <Spinner cover /> : null}\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthenticated: state.userId !== null,\n        loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport axios from 'axios'\n\nimport './index.css'\nimport App from './App'\n//import * as serviceWorker from './serviceWorker';\nimport reducer from './store/reducer/reducer'\nimport { logout } from './store/actions/index'\n// $FlowFixMe\nimport 'react-sortable-tree/style.css'\n\n// const composeEnhancers =\n//     process.env.NODE_ENV === 'development'\n//         ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n//         : null || compose\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://api.websiter.dev:5000'\n} else {\n    axios.defaults.baseURL = 'https://api.websiter.dev'\n}\n\nexport const store = createStore(\n    reducer,\n    composeEnhancers\n        ? composeEnhancers(applyMiddleware(thunk))\n        : applyMiddleware(thunk)\n)\n\n// set axios interceptors\naxios.interceptors.request.use(function(config) {\n    if (localStorage.getItem('currentAction')) {\n        // $FlowFixMe\n        config.headers.currentAction = localStorage.getItem('currentAction')\n        localStorage.setItem(\n            'currentAction',\n            (parseInt(localStorage.getItem('currentAction')) + 1).toString()\n        )\n    }\n    return config\n})\n\naxios.interceptors.response.use(\n    function(response: { data: mixed }) {\n        // $FlowFixMe\n        if (response.headers['x-auth-token'])\n            axios.defaults.headers.common['x-auth-token'] =\n                // $FlowFixMe\n                response.headers['x-auth-token']\n        return response\n    },\n    function(error) {\n        if (error.response) {\n            if (parseInt(error.response.status) === 412) {\n                store.dispatch(logout())\n            }\n        }\n        return Promise.reject(error)\n    }\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\nconst inIframe = window.self !== window.top\n\nconst root = document.getElementById('root')\nif (root !== null && !inIframe) {\n    ReactDOM.render(app, root)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports.structure = {\n    page: 'pagesStructure',\n    plugin: 'pluginsStructure',\n}\n\nmodule.exports.current = {\n    page: 'currentPage',\n    plugin: 'currentPlugin',\n}\n","import * as actions from './index'\nimport { isEqual, omit, isObject, isEmpty, cloneDeep } from 'lodash'\n\nimport type {\n    initialStateType,\n    resourceType,\n} from '../../store/reducer/reducer'\n\nconst findElementIndex = (draft: resourceType): number => {\n    if (!draft.currentBox) return -1\n    if (draft.currentBox.length < 1) return -1\n    return draft.structure.findIndex(item => item.id === draft.currentBox)\n}\n\nconst findRouteElements = (\n    draft: resourceType,\n    mode: 'plugin' | 'page'\n): Array<number> => {\n    const result = []\n    if (mode === 'plugin') {\n        result.push(0)\n    } else if (mode === 'page') {\n        draft.structure.forEach((item, index) => {\n            if (item.path.length < 2) result.push(index)\n        })\n    }\n    return result\n}\n\nexport const saveElementsStructure = (\n    structure: $PropertyType<resourceType, 'structure'>,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft || !structure) return\n    const draft = { ...resourceDraft, structure }\n\n    const isNotForHistory = isEqual(\n        resourceDraft.structure.map(item => omit(item, ['expanded'])),\n        structure.map(item => omit(item, ['expanded']))\n    )\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const chooseBox = (\n    item: string,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !item || !resourceDraft) return\n    const draft = { ...resourceDraft, currentBox: item }\n    dispatch(actions.addResourceVersion(currentResource, draft, true))\n    dispatch(unhoverBox())\n}\n\nexport const changeBoxProperty = (\n    key: string | {},\n    value: any,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    isNotForHistory?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !key || !resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            {\n                ...resourceDraft.structure[elementIndex],\n                ...changes,\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const saveHoveredElementRect = (path: Array<string>, size: Object) => ({\n    type: 'SAVE_HOVERED_ELEMENT_RECT',\n    path,\n    size,\n})\n\nconst deleteFromHoveredSizes = (currentResource, removedElements) => ({\n    type: 'REMOVE_FROM_HOVERED_SIZES',\n    currentResource,\n    removedElements,\n})\n\nconst expandAllParents = (\n    id: string,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const box = resourceDraft.structure.find(item => item.id === id)\n    if (!box) return\n\n    const draft = cloneDeep(resourceDraft)\n\n    box.path.forEach(item => {\n        const element = draft.structure.find(element => element.id === item)\n        if (element) element.expanded = true\n    })\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const hoverBox = (id: string, mode: string, fromFrame?: boolean) => ({\n    type: 'HOVER_ELEMENT',\n    id,\n    mode,\n    fromFrame,\n})\n\nexport const unhoverBox = () => ({\n    type: 'UNHOVER_ELEMENT',\n})\n\nexport const toggleFindMode = (value?: string) => ({\n    type: 'TOGGLE_FIND_MODE',\n    value,\n})\n\nexport const addBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    type?: 'children' | 'inside' | 'text'\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    let putInside\n    if (mode === 'plugin') {\n        if (elementIndex <= 0) {\n            elementIndex = 0\n            putInside = true\n        }\n    } else if (mode === 'page') {\n        if (elementIndex < 1) {\n            elementIndex = routeElements[routeElements.length - 1]\n        }\n        if (resourceDraft.structure[elementIndex].path.length < 2) {\n            putInside = true\n        }\n    }\n\n    const element = resourceDraft.structure[elementIndex]\n    if (element.isChildren) {\n        putInside = false\n    } else if (element.childrenTo) {\n        putInside = true\n    } else {\n        if (type === 'inside') putInside = true\n    }\n\n    if (type === 'inside') putInside = true\n\n    const newId = `element_${resourceDraft.currentId}`\n    const newCurrentId = resourceDraft.currentId + 1\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n            {\n                id: newId,\n                path: putInside\n                    ? [\n                          ...resourceDraft.structure[elementIndex].path,\n                          resourceDraft.structure[elementIndex].id,\n                      ]\n                    : [...resourceDraft.structure[elementIndex].path],\n                tag:\n                    type === 'text'\n                        ? 'text'\n                        : type === 'children'\n                        ? 'New children'\n                        : 'div',\n                textMode: 'text',\n                text: type === 'text',\n                textContent: '',\n                isChildren: type === 'children',\n                properties: {},\n                propertiesString: '',\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        currentId: newCurrentId,\n        currentBox: newId,\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const deleteBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    withChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    let draft = {}\n    const removedElements = [elementId]\n    if (withChildren) {\n        draft = {\n            ...resourceDraft,\n            structure: resourceDraft.structure.filter(item => {\n                const notRemove =\n                    elementId !== item.id && !item.path.includes(elementId)\n                if (!notRemove) removedElements.push(item.id)\n                return notRemove\n            }),\n        }\n    } else {\n        const newPageStructure = resourceDraft.structure.map(item => ({\n            ...item,\n            path: item.path.filter(pathItem => pathItem !== elementId),\n        }))\n\n        draft = {\n            ...resourceDraft,\n            structure: [\n                ...newPageStructure.slice(0, elementIndex),\n                ...newPageStructure.slice(elementIndex + 1),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n    dispatch(deleteFromHoveredSizes(currentResource, removedElements))\n}\n\nexport const duplicateBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    withChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const sourceChildren = resourceDraft.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `element_${resourceDraft.currentId}`\n    let draft = { currentId: resourceDraft.currentId + 1 }\n\n    if (withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        const newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `element_${draft.currentId}`\n                draft.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    // $FlowFixMe\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...newChildren,\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    } else {\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const splitText = (\n    start: number,\n    end: number,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    let newId\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n    if (textContent1.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent1,\n            id: newId,\n        })\n    }\n\n    if (textContent2.length > 0 || textContent1.length === 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const textToSpan = (\n    start: number,\n    end: number,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let newId\n    let draft = { currentId: resourceDraft.currentId }\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n\n    const spanId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        id: spanId,\n        path: [...resourceDraft.structure[elementIndex].path],\n        tag: 'span',\n        text: false,\n        textContent: '',\n        style: '',\n        properties: {},\n    })\n\n    newId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        ...resourceDraft.structure[elementIndex],\n        path: [...resourceDraft.structure[elementIndex].path, spanId],\n        textContent: textContent1,\n        id: newId,\n    })\n\n    if (textContent2.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n// Menu\nexport const chooseMenuItem = (\n    id: string,\n    resourceId: string,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n    if (!resource) return\n    dispatch(\n        changeBoxProperty('currentMenuItem', id, resourceId, resource, true)\n    )\n}\n\nexport const changeMenuItemProperty = (\n    key: string,\n    value: string,\n    resourceId: string,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n\n    if (!resource) return\n    const elementIndex = findElementIndex(resource)\n    if (elementIndex < 0) return\n    if (!resource.structure[elementIndex].menuItems) return\n    const newMenuItems = resource.structure[elementIndex].menuItems.map(\n        item => {\n            if (item.id === resource.structure[elementIndex].currentMenuItem) {\n                return { ...item, [key]: value }\n            } else {\n                return item\n            }\n        }\n    )\n    if (!isEqual(newMenuItems, resource.structure[elementIndex].menuItems)) {\n        dispatch(\n            changeBoxProperty('menuItems', newMenuItems, resourceId, resource)\n        )\n    }\n}\nexport const markRefreshing = (refreshing: boolean) => ({\n    type: 'MARK_REFRESHING',\n    refreshing,\n})\n\nexport const mergeBoxToPlugin = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    websiteId: $PropertyType<initialStateType, 'loadedWebsite'>,\n    mode: 'page' | 'plugin',\n    onlyChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (\n        elementIndex <= 0 ||\n        (!onlyChildren && routeElements.includes(elementIndex))\n    )\n        return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    let currentId = 1\n    const newResourcesIds = ['element_0']\n    const oldResourcesIds = ['element_0']\n\n    const resourceDataStructure = resourceDraft.structure\n        .filter(\n            item =>\n                (!onlyChildren && item.id === elementId) ||\n                item.path.includes(elementId)\n        )\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = { ...item, id: `element_${currentId}` }\n            if (item.id === elementId) {\n                newItem.path = ['element_0']\n            } else {\n                newItem.path = [\n                    'element_0',\n                    ...newItem.path.slice(\n                        newItem.path.indexOf(elementId) + (onlyChildren ? 1 : 0)\n                    ),\n                ]\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: item.path.map(\n                id => newResourcesIds[oldResourcesIds.indexOf(id)]\n            ),\n        }))\n    if (resourceDataStructure.length === 0) return\n    const resourceData = {\n        structure: [\n            {\n                id: 'element_0',\n                path: [],\n                tag: 'Main element',\n                properties: {},\n                propertiesString: '',\n            },\n            ...resourceDataStructure,\n        ],\n        currentId,\n    }\n\n    dispatch(\n        actions.addResource(\n            websiteId,\n            '',\n            'plugin',\n            false,\n            resourceData,\n            data => {\n                if (data.newResourceName) {\n                    const draft = {\n                        ...resourceDraft,\n                        structure: [\n                            ...resourceDraft.structure.slice(\n                                0,\n                                elementIndex + (onlyChildren ? 1 : 0)\n                            ),\n                            {\n                                ...resourceDraft.structure[elementIndex],\n                                path: [\n                                    ...resourceDraft.structure[elementIndex]\n                                        .path,\n                                    ...(onlyChildren\n                                        ? [\n                                              resourceDraft.structure[\n                                                  elementIndex\n                                              ].id,\n                                          ]\n                                        : []),\n                                ],\n                                tag: data.newResourceName,\n                                text: false,\n                                textContent: '',\n                                properties: {},\n                                id: oldResourcesIds[1],\n                            },\n                            ...resourceDraft.structure.slice(\n                                elementIndex + resourceDataStructure.length\n                            ),\n                        ],\n                    }\n                    dispatch(actions.addResourceVersion(currentResource, draft))\n                }\n            }\n        )\n    )\n}\n\nexport const dissolvePluginToBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    pluginsStructure: $PropertyType<initialStateType, 'pluginsStructure'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const plugin = pluginsStructure.find(\n        item => item.name === resourceDraft.structure[elementIndex].tag\n    )\n    if (!plugin) return\n\n    const pluginResource = isEmpty(resourcesObjects[plugin.id].present)\n        ? resourcesObjects[plugin.id].draft\n        : resourcesObjects[plugin.id].present\n\n    let currentId = resourceDraft.currentId\n    const newResourcesIds = []\n    const oldResourcesIds = []\n\n    const pluginDataStructure = pluginResource.structure\n        .filter(item => item.path.length > 0)\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = {\n                ...item,\n                id: `element_${currentId}`,\n                path: [...item.path.slice(1)],\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: [\n                ...resourceDraft.structure[elementIndex].path,\n                ...item.path.map(\n                    id => newResourcesIds[oldResourcesIds.indexOf(id)]\n                ),\n            ],\n        }))\n\n    const draft = {\n        ...resourceDraft,\n        currentId,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...pluginDataStructure,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n/////////////////////OLDOLDOLDOLDOLD\n// export const changeElementStyleValue = (\n//     index: number,\n//     key: string,\n//     value: any,\n//     elementId: string\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_STYLE_VALUE,\n//     index,\n//     key,\n//     value,\n//     elementId,\n// })\n\n// export const addElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.ADD_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const deleteElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.DELETE_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const changeElementPropertyValue = (\n//     value: any,\n//     key: string,\n//     isSection?: boolean,\n//     isNotForHistory?: boolean\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_PROPERTY_VALUE,\n//     value,\n//     key,\n//     isSection,\n//     isNotForHistory,\n// })\n\n// export const builderZoomOut = () => ({ type: actionTypes.BUILDER_ZOOM_OUT })\n// export const builderZoomIn = () => ({ type: actionTypes.BUILDER_ZOOM_IN })\n// export const builderZoomReset = () => ({ type: actionTypes.BUILDER_ZOOM_RESET })\n\n// export const saveToHistory = () => ({ type: actionTypes.SAVE_TO_HISTORY })\n\n// export const loadCurrentPageToBuilder = (\n//     _id: ?string,\n//     resourcesObjects?: Object,\n//     pageObject?: Object\n// ) => ({\n//     type: actionTypes.LOAD_CURRENT_PAGE_TO_BUILDER,\n//     _id,\n//     resourcesObjects,\n//     pageObject,\n// })\n","import axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\n\nimport * as actions from './index'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nconst cookies = new Cookies()\n\nexport const authStart = () => ({\n    type: 'AUTH_START',\n})\n\nexport const authSuccess = (data: Object) => ({\n    type: 'AUTH_SUCCESS',\n    data,\n})\n\nexport const authFail = (error: string) => ({\n    type: 'AUTH_FAIL',\n    error,\n})\n\nexport const deleteStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const deleteSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const deleteFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const deleteUser = () => (dispatch: Object) => {\n    dispatch(deleteStart())\n    return axios\n        .delete('/api/users')\n        .then(response => {\n            dispatch(logout())\n            dispatch(deleteSuccess())\n        })\n        .catch(err => {\n            dispatch(deleteFail(err.message))\n        })\n}\n\nexport const logout = (all?: boolean) => {\n    if (!all) {\n        cookies.remove('auth_token')\n        axios.defaults.headers.common['x-auth-token'] = null\n        return {\n            type: 'AUTH_LOGOUT',\n        }\n    } else {\n        return axios\n            .post('/api/auth/logoutall')\n            .then(response => {\n                cookies.remove('auth_token')\n                axios.defaults.headers.common['x-auth-token'] = null\n                return {\n                    type: 'AUTH_LOGOUT',\n                }\n            })\n            .catch(err => {})\n    }\n}\n\n// export const auth = (email: string, password: string, isSignup?: boolean) => (\n//     dispatch: Object\n// ) => {\n//     dispatch(authStart())\n//     const authData = {\n//         email,\n//         password,\n//     }\n\n//     let url = '/api/users'\n//     if (!isSignup) {\n//         url = '/api/auth'\n//     }\n//     axios.defaults.headers.post['Content-Type'] = 'application/json'\n//     axios.defaults.headers.put['Content-Type'] = 'application/json'\n//     axios.defaults.headers.delete['Content-Type'] = 'application/json'\n//     axios.defaults.headers.common.Accept = 'application/json'\n\n//     return axios\n//         .post(url, JSON.stringify(authData))\n//         .then(response => {\n//             localStorage.setItem('token', response.data.token)\n//             localStorage.setItem('userId', response.data._id)\n//             localStorage.setItem('currentAction', response.data.currentAction)\n//             axios.defaults.headers.common['x-auth-token'] = response.data.token\n//             dispatch(authSuccess(response.data))\n//             dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n//         })\n//         .catch(err => {\n//             dispatch(authFail(err.message))\n//         })\n// }\n\nexport const authCheckState = () => (dispatch: Object) => {\n    const token = cookies.get('auth_token')\n    const rememberMe = cookies.get('rememberme')\n    if (rememberMe) {\n        cookies.remove('rememberme', {\n            path: '/',\n        })\n        if (rememberMe === 'false') {\n            cookies.remove('auth_token', {\n                path: '/',\n            })\n        }\n    }\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n\n    if (!token || !userId) {\n        dispatch(logout())\n    } else {\n        axios.defaults.headers.common['x-auth-token'] = token\n        dispatch(authStart())\n        return axios\n            .get('/api/users')\n            .then(response => {\n                localStorage.setItem(\n                    'currentAction',\n                    response.data.currentAction\n                )\n\n                dispatch(\n                    authSuccess({\n                        ...response.data,\n                        _id: userId._id,\n                    })\n                )\n                dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n            })\n            .catch(err => {\n                dispatch(authFail(err.message))\n            })\n    }\n}\n\nexport const changeBarSizeDo = (key: string, value: number) => ({\n    type: 'CHANGE_BAR_SIZE',\n    key,\n    value,\n})\n\nexport const savePropertiesOnLeave = (\n    barSizes: $PropertyType<initialStateType, 'barSizes'>,\n    tooltipsOn: $PropertyType<initialStateType, 'tooltipsOn'>,\n    currentPage: $PropertyType<initialStateType, 'currentPage'>,\n    currentPlugin: $PropertyType<initialStateType, 'currentPlugin'>\n) => (dispatch: Object) => {\n    return axios\n        .put('/api/users', { barSizes, tooltipsOn, currentPage, currentPlugin })\n        .then(response => {})\n        .catch(err => {})\n}\n\nexport const changeBarSize = (\n    barSizes: $PropertyType<initialStateType, 'barSizes'>,\n    initiator?: { key: string, value: number }\n) => (dispatch: Object) => {\n    const width = window.innerWidth,\n        height = window.innerHeight\n    let value, dif, dif2, value2, value3\n\n    if (!initiator) {\n        if (barSizes.height > height - 50) {\n            dispatch(actions.changeBarSizeDo('height', height - 50))\n        }\n        if (barSizes.width > width - 100) {\n            dispatch(actions.changeBarSizeDo('width', width - 100))\n        }\n        if (barSizes.width + barSizes.width2 > width - 50) {\n            dispatch(\n                actions.changeBarSizeDo('width2', width - barSizes.width - 50)\n            )\n        }\n    } else {\n        switch (initiator.key) {\n            case 'height':\n                value = initiator.value\n                if (value < 50) value = 50\n                if (value > height - 50) value = height - 50\n                dispatch(actions.changeBarSizeDo('height', value))\n                break\n            case 'width':\n                value = initiator.value\n                if (value < 50) value = 50\n                dif = value - barSizes.width\n                value2 = barSizes.width2 - dif\n                value3 = barSizes.width3\n                if (value2 < 50) {\n                    dif2 = value2 - 50\n                    value2 = 50\n                    value3 = barSizes.width3 + dif2\n                    if (value3 < 50) value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value = width - 150\n                    value2 = 50\n                    value3 = 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width2':\n                value2 = initiator.value\n                value = barSizes.width\n                dif = value2 - 50\n                if (dif < 0) {\n                    value = value + dif\n                    if (value < 50) value = 50\n                    dif2 = value - barSizes.width\n                    value3 = barSizes.width3 - dif2\n                    value2 = 50\n                }\n                dif = value + value2 - barSizes.width - barSizes.width2\n                value3 = barSizes.width3 - dif\n                if (value3 < 50) value3 = 50\n                if (value + value2 + value3 + 50 > width) {\n                    value2 = width - value - 100\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width3':\n                value3 = initiator.value\n                value = barSizes.width\n                value2 = barSizes.width2\n                dif = value3 - 50\n                if (dif < 0) {\n                    value2 = value2 + dif\n                    dif2 = value2 - 50\n                    if (dif2 < 0) {\n                        value = value + dif2\n                        if (value < 50) value = 50\n                        value2 = 50\n                    }\n                    value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value3 = width - value - value2 - 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            default:\n                break\n        }\n    }\n}\n\nexport const switchTooltips = () => ({\n    type: 'SWITCH_TOOLTIPS',\n})\n","import axios from 'axios'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nexport const saveAllWebsitesDataFromServer = (data: Object) => ({\n    type: 'SAVE_ALL_WEBSITES_DATA_FROM_SERVER',\n    data,\n})\n\nexport const addWebsite = (\n    duplicate?: boolean,\n    currentWebsite?: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/websites',\n            JSON.stringify(\n                duplicate && currentWebsite\n                    ? {\n                          duplicate,\n                          currentWebsite,\n                      }\n                    : {}\n            )\n        )\n        .then(response => {\n            dispatch(saveAllWebsitesDataFromServer({ ...response.data }))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const loadWebsite = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>,\n    notSavedResources: $PropertyType<initialStateType, 'notSavedResources'>\n) => (dispatch: Object) => {\n    if (_id) {\n        if (notSavedResources.length > 0) {\n            if (\n                !window.confirm(\n                    `Are you sure you want to load another website? All unsaved resources in the current website will be lost. There are ${\n                        notSavedResources.length\n                    } notsaved resources.`\n                )\n            )\n                return\n        }\n        dispatch(actionStart())\n        return axios\n            .get(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const chooseWebsite = (\n    id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => ({\n    type: 'CHOOSE_WEBSITE',\n    id,\n})\n\nexport const verifyCustomDomain = (id: string) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(`/api/websites/verify/${id}`)\n        .then(response => {\n            dispatch(saveAllWebsitesDataFromServer(response.data))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const changeWebsiteProperty = (\n    key: string,\n    value: any,\n    id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    if (id) {\n        dispatch(actionStart())\n        return axios\n            .put(\n                `/api/websites/${id}`,\n                JSON.stringify({\n                    [key]: value,\n                })\n            )\n            .then(response => {\n                dispatch(saveAllWebsitesDataFromServer(response.data))\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const deleteWebsite = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    if (_id) {\n        if (\n            !window.confirm(\n                'Are you sure you want to delete this website? All data in this website will be deleted including pages and plugins. However, your media files will not be removed.'\n            )\n        )\n            return\n        dispatch(actionStart())\n        return axios\n            .delete(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const setSizeIsChanging = (isChanging: boolean) => ({\n    type: 'SIZE_IS_CHANGING',\n    isChanging,\n})\n\n// export const loadGlobalsToStore = (\n//     pagesStructure: pagesStructureType,\n//     resourcesObjects: Object,\n//     currentPage: string\n// ) => ({\n//     type: actionTypes.LOAD_GLOBALS_TO_STORE,\n//     pagesStructure,\n//     resourcesObjects,\n//     currentPage,\n// })\n\nexport const actionStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const actionSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const actionFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const setCurrentTopTab = (currentTopTab: string) => ({\n    type: 'SET_CURRENT_TOP_TAB',\n    currentTopTab,\n})\n","import axios from 'axios'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nconst actionStartImageUpload = () => ({\n    type: 'ACTION_START_IMAGE_UPLOAD',\n})\n\nconst actionSuccessImageUpload = () => ({\n    type: 'ACTION_SUCCESS_IMAGE_UPLOAD',\n})\n\nconst actionFailImageUpload = (error: string) => ({\n    type: 'ACTION_FAIL_IMAGE_UPLOAD',\n    error,\n})\n\nconst getSignedRequest = (\n    file,\n    images: $PropertyType<initialStateType, 'images'>,\n    storage: $PropertyType<initialStateType, 'storage'>,\n    userId: $PropertyType<initialStateType, 'userId'>\n) => (dispatch: Object) => {\n    if (!userId) return\n    let name = userId + '/' + file.name.replace(/([^a-zA-Z0-9\\\\.\\\\-])/g, '_')\n\n    let namePrefix = ''\n    let k = 0\n\n    const checkName = () =>\n        images.findIndex(image => name + namePrefix === image.name)\n    while (checkName() >= 0) {\n        k++\n        namePrefix = '_' + k\n    }\n\n    const fileDetails = {\n        file,\n        name: name + namePrefix,\n        label: file.name + namePrefix,\n        storage,\n        images,\n    }\n\n    return axios\n        .get(\n            `/api/sign-s3?file-name=${name}${namePrefix}&file-type=${\n                file.type\n            }&file-size=${file.size}`\n        )\n        .then(response => {\n            dispatch(\n                uploadFile(\n                    fileDetails,\n                    response.data.signedRequest,\n                    response.data.url\n                )\n            )\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            if (err.response.status === 400) alert(err.response.data)\n        })\n}\n\nconst uploadFile = (fileDetails, signedRequest, url) => (dispatch: Object) => {\n    return axios\n        .put(signedRequest, fileDetails.file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            dispatch(saveImageUrlAndSize(fileDetails, url))\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n        })\n}\n\nconst saveImageUrlAndSize = (fileDetails, url) => (dispatch: Object) => {\n    const fileSize = parseFloat(fileDetails.file.size)\n    const newStorage = fileDetails.storage + fileSize\n    const newImages = [\n        {\n            url,\n            name: fileDetails.name,\n            size: fileSize,\n            label: fileDetails.label,\n        },\n        ...fileDetails.images,\n    ]\n\n    return axios\n        .put('/api/users', { storage: newStorage, images: newImages })\n        .then(response => {\n            dispatch(saveImageUrlAndSizeInRedux(newStorage, newImages))\n            dispatch(actionSuccessImageUpload())\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            //delete from aws?\n        })\n}\n\nconst saveImageUrlAndSizeInRedux = (storage, images) => ({\n    type: 'SAVE_IMAGE_AND_SIZE_IN_REDUX',\n    storage,\n    images,\n})\n\nexport const deleteImage = (url: string) => (dispatch: Object) => {\n    if (\n        window.confirm(\n            'Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.'\n        )\n    ) {\n        dispatch(actionStartImageUpload())\n        return axios\n            .post(\n                `/api/awsImage/deleteimage`,\n                JSON.stringify({\n                    url,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(\n                        response.data.storage,\n                        response.data.images\n                    )\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const renameImage = (url: string) => (dispatch: Object) => {\n    const label = window.prompt('Type a new name for the image.')\n    if (label !== null) {\n        dispatch(actionStartImageUpload())\n\n        return axios\n            .post(\n                `/api/awsImage/renameimage`,\n                JSON.stringify({\n                    url,\n                    label,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(false, response.data.images)\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const chooseImage = (image: string) => ({\n    type: 'CHOOSE_IMAGE',\n    image,\n})\n\nexport const imageUpload = (\n    files: Array<{ type: string, size: number, name: string }>,\n    images: $PropertyType<initialStateType, 'images'>,\n    storage: $PropertyType<initialStateType, 'storage'>,\n    userId: $PropertyType<initialStateType, 'userId'>\n) => (dispatch: Object) => {\n    const file = files[0]\n    if (file == null) {\n        return alert('No file selected.')\n    }\n    if (file.type.split('/')[0] !== 'image') {\n        return alert('File is not an image.')\n    }\n    dispatch(actionStartImageUpload())\n    dispatch(getSignedRequest(file, images, storage, userId))\n}\n","import axios from 'axios'\nimport { isEqual } from 'lodash'\n\nimport { actionStart, actionFail, actionSuccess } from './website'\n\nimport type {\n    initialStateType,\n    resourceType,\n} from '../../store/reducer/reducer'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nexport const addResource = (\n    websiteId: $PropertyType<initialStateType, 'loadedWebsite'>,\n    currentResourceId: $PropertyType<initialStateType, 'currentPage'>,\n    resourceType: 'page' | 'plugin',\n    duplicate?: boolean,\n    resourceData?: resourceType,\n    callback?: Function\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/resources',\n            JSON.stringify({\n                websiteId,\n                currentResourceId,\n                duplicate,\n                type: resourceType,\n                resourceData,\n            })\n        )\n        .then(response => {\n            dispatch(addResourceSuccess(response.data, resourceType))\n            if (callback) callback(response.data)\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst addResourceSuccess = (data: Object, resourceType: 'page' | 'plugin') => ({\n    type: 'ADD_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const deleteResource = (\n    currentResourceId: $PropertyType<initialStateType, 'currentPage'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    if (!currentResourceId) return\n    if (\n        !window.confirm(`Are you sure you want to delete this ${resourceType}?`)\n    )\n        return\n    dispatch(actionStart())\n    return axios\n        .delete(`/api/resources/${currentResourceId}`, {\n            params: { type: resourceType },\n        })\n        .then(response => {\n            dispatch(deleteResourceSuccess(response.data, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst deleteResourceSuccess = (\n    data: Object,\n    resourceType: 'page' | 'plugin'\n) => ({\n    type: 'DELETE_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const saveResourcesStructure = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>,\n    newStructure: $PropertyType<initialStateType, 'pagesStructure'>,\n    oldStructure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    const structurePatch = diffpatcher.diff(oldStructure, newStructure)\n    if (!structurePatch) dispatch(actionSuccess())\n    else {\n        return axios\n            .put(\n                `/api/websites/structure/${_id}`,\n                JSON.stringify({ structurePatch, type: resourceType })\n            )\n            .then(response => {\n                dispatch(\n                    saveResourcesStructureSuccess(newStructure, resourceType)\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nconst saveResourcesStructureSuccess = (\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => ({\n    type: 'SAVE_RESOURCES_STRUCTURE_SUCCESS',\n    structure,\n    resourceType,\n})\n\nexport const chooseResource = (\n    _id: string,\n    resourceType: 'plugin' | 'page'\n) => ({\n    type: 'SET_CURRENT_RESOURCE',\n    _id,\n    resourceType,\n})\n\nexport const saveResource = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>,\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    const present = resourcesObjects[currentResource].present\n    const draft = resourcesObjects[currentResource].draft\n    if (isEqual(present, {})) return\n    dispatch(actionStart())\n    const resourcePatch = diffpatcher.diff(draft, present)\n\n    return axios\n        .put(\n            `/api/resources/${currentResource}`,\n            JSON.stringify({ resourcePatch, structure, type: resourceType })\n        )\n        .then(response => {\n            dispatch(saveResourceInState(currentResource, present))\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst saveResourceInState = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType\n) => ({\n    type: 'SAVE_RESOURCE_IN_STATE',\n    currentResource,\n    draft,\n})\n\nconst saveResourceDraftInState = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType\n) => ({\n    type: 'SAVE_RESOURCE_DRAFT_IN_STATE',\n    currentResource,\n    draft,\n})\n\nexport const publishRevertResource = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin',\n    revert: ?boolean,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .put(\n            `/api/resources/publish/${currentResource}`,\n            JSON.stringify({ structure, type: resourceType, revert })\n        )\n        .then(response => {\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            if (response.data.draft) {\n                dispatch(\n                    saveResourceDraftInState(\n                        currentResource,\n                        response.data.draft\n                    )\n                )\n                dispatch(\n                    addResourceVersion(currentResource, response.data.draft)\n                )\n                dispatch(removeResourceFromUnsaved(currentResource))\n            }\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const revertResourceToSaved = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    dispatch(\n        addResourceVersion(\n            currentResource,\n            resourcesObjects[currentResource].draft\n        )\n    )\n    dispatch(removeResourceFromUnsaved(currentResource))\n}\n\nconst removeResourceFromUnsaved = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>\n) => ({\n    type: 'REMOVE_RESOURCE_FROM_UNSAVED',\n    currentResource,\n})\n\nexport const addResourceVersion = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType,\n    isNotForHistory?: boolean\n) => ({\n    type: 'ADD_RESOURCE_VERSION',\n    currentResource,\n    draft,\n    isNotForHistory,\n})\n\nexport const undoResourceVersion = () => ({\n    type: 'UNDO_RESOURCE_VERSION',\n})\n\nexport const redoResourceVersion = () => ({\n    type: 'REDO_RESOURCE_VERSION',\n})\n\nexport const chooseBoxInPlugin = (item: string, ctrl?: boolean) => ({\n    type: 'CHOOSE_BOX_IN_PLUGIN',\n    item,\n})\n\nexport const addBoxInPlugin = (text: boolean) => ({\n    type: 'ADD_BOX_IN_PLUGIN',\n    text,\n})\n\nexport const deleteBoxInPlugin = (withChildren: boolean) => ({\n    type: 'DELETE_BOX_IN_PLUGIN',\n    withChildren,\n})\nexport const duplicateBoxInPlugin = (withChildren: boolean) => ({\n    type: 'DUPLICATE_BOX_IN_PLUGIN',\n    withChildren,\n})\n\nexport const changeBoxPropertyInPlugin = (key: string, value: any) => ({\n    type: 'CHANGE_BOX_PROPERTY_IN_PLUGIN',\n    key,\n    value,\n})\n\nexport const saveStructureInPlugin = (\n    structure: $PropertyType<initialStateType, 'pagesStructure'>\n) => ({\n    type: 'SAVE_STRUCTURE_IN_PLUGIN',\n    structure,\n})\n","export {\n    chooseBox,\n    // addElementStyleValue,\n    // deleteElementStyleValue,\n    // changeElementStyleValue,\n    // changeElementPropertyValue,\n    addBox,\n    deleteBox,\n    duplicateBox,\n    // builderZoomOut,\n    // builderZoomIn,\n    // builderZoomReset,\n    // saveToHistory,\n    saveElementsStructure,\n    changeBoxProperty,\n    hoverBox,\n    unhoverBox,\n    saveHoveredElementRect,\n    splitText,\n    textToSpan,\n    chooseMenuItem,\n    changeMenuItemProperty,\n    markRefreshing,\n    mergeBoxToPlugin,\n    dissolvePluginToBox,\n    toggleFindMode,\n} from './builder'\n\nexport {\n    logout,\n    authCheckState,\n    deleteUser,\n    changeBarSize,\n    changeBarSizeDo,\n    savePropertiesOnLeave,\n    switchTooltips,\n} from './auth'\n\nexport {\n    addWebsite,\n    loadWebsite,\n    deleteWebsite,\n    setSizeIsChanging,\n    chooseWebsite,\n    changeWebsiteProperty,\n    saveAllWebsitesDataFromServer,\n    setCurrentTopTab,\n    verifyCustomDomain,\n} from './website'\n\nexport { imageUpload, deleteImage, renameImage, chooseImage } from './images'\n\nexport {\n    saveResourcesStructure,\n    addResource,\n    deleteResource,\n    chooseResource,\n    chooseBoxInPlugin,\n    addBoxInPlugin,\n    duplicateBoxInPlugin,\n    deleteBoxInPlugin,\n    changeBoxPropertyInPlugin,\n    saveStructureInPlugin,\n    saveResource,\n    publishRevertResource,\n    revertResourceToSaved,\n    addResourceVersion,\n    undoResourceVersion,\n    redoResourceVersion,\n} from './resources'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Div\":\"Checkbox_Div__2PqSf\",\"Input\":\"Checkbox_Input__1KbTF\",\"StyleControls\":\"Checkbox_StyleControls__cb7Ky\",\"Inline\":\"Checkbox_Inline__3XkB8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__2Sex0\",\"load3\":\"Spinner_load3__jNmcI\",\"Cover\":\"Spinner_Cover__3iRbu\"};","import React from 'react';\nimport type { Node } from 'react'\nimport classes from './LoginButton.module.css';\n\ntype Props = {\n    clicked?: Function,\n    disabled?: boolean,\n    btnType?: 'Success' | 'Danger',\n    children?: Node,\n    datatestid?: string\n}\n\nconst LoginButton = (props: Props) => (\n    <button\n        data-testid={props.datatestid || \"LoginButton\"}\n        disabled={props.disabled}\n        className={[classes.Button, classes[props.btnType]].join(' ')}\n        onClick={props.clicked}>\n        {props.children}\n    </button>\n);\n\nexport default LoginButton;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"LoginButton_Button__2dj44\",\"Success\":\"LoginButton_Success__21MoZ\",\"Danger\":\"LoginButton_Danger__2V7Lr\"};","import { isEmpty } from 'lodash'\n\nexport const checkIfCapital = (char: string) => {\n    if (char === char.toUpperCase() && char !== char.toLowerCase()) {\n        return true\n    }\n}\n\nexport const getCurrentResourceValue = (id: string, resourcesObjects: {}) =>\n    id\n        ? resourcesObjects[id]\n            ? isEmpty(resourcesObjects[id].present)\n                ? resourcesObjects[id].draft\n                : resourcesObjects[id].present\n            : null\n        : null\n\nfunction _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {}\n        var ownKeys = Object.keys(source)\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(\n                        source,\n                        sym\n                    ).enumerable\n                })\n            )\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key])\n        })\n    }\n    return target\n}\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true,\n        })\n    } else {\n        obj[key] = value\n    }\n    return obj\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n    if (source == null) return {}\n    var target = _objectWithoutPropertiesLoose(source, excluded)\n    var key, i\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i]\n            if (excluded.indexOf(key) >= 0) continue\n            if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                continue\n            target[key] = source[key]\n        }\n    }\n    return target\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {}\n    var target = {}\n    var sourceKeys = Object.keys(source)\n    var key, i\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i]\n        if (excluded.indexOf(key) >= 0) continue\n        target[key] = source[key]\n    }\n    return target\n}\n\nexport function buildTree(items) {\n    var buildItem = function buildItem(item) {\n        var path = item.path,\n            data = _objectWithoutProperties(item, ['path'])\n\n        return _objectSpread({}, data, {\n            children: items\n                .filter(function(child) {\n                    return child.path[child.path.length - 1] === item.id\n                })\n                .map(function(child) {\n                    return buildItem(child)\n                }),\n        })\n    }\n\n    var tree = items\n        .filter(function(item) {\n            return item.path.length === 0\n        })\n        .map(function(item) {\n            return buildItem(item)\n        })\n    return tree\n}\n\nexport const getInheritedPropertyName = (value: string) => {\n    const length = value.length\n    if (length > 2) {\n        if (value.charAt(0) === '$' && value.charAt(length - 1) === '$') {\n            return value.substr(1, length - 2)\n        }\n    }\n    return false\n}\n"],"sourceRoot":""}