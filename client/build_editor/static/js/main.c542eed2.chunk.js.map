{"version":3,"sources":["components/UI/Checkbox/Checkbox.js","containers/Auth/Logout/Logout.js","hoc/asyncComponent.js","containers/Auth/Auth.js","components/UI/Spinner/Spinner.js","store/reducer/plugins.js","store/reducer/resources.js","store/reducer/reducer.js","store/reducer/images.js","store/reducer/auth.js","App.js","index.js","utils/resourceTypeIndex.js","store/actions/builder.js","store/actions/auth.js","store/actions/website.js","store/actions/images.js","store/actions/resources.js","store/actions/index.js","components/UI/Checkbox/Checkbox.module.css","components/UI/Spinner/Spinner.module.css","components/UI/LoginButton/LoginButton.js","components/UI/LoginButton/LoginButton.module.css","utils/basic.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1__","_Checkbox_module_css__WEBPACK_IMPORTED_MODULE_1___default","Checkbox","props","a","createElement","className","inline","classes","Div","Inline","join","data-testid","datatestid","type","radio","Input","checked","onChange","e","target","title","children","Logout","this","onLogout","react_default","Redirect","to","Component","connect","dispatch","actions","asyncComponent","importComponent","_Component","_temp","_getPrototypeOf2","_this","Object","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","component","inherits","createClass","key","value","_this2","then","cmp","setState","default","C","cookies","Cookies","Auth","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","cookieConsent","setCookieConsent","useEffect","checkCookieConsent","remeberMeParam","get","Fragment","href","LoginButton","btnType","clicked","set","path","maxAge","window","open","spinner","cover","Cover","Loader","findElementIndex","currentPlugin","resourcesObjects","structure","findIndex","item","id","currentBoxInPlugin","diffpatcher","require","create","objectHash","obj","patchStructure","action","patch","resourceType","structurePatch","initialState","websites","pagesStructure","pluginsStructure","loadedWebsite","error","loading","currentPage","domainNotOk","customDomainNotOk","storage","images","uploadingImage","currentImage","sizeIsChanging","currentWebsite","notSavedResources","pageZoom","hoveredElementId","hoveredElementSize","isRefreshing","userId","barSizes","height","width","width2","width3","currentTopTab","findMode","hoverMode","fromFrame","search","tooltipsOn","shouldRefresh","reducer","createReducer","SAVE_ALL_WEBSITES_DATA_FROM_SERVER","objectSpread","data","saveAllWebsitesDataFromServer","CHOOSE_WEBSITE","ACTION_START_IMAGE_UPLOAD","ACTION_FAIL_IMAGE_UPLOAD","loadng","ACTION_SUCCESS_IMAGE_UPLOAD","CHOOSE_IMAGE","undefined","image","SAVE_IMAGE_AND_SIZE_IN_REDUX","SIZE_IS_CHANGING","isChanging","ACTION_START","pagesLoading","ACTION_FAIL","ACTION_SUCCESS","ADD_RESOURCE_SUCCESS","_id","resource","resources","DELETE_RESOURCE_SUCCESS","deletedResources","forEach","current","SAVE_RESOURCES_STRUCTURE_SUCCESS","SET_CURRENT_RESOURCE","SAVE_RESOURCE_IN_STATE","currentResource","draft","present","filter","REMOVE_RESOURCE_FROM_UNSAVED","SAVE_RESOURCE_DRAFT_IN_STATE","ADD_RESOURCE_VERSION","isEqual","isNotForHistory","connectedResources","tag","checkIfCapital","charAt","push","name","find","includes","past","shift","diff","future","UNDO_RESOURCE_VERSION","delta","pop","unshift","unpatch","REDO_RESOURCE_VERSION","CHOOSE_BOX_IN_PLUGIN","plugins","ADD_BOX_IN_PLUGIN","elementIndex","plugin","newId","currentId","newElement","toConsumableArray","text","textContent","style","styles","splice","DELETE_BOX_IN_PLUGIN","elementId","withChildren","map","pathItem","DUPLICATE_BOX_IN_PLUGIN","_plugin$structure","sourceChildren","newChildren","idMatch","defineProperty","newItemId","CHANGE_BOX_PROPERTY_IN_PLUGIN","SAVE_STRUCTURE_IN_PLUGIN","AUTH_START","auth","AUTH_SUCCESS","AUTH_FAIL","AUTH_LOGOUT","CHANGE_BAR_SIZE","SET_CURRENT_TOP_TAB","SAVE_HOVERED_ELEMENT_RECT","checkAndCreatePath","index","parent","size","saveHoveredElementRect","REMOVE_FROM_HOVERED_SIZES","checkAndRemoveElement","child","removedElements","removeFromHoveredSizes","HOVER_ELEMENT","mode","UNHOVER_ELEMENT","TOGGLE_FIND_MODE","toggleFindMode","MARK_REFRESHING","refreshing","SWITCH_TOOLTIPS","MARK_SHOULD_REFRESHING","asyncSiteBuilder","Promise","all","bind","App","onTryAutoSignup","routes","Switch","Route","isAuthenticated","Spinner","withRouter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","axios","defaults","baseURL","store","createStore","applyMiddleware","thunk","currentAction","sessionStorage","getItem","headers","common","interceptors","response","use","_ref","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","reload","setItem","location","Error","abrupt","stop","_x","parseInt","status","reject","app","es","BrowserRouter","src_App","inIframe","self","top","root","document","getElementById","ReactDOM","render","module","exports","page","currentBox","findRouteElements","result","saveElementsStructure","resourceDraft","omit","chooseBox","unhoverBox","changeBoxProperty","deleteFromHoveredSizes","changes","isObject","String","toString","slice","hoverBox","addBox","putInside","routeElements","element","isChildren","childrenTo","newCurrentId","textMode","properties","propertiesString","deleteBox","notRemove","newPageStructure","duplicateBox","splitText","start","end","textContent0","substr","textContent1","textContent2","newElements","textToSpan","console","log","spanId","chooseMenuItem","resourceId","isEmpty","changeMenuItemProperty","menuItems","newMenuItems","currentMenuItem","markRefreshing","markShouldRefreshing","mergeBoxToPlugin","websiteId","onlyChildren","newResourcesIds","oldResourcesIds","resourceDataStructure","newItem","indexOf","resourceData","newResourceName","dissolvePluginToBox","pluginResource","pluginDataStructure","deleteUser","delete","logout","catch","err","message","post","remove","authCheckState","token","rememberMe","jwt","decode","put","Accept","changeBarSizeDo","savePropertiesOnLeave","changeBarSize","initiator","dif","dif2","value2","value3","innerWidth","innerHeight","switchTooltips","addWebsite","duplicate","actionStart","JSON","stringify","actionSuccess","actionFail","loadWebsite","confirm","chooseWebsite","verifyCustomDomain","changeWebsiteProperty","deleteWebsite","setSizeIsChanging","setCurrentTopTab","actionFailImageUpload","uploadFile","fileDetails","signedRequest","url","file","Content-Type","saveImageUrlAndSize","fileSize","parseFloat","newStorage","newImages","label","saveImageUrlAndSizeInRedux","deleteImage","renameImage","prompt","chooseImage","imageUpload","files","alert","split","replace","namePrefix","k","getSignedRequest","addResource","currentResourceId","callback","addResourceSuccess","deleteResource","params","deleteResourceSuccess","saveResourcesStructure","newStructure","oldStructure","saveResourcesStructureSuccess","chooseResource","saveResource","resourcePatch","saveResourceInState","publishRevertResource","revert","saveResourceDraftInState","addResourceVersion","removeResourceFromUnsaved","revertResourceToSaved","undoResourceVersion","redoResourceVersion","d","__webpack_exports__","builder_chooseBox","builder_addBox","builder_deleteBox","builder_duplicateBox","builder_saveElementsStructure","builder_changeBoxProperty","builder_splitText","builder_textToSpan","builder_chooseMenuItem","builder_changeMenuItemProperty","builder_mergeBoxToPlugin","builder_dissolvePluginToBox","auth_logout","auth_authCheckState","auth_deleteUser","auth_changeBarSize","auth_savePropertiesOnLeave","website_addWebsite","website_loadWebsite","website_deleteWebsite","website_changeWebsiteProperty","website_verifyCustomDomain","images_deleteImage","images_renameImage","resources_saveResourcesStructure","resources_addResource","resources_deleteResource","resources_saveResource","resources_publishRevertResource","StyleControls","load3","_LoginButton_module_css__WEBPACK_IMPORTED_MODULE_1__","_LoginButton_module_css__WEBPACK_IMPORTED_MODULE_1___default","disabled","Button","onClick","Success","Danger","getCurrentResourceValue","buildTree","getInheritedPropertyName","lodash__WEBPACK_IMPORTED_MODULE_0__","char","toUpperCase","toLowerCase","_defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","i","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","items","buildItem","ownKeys","sym","getOwnPropertyDescriptor","_objectSpread"],"mappings":"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","file":"static/js/main.c542eed2.chunk.js","sourcesContent":["import React from 'react'\n//import { connect } from 'react-redux';\nimport type { Node } from 'react'\n\n//import * as actions from '../../../store/actions/index';\nimport classes from './Checkbox.module.css'\n//import SmallButton from '../Buttons/SmallButton/SmallButton';\n\ntype Props = {\n    checked?: boolean,\n    title?: string,\n    onChange: Function,\n    datatestid?: string,\n    radio?: boolean,\n    children?: Node,\n    inline?: boolean,\n}\n\nconst Checkbox = (props: Props) => {\n    return (\n        <div\n            className={\n                props.inline\n                    ? [classes.Div, classes.Inline].join(' ')\n                    : classes.Div\n            }\n        >\n            <label>\n                <input\n                    data-testid={props.datatestid}\n                    type={props.radio ? 'radio' : 'checkbox'}\n                    className={classes.Input}\n                    checked={props.checked || false}\n                    onChange={e => props.onChange(e.target.checked)}\n                />\n                {props.title}\n                {props.children}\n            </label>\n            {/* { props.changedStyleValues.includes(props.valueKey) ?\n                <div className={classes.StyleControls}>\n                    <SmallButton \n                        inline\n                        isSection={props.isSection}\n                        value={props.valueKey}\n                        icon='<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\"><path xmlns=\"http://www.w3.org/2000/svg\" d=\"M15 1H9v2h6V1zm4.03 6.39l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-.32-5H6.35c.57 1.62 1.82 2.92 3.41 3.56l-.11-.06 2.03-3.5zm5.97-4c-.57-1.6-1.78-2.89-3.34-3.54L12.26 11h5.39zm-7.04 7.83c.45.11.91.17 1.39.17 1.34 0 2.57-.45 3.57-1.19l-2.11-3.9-2.85 4.92zM7.55 8.99C6.59 10.05 6 11.46 6 13c0 .34.04.67.09 1h4.72L7.55 8.99zm8.79 8.14C17.37 16.06 18 14.6 18 13c0-.34-.04-.67-.09-1h-4.34l2.77 5.13zm-3.01-9.98C12.9 7.06 12.46 7 12 7c-1.4 0-2.69.49-3.71 1.29l2.32 3.56 2.72-4.7z\" ></path></svg>'\n                        buttonClicked=\"transition\" />\n                    <SmallButton\n                        inline\n                        isSection={props.isSection}\n                        value={props.valueKey}\n                        icon='<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" ></path></svg>'\n                        buttonClicked=\"clearStyle\" />\n                </div> : null\n            } */}\n        </div>\n    )\n}\n\nexport default Checkbox\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport * as actions from '../../../store/actions/index'\n\ntype Props = {\n    onLogout: () => {},\n}\n\nclass Logout extends Component<Props> {\n    componentDidMount() {\n        this.props.onLogout()\n    }\n\n    render() {\n        return <Redirect to=\"/login\" />\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(Logout)\n","import React, { Component } from 'react'\n\ntype Props = {}\n\ntype State = {\n    component: Object | null,\n}\n\nconst asyncComponent = (importComponent: Object) => {\n    return class extends Component<Props, State> {\n        state = {\n            component: null,\n        }\n\n        componentDidMount() {\n            importComponent().then(cmp => {\n                this.setState({ component: cmp.default })\n            })\n        }\n\n        render() {\n            const C = this.state.component\n            return C ? <C {...this.props} /> : null\n        }\n    }\n}\n\nexport default asyncComponent\n","import React, { useState, useEffect } from 'react'\n\nimport Checkbox from '../../components/UI/Checkbox/Checkbox'\nimport Cookies from 'universal-cookie'\nimport LoginButton from '../../components/UI/LoginButton/LoginButton'\n\nconst cookies = new Cookies()\n\ntype Props = {\n    test?: boolean,\n}\n\nconst Auth = (props: Props) => {\n    const [state: boolean, setState] = useState(false)\n    const [cookieConsent: boolean, setCookieConsent] = useState(false)\n\n    useEffect(() => {\n        checkCookieConsent()\n    })\n\n    let remeberMeParam = '?rememberme=false'\n    if (state) {\n        remeberMeParam = '?rememberme=true'\n    }\n\n    const checkCookieConsent = () => {\n        const cookiesConsent = cookies.get('cookies_consent')\n        if (cookiesConsent) {\n            setCookieConsent(true)\n        }\n    }\n\n    const agreeWithCookies = () => {\n        cookies.set('cookies_consent', 'true', {\n            path: '/',\n            maxAge: 31530000000,\n        })\n        checkCookieConsent()\n    }\n    return !cookieConsent ? (\n        <>\n            <div>\n                We use cookies only for login purposes. In order to proceed you\n                need to agree with the use of cookies.\n            </div>\n            <LoginButton btnType=\"Success\" clicked={agreeWithCookies}>\n                AGREE\n            </LoginButton>\n            <LoginButton\n                btnType=\"Danger\"\n                clicked={() => {\n                    window.open('https://websiter.dev', '_self')\n                }}\n            >\n                Return to the homepage\n            </LoginButton>\n        </>\n    ) : (\n        <>\n            {process.env.NODE_ENV !== 'development' ? (\n                <div>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/google/start' +\n                            remeberMeParam\n                        }\n                    >\n                        GOOGLE\n                    </a>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/facebook/start' +\n                            remeberMeParam\n                        }\n                    >\n                        FACEBOOK\n                    </a>\n                    <a\n                        href={\n                            'https://my.websiter.dev/api/auth/twitter/start' +\n                            remeberMeParam\n                        }\n                    >\n                        TWITTER\n                    </a>\n                </div>\n            ) : (\n                <div>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/google/start' +\n                            remeberMeParam\n                        }\n                    >\n                        GOOGLE\n                    </a>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/facebook/start' +\n                            remeberMeParam\n                        }\n                    >\n                        FACEBOOK\n                    </a>\n                    <a\n                        href={\n                            'http://my.websiter.dev:5000/api/auth/twitter/start' +\n                            remeberMeParam\n                        }\n                    >\n                        TWITTER\n                    </a>\n                </div>\n            )}\n            <Checkbox\n                title=\"Remember me\"\n                checked={state}\n                onChange={() => setState(!state)}\n            />\n        </>\n    )\n}\nexport default Auth\n","import React from 'react'\nimport classes from './Spinner.module.css'\n\ntype Props = {\n    cover?: boolean,\n    datatestid?: string,\n}\n\nconst spinner = (props: Props) => (\n    <>\n        {props.cover ? (\n            <div\n                className={classes.Cover}\n                data-testid={props.datatestid || 'cover'}\n            >\n                <div className={classes.Loader}>Loading...</div>\n            </div>\n        ) : (\n            <div className={classes.Loader}>Loading...</div>\n        )}\n    </>\n)\n\nexport default spinner\n","import { omit } from 'lodash'\nimport { initialState } from './reducer'\n\nconst findElementIndex = (state: Object): number => {\n    if (state.currentPlugin.length < 1) return -1\n    const plugin = state.resourcesObjects[state.currentPlugin]\n    return plugin.value.structure.findIndex(\n        item => item.id === state.currentBoxInPlugin\n    )\n}\n\nexport const savePluginsStructureToStore = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    ...omit(action, ['type']),\n    urlNotValid: false,\n})\n\nexport const choosePlugin = (state: Object = initialState, action: Object) => {\n    state.currentPlugin = action.id\n}\n\nexport const deletePluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const newresourcesObjects = { ...state.resourcesObjects }\n    for (let i in newresourcesObjects) {\n        const isDeleted = !action.pluginsStructure.some(\n            item => item.id.toString() === i.toString()\n        )\n        if (isDeleted) {\n            delete newresourcesObjects[i]\n        }\n    }\n    return {\n        ...state,\n        resourcesObjects: newresourcesObjects,\n        pluginsStructure: action.pluginsStructure,\n        error: null,\n        loading: false,\n        pagesLoading: false,\n        currentPlugin: '',\n    }\n}\n\nexport const addPluginSuccess = (\n    state: Object = initialState,\n    action: Object\n) => ({\n    ...state,\n    pluginsStructure: action.pluginsStructure,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [action.plugin._id]: action.plugin,\n    },\n    error: null,\n    loading: false,\n    pagesLoading: false,\n    currentPlugin: action.plugin._id,\n})\n\nexport const savePluginInRedux = (\n    state: Object = initialState,\n    action: Object\n) => {\n    if (action.id)\n        if (action.value !== state.resourcesObjects[action.id].value) {\n            state.resourcesObjects[action.id] = {\n                ...state.resourcesObjects[action.id],\n                ...omit(action, ['type']),\n            }\n            state.notSavedPlugins.push(action.id)\n        }\n}\n\nexport const markPluginAsSaved = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.notSavedPlugins = state.notSavedPlugins.filter(\n        plugin => plugin !== action.id\n    )\n}\n\nexport const savePluginNameChange = (\n    state: Object = initialState,\n    action: Object\n) => {\n    const index = state.pluginsStructure.findIndex(\n        item => item.id === action.id\n    )\n    state.pluginsStructure[index].name = action.value\n    state.notSavedPlugins.push(action.id)\n}\n\nexport const chooseBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    state.currentBoxInPlugin = action.item\n}\n\nexport const addBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    const newElement = {\n        id: newId,\n        path:\n            elementIndex <= 0\n                ? [plugin.structure[0].id]\n                : [...plugin.structure[elementIndex].path],\n        tag: action.text ? 'text' : 'div',\n        text: action.text,\n        textContent: '',\n        style: [],\n        styles: [],\n    }\n\n    plugin.structure.splice(elementIndex + 1, 0, newElement)\n}\n\nexport const deleteBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    if (action.withChildren) {\n        plugin.structure = plugin.structure.filter(\n            item => elementId !== item.id && !item.path.includes(elementId)\n        )\n    } else {\n        plugin.structure = plugin.structure.map(item => {\n            return {\n                ...item,\n                path: item.path.filter(pathItem => pathItem !== elementId),\n            }\n        })\n        plugin.structure.splice(elementIndex, 1)\n    }\n}\n\nexport const duplicateBoxInPlugin = (\n    state: Object = initialState,\n    action: Object\n) => {\n    let elementIndex = findElementIndex(state)\n    if (elementIndex < 0) {\n        return { ...state }\n    }\n    const plugin = state.resourcesObjects[state.currentPlugin].value\n\n    const elementId = plugin.structure[elementIndex].id\n\n    const sourceChildren = plugin.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `plugin_element_${plugin.currentId}`\n    plugin.currentId += 1\n    let newChildren = []\n\n    if (action.withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `plugin_element_${plugin.currentId}`\n                plugin.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n    }\n    plugin.structure.splice(\n        elementIndex + sourceChildren.length + 1,\n        0,\n        {\n            ...plugin.structure[elementIndex],\n            id: newId,\n        },\n        ...newChildren\n    )\n}\n\nexport const changeBoxPropertyInPlugin = (state: Object, action: Object) => {\n    const elementIndex = findElementIndex(state)\n    if (elementIndex < 0) return\n    state.resourcesObjects[state.currentPlugin].value.structure[elementIndex][\n        action.key\n    ] = action.value\n}\n\nexport const saveStructureInPlugin = (state: Object, action: Object) => {\n    if (state.resourcesObjects[state.currentPlugin]) {\n        state.resourcesObjects[state.currentPlugin].value.structure =\n            action.structure\n    }\n}\n","import { structure, current } from '../../utils/resourceTypeIndex'\nimport { isEqual } from 'lodash'\nimport { checkIfCapital } from '../../utils/basic'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nconst patchStructure = (state: Object, action: Object) => {\n    return diffpatcher.patch(\n        state[structure[action.resourceType]],\n        action.structurePatch\n    )\n}\n\nexport const addResourceSuccess = (state: Object, action: Object) => {\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state.resourcesObjects[action._id] = action.resource\n}\n\nexport const deleteResourceSuccess = (state: Object, action: Object) => {\n    action.deletedResources.forEach(id => delete state.resourcesObjects[id])\n    state[structure[action.resourceType]] = patchStructure(state, action)\n    state[current[action.resourceType]] = action.current || ''\n}\n\nexport const setCurrentResource = (state: Object, action: Object) => {\n    state[current[action.resourceType]] = action._id\n    if (action.resourceType === 'page') state.hoveredElementSize = {}\n}\n\nexport const saveResourcesStructureSuccess = (\n    state: Object,\n    action: Object\n) => {\n    state[structure[action.resourceType]] = action.structure\n}\n\nexport const removeResourceFromUnsaved = (state: Object, action: Object) => {\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const savePageInState = (state: Object, action: Object) => ({\n    ...state,\n    resourcesObjects: {\n        ...state.resourcesObjects,\n        [state.currentPage]: {\n            ...state.resourcesObjects[state.currentPage],\n            content: action.value,\n        },\n    },\n})\n\nexport const saveResourceDraftInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n}\n\nexport const saveResourceInState = (state: Object, action: Object) => {\n    state.resourcesObjects[action.currentResource].draft = action.draft\n    state.resourcesObjects[action.currentResource].present = action.draft\n    state.notSavedResources = state.notSavedResources.filter(\n        item => item !== action.currentResource\n    )\n}\n\nexport const addResourceVersion = (state: Object, action: Object) => {\n    const resource = state.resourcesObjects[action.currentResource]\n    if (!isEqual(resource.present, action.draft)) {\n        if (action.isNotForHistory) {\n            resource.present = action.draft\n        } else {\n            if (action.draft.structure) {\n                const connectedResources = []\n                action.draft.structure.forEach(item => {\n                    if (item.tag.length > 0) {\n                        if (checkIfCapital(item.tag.charAt(0))) {\n                            connectedResources.push({\n                                name: item.tag,\n                                type: 'plugin',\n                            })\n                        }\n                    }\n                })\n                let resource =\n                    state.pagesStructure.find(\n                        item => item.id === action.currentResource\n                    ) ||\n                    state.pluginsStructure.find(\n                        item => item.id === action.currentResource\n                    )\n                if (resource) {\n                    resource.connectedResources = connectedResources\n                }\n            }\n            if (!state.notSavedResources.includes(action.currentResource))\n                state.notSavedResources.push(action.currentResource)\n            if (resource.past.length > 100) resource.past.shift()\n            resource.past.push(diffpatcher.diff(resource.present, action.draft))\n            resource.present = action.draft\n            resource.future = []\n        }\n    }\n}\n\nexport const undoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.past.length > 0) {\n            if (\n                !isEqual(\n                    resource.present,\n                    resource.past[resource.past.length - 1]\n                )\n            ) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.past.pop()\n            resource.future.unshift(delta)\n            resource.present = diffpatcher.unpatch(resource.present, delta)\n        }\n    }\n}\n\nexport const redoResourceVersion = (state: Object, action: Object) => {\n    const currentResource = state[current[state.currentTopTab]]\n    const resource = state.resourcesObjects[currentResource]\n    if (resource) {\n        if (resource.future.length > 0) {\n            if (!isEqual(resource.present, resource.future[0])) {\n                if (!state.notSavedResources.includes(action.currentResource))\n                    state.notSavedResources.push(action.currentResource)\n            } else {\n                state.notSavedResources = state.notSavedResources.filter(\n                    item => item !== action.currentResource\n                )\n            }\n\n            const delta = resource.future.shift()\n            resource.past.push(delta)\n            resource.present = diffpatcher.patch(resource.present, delta)\n        }\n    }\n}\n","import * as plugins from './plugins'\nimport * as auth from './auth'\nimport * as images from './images'\nimport * as resources from './resources'\nimport { createReducer } from 'redux-starter-kit'\n\nexport type menuItemType = {\n    all: boolean,\n    id: string,\n    generatedFrom: string,\n    sourceItem: boolean,\n    name: string,\n    type: string,\n    path: Array<string>,\n    properties: {\n        url: string,\n        class: string,\n    },\n}\n\nexport type elementType = {\n    id: string,\n    path: Array<string>,\n    tag: string,\n    properties: {\n        name?: string,\n        topMenuBlockClasses?: Array<string>,\n        topMenuItemClasses?: Array<string>,\n        topMenuItemActiveClasses?: Array<string>,\n        popupMenuBlockClasses?: Array<string>,\n        popupMenuItemClasses?: Array<string>,\n        popupMenuItemActiveClasses?: Array<string>,\n        mode?: 'horizontal' | 'vertical',\n        trigger?: 'click',\n        id?: string,\n        class?: string,\n    },\n    propertiesString: string,\n    style?: string,\n    expanded?: boolean,\n    textMode: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    text?: boolean,\n    textContent?: string,\n    isChildren?: boolean,\n    childrenTo?: string,\n    forPlugin?: string,\n    sourcePlugin?: string,\n    menuItems?: Array<menuItemType>,\n    currentMenuItem?: string,\n    children?: Array<elementType>,\n}\nexport type resourceType = {\n    currentId: number,\n    structure: Array<elementType>,\n    currentBox?: string,\n    cursorPosition?: {\n        row: number,\n        column: number,\n    },\n    value?: string,\n}\n\nexport type pageType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    homepage: boolean,\n    hidden: boolean,\n    notPublished: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type pluginType = {\n    id: string,\n    path: Array<string>,\n    name: string,\n    url: string,\n    homepage: boolean,\n    notPublished: boolean,\n    hidden: boolean,\n    connectedResources: {\n        name: string,\n        type: string,\n    },\n}\n\nexport type websiteType = {\n    _id: string,\n    domain: string,\n    name: string,\n    customDomain?: string,\n    domainHidden?: boolean,\n    customDomainHidden?: boolean,\n    customDomainVerified?: boolean,\n    verifyCode?: string,\n    cname?: string,\n}\n\nexport type imageType = {\n    name: string,\n    label: string,\n    url: string,\n    size: number,\n}\n\nexport type initialStateType = {\n    websites: Array<websiteType>,\n    resourcesObjects: {\n        [key: string]: {\n            draft: resourceType,\n            present: resourceType,\n            future: Array<resourceType>,\n            past: Array<resourceType>,\n        },\n    },\n    pagesStructure: Array<pageType>,\n    pluginsStructure: Array<pluginType>,\n    loadedWebsite: string,\n    error: null | {},\n    loading: boolean,\n    currentPage: string,\n    currentPlugin: string,\n    domainNotOk: boolean,\n    customDomainNotOk: boolean,\n    storage: number,\n    images: Array<imageType>,\n    uploadingImage: boolean,\n    currentBoxInPlugin: string,\n    currentImage: string,\n    sizeIsChanging: boolean,\n    currentWebsite: string,\n    notSavedResources: Array<string>,\n    pageZoom: number,\n    hoveredElementId: null | string,\n    hoveredElementSize: {\n        [key: string]: {\n            children: {},\n            left: number,\n            top: number,\n            width: number,\n            height: number,\n        },\n    },\n    isRefreshing: boolean,\n    userId: null | string,\n    barSizes: { height: number, width: number, width2: number, width3: number },\n    currentTopTab: string,\n    findMode: null | string,\n    hoverMode: string,\n    fromFrame: boolean,\n    search: {},\n    tooltipsOn: boolean,\n}\n\nexport const initialState: initialStateType = {\n    websites: [],\n    resourcesObjects: {},\n    pagesStructure: [],\n    pluginsStructure: [],\n    loadedWebsite: '',\n    error: null,\n    loading: false,\n    currentPage: '',\n    currentPlugin: '',\n    domainNotOk: false,\n    customDomainNotOk: false,\n    storage: 0,\n    images: [],\n    uploadingImage: false,\n    currentBoxInPlugin: '',\n    currentImage: '',\n    sizeIsChanging: false,\n    currentWebsite: '',\n    notSavedResources: [],\n    pageZoom: 100,\n    hoveredElementId: null,\n    hoveredElementSize: {},\n    isRefreshing: false,\n    userId: null,\n    barSizes: {\n        height: 200,\n        width: 500,\n        width2: 200,\n        width3: 200,\n    },\n    currentTopTab: 'page',\n    findMode: null,\n    hoverMode: '',\n    fromFrame: false,\n    search: {},\n    tooltipsOn: true,\n    shouldRefresh: false,\n}\n\nconst saveAllWebsitesDataFromServer = (state, action) => {\n    return {\n        ...state,\n        ...action.data,\n        domainNotOk: false,\n        customDomainNotOk: false,\n        currentPage:\n            action.data.currentPage ||\n            (state.resourcesObjects[state.currentPage]\n                ? state.currentPage\n                : ''),\n        hoveredElementSize: {},\n        barSizes: { ...state.barSizes, ...action.data.barSizes },\n        currentWebsite: action.data.loadedWebsite || state.currentWebsite,\n    }\n}\n\nconst saveHoveredElementRect = (state, action) => {\n    const checkAndCreatePath = (path, index, parent) => {\n        if (index < path.length - 1) {\n            if (!parent[path[index].id]) {\n                parent[path[index].id] = {\n                    plugin: path[index].plugin,\n                    children: {},\n                }\n            }\n            checkAndCreatePath(\n                action.path,\n                index + 1,\n                parent[path[index].id].children\n            )\n        } else {\n            parent[path[index].id] = {\n                plugin: path[index].plugin,\n                children: {},\n                ...action.size,\n            }\n        }\n    }\n    if (action.path.length > 0)\n        checkAndCreatePath(action.path, 0, state.hoveredElementSize)\n}\n\nconst removeFromHoveredSizes = (state, action) => {\n    // ,\n    // removedElements,\n    const checkAndRemoveElement = parent => {\n        for (const item in parent) {\n            if (parent[item].plugin === action.currentResource) {\n                for (const child in parent[item].children) {\n                    if (action.removedElements.includes(child))\n                        delete parent[item].children[child]\n                }\n            } else {\n                checkAndRemoveElement(parent.children)\n            }\n        }\n    }\n    checkAndRemoveElement(state.hoveredElementSize)\n}\n\nconst toggleFindMode = (state, action) => {\n    if (action.value) {\n        if (state.findMode === action.value) {\n            state.findMode = null\n        } else {\n            state.findMode = action.value\n        }\n    } else {\n        state.findMode = null\n    }\n}\n\nconst reducer = createReducer(initialState, {\n    SAVE_ALL_WEBSITES_DATA_FROM_SERVER: (state, action) =>\n        saveAllWebsitesDataFromServer(state, action),\n    CHOOSE_WEBSITE: (state, action) => {\n        state.currentWebsite = action.id\n    },\n\n    ACTION_START_IMAGE_UPLOAD: (state, action) =>\n        images.actionStartImageUpload(state),\n    ACTION_FAIL_IMAGE_UPLOAD: (state, action) =>\n        images.actionFailImageUpload(state, action),\n    ACTION_SUCCESS_IMAGE_UPLOAD: (state, action) =>\n        images.actionSuccessImageUpload(state),\n    CHOOSE_IMAGE: (state, action) => images.chooseImage(state, action),\n\n    SAVE_IMAGE_AND_SIZE_IN_REDUX: (state, action) => {\n        state.images = action.images || state.images\n        state.storage = action.storage || state.storage\n    },\n\n    SIZE_IS_CHANGING: (state, action) => {\n        state.sizeIsChanging = action.isChanging\n    },\n\n    ACTION_START: (state, action) => {\n        state.error = null\n        state.pagesLoading = true\n    },\n    ACTION_FAIL: (state, action) => {\n        state.error = action.error\n        state.pagesLoading = false\n    },\n    ACTION_SUCCESS: (state, action) => {\n        state.error = null\n        state.pagesLoading = false\n    },\n\n    ADD_RESOURCE_SUCCESS: (state, action) =>\n        resources.addResourceSuccess(state, action),\n    DELETE_RESOURCE_SUCCESS: (state, action) =>\n        resources.deleteResourceSuccess(state, action),\n    SAVE_RESOURCES_STRUCTURE_SUCCESS: (state, action) =>\n        resources.saveResourcesStructureSuccess(state, action),\n    SET_CURRENT_RESOURCE: (state, action) =>\n        resources.setCurrentResource(state, action),\n    SAVE_RESOURCE_IN_STATE: (state, action) =>\n        resources.saveResourceInState(state, action),\n    REMOVE_RESOURCE_FROM_UNSAVED: (state, action) =>\n        resources.removeResourceFromUnsaved(state, action),\n    SAVE_RESOURCE_DRAFT_IN_STATE: (state, action) =>\n        resources.saveResourceDraftInState(state, action),\n    ADD_RESOURCE_VERSION: (state, action) =>\n        resources.addResourceVersion(state, action),\n    UNDO_RESOURCE_VERSION: (state, action) =>\n        resources.undoResourceVersion(state, action),\n    REDO_RESOURCE_VERSION: (state, action) =>\n        resources.redoResourceVersion(state, action),\n\n    CHOOSE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.chooseBoxInPlugin(state, action),\n    ADD_BOX_IN_PLUGIN: (state, action) => plugins.addBoxInPlugin(state, action),\n    DELETE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.deleteBoxInPlugin(state, action),\n    DUPLICATE_BOX_IN_PLUGIN: (state, action) =>\n        plugins.duplicateBoxInPlugin(state, action),\n    CHANGE_BOX_PROPERTY_IN_PLUGIN: (state, action) =>\n        plugins.changeBoxPropertyInPlugin(state, action),\n    SAVE_STRUCTURE_IN_PLUGIN: (state, action) =>\n        plugins.saveStructureInPlugin(state, action),\n\n    AUTH_START: (state, action) => auth.authStart(state),\n    AUTH_SUCCESS: (state, action) => auth.authSuccess(state, action),\n    AUTH_FAIL: (state, action) => auth.authFail(state, action),\n    AUTH_LOGOUT: (state, action) => auth.authLogout(state),\n    CHANGE_BAR_SIZE: (state, action) => auth.changeBarSize(state, action),\n    SET_CURRENT_TOP_TAB: (state, action) => {\n        state.currentTopTab = action.currentTopTab\n    },\n\n    SAVE_HOVERED_ELEMENT_RECT: (state: Object, action: Object) =>\n        saveHoveredElementRect(state, action),\n    REMOVE_FROM_HOVERED_SIZES: (state: Object, action: Object) =>\n        removeFromHoveredSizes(state, action),\n    HOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = action.id\n        state.hoverMode = action.mode\n        state.fromFrame = action.fromFrame\n    },\n    UNHOVER_ELEMENT: (state: Object, action: Object) => {\n        state.hoveredElementId = null\n        state.fromFrame = false\n    },\n    TOGGLE_FIND_MODE: (state: Object, action: Object) =>\n        toggleFindMode(state, action),\n    MARK_REFRESHING: (state: Object, action: Object) => {\n        state.isRefreshing = action.refreshing\n    },\n    SWITCH_TOOLTIPS: (state: Object) => {\n        state.tooltipsOn = !state.tooltipsOn\n    },\n    MARK_SHOULD_REFRESHING: (state: Object, action: Object) => {\n        state.shouldRefresh = action.value\n    },\n})\n\nexport default reducer\n","import { initialState } from './reducer'\n\nexport const actionStartImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: true,\n})\n\nexport const actionSuccessImageUpload = (state: Object) => ({\n    ...state,\n    error: null,\n    loading: false,\n})\n\nexport const actionFailImageUpload = (state: Object, action: Object) => ({\n    ...state,\n    error: action.error,\n    loadng: false,\n})\n\nexport const chooseImage = (state: Object = initialState, action: Object) => {\n    state.currentImage = action.image\n}\n","export const authStart = (state: Object) => {\n    state.loading = true\n    state.error = null\n}\n\nexport const authFail = (state: Object, action: Object) => {\n    state.loading = false\n    state.error = action.error\n    state.userId = null\n}\n\nexport const authLogout = (state: Object) => {\n    state.userId = null\n}\n\nexport const authSuccess = (state: Object, action: Object) => {\n    state.userId = action.data._id\n    state.error = null\n    state.loading = false\n    state.storage = action.data.storage\n    state.images = action.data.images\n    state.barSizes = { ...state.barSizes, ...action.data.barSizes }\n}\n\nexport const changeBarSize = (state: Object, action: Object) => {\n    state.barSizes[action.key] = action.value\n}\n","import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport Logout from './containers/Auth/Logout/Logout'\nimport asyncComponent from './hoc/asyncComponent'\nimport * as actions from './store/actions/index'\nimport Auth from './containers/Auth/Auth'\nimport Spinner from './components/UI/Spinner/Spinner'\n\nimport { initialState } from './store/reducer/reducer'\n\nconst asyncSiteBuilder = asyncComponent(() => {\n    return import('./containers/SiteBuilder/SiteBuilder')\n})\n\ntype Props = {\n    onTryAutoSignup: Function,\n    isAuthenticated: boolean,\n    loading: typeof initialState.loading,\n}\n\nclass App extends Component<Props> {\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        let routes = (\n            <Switch>\n                <Route path=\"/login\" component={Auth} />\n                {/* <Route path=\"/signup\" component={Auth} /> */}\n                {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                <Redirect to=\"/login\" />\n            </Switch>\n        )\n        if (this.props.isAuthenticated) {\n            routes = (\n                <div style={{ height: '100%' }}>\n                    <Switch>\n                        <Route path=\"/editor\" component={asyncSiteBuilder} />\n                        <Route path=\"/logout\" component={Logout} />\n                        {/* <Route path=\"/live\" component={LiveWebsite} /> */}\n                        <Redirect to=\"/editor\" />\n                    </Switch>\n                </div>\n            )\n        }\n        return (\n            <>\n                {routes} {this.props.loading ? <Spinner cover /> : null}\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        isAuthenticated: state.userId !== null,\n        loading: state.loading,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(App)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport axios from 'axios'\n\nimport './index.css'\nimport App from './App'\n//import * as serviceWorker from './serviceWorker';\nimport reducer from './store/reducer/reducer'\nimport { logout } from './store/actions/index'\n// $FlowFixMe\nimport 'react-sortable-tree/style.css'\n\n// const composeEnhancers =\n//     process.env.NODE_ENV === 'development'\n//         ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n//         : null || compose\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n\nif (process.env.NODE_ENV === 'development') {\n    axios.defaults.baseURL = 'http://api.websiter.dev:5000'\n} else {\n    axios.defaults.baseURL = 'https://api.websiter.dev'\n}\n\nexport const store = createStore(\n    reducer,\n    composeEnhancers\n        ? composeEnhancers(applyMiddleware(thunk))\n        : applyMiddleware(thunk)\n)\n\nconst currentAction = sessionStorage.getItem('currentAction')\nif (currentAction) {\n    // $FlowFixMe\n    axios.defaults.headers.common['currentAction'] = currentAction\n}\n\n// set axios interceptors\n// axios.interceptors.request.use(function(config) {\n//     return config\n// })\n\naxios.interceptors.response.use(\n    async function(response: { data: mixed }) {\n        // $FlowFixMe\n        if (response.headers['x-auth-token'])\n            axios.defaults.headers.common['x-auth-token'] =\n                // $FlowFixMe\n                response.headers['x-auth-token']\n        if (response.data.reload) {\n            axios.defaults.headers.common['currentAction'] =\n                response.data.currentAction\n            await sessionStorage.setItem(\n                'currentAction',\n                response.data.currentAction\n            )\n            await sessionStorage.setItem('systemRefresh', '1')\n            window.location.reload()\n            throw new Error()\n        }\n        return response\n    },\n    function(error) {\n        if (error.response) {\n            if (parseInt(error.response.status) === 412) {\n                window.location.reload()\n            }\n        }\n        return Promise.reject(error)\n    }\n)\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n)\nconst inIframe = window.self !== window.top\n\nconst root = document.getElementById('root')\nif (root !== null && !inIframe) {\n    ReactDOM.render(app, root)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports.structure = {\n    page: 'pagesStructure',\n    plugin: 'pluginsStructure',\n}\n\nmodule.exports.current = {\n    page: 'currentPage',\n    plugin: 'currentPlugin',\n}\n","import * as actions from './index'\nimport { isEqual, omit, isObject, isEmpty, cloneDeep } from 'lodash'\n\nimport type {\n    initialStateType,\n    resourceType,\n} from '../../store/reducer/reducer'\n\nconst findElementIndex = (draft: resourceType): number => {\n    if (!draft.currentBox) return -1\n    if (draft.currentBox.length < 1) return -1\n    return draft.structure.findIndex(item => item.id === draft.currentBox)\n}\n\nconst findRouteElements = (\n    draft: resourceType,\n    mode: 'plugin' | 'page'\n): Array<number> => {\n    const result = []\n    if (mode === 'plugin') {\n        result.push(0)\n    } else if (mode === 'page') {\n        draft.structure.forEach((item, index) => {\n            if (item.path.length < 2) result.push(index)\n        })\n    }\n    return result\n}\n\nexport const saveElementsStructure = (\n    structure: $PropertyType<resourceType, 'structure'>,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft || !structure) return\n    const draft = { ...resourceDraft, structure }\n\n    const isNotForHistory = isEqual(\n        resourceDraft.structure.map(item => omit(item, ['expanded'])),\n        structure.map(item => omit(item, ['expanded']))\n    )\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const chooseBox = (\n    item: string,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !item || !resourceDraft) return\n    const draft = { ...resourceDraft, currentBox: item }\n    dispatch(actions.addResourceVersion(currentResource, draft, true))\n    dispatch(unhoverBox())\n}\n\nexport const changeBoxProperty = (\n    key: string | {},\n    value: any,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    isNotForHistory?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !key || !resourceDraft) return\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n    if (key === 'tag') {\n        dispatch(\n            deleteFromHoveredSizes(currentResource, [\n                resourceDraft.structure[elementIndex].id,\n            ])\n        )\n    }\n\n    let changes = {}\n    if (isObject(key) && !(typeof key === 'string' || key instanceof String))\n        changes = key\n    else changes[key.toString()] = value\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            {\n                ...resourceDraft.structure[elementIndex],\n                ...changes,\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(\n        actions.addResourceVersion(currentResource, draft, isNotForHistory)\n    )\n}\n\nexport const saveHoveredElementRect = (path: Array<string>, size: Object) => ({\n    type: 'SAVE_HOVERED_ELEMENT_RECT',\n    path,\n    size,\n})\n\nconst deleteFromHoveredSizes = (currentResource, removedElements) => ({\n    type: 'REMOVE_FROM_HOVERED_SIZES',\n    currentResource,\n    removedElements,\n})\n\nconst expandAllParents = (\n    id: string,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const box = resourceDraft.structure.find(item => item.id === id)\n    if (!box) return\n\n    const draft = cloneDeep(resourceDraft)\n\n    box.path.forEach(item => {\n        const element = draft.structure.find(element => element.id === item)\n        if (element) element.expanded = true\n    })\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const hoverBox = (id: string, mode: string, fromFrame?: boolean) => ({\n    type: 'HOVER_ELEMENT',\n    id,\n    mode,\n    fromFrame,\n})\n\nexport const unhoverBox = () => ({\n    type: 'UNHOVER_ELEMENT',\n})\n\nexport const toggleFindMode = (value?: string) => ({\n    type: 'TOGGLE_FIND_MODE',\n    value,\n})\n\nexport const addBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    type?: 'children' | 'inside' | 'text'\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    let putInside\n    if (mode === 'plugin') {\n        if (elementIndex <= 0) {\n            elementIndex = 0\n            putInside = true\n        }\n    } else if (mode === 'page') {\n        if (elementIndex < 1) {\n            elementIndex = routeElements[routeElements.length - 1]\n        }\n        if (resourceDraft.structure[elementIndex].path.length < 2) {\n            putInside = true\n        }\n    }\n\n    const element = resourceDraft.structure[elementIndex]\n    if (element.isChildren) {\n        putInside = false\n    } else if (element.childrenTo) {\n        putInside = true\n    } else {\n        if (type === 'inside') putInside = true\n    }\n\n    if (type === 'inside') putInside = true\n\n    const newId = `element_${resourceDraft.currentId}`\n    const newCurrentId = resourceDraft.currentId + 1\n\n    const draft = {\n        ...resourceDraft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex + 1),\n            {\n                id: newId,\n                path: putInside\n                    ? [\n                          ...resourceDraft.structure[elementIndex].path,\n                          resourceDraft.structure[elementIndex].id,\n                      ]\n                    : [...resourceDraft.structure[elementIndex].path],\n                tag:\n                    type === 'text'\n                        ? 'text'\n                        : type === 'children'\n                        ? 'New children'\n                        : 'div',\n                textMode: 'text',\n                text: type === 'text',\n                textContent: '',\n                isChildren: type === 'children',\n                properties: {},\n                propertiesString: '',\n            },\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n        currentId: newCurrentId,\n        currentBox: newId,\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const deleteBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    withChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    let draft = {}\n    const removedElements = [elementId]\n    if (withChildren) {\n        draft = {\n            ...resourceDraft,\n            structure: resourceDraft.structure.filter(item => {\n                const notRemove =\n                    elementId !== item.id && !item.path.includes(elementId)\n                if (!notRemove) removedElements.push(item.id)\n                return notRemove\n            }),\n        }\n    } else {\n        const newPageStructure = resourceDraft.structure.map(item => ({\n            ...item,\n            path: item.path.filter(pathItem => pathItem !== elementId),\n        }))\n\n        draft = {\n            ...resourceDraft,\n            structure: [\n                ...newPageStructure.slice(0, elementIndex),\n                ...newPageStructure.slice(elementIndex + 1),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n    dispatch(deleteFromHoveredSizes(currentResource, removedElements))\n}\n\nexport const duplicateBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    mode: 'page' | 'plugin',\n    withChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0 || routeElements.includes(elementIndex)) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const sourceChildren = resourceDraft.structure.filter(item =>\n        item.path.includes(elementId)\n    )\n\n    const newId = `element_${resourceDraft.currentId}`\n    let draft = { currentId: resourceDraft.currentId + 1 }\n\n    if (withChildren) {\n        const idMatch = { [elementId]: newId }\n\n        const newChildren = sourceChildren\n            .map(item => {\n                let newItemId = `element_${draft.currentId}`\n                draft.currentId += 1\n                idMatch[item.id] = newItemId\n                return {\n                    ...item,\n                    id: newItemId,\n                }\n            })\n            .map(item => {\n                return {\n                    ...item,\n                    // $FlowFixMe\n                    path: item.path.map(pathItem => {\n                        if (idMatch[pathItem]) {\n                            return idMatch[pathItem]\n                        } else {\n                            return pathItem\n                        }\n                    }),\n                }\n            })\n\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...newChildren,\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    } else {\n        draft = {\n            ...resourceDraft,\n            ...draft,\n            structure: [\n                ...resourceDraft.structure.slice(\n                    0,\n                    elementIndex + sourceChildren.length\n                ),\n                {\n                    ...resourceDraft.structure[elementIndex],\n                    id: newId,\n                },\n                ...resourceDraft.structure.slice(\n                    elementIndex + sourceChildren.length\n                ),\n            ],\n        }\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const splitText = (\n    start: number,\n    end: number,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let draft = { currentId: resourceDraft.currentId }\n\n    let newId\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n    if (textContent1.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent1,\n            id: newId,\n        })\n    }\n\n    if (textContent2.length > 0 || textContent1.length === 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n\nexport const textToSpan = (\n    start: number,\n    end: number,\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType\n) => (dispatch: Object) => {\n    const elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    let newId\n    let draft = { currentId: resourceDraft.currentId }\n\n    const text = resourceDraft.structure[elementIndex].textContent\n    if (!text) return\n    const textContent0 = text.substr(0, start)\n    const textContent1 = text.substr(start, end - start)\n    const textContent2 = text.substr(end)\n\n    console.log(textContent0)\n    console.log(textContent1)\n    console.log(textContent2)\n\n    const newElements = [\n        {\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent0,\n        },\n    ]\n\n    const spanId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        id: spanId,\n        path: [...resourceDraft.structure[elementIndex].path],\n        tag: 'span',\n        text: false,\n        textContent: '',\n        style: '',\n        properties: {},\n    })\n\n    newId = `element_${draft.currentId}`\n    draft.currentId = draft.currentId + 1\n    newElements.push({\n        ...resourceDraft.structure[elementIndex],\n        path: [...resourceDraft.structure[elementIndex].path, spanId],\n        textContent: textContent1,\n        id: newId,\n    })\n\n    if (textContent2.length > 0) {\n        newId = `element_${draft.currentId}`\n        draft.currentId = draft.currentId + 1\n        newElements.push({\n            ...resourceDraft.structure[elementIndex],\n            textContent: textContent2,\n            id: newId,\n        })\n    }\n\n    draft = {\n        ...resourceDraft,\n        ...draft,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...newElements,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n// Menu\nexport const chooseMenuItem = (\n    id: string,\n    resourceId: string,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n    if (!resource) return\n    dispatch(\n        changeBoxProperty('currentMenuItem', id, resourceId, resource, true)\n    )\n}\n\nexport const changeMenuItemProperty = (\n    key: string,\n    value: string,\n    resourceId: string,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    const resource = resourceId\n        ? resourcesObjects[resourceId]\n            ? isEmpty(resourcesObjects[resourceId].present)\n                ? resourcesObjects[resourceId].draft\n                : resourcesObjects[resourceId].present\n            : null\n        : null\n\n    if (!resource) return\n    const elementIndex = findElementIndex(resource)\n    if (elementIndex < 0) return\n    if (!resource.structure[elementIndex].menuItems) return\n    const newMenuItems = resource.structure[elementIndex].menuItems.map(\n        item => {\n            if (item.id === resource.structure[elementIndex].currentMenuItem) {\n                return { ...item, [key]: value }\n            } else {\n                return item\n            }\n        }\n    )\n    if (!isEqual(newMenuItems, resource.structure[elementIndex].menuItems)) {\n        dispatch(\n            changeBoxProperty('menuItems', newMenuItems, resourceId, resource)\n        )\n    }\n}\nexport const markRefreshing = (refreshing: boolean) => ({\n    type: 'MARK_REFRESHING',\n    refreshing,\n})\n\nexport const markShouldRefreshing = (value: boolean) => ({\n    type: 'MARK_SHOULD_REFRESHING',\n    value,\n})\n\nexport const mergeBoxToPlugin = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    websiteId: $PropertyType<initialStateType, 'loadedWebsite'>,\n    mode: 'page' | 'plugin',\n    onlyChildren?: boolean\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    const routeElements = findRouteElements(resourceDraft, mode)\n    let elementIndex = findElementIndex(resourceDraft)\n    if (\n        elementIndex <= 0 ||\n        (!onlyChildren && routeElements.includes(elementIndex))\n    )\n        return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n    let currentId = 1\n    const newResourcesIds = ['element_0']\n    const oldResourcesIds = ['element_0']\n\n    const resourceDataStructure = resourceDraft.structure\n        .filter(\n            item =>\n                (!onlyChildren && item.id === elementId) ||\n                item.path.includes(elementId)\n        )\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = { ...item, id: `element_${currentId}` }\n            if (item.id === elementId) {\n                newItem.path = ['element_0']\n            } else {\n                newItem.path = [\n                    'element_0',\n                    ...newItem.path.slice(\n                        newItem.path.indexOf(elementId) + (onlyChildren ? 1 : 0)\n                    ),\n                ]\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: item.path.map(\n                id => newResourcesIds[oldResourcesIds.indexOf(id)]\n            ),\n        }))\n    if (resourceDataStructure.length === 0) return\n    const resourceData = {\n        structure: [\n            {\n                id: 'element_0',\n                path: [],\n                tag: 'Main element',\n                properties: {},\n                propertiesString: '',\n            },\n            ...resourceDataStructure,\n        ],\n        currentId,\n    }\n\n    dispatch(\n        actions.addResource(\n            websiteId,\n            '',\n            'plugin',\n            false,\n            resourceData,\n            data => {\n                if (data.newResourceName) {\n                    const draft = {\n                        ...resourceDraft,\n                        structure: [\n                            ...resourceDraft.structure.slice(\n                                0,\n                                elementIndex + (onlyChildren ? 1 : 0)\n                            ),\n                            {\n                                ...resourceDraft.structure[elementIndex],\n                                path: [\n                                    ...resourceDraft.structure[elementIndex]\n                                        .path,\n                                    ...(onlyChildren\n                                        ? [\n                                              resourceDraft.structure[\n                                                  elementIndex\n                                              ].id,\n                                          ]\n                                        : []),\n                                ],\n                                tag: data.newResourceName,\n                                text: false,\n                                textContent: '',\n                                properties: {},\n                                id: oldResourcesIds[1],\n                            },\n                            ...resourceDraft.structure.slice(\n                                elementIndex + resourceDataStructure.length\n                            ),\n                        ],\n                    }\n                    dispatch(actions.addResourceVersion(currentResource, draft))\n                }\n            }\n        )\n    )\n}\n\nexport const dissolvePluginToBox = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourceDraft: resourceType,\n    pluginsStructure: $PropertyType<initialStateType, 'pluginsStructure'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    if (!currentResource || !resourceDraft) return\n    let elementIndex = findElementIndex(resourceDraft)\n    if (elementIndex < 0) return\n\n    const elementId = resourceDraft.structure[elementIndex].id\n\n    const plugin = pluginsStructure.find(\n        item => item.name === resourceDraft.structure[elementIndex].tag\n    )\n    if (!plugin) return\n\n    const pluginResource = isEmpty(resourcesObjects[plugin.id].present)\n        ? resourcesObjects[plugin.id].draft\n        : resourcesObjects[plugin.id].present\n\n    let currentId = resourceDraft.currentId\n    const newResourcesIds = []\n    const oldResourcesIds = []\n\n    const pluginDataStructure = pluginResource.structure\n        .filter(item => item.path.length > 0)\n        .map(item => {\n            oldResourcesIds.push(item.id)\n            const newItem = {\n                ...item,\n                id: `element_${currentId}`,\n                path: [...item.path.slice(1)],\n            }\n            newResourcesIds.push(newItem.id)\n            currentId++\n            return newItem\n        })\n        .map(item => ({\n            ...item,\n            path: [\n                ...resourceDraft.structure[elementIndex].path,\n                ...item.path.map(\n                    id => newResourcesIds[oldResourcesIds.indexOf(id)]\n                ),\n            ],\n        }))\n\n    const draft = {\n        ...resourceDraft,\n        currentId,\n        structure: [\n            ...resourceDraft.structure.slice(0, elementIndex),\n            ...pluginDataStructure,\n            ...resourceDraft.structure.slice(elementIndex + 1),\n        ],\n    }\n    dispatch(actions.addResourceVersion(currentResource, draft))\n}\n/////////////////////OLDOLDOLDOLDOLD\n// export const changeElementStyleValue = (\n//     index: number,\n//     key: string,\n//     value: any,\n//     elementId: string\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_STYLE_VALUE,\n//     index,\n//     key,\n//     value,\n//     elementId,\n// })\n\n// export const addElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.ADD_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const deleteElementStyleValue = (index: number, elementId: string) => ({\n//     type: actionTypes.DELETE_ELEMENT_STYLE_VALUE,\n//     index,\n//     elementId,\n// })\n\n// export const changeElementPropertyValue = (\n//     value: any,\n//     key: string,\n//     isSection?: boolean,\n//     isNotForHistory?: boolean\n// ) => ({\n//     type: actionTypes.CHANGE_ELEMENT_PROPERTY_VALUE,\n//     value,\n//     key,\n//     isSection,\n//     isNotForHistory,\n// })\n\n// export const builderZoomOut = () => ({ type: actionTypes.BUILDER_ZOOM_OUT })\n// export const builderZoomIn = () => ({ type: actionTypes.BUILDER_ZOOM_IN })\n// export const builderZoomReset = () => ({ type: actionTypes.BUILDER_ZOOM_RESET })\n\n// export const saveToHistory = () => ({ type: actionTypes.SAVE_TO_HISTORY })\n\n// export const loadCurrentPageToBuilder = (\n//     _id: ?string,\n//     resourcesObjects?: Object,\n//     pageObject?: Object\n// ) => ({\n//     type: actionTypes.LOAD_CURRENT_PAGE_TO_BUILDER,\n//     _id,\n//     resourcesObjects,\n//     pageObject,\n// })\n","import axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport jwt from 'jsonwebtoken'\n\nimport * as actions from './index'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nconst cookies = new Cookies()\n\nexport const authStart = () => ({\n    type: 'AUTH_START',\n})\n\nexport const authSuccess = (data: Object) => ({\n    type: 'AUTH_SUCCESS',\n    data,\n})\n\nexport const authFail = (error: string) => ({\n    type: 'AUTH_FAIL',\n    error,\n})\n\nexport const deleteStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const deleteSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const deleteFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const deleteUser = () => (dispatch: Object) => {\n    dispatch(deleteStart())\n    return axios\n        .delete('/api/users')\n        .then(response => {\n            dispatch(logout())\n            dispatch(deleteSuccess())\n        })\n        .catch(err => {\n            dispatch(deleteFail(err.message))\n        })\n}\n\nexport const logout = (all?: boolean) => {\n    if (!all) {\n        cookies.remove('auth_token')\n        axios.defaults.headers.common['x-auth-token'] = null\n        return {\n            type: 'AUTH_LOGOUT',\n        }\n    } else {\n        return axios\n            .post('/api/auth/logoutall')\n            .then(response => {\n                cookies.remove('auth_token')\n                axios.defaults.headers.common['x-auth-token'] = null\n                return {\n                    type: 'AUTH_LOGOUT',\n                }\n            })\n            .catch(err => {})\n    }\n}\n\n// export const auth = (email: string, password: string, isSignup?: boolean) => (\n//     dispatch: Object\n// ) => {\n//     dispatch(authStart())\n//     const authData = {\n//         email,\n//         password,\n//     }\n\n//     let url = '/api/users'\n//     if (!isSignup) {\n//         url = '/api/auth'\n//     }\n//     axios.defaults.headers.post['Content-Type'] = 'application/json'\n//     axios.defaults.headers.put['Content-Type'] = 'application/json'\n//     axios.defaults.headers.delete['Content-Type'] = 'application/json'\n//     axios.defaults.headers.common.Accept = 'application/json'\n\n//     return axios\n//         .post(url, JSON.stringify(authData))\n//         .then(response => {\n//             localStorage.setItem('token', response.data.token)\n//             localStorage.setItem('userId', response.data._id)\n//             localStorage.setItem('currentAction', response.data.currentAction)\n//             axios.defaults.headers.common['x-auth-token'] = response.data.token\n//             dispatch(authSuccess(response.data))\n//             dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n//         })\n//         .catch(err => {\n//             dispatch(authFail(err.message))\n//         })\n// }\n\nexport const authCheckState = () => (dispatch: Object) => {\n    sessionStorage.setItem('systemRefresh', '0')\n    const token = cookies.get('auth_token')\n    const rememberMe = cookies.get('rememberme')\n    if (rememberMe) {\n        cookies.remove('rememberme', {\n            path: '/',\n        })\n        if (rememberMe === 'false') {\n            cookies.remove('auth_token', {\n                path: '/',\n            })\n        }\n    }\n    const userId = jwt.decode(token)\n    axios.defaults.headers.post['Content-Type'] = 'application/json'\n    axios.defaults.headers.put['Content-Type'] = 'application/json'\n    axios.defaults.headers.delete['Content-Type'] = 'application/json'\n    axios.defaults.headers.common.Accept = 'application/json'\n\n    if (!token || !userId) {\n        dispatch(logout())\n    } else {\n        axios.defaults.headers.common['x-auth-token'] = token\n        dispatch(authStart())\n        return axios\n            .get('/api/users')\n            .then(response => {\n                dispatch(\n                    authSuccess({\n                        ...response.data,\n                        _id: userId._id,\n                    })\n                )\n                dispatch(actions.saveAllWebsitesDataFromServer(response.data))\n            })\n            .catch(err => {\n                dispatch(authFail(err.message))\n            })\n    }\n}\n\nexport const changeBarSizeDo = (key: string, value: number) => ({\n    type: 'CHANGE_BAR_SIZE',\n    key,\n    value,\n})\n\nexport const savePropertiesOnLeave = (\n    barSizes: $PropertyType<initialStateType, 'barSizes'>,\n    tooltipsOn: $PropertyType<initialStateType, 'tooltipsOn'>,\n    currentPage: $PropertyType<initialStateType, 'currentPage'>,\n    currentPlugin: $PropertyType<initialStateType, 'currentPlugin'>\n) => (dispatch: Object) => {\n    return axios\n        .put('/api/users', { barSizes, tooltipsOn, currentPage, currentPlugin })\n        .then(response => {})\n        .catch(err => {})\n}\n\nexport const changeBarSize = (\n    barSizes: $PropertyType<initialStateType, 'barSizes'>,\n    initiator?: { key: string, value: number }\n) => (dispatch: Object) => {\n    const width = window.innerWidth,\n        height = window.innerHeight\n    let value, dif, dif2, value2, value3\n\n    if (!initiator) {\n        if (barSizes.height > height - 50) {\n            dispatch(actions.changeBarSizeDo('height', height - 50))\n        }\n        if (barSizes.width > width - 100) {\n            dispatch(actions.changeBarSizeDo('width', width - 100))\n        }\n        if (barSizes.width + barSizes.width2 > width - 50) {\n            dispatch(\n                actions.changeBarSizeDo('width2', width - barSizes.width - 50)\n            )\n        }\n    } else {\n        switch (initiator.key) {\n            case 'height':\n                value = initiator.value\n                if (value < 50) value = 50\n                if (value > height - 50) value = height - 50\n                dispatch(actions.changeBarSizeDo('height', value))\n                break\n            case 'width':\n                value = initiator.value\n                if (value < 50) value = 50\n                dif = value - barSizes.width\n                value2 = barSizes.width2 - dif\n                value3 = barSizes.width3\n                if (value2 < 50) {\n                    dif2 = value2 - 50\n                    value2 = 50\n                    value3 = barSizes.width3 + dif2\n                    if (value3 < 50) value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value = width - 150\n                    value2 = 50\n                    value3 = 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width2':\n                value2 = initiator.value\n                value = barSizes.width\n                dif = value2 - 50\n                if (dif < 0) {\n                    value = value + dif\n                    if (value < 50) value = 50\n                    dif2 = value - barSizes.width\n                    value3 = barSizes.width3 - dif2\n                    value2 = 50\n                }\n                dif = value + value2 - barSizes.width - barSizes.width2\n                value3 = barSizes.width3 - dif\n                if (value3 < 50) value3 = 50\n                if (value + value2 + value3 + 50 > width) {\n                    value2 = width - value - 100\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            case 'width3':\n                value3 = initiator.value\n                value = barSizes.width\n                value2 = barSizes.width2\n                dif = value3 - 50\n                if (dif < 0) {\n                    value2 = value2 + dif\n                    dif2 = value2 - 50\n                    if (dif2 < 0) {\n                        value = value + dif2\n                        if (value < 50) value = 50\n                        value2 = 50\n                    }\n                    value3 = 50\n                }\n                if (value + value2 + value3 + 50 > width) {\n                    value3 = width - value - value2 - 50\n                }\n                dispatch(actions.changeBarSizeDo('width', value))\n                dispatch(actions.changeBarSizeDo('width2', value2))\n                dispatch(actions.changeBarSizeDo('width3', value3))\n                break\n            default:\n                break\n        }\n    }\n}\n\nexport const switchTooltips = () => ({\n    type: 'SWITCH_TOOLTIPS',\n})\n","import axios from 'axios'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nexport const saveAllWebsitesDataFromServer = (data: Object) => ({\n    type: 'SAVE_ALL_WEBSITES_DATA_FROM_SERVER',\n    data,\n})\n\nexport const addWebsite = (\n    duplicate?: boolean,\n    currentWebsite?: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/websites',\n            JSON.stringify(\n                duplicate && currentWebsite\n                    ? {\n                          duplicate,\n                          currentWebsite,\n                      }\n                    : {}\n            )\n        )\n        .then(response => {\n            dispatch(saveAllWebsitesDataFromServer({ ...response.data }))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const loadWebsite = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>,\n    notSavedResources: $PropertyType<initialStateType, 'notSavedResources'>\n) => (dispatch: Object) => {\n    if (_id) {\n        if (notSavedResources.length > 0) {\n            if (\n                !window.confirm(\n                    `Are you sure you want to load another website? All unsaved resources in the current website will be lost. There are ${\n                        notSavedResources.length\n                    } notsaved resources.`\n                )\n            )\n                return\n        }\n        dispatch(actionStart())\n        return axios\n            .get(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const chooseWebsite = (\n    id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => ({\n    type: 'CHOOSE_WEBSITE',\n    id,\n})\n\nexport const verifyCustomDomain = (id: string) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(`/api/websites/verify/${id}`)\n        .then(response => {\n            dispatch(saveAllWebsitesDataFromServer(response.data))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const changeWebsiteProperty = (\n    key: string,\n    value: any,\n    id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    if (id) {\n        dispatch(actionStart())\n        return axios\n            .put(\n                `/api/websites/${id}`,\n                JSON.stringify({\n                    [key]: value,\n                })\n            )\n            .then(response => {\n                dispatch(saveAllWebsitesDataFromServer(response.data))\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const deleteWebsite = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>\n) => (dispatch: Object) => {\n    if (_id) {\n        if (\n            !window.confirm(\n                'Are you sure you want to delete this website? All data in this website will be deleted including pages and plugins. However, your media files will not be removed.'\n            )\n        )\n            return\n        dispatch(actionStart())\n        return axios\n            .delete(`/api/websites/${_id}`)\n            .then(response => {\n                dispatch(\n                    saveAllWebsitesDataFromServer({\n                        ...response.data,\n                    })\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nexport const setSizeIsChanging = (isChanging: boolean) => ({\n    type: 'SIZE_IS_CHANGING',\n    isChanging,\n})\n\n// export const loadGlobalsToStore = (\n//     pagesStructure: pagesStructureType,\n//     resourcesObjects: Object,\n//     currentPage: string\n// ) => ({\n//     type: actionTypes.LOAD_GLOBALS_TO_STORE,\n//     pagesStructure,\n//     resourcesObjects,\n//     currentPage,\n// })\n\nexport const actionStart = () => ({\n    type: 'ACTION_START',\n})\n\nexport const actionSuccess = () => ({\n    type: 'ACTION_SUCCESS',\n})\n\nexport const actionFail = (error: string) => ({\n    type: 'ACTION_FAIL',\n    error,\n})\n\nexport const setCurrentTopTab = (currentTopTab: string) => ({\n    type: 'SET_CURRENT_TOP_TAB',\n    currentTopTab,\n})\n","import axios from 'axios'\n\nimport type { initialStateType } from '../../store/reducer/reducer'\n\nconst actionStartImageUpload = () => ({\n    type: 'ACTION_START_IMAGE_UPLOAD',\n})\n\nconst actionSuccessImageUpload = () => ({\n    type: 'ACTION_SUCCESS_IMAGE_UPLOAD',\n})\n\nconst actionFailImageUpload = (error: string) => ({\n    type: 'ACTION_FAIL_IMAGE_UPLOAD',\n    error,\n})\n\nconst getSignedRequest = (\n    file,\n    images: $PropertyType<initialStateType, 'images'>,\n    storage: $PropertyType<initialStateType, 'storage'>,\n    userId: $PropertyType<initialStateType, 'userId'>\n) => (dispatch: Object) => {\n    if (!userId) return\n    let name = userId + '/' + file.name.replace(/([^a-zA-Z0-9\\\\.\\\\-])/g, '_')\n\n    let namePrefix = ''\n    let k = 0\n\n    const checkName = () =>\n        images.findIndex(image => name + namePrefix === image.name)\n    while (checkName() >= 0) {\n        k++\n        namePrefix = '_' + k\n    }\n\n    const fileDetails = {\n        file,\n        name: name + namePrefix,\n        label: file.name + namePrefix,\n        storage,\n        images,\n    }\n\n    return axios\n        .get(\n            `/api/sign-s3?file-name=${name}${namePrefix}&file-type=${\n                file.type\n            }&file-size=${file.size}`\n        )\n        .then(response => {\n            dispatch(\n                uploadFile(\n                    fileDetails,\n                    response.data.signedRequest,\n                    response.data.url\n                )\n            )\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            if (err.response.status === 400) alert(err.response.data)\n        })\n}\n\nconst uploadFile = (fileDetails, signedRequest, url) => (dispatch: Object) => {\n    return axios\n        .put(signedRequest, fileDetails.file, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        })\n        .then(response => {\n            dispatch(saveImageUrlAndSize(fileDetails, url))\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n        })\n}\n\nconst saveImageUrlAndSize = (fileDetails, url) => (dispatch: Object) => {\n    const fileSize = parseFloat(fileDetails.file.size)\n    const newStorage = fileDetails.storage + fileSize\n    const newImages = [\n        {\n            url,\n            name: fileDetails.name,\n            size: fileSize,\n            label: fileDetails.label,\n        },\n        ...fileDetails.images,\n    ]\n\n    return axios\n        .put('/api/users', { storage: newStorage, images: newImages })\n        .then(response => {\n            dispatch(saveImageUrlAndSizeInRedux(newStorage, newImages))\n            dispatch(actionSuccessImageUpload())\n        })\n        .catch(err => {\n            dispatch(actionFailImageUpload(err.message))\n            //delete from aws?\n        })\n}\n\nconst saveImageUrlAndSizeInRedux = (storage, images) => ({\n    type: 'SAVE_IMAGE_AND_SIZE_IN_REDUX',\n    storage,\n    images,\n})\n\nexport const deleteImage = (url: string) => (dispatch: Object) => {\n    if (\n        window.confirm(\n            'Are you sure you want to delete this image? The image will be unavailable after the deletion and will not be visible in all elements and on all pages of your websites.'\n        )\n    ) {\n        dispatch(actionStartImageUpload())\n        return axios\n            .post(\n                `/api/awsImage/deleteimage`,\n                JSON.stringify({\n                    url,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(\n                        response.data.storage,\n                        response.data.images\n                    )\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const renameImage = (url: string) => (dispatch: Object) => {\n    const label = window.prompt('Type a new name for the image.')\n    if (label !== null) {\n        dispatch(actionStartImageUpload())\n\n        return axios\n            .post(\n                `/api/awsImage/renameimage`,\n                JSON.stringify({\n                    url,\n                    label,\n                })\n            )\n            .then(response => {\n                dispatch(\n                    saveImageUrlAndSizeInRedux(false, response.data.images)\n                )\n                dispatch(actionSuccessImageUpload())\n            })\n            .catch(err => {\n                dispatch(actionFailImageUpload(err.message))\n            })\n    } else {\n        return\n    }\n}\n\nexport const chooseImage = (image: string) => ({\n    type: 'CHOOSE_IMAGE',\n    image,\n})\n\nexport const imageUpload = (\n    files: Array<{ type: string, size: number, name: string }>,\n    images: $PropertyType<initialStateType, 'images'>,\n    storage: $PropertyType<initialStateType, 'storage'>,\n    userId: $PropertyType<initialStateType, 'userId'>\n) => (dispatch: Object) => {\n    const file = files[0]\n    if (file == null) {\n        return alert('No file selected.')\n    }\n    if (file.type.split('/')[0] !== 'image') {\n        return alert('File is not an image.')\n    }\n    dispatch(actionStartImageUpload())\n    dispatch(getSignedRequest(file, images, storage, userId))\n}\n","import axios from 'axios'\nimport { isEqual } from 'lodash'\n\nimport { actionStart, actionFail, actionSuccess } from './website'\n\nimport type {\n    initialStateType,\n    resourceType,\n} from '../../store/reducer/reducer'\n\n// $FlowFixMe\nconst diffpatcher = require('jsondiffpatch/dist/jsondiffpatch.umd.js').create({\n    objectHash: obj => obj.id,\n})\n\nexport const addResource = (\n    websiteId: $PropertyType<initialStateType, 'loadedWebsite'>,\n    currentResourceId: $PropertyType<initialStateType, 'currentPage'>,\n    resourceType: 'page' | 'plugin',\n    duplicate?: boolean,\n    resourceData?: resourceType,\n    callback?: Function\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .post(\n            '/api/resources',\n            JSON.stringify({\n                websiteId,\n                currentResourceId,\n                duplicate,\n                type: resourceType,\n                resourceData,\n            })\n        )\n        .then(response => {\n            dispatch(addResourceSuccess(response.data, resourceType))\n            if (callback) callback(response.data)\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst addResourceSuccess = (data: Object, resourceType: 'page' | 'plugin') => ({\n    type: 'ADD_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const deleteResource = (\n    currentResourceId: $PropertyType<initialStateType, 'currentPage'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    if (!currentResourceId) return\n    if (\n        !window.confirm(`Are you sure you want to delete this ${resourceType}?`)\n    )\n        return\n    dispatch(actionStart())\n    return axios\n        .delete(`/api/resources/${currentResourceId}`, {\n            params: { type: resourceType },\n        })\n        .then(response => {\n            dispatch(deleteResourceSuccess(response.data, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst deleteResourceSuccess = (\n    data: Object,\n    resourceType: 'page' | 'plugin'\n) => ({\n    type: 'DELETE_RESOURCE_SUCCESS',\n    ...data,\n    resourceType,\n})\n\nexport const saveResourcesStructure = (\n    _id: $PropertyType<initialStateType, 'loadedWebsite'>,\n    newStructure: $PropertyType<initialStateType, 'pagesStructure'>,\n    oldStructure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    const structurePatch = diffpatcher.diff(oldStructure, newStructure)\n    if (!structurePatch) dispatch(actionSuccess())\n    else {\n        return axios\n            .put(\n                `/api/websites/structure/${_id}`,\n                JSON.stringify({ structurePatch, type: resourceType })\n            )\n            .then(response => {\n                dispatch(\n                    saveResourcesStructureSuccess(newStructure, resourceType)\n                )\n                dispatch(actionSuccess())\n            })\n            .catch(err => {\n                dispatch(actionFail(err.message))\n            })\n    }\n}\n\nconst saveResourcesStructureSuccess = (\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => ({\n    type: 'SAVE_RESOURCES_STRUCTURE_SUCCESS',\n    structure,\n    resourceType,\n})\n\nexport const chooseResource = (\n    _id: string,\n    resourceType: 'plugin' | 'page'\n) => ({\n    type: 'SET_CURRENT_RESOURCE',\n    _id,\n    resourceType,\n})\n\nexport const saveResource = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>,\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin'\n) => (dispatch: Object) => {\n    const present = resourcesObjects[currentResource].present\n    const draft = resourcesObjects[currentResource].draft\n    if (isEqual(present, {})) return\n    dispatch(actionStart())\n    const resourcePatch = diffpatcher.diff(draft, present)\n\n    return axios\n        .put(\n            `/api/resources/${currentResource}`,\n            JSON.stringify({ resourcePatch, structure, type: resourceType })\n        )\n        .then(response => {\n            dispatch(saveResourceInState(currentResource, present))\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nconst saveResourceInState = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType\n) => ({\n    type: 'SAVE_RESOURCE_IN_STATE',\n    currentResource,\n    draft,\n})\n\nconst saveResourceDraftInState = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType\n) => ({\n    type: 'SAVE_RESOURCE_DRAFT_IN_STATE',\n    currentResource,\n    draft,\n})\n\nexport const publishRevertResource = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    structure: $PropertyType<initialStateType, 'pagesStructure'>,\n    resourceType: 'page' | 'plugin',\n    revert: ?boolean,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    dispatch(actionStart())\n    return axios\n        .put(\n            `/api/resources/publish/${currentResource}`,\n            JSON.stringify({ structure, type: resourceType, revert })\n        )\n        .then(response => {\n            dispatch(saveResourcesStructureSuccess(structure, resourceType))\n            if (response.data.draft) {\n                dispatch(\n                    saveResourceDraftInState(\n                        currentResource,\n                        response.data.draft\n                    )\n                )\n                dispatch(\n                    addResourceVersion(currentResource, response.data.draft)\n                )\n                dispatch(removeResourceFromUnsaved(currentResource))\n            }\n            dispatch(actionSuccess())\n        })\n        .catch(err => {\n            dispatch(actionFail(err.message))\n        })\n}\n\nexport const revertResourceToSaved = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    resourcesObjects: $PropertyType<initialStateType, 'resourcesObjects'>\n) => (dispatch: Object) => {\n    dispatch(\n        addResourceVersion(\n            currentResource,\n            resourcesObjects[currentResource].draft\n        )\n    )\n    dispatch(removeResourceFromUnsaved(currentResource))\n}\n\nconst removeResourceFromUnsaved = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>\n) => ({\n    type: 'REMOVE_RESOURCE_FROM_UNSAVED',\n    currentResource,\n})\n\nexport const addResourceVersion = (\n    currentResource: $PropertyType<initialStateType, 'currentPage'>,\n    draft: resourceType,\n    isNotForHistory?: boolean\n) => ({\n    type: 'ADD_RESOURCE_VERSION',\n    currentResource,\n    draft,\n    isNotForHistory,\n})\n\nexport const undoResourceVersion = () => ({\n    type: 'UNDO_RESOURCE_VERSION',\n})\n\nexport const redoResourceVersion = () => ({\n    type: 'REDO_RESOURCE_VERSION',\n})\n\nexport const chooseBoxInPlugin = (item: string, ctrl?: boolean) => ({\n    type: 'CHOOSE_BOX_IN_PLUGIN',\n    item,\n})\n\nexport const addBoxInPlugin = (text: boolean) => ({\n    type: 'ADD_BOX_IN_PLUGIN',\n    text,\n})\n\nexport const deleteBoxInPlugin = (withChildren: boolean) => ({\n    type: 'DELETE_BOX_IN_PLUGIN',\n    withChildren,\n})\nexport const duplicateBoxInPlugin = (withChildren: boolean) => ({\n    type: 'DUPLICATE_BOX_IN_PLUGIN',\n    withChildren,\n})\n\nexport const changeBoxPropertyInPlugin = (key: string, value: any) => ({\n    type: 'CHANGE_BOX_PROPERTY_IN_PLUGIN',\n    key,\n    value,\n})\n\nexport const saveStructureInPlugin = (\n    structure: $PropertyType<initialStateType, 'pagesStructure'>\n) => ({\n    type: 'SAVE_STRUCTURE_IN_PLUGIN',\n    structure,\n})\n","export {\n    chooseBox,\n    // addElementStyleValue,\n    // deleteElementStyleValue,\n    // changeElementStyleValue,\n    // changeElementPropertyValue,\n    addBox,\n    deleteBox,\n    duplicateBox,\n    // builderZoomOut,\n    // builderZoomIn,\n    // builderZoomReset,\n    // saveToHistory,\n    saveElementsStructure,\n    changeBoxProperty,\n    hoverBox,\n    unhoverBox,\n    saveHoveredElementRect,\n    splitText,\n    textToSpan,\n    chooseMenuItem,\n    changeMenuItemProperty,\n    markRefreshing,\n    mergeBoxToPlugin,\n    dissolvePluginToBox,\n    toggleFindMode,\n    markShouldRefreshing,\n} from './builder'\n\nexport {\n    logout,\n    authCheckState,\n    deleteUser,\n    changeBarSize,\n    changeBarSizeDo,\n    savePropertiesOnLeave,\n    switchTooltips,\n} from './auth'\n\nexport {\n    addWebsite,\n    loadWebsite,\n    deleteWebsite,\n    setSizeIsChanging,\n    chooseWebsite,\n    changeWebsiteProperty,\n    saveAllWebsitesDataFromServer,\n    setCurrentTopTab,\n    verifyCustomDomain,\n} from './website'\n\nexport { imageUpload, deleteImage, renameImage, chooseImage } from './images'\n\nexport {\n    saveResourcesStructure,\n    addResource,\n    deleteResource,\n    chooseResource,\n    chooseBoxInPlugin,\n    addBoxInPlugin,\n    duplicateBoxInPlugin,\n    deleteBoxInPlugin,\n    changeBoxPropertyInPlugin,\n    saveStructureInPlugin,\n    saveResource,\n    publishRevertResource,\n    revertResourceToSaved,\n    addResourceVersion,\n    undoResourceVersion,\n    redoResourceVersion,\n} from './resources'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Div\":\"Checkbox_Div__2PqSf\",\"Input\":\"Checkbox_Input__1KbTF\",\"StyleControls\":\"Checkbox_StyleControls__cb7Ky\",\"Inline\":\"Checkbox_Inline__3XkB8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__2Sex0\",\"load3\":\"Spinner_load3__jNmcI\",\"Cover\":\"Spinner_Cover__3iRbu\"};","import React from 'react';\nimport type { Node } from 'react'\nimport classes from './LoginButton.module.css';\n\ntype Props = {\n    clicked?: Function,\n    disabled?: boolean,\n    btnType?: 'Success' | 'Danger',\n    children?: Node,\n    datatestid?: string\n}\n\nconst LoginButton = (props: Props) => (\n    <button\n        data-testid={props.datatestid || \"LoginButton\"}\n        disabled={props.disabled}\n        className={[classes.Button, classes[props.btnType]].join(' ')}\n        onClick={props.clicked}>\n        {props.children}\n    </button>\n);\n\nexport default LoginButton;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"LoginButton_Button__2dj44\",\"Success\":\"LoginButton_Success__21MoZ\",\"Danger\":\"LoginButton_Danger__2V7Lr\"};","import { isEmpty } from 'lodash'\n\nexport const checkIfCapital = (char: string) => {\n    if (char === char.toUpperCase() && char !== char.toLowerCase()) {\n        return true\n    }\n}\n\nexport const getCurrentResourceValue = (id: string, resourcesObjects: {}) =>\n    id\n        ? resourcesObjects[id]\n            ? isEmpty(resourcesObjects[id].present)\n                ? resourcesObjects[id].draft\n                : resourcesObjects[id].present\n            : null\n        : null\n\nfunction _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {}\n        var ownKeys = Object.keys(source)\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(\n                        source,\n                        sym\n                    ).enumerable\n                })\n            )\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key])\n        })\n    }\n    return target\n}\n\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true,\n        })\n    } else {\n        obj[key] = value\n    }\n    return obj\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n    if (source == null) return {}\n    var target = _objectWithoutPropertiesLoose(source, excluded)\n    var key, i\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i]\n            if (excluded.indexOf(key) >= 0) continue\n            if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                continue\n            target[key] = source[key]\n        }\n    }\n    return target\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {}\n    var target = {}\n    var sourceKeys = Object.keys(source)\n    var key, i\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i]\n        if (excluded.indexOf(key) >= 0) continue\n        target[key] = source[key]\n    }\n    return target\n}\n\nexport function buildTree(items) {\n    var buildItem = function buildItem(item) {\n        var path = item.path,\n            data = _objectWithoutProperties(item, ['path'])\n\n        return _objectSpread({}, data, {\n            children: items\n                .filter(function(child) {\n                    return child.path[child.path.length - 1] === item.id\n                })\n                .map(function(child) {\n                    return buildItem(child)\n                }),\n        })\n    }\n\n    var tree = items\n        .filter(function(item) {\n            return item.path.length === 0\n        })\n        .map(function(item) {\n            return buildItem(item)\n        })\n    return tree\n}\n\nexport const getInheritedPropertyName = (value: string) => {\n    const length = value.length\n    if (length > 2) {\n        if (value.charAt(0) === '$' && value.charAt(length - 1) === '$') {\n            return value.substr(1, length - 2)\n        }\n    }\n    return false\n}\n"],"sourceRoot":""}