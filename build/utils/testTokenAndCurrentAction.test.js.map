{"version":3,"sources":["../../src/utils/testTokenAndCurrentAction.test.js"],"names":["testTokenAndCurrentAction","server","method","url","users","websites","pages","currentWebsite","currentPage","tokens","get","set","res0","res1","res2","res3","post","put","status"],"mappings":"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","sourcesContent":["import request from 'supertest'\nimport { populateTestDB } from './testPopulateDBandReadStructure'\n\nexport const testTokenAndCurrentAction = async (server: {}, method, url) => {\n    const tokens = await populateTestDB({\n        users: 2,\n        websites: 3,\n        pages: 15,\n        currentWebsite: 0,\n        currentPage: 0,\n    })\n\n    let res0, res1, res2, res3\n\n    switch (method) {\n        case 'get': {\n            res0 = await request(server)\n                .get(`/api/${url}`)\n                .set('X-Auth-Token', 'fail_token')\n                .set('Current-Action', '10')\n\n            res1 = await request(server)\n                .get(`/api/${url}`)\n                .set('Current-Action', '10')\n\n            res2 = await request(server)\n                .get(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n\n            res3 = await request(server)\n                .get(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n                .set('Current-Action', '1')\n            break\n        }\n\n        case 'post': {\n            res0 = await request(server)\n                .post(`/api/${url}`)\n                .set('X-Auth-Token', 'fail_token')\n                .set('Current-Action', '10')\n\n            res1 = await request(server)\n                .post(`/api/${url}`)\n                .set('Current-Action', '10')\n\n            res2 = await request(server)\n                .post(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n\n            res3 = await request(server)\n                .post(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n                .set('Current-Action', '1')\n            break\n        }\n\n        case 'put': {\n            res0 = await request(server)\n                .put(`/api/${url}`)\n                .set('X-Auth-Token', 'fail_token')\n                .set('Current-Action', '10')\n\n            res1 = await request(server)\n                .put(`/api/${url}`)\n                .set('Current-Action', '10')\n\n            res2 = await request(server)\n                .put(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n\n            res3 = await request(server)\n                .put(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n                .set('Current-Action', '1')\n            break\n        }\n\n        case 'delete': {\n            res0 = await request(server)\n                .delete(`/api/${url}`)\n                .set('X-Auth-Token', 'fail_token')\n                .set('Current-Action', '10')\n\n            res1 = await request(server)\n                .delete(`/api/${url}`)\n                .set('Current-Action', '10')\n\n            res2 = await request(server)\n                .delete(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n\n            res3 = await request(server)\n                .delete(`/api/${url}`)\n                .set('X-Auth-Token', tokens[1])\n                .set('Current-Action', '1')\n            break\n        }\n    }\n\n    return (\n        res0.status === 400 &&\n        res1.status === 401 &&\n        res2.status === 412 &&\n        res3.status === 412\n    )\n}\n"],"file":"testTokenAndCurrentAction.test.js"}